!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},n={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(e,t){for(var r,n=[],i=(o.test(t)?e+"/"+t:t).split("/"),a=0,u=i.length;a<u;a++)".."===(r=i[a])?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t,n){var i,o={id:t,exports:{},hot:h&&h.createHot(t)};return r[t]=o,n(o.exports,(i=t,function(t){var r=a(u(i),t);return e.require(r,i)}),o),o.exports},l=function(e){var t=n[e];return t&&e!==t?l(t):e},c=function(e,n){null==n&&(n="/");var o=l(e);if(i.call(r,o))return r[o].exports;if(i.call(t,o))return s(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};c.alias=function(e,t){n[t]=e};var f=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/;c.register=c.define=function(e,o){if(e&&"object"==typeof e)for(var a in e)i.call(e,a)&&c.register(a,e[a]);else t[e]=o,delete r[e],function(e){if(f.test(e)){var t=e.replace(f,"");i.call(n,t)&&n[t].replace(f,"")!==t+"/index"||(n[t]=e)}if(v.test(e)){var r=e.replace(v,"");i.call(n,r)||(n[r]=e)}}(e)},c.list=function(){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};var h=e._hmr&&new e._hmr(function(e,t){return l(a(u(e),t))},c,t,r);c._cache=r,c.hmr=h&&h.wrap,c.brunch=!0,e.require=c}}(),function(){"undefined"==typeof window||window;var e=function(e,t,r){var n={},i=function(t,r){try{return e(r+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==r.indexOf("node_modules")){var o=r.split("/"),a=o.lastIndexOf("node_modules"),u=o.slice(0,a).join("/");return i(t,u)}}return n};return function(o){if(o in t&&(o=t[o]),o){if("."!==o[0]&&r){var a=i(o,r);if(a!==n)return a}return e(o)}}};require.register("curvature/base/Bag.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var n=r("./Bindable"),i=r("./Mixin"),o=r("../mixin/EventTargetMixin");function a(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(t);if(r){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=Symbol("Mapped"),f=Symbol("Has"),v=Symbol("Add"),h=Symbol("Remove"),d=Symbol("Delete"),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(y,i.Mixin["with"](o.EventTargetMixin));var t,r,l,p=s(y);function y(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(e=p.call(this)).changeCallback=t,e.content=new Map,e.current=0,e.length=0,e.list=n.Bindable.makeBindable([]),e.meta=Symbol("meta"),e.type=void 0,e}return t=y,(r=[{key:"has",value:function(e){return this[c]?this[c].has(e):this[f](e)}},{key:f,value:function(e){return this.content.has(e)}},{key:"add",value:function(e){return this[c]?this[c].add(e):this[v](e)}},{key:v,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(e=n.Bindable.make(e),!this.content.has(e)){var t=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(t)){var r,i=(r=this.current++,Number(r));this.content.set(e,i),this.list[i]=e,this.changeCallback&&this.changeCallback(e,this.meta,y.ITEM_ADDED,i);var o=new CustomEvent("added",{detail:{item:e,id:i}});return this.dispatchEvent(o),this.length=this.size,i}}}},{key:"remove",value:function(e){return this[c]?this[c].remove(e):this[h](e)}},{key:h,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(e=n.Bindable.make(e),!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var t=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(t)){var r=this.content.get(e);delete this.list[r],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,y.ITEM_REMOVED,r);var i=new CustomEvent("removed",{detail:{item:e,id:r}});return this.dispatchEvent(i),this.length=this.size,e}}},{key:"delete",value:function(e){if(this[c])return this[c].delete(e);this[d](e)}},{key:d,value:function(e){this.remove(e)}},{key:"map",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=new WeakMap,n=new y;return n[c]=this,this.addEventListener("added",function(i){var o=i.detail.item;if(t(o)&&!r.has(o)){var a=e(o);r.set(o,a),n[v](a)}}),this.addEventListener("removed",function(e){var t=e.detail.item;if(r.has(t)){var i=r.get(t);r.delete(t),n[h](i)}}),n}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}])&&a(t.prototype,r),l&&a(t,l),Object.defineProperty(t,"prototype",{writable:!1}),y}();t.Bag=p,Object.defineProperty(p,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(p,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t,n,i){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}).apply(null,arguments)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function l(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var f=Symbol("ref"),v=Symbol("original"),h=Symbol("deck"),d=Symbol("binding"),p=Symbol("subBinding"),y=Symbol("bindingAll"),b=Symbol("isBindable"),m=Symbol("wrapping"),g=Symbol("Names"),w=Symbol("executing"),S=Symbol("stack"),_=(Symbol("object"),Symbol("wrapped")),E=Symbol("unwrapped"),j=Symbol("getProto"),P=Symbol("onGet"),T=Symbol("onAllGet"),k=Symbol("bindChain"),O=Symbol("Descriptors"),x=Symbol("Before"),A=Symbol("After"),R=Symbol("NoGetters"),B=Object.getPrototypeOf(Int8Array),C=Set.prototype[Symbol.iterator],D=Map.prototype[Symbol.iterator],M=globalThis,N=[M.Node,M.File,M.Map,M.Set,M.WeakMap,M.WeakSet,M.ArrayBuffer,M.ResizeObserver,M.MutationObserver,M.PerformanceObserver,M.IntersectionObserver,M.IDBCursor,M.IDBCursorWithValue,M.IDBDatabase,M.IDBFactory,M.IDBIndex,M.IDBKeyRange,M.IDBObjectStore,M.IDBOpenDBRequest,M.IDBRequest,M.IDBTransaction,M.IDBVersionChangeEvent,M.Event,M.CustomEvent,M.FileSystemFileHandle].filter(function(e){return"function"==typeof e}),L=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,o,a;return r=t,a=[{key:"isBindable",value:function(e){return!(!e||!e[b])&&e[b]===t}},{key:"onDeck",value:function(e,t){return e[h][t]||!1}},{key:"ref",value:function(e){return e[f]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,r){r=r||new Map;var n={};if(e instanceof B||e instanceof ArrayBuffer){var i=e.slice(0);return r.set(e,i),i}var o=Object.keys(e);for(var a in o){var s=o[a];if("___"!==s.substring(0,3)){var l=r.get(e[s]);if(l)n[s]=l;else if(e[s]!==e){if(e[s]&&"object"===u(e[s])){var c=e[s];t.isBindable(e[s])&&(c=e[s][v]),n[s]=this.shuck(c,r)}else n[s]=e[s];r.set(e[s],n[s])}else r.set(e[s],n),n[s]=n}}return t.isBindable(e)&&(delete n.bindTo,delete n.isBound),n}},{key:"make",value:function(r){var o=this;if(!r||!["function","object"].includes(u(r)))return r;if(r[f])return r[f];if(r[b])return r;if(Object.isSealed(r)||Object.isFrozen(r)||!Object.isExtensible(r)||N.filter(function(e){return r instanceof e}).length)return r;Object.defineProperty(r,b,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(r,f,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(r,v,{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(r,h,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,d,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,p,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(r,y,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,w,{enumerable:!1,writable:!0}),Object.defineProperty(r,m,{enumerable:!1,writable:!0}),Object.defineProperty(r,S,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,x,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,A,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,_,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(r,E,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,O,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)});Object.defineProperty(r,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=!1;if(Array.isArray(n)){var l=n.map(function(t){return e(t,i,a)});return function(){return l.forEach(function(e){return e()})}}if(n instanceof Function&&(a=i||{},i=n,s=!0),a.delay>=0&&(i=o.wrapDelayCallback(i,a.delay)),a.throttle>=0&&(i=o.wrapThrottleCallback(i,a.throttle)),a.wait>=0&&(i=o.wrapWaitCallback(i,a.wait)),a.frame&&(i=o.wrapFrameCallback(i,a.frame)),a.idle&&(i=o.wrapIdleCallback(i)),s){var c=r[y].length;if(r[y].push(i),!("now"in a)||a.now)for(var f in r)i(r[f],f,r,!1);return function(){delete r[y][c]}}if(r[d][n]||(r[d][n]=new Set),a.children){var v=i;i=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=n[0],s=r[p].get(v);if(s&&(r[p].delete(v),s()),"object"===u(o)){var l=t.make(o);t.isBindable(l)&&r[p].set(v,l.bindTo(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v.apply(void 0,n.concat(t))},Object.assign({},a,{children:!1}))),v.apply(void 0,n)}else v.apply(void 0,n)}}r[d][n].add(i),"now"in a&&!a.now||i(r[n],n,r,!1);var h=function(){var e=r[p].get(i);e&&(r[p].delete(i),e()),r[d][n]&&r[d][n].has(i)&&r[d][n].delete(i)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove(function(){return h}),h}});Object.defineProperty(r,k,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var n=e.split("."),i=n.shift(),a=n.slice(0),u=[];return u.push(r.bindTo(i,function(e,r,n,i){var s=a.join(".");0!==a.length?(void 0===e&&(e=n[r]=o.make({})),u=u.concat(e[k](s,t))):t(e,r,n,i)})),function(){return u.forEach(function(e){return e()})}}}),Object.defineProperty(r,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=r[x].length;r[x].push(e);var n=!1;return function(){n||(n=!0,delete r[x][t])}}}),Object.defineProperty(r,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=r[A].length;r[A].push(e);var n=!1;return function(){n||(n=!0,delete r[A][t])}}});Object.defineProperty(r,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in r[y])if(r[y][e])return!0;for(var t in r[d]){var n,o=i(r[d][t]);try{for(o.s();!(n=o.n()).done;)if(n.value)return!0}catch(e){o.e(e)}finally{o.f()}}return!1}});var a=function(e){r[e]&&r[e]instanceof Object&&!r[e]instanceof Promise&&(N.filter(function(t){return r[e]instanceof t}).length||!Object.isExtensible(r[e])||Object.isSealed(r[e])||(r[e]=t.make(r[e])))};for(var s in r)a(s);var l=r[O],c=r[_],M=r[S],L={get:function(n,o){if(c.has(o))return c.get(o);if(o===f||o===v||"apply"===o||"isBound"===o||"bindTo"===o||"__proto__"===o||"constructor"===o)return r[o];var a;if(l.has(o)?a=l.get(o):(a=Object.getOwnPropertyDescriptor(r,o),l.set(o,a)),a&&!a.configurable&&!a.writable)return r[o];if(T in r)return r[T](o);if(P in r&&!(o in r))return r[P](o);if(a&&!a.configurable&&!a.writable)return c.set(o,r[o]),r[o];if("function"==typeof r[o]){if(g in r[o])return r[o];Object.defineProperty(r[E],o,{configurable:!1,enumerable:!1,writable:!0,value:r[o]});var u=Object.getPrototypeOf(r)[o]===r[o],s="function"==typeof Promise&&r instanceof Promise||"function"==typeof Map&&r instanceof Map||"function"==typeof Set&&r instanceof Set||"function"==typeof D&&r.prototype===D||"function"==typeof C&&r.prototype===C||"function"==typeof C&&r.prototype===C||"function"==typeof WeakMap&&r instanceof WeakMap||"function"==typeof WeakSet&&r instanceof WeakSet||"function"==typeof Date&&r instanceof Date||"function"==typeof B&&r instanceof B||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"function"==typeof EventTarget&&r instanceof EventTarget||"function"==typeof ResizeObserver&&r instanceof ResizeObserver||"function"==typeof MutationObserver&&r instanceof MutationObserver||"function"==typeof PerformanceObserver&&r instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&r instanceof IntersectionObserver||"function"==typeof r[Symbol.iterator]&&"next"===o?r:r[f],h=function(){r[w]=o,M.unshift(o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var l,c,f=i(r[x]);try{for(f.s();!(l=f.n()).done;)(0,l.value)(r,o,M,r,n)}catch(e){f.e(e)}finally{f.f()}if(new.target)c=e(r[E][o],n);else{var v=r[E][o];c=u?v.apply(s||r,n):v.apply(void 0,n)}var h,d=i(r[A]);try{for(d.s();!(h=d.n()).done;)(0,h.value)(r,o,M,r,n)}catch(e){d.e(e)}finally{d.f()}return r[w]=null,M.shift(),c};(h[g]=h[g]||new WeakMap).set(r,o),h[T]=function(e){var t=h[g].get(r);return r[t][e]};var d=t.make(h);return c.set(o,d),d}return r[o]},set:function(e,n,o){if(c.has(n)&&c.delete(n),n===v)return!0;var a=r[h];if(n in a&&a[n]===o)return!0;if(n.slice&&"___"===n.slice(-3))return!0;if(e[n]===o||"number"==typeof o&&isNaN(a[n])&&isNaN(o))return!0;for(var u in o&&o instanceof Object&&(N.filter(function(e){return r instanceof e}).length||!Object.isExtensible(r)||Object.isSealed(r)||(r[R],o=t.make(o))),a[n]=o,r[y])r[y][u]&&r[y][u](o,n,e,!1);var s=!1;if(n in r[d]){var l,f=i(r[d][n]);try{for(f.s();!(l=f.n()).done;)!1===(0,l.value)(o,n,e,!1,e[n])&&(s=!0)}catch(e){f.e(e)}finally{f.f()}}if(delete a[n],!s){var p=Object.getOwnPropertyDescriptor(e,n);e instanceof File&&"lastModifiedDate"==n||p&&!p.writable||e[n]!==o||(e[n]=o)}var b=Reflect.set(e,n,o);if(Array.isArray(e)&&r[d].length)for(var m in r[d].length)(0,r[d].length[m])(e.length,"length",e,!1,e.length);return b},construct:function(i,o){var a="constructor";for(var u in i[x])i[x][u](i,a,r[S],void 0,o);var s=t.make(e(i[v],n(o)));for(var l in i[A])i[A][l](i,a,r[S],s,o);return s},getPrototypeOf:function(e){return j in r?r[j]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){var n=r[h];if(void 0!==n[t])return!0;if(!(t in e))return!0;if(l.has(t)){var o=l.get(t);if(o&&!o.configurable)return!1;l.delete(t)}for(var a in n[t]=null,c.has(t)&&c.delete(t),r[y])r[y][a](void 0,t,e,!0,e[t]);if(t in r[d]){var u,s=i(r[d][t]);try{for(s.s();!(u=s.n()).done;)(0,u.value)(void 0,t,e,!0,e[t])}catch(e){s.e(e)}finally{s.f()}}return delete n[t],delete e[t],!0}};return r[R]&&delete L.get,Object.defineProperty(r,f,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(r,L)}),r[f]}},{key:"clearBindings",value:function(e){var t;(t=function(e){return Object.keys(e).map(function(t){return delete e[t]})},function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.map(t)})(e[_],e[d],e[y],e[A],e[x])}},{key:"resolve",value:function(e,t){for(var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.split("."),o=i[0];i.length;){if(n&&1===i.length)return[this.make(e),i.shift(),o];!(!(r=i.shift())in e)&&e[r]&&e[r]instanceof Object||(e[r]={}),e=this.make(e[r])}return[this.make(e),r,o]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return setTimeout(function(){return e.apply(void 0,n)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var r=this;return this.throttles.set(e,!1),function(){r.throttles.get(e,!0)||(e.apply(void 0,arguments),r.throttles.set(e,!0),setTimeout(function(){r.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){var r=this;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a;(a=r.waiters.get(e))&&(r.waiters.delete(e),clearTimeout(a)),a=setTimeout(function(){return e.apply(void 0,i)},t),r.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];requestAnimationFrame(function(){return e.apply(void 0,r)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,r)})}}}],(o=null)&&s(r.prototype,o),a&&s(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Bindable=L,l(L,"waiters",new WeakMap),l(L,"throttles",new WeakMap),Object.defineProperty(L,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:P}),Object.defineProperty(L,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:R}),Object.defineProperty(L,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:j}),Object.defineProperty(L,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:T})}()}),require.register("curvature/base/Cache.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function r(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"store",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",i=0;r&&(i=1e3*r+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(n)||this.buckets.set(n,new Map);var o=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:r,bucket:n}});document.dispatchEvent(o)&&this.buckets.get(n).set(e,{value:t,expiration:i})}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard",n=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:r}});if(!document.dispatchEvent(n))return t;if(this.buckets&&this.buckets.has(r)&&this.buckets.get(r).has(e)){var i=this.buckets.get(r).get(e);if(0===i.expiration||i.expiration>(new Date).getTime())return this.buckets.get(r).get(e).value}return t}}],(n=null)&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Cache=n}()}),require.register("curvature/base/Config.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var i={},o=r;try{i=o("/Config").Config||{}}catch(e){!0===globalThis.devMode&&console.error(e)}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n in t){var i=t[n];for(var o in"string"==typeof i&&(i=JSON.parse(i)),i){var a=i[o];return this.configs[o]=a}}return this}}],(r=null)&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Config=a,Object.defineProperty(a,"configs",{configurable:!1,enumerable:!1,writable:!1,value:i})}()}),require.register("curvature/base/Dom.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function r(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"mapTags",value:function(e,t,r,n,i){var o=[],a=!0;n&&(a=!1);var u=!1,s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,r){if(!a){if(e!==n)return NodeFilter.FILTER_SKIP;a=!0}return i&&e===i&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;s.nextNode();)o.push(r(s.currentNode,s));return o}},{key:"dispatchEvent",value:function(t,r){t.dispatchEvent(r),e.mapTags(t,!1,function(e){e.dispatchEvent(r)})}}],(n=null)&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Dom=n}()}),require.register("curvature/base/Mixin.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=r("./Bindable");function n(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,void 0,"symbol"===i(a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),n)}var o,a}function p(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var y=Symbol("constructor"),b=(Symbol("mixinList"),function(){function t(){h(this,t)}return p(t,null,[{key:"from",value:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var a=l(u);function u(){var r;h(this,u);for(var s=arguments.length,l=new Array(s),v=0;v<s;v++)l[v]=arguments[v];var d,p=e.constructor?r=a.call.apply(a,[this].concat(l)):null,y=o(n);try{for(y.s();!(d=y.n()).done;){var b=d.value;switch(b[t.Constructor]&&b[t.Constructor].apply(f(r)),i(b)){case"function":t.mixClass(b,u);break;case"object":t.mixObject(b,f(r))}}}catch(e){y.e(e)}finally{y.f()}return c(r,p)}return p(u)}()}},{key:"make",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.pop();return t.to.apply(t,[i].concat(r))}},{key:"to",value:function(e){for(var t={},r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];n.map(function(r){switch(i(r)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(r));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(r.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)})}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.from.apply(this,[function(){return p(function e(){h(this,e)})}()].concat(t))}},{key:"mixObject",value:function(e,t){var r,n=o(Object.getOwnPropertyNames(e));try{for(n.s();!(r=n.n()).done;){var i=r.value;"function"!=typeof e[i]?t[i]=e[i]:t[i]=e[i].bind(t)}}catch(e){n.e(e)}finally{n.f()}var a,u=o(Object.getOwnPropertySymbols(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;"function"!=typeof e[s]?t[s]=e[s]:t[s]=e[s].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var r,n=o(Object.getOwnPropertyNames(e.prototype));try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!["name","prototype","length"].includes(i)){var a=Object.getOwnPropertyDescriptor(t,i);a&&!a.writable||("function"==typeof e[i]?t.prototype[i]=e.prototype[i].bind(t.prototype):t.prototype[i]=e.prototype[i])}}}catch(e){n.e(e)}finally{n.f()}var u,s=o(Object.getOwnPropertySymbols(e.prototype));try{for(s.s();!(u=s.n()).done;){var l=u.value;"function"==typeof e[l]?t.prototype[l]=e.prototype[l].bind(t.prototype):t.prototype[l]=e.prototype[l]}}catch(e){s.e(e)}finally{s.f()}var c,f=o(Object.getOwnPropertyNames(e));try{var v=function(){var r=c.value;if(["name","prototype","length"].includes(r))return"continue";var n=Object.getOwnPropertyDescriptor(t,r);if(n&&!n.writable)return"continue";if("function"!=typeof e[r])return t[r]=e[r],"continue";var i=t[r]||!1,o=e[r].bind(t);t[r]=function(){return i&&i.apply(void 0,arguments),o.apply(void 0,arguments)}};for(f.s();!(c=f.n()).done;)v()}catch(e){f.e(e)}finally{f.f()}var h,d=o(Object.getOwnPropertySymbols(e));try{var p=function(){var r=h.value;if("function"!=typeof e[r])return t.prototype[r]=e[r],"continue";var n=t[r]||!1,i=e[r].bind(t);t[r]=function(){return n&&n.apply(void 0,arguments),i.apply(void 0,arguments)}};for(d.s();!(h=d.n()).done;)p()}catch(e){d.e(e)}finally{d.f()}}},{key:"mix",value:function(t){for(var r={},i={},a=e.Bindable.makeBindable(t),u=function(e){var t,u=Object.getOwnPropertyNames(e.prototype),s=/^(before|after)__(.+)/,l=o(Object.getOwnPropertyNames(e));try{var c=function(){var i=t.value,o=i.match(s);if(o){switch(o[1]){case"before":a.___before(function(t,r,a,u,s){if(r===o[2])return e[i].bind(u).apply(void 0,n(s))});break;case"after":a.___after(function(t,r,a,u,s){if(r===o[2])return e[i].bind(u).apply(void 0,n(s))})}return"continue"}return r[i]?"continue":"function"!=typeof e[i]?"continue":void(r[i]=e[i])};for(l.s();!(t=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}var f,v=o(u);try{var h=function(){var t=f.value,r=t.match(s);if(r){switch(r[1]){case"before":a.___before(function(i,o,a,u,s){if(o===r[2])return e.prototype[t].bind(u).apply(void 0,n(s))});break;case"after":a.___after(function(i,o,a,u,s){if(o===r[2])return e.prototype[t].bind(u).apply(void 0,n(s))})}return"continue"}return i[t]?"continue":"function"!=typeof e.prototype[t]?"continue":void(i[t]=e.prototype[t])};for(v.s();!(f=v.n()).done;)h()}catch(e){v.e(e)}finally{v.f()}},s=this;s&&s.prototype;s=Object.getPrototypeOf(s))u(s);for(var l in r)t[l]=r[l].bind(t);var c=function(e){t.prototype[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i[e].apply(this,r)}};for(var f in i)c(f);return a}}]),t}());t.Mixin=b,b.Constructor=y}()}),require.register("curvature/base/Router.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e,n=r("./View"),i=(r("./Cache"),r("./Config")),o=r("./Routes");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,void 0,"symbol"===c(o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),n)}var i,o}var v=Symbol("NotFound"),h=Symbol("Internal");globalThis.CustomEvent=null!==(e=globalThis.CustomEvent)&&void 0!==e?e:globalThis.Event;var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,s;return t=e,s=[{key:"wait",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(r,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.listener=e||this.listener,this.routes=r||e.routes,Object.assign(this.query,this.queryOver({}));var n=function(r){r.preventDefault(),r.state&&"routedId"in r.state?(r.state.routedId<=t.routeCount?(t.history.splice(r.state.routedId),t.routeCount=r.state.routedId):r.state.routedId>t.routeCount&&(t.history.push(r.state.prev),t.routeCount=r.state.routedId),t.state=r.state):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"!==location.origin?t.match(location.pathname,e):t.match(t.nextPath,e)};window.addEventListener("cvUrlChanged",n),window.addEventListener("popstate",n);var i="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(i+=location.hash);var o={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};"null"!==location.origin&&history.replaceState(o,null,location.pathname),this.go(!1!==i?i:"/")}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=i.Config.get("title");r&&(document.title=r);var n={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};-1===t?this.match(e,this.listener,!0):"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState(n,null,e):location.pathname!==e&&history.pushState(n,null,e),(!t||t<0)&&(!1===t&&(this.path=null),t||("#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.prevPath=e}},{key:"processRoute",value:function(e,t,r){return"function"==typeof e[t]?e[t].prototype instanceof n.View?new e[t](r):e[t](r):e[t]}},{key:"handleError",value:function(e,t,r,n,i,o,a,u){console.error(e),"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:o,prev:a,view:i,routes:t,selected:r}}));var s=globalThis.devMode?"Unexpected error: "+String(e):"Unexpected error.";t[h]&&(n[h]=e,s=this.processRoute(t,h,n)),this.update(i,o,s,t,r,n,u)}},{key:"match",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null,s=!1;if(!0===n&&(s=n),n&&"object"===c(n)&&(s=n.forceRefresh,i=n.event),"undefined"==typeof document||this.path!==e||s){var l="http://example.com";"undefined"!=typeof document&&(l="null"!==location.origin?location.origin:l,this.queryString=location.search);var f=new URL(e,l);e=this.path=f.pathname,"undefined"==typeof document&&(this.queryString=f.search);var h=this.prevPath,d=t&&t.args?t.args.content:null,p=this.routes||t&&t.routes||o.Routes.dump(),y=new URLSearchParams(this.queryString);for(var b in i&&i.request&&(this.request=i.request),Object.keys(this.query))delete this.query[b];var m,g=u(y);try{for(g.s();!(m=g.n()).done;){var w=a(m.value,2),S=w[0],_=w[1];this.query[S]=_}}catch(e){g.e(e)}finally{g.f()}var E={},j=!1,P="";for(var T in"/"===e.substring(0,1)&&(e=e.substring(1)),e=e.split("/"),this.query)E[T]=this.query[T];e:for(var k in p){var O=k.split("/");if(!(O.length<e.length&&"*"!==O[O.length-1])){for(var x in O)if("%"==O[x].substr(0,1)){var A=null,R=/^%(\w+)\??/.exec(O[x]);if(R&&R[1]&&(A=R[1]),!A)throw new Error("".concat(O[x],' is not a valid argument segment in route "').concat(k,'"'));if(e[x])E[A]=e[x];else{if("?"!=O[x].substr(O[x].length-1,1))continue e;E[A]=""}}else if("*"!==O[x]&&e[x]!==O[x])continue e;j=k,P=p[k],"*"===O[O.length-1]&&(E.pathparts=e.slice(O.length-1));break}}var B=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:e,prev:h,root:t,selected:j,routes:p}});if("undefined"==typeof document||document.dispatchEvent(B)){if(!s&&t&&d&&P instanceof Object&&d instanceof P&&!(P instanceof Promise)&&d.update(E))return t.args.content=d,!0;j in p||(p[j]=p[v]);try{return!1===(P=this.processRoute(p,j,E))&&(P=this.processRoute(p,v,E)),P instanceof Promise||(P=Promise.resolve(P)),"undefined"==typeof document?P:P.then(function(n){r.update(t,e,n,p,j,E,s)}).catch(function(n){r.handleError(n,p,j,E,t,e,h,s)})}catch(r){this.handleError(r,p,j,E,t,e,h,s)}}}}},{key:"update",value:function(e,t,r,i,o,a,u){if(e){var s=this.prevPath,l=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:t,prev:s,view:e,routes:i,selected:o}});!1!==r&&(e.args.content instanceof n.View&&(e.args.content.pause(!0),e.args.content.remove()),document.dispatchEvent(l)&&(e.args.content=r),r instanceof n.View&&(r.pause(!1),r.update(a,u)));var c=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:t,prev:s,view:e,routes:i,selected:o}});document.dispatchEvent(c)}}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},n={},i=u(new URLSearchParams(location.search));try{for(i.s();!(e=i.n()).done;){var o=e.value;n[o[0]]=o[1]}}catch(e){i.e(e)}finally{i.f()}return delete(r=Object.assign(r,n,t)).api,r}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=e;for(var i in t||(n=this.queryOver(e)),n)""!==n[i]&&r.push(i+"="+encodeURIComponent(n[i]));return r.join("&")}},{key:"setQuery",value:function(e,t,r){var n=this.queryOver();n[e]=t,void 0===t&&delete n[e];var i=this.queryToString(n,!0);this.go(location.pathname+(i?"?"+i:"?"),r)}}],(r=null)&&f(t.prototype,r),s&&f(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Router=d,Object.defineProperty(d,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(d,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(d,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(d,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(d,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(d,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:h}),Object.defineProperty(d,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:v})}()}),require.register("curvature/base/Routes.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var i={},o=r,a=!1,u=function(){if(!a){try{Object.assign(i,o("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}a=!0}},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"get",value:function(e){return u(),this.routes[e]}},{key:"dump",value:function(){return u(),this.routes}}],(r=null)&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Routes=s,Object.defineProperty(s,"routes",{configurable:!1,enumerable:!1,writable:!1,value:i})}()}),require.register("curvature/base/RuleSet.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;r("./Dom");var e=r("./Tag"),n=r("./View");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,void 0,"symbol"===i(a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),n)}var o,a}var c=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,i,u;return r=t,u=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in this.globalRules)for(var n in this.globalRules[r]){var i,o=this.globalRules[r][n],u=this.wrap(e,o,t),s=a(e.querySelectorAll(r));try{for(s.s();!(i=s.n()).done;){u(i.value)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=function(t,r){return function(){return r.removeEventListener(t,n),e.apply()}}(t,r);r.addEventListener(t,n)}},{key:"wrap",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=r;return(r instanceof n.View||r&&r.prototype&&r.prototype instanceof n.View)&&(o=function(){return r}),function(t){if(void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!t.___cvApplied___.has(r)){var a,u;i&&(a=u=i,i.viewList&&(u=i.viewList.parent));var s,l=new e.Tag(t,u,null,void 0,a),c=l.element.parentNode,f=l.element.nextSibling,v=o(l);if(!1!==v&&t.___cvApplied___.add(r),v instanceof HTMLElement&&(v=new e.Tag(v)),v instanceof e.Tag){if(!v.element.contains(l.element)){for(;l.element.firstChild;)v.element.appendChild(l.element.firstChild);l.remove()}f?c.insertBefore(v.element,f):c.appendChild(v.element)}v&&v.prototype&&v.prototype instanceof n.View&&(v=new v({},i)),v instanceof n.View&&(i&&(i.cleanup.push((s=v,function(){s.remove()})),i.cleanup.push(i.args.bindTo(function(e,t,r){r[t]=e,v.args[t]=e})),i.cleanup.push(v.args.bindTo(function(e,t,r,n){r[t]=e,i.args[t]=e}))),l.clear(),v.render(l.element))}}}}],(i=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in t.apply(e,r),this.rules)for(var i in this.rules[n]){var o,u=this.rules[n][i],s=t.wrap(e,u,r),l=a(e.querySelectorAll(n));try{for(l.s();!(o=l.n()).done;){s(o.value)}}catch(e){l.e(e)}finally{l.f()}}}},{key:"purge",value:function(){if(this.rules)for(var e=0,t=Object.entries(this.rules);e<t.length;e++){var r=o(t[e],2),n=r[0];r[1];if(this.rules[n])for(var i in this.rules[n])delete this.rules[n][i]}}}])&&l(r.prototype,i),u&&l(r,u),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.RuleSet=c}()}),require.register("curvature/base/SetMap.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function r(e,t,i){return(r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o}).apply(null,arguments)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.SetMap=void 0;var l=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="_map",n=new Map,(r=s(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,n,a;return t=e,(n=[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}(this.get(e));try{for(r.s();!(t=r.n()).done;){return t.value}}catch(e){r.e(e)}finally{r.f()}}},{key:"add",value:function(e,t){var r=this._map.get(e);return r||this._map.set(e,r=new Set),r.add(t)}},{key:"remove",value:function(e,t){var r=this._map.get(e);if(r){var n=r.delete(t);return r.size||this._map.delete(e),n}}},{key:"values",value:function(){return r(Set,i(i(this._map.values()).map(function(e){return i(e.values())})))}}])&&u(t.prototype,n),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.SetMap=l}()}),require.register("curvature/base/Tag.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=r("./Bindable");function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===n(a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}var o=Symbol("CurrentStyle"),a=function(e){if(this.node)for(var t in e){var r=String(e[t]);this[o].has(t)&&this[o].get(t)===e[t]||("-"===t[0]?this.node.style.setProperty(t,r):this.node.style[t]=r,void 0!==e[t]?this[o].set(t,e[t]):this[o].delete(t))}},u=function(e){var t=this;return"function"==typeof this[e]?this[e]:this.node&&"function"==typeof this.node[e]?function(){var r;return(r=t.node)[e].apply(r,arguments)}:"style"===e?this.proxy.style:this.node&&e in this.node?this.node[e]:this[e]},s=function(){function t(r,n,i,s,l){var c=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof r){var f=document.createRange().createContextualFragment(r);r=f.firstChild}this.element=e.Bindable.makeBindable(r),this.node=this.element,this.parent=n,this.direct=l,this.ref=i,this.index=s,this.cleanup=[],this[e.Bindable.OnAllGet]=u.bind(this),this[o]=new Map;var v=e.Bindable.make(a.bind(this));return Object.defineProperty(this,"style",{value:v}),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo(function(e,t,r,n){c[o].has(t)&&c[o].get(t)===e||(c.node.style[t]=e,n||void 0===e?c[o].delete(t):c[o].set(t,e))}),this.proxy.bindTo(function(e,t){if("index"!==t)return t in r&&r[t]!==e&&(r[t]=e),!1}),this.proxy}var r,n,s;return r=t,(n=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t]);return this}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var r=new Event("cvDomDetached");this.node.dispatchEvent(r),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}},{key:"listen",value:function(e,t,r){var n=this.node;n.addEventListener(e,t,r);var i=function(){n.removeEventListener(e,t,r)},o=function(){i(),i=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return o()}),o}}])&&i(r.prototype,n),s&&i(r,s),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Tag=s}()}),require.register("curvature/base/Uuid.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var r;function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function i(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.Uuid=void 0,r=Symbol.toPrimitive;var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"uuid",null),i(this,"version",4),t){if(!t||"string"!=typeof t&&!(t instanceof e)||!t.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/))throw new Error('Invalid input for Uuid: "'.concat(t,'"'));this.version=r,this.uuid=t}else"function"==typeof crypto.randomUUID?this.uuid=crypto.randomUUID():this.uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)});Object.freeze(this)}var t,o,a;return t=e,(o=[{key:r,value:function(){return this.toString()}},{key:"toString",value:function(){return this.uuid}},{key:"toJson",value:function(){return{version:this.version,uuid:this.uuid}}}])&&n(t.prototype,o),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Uuid=a}()}),require.register("curvature/base/View.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=r("./Bindable"),n=r("./ViewList"),i=r("./Router"),o=r("./Uuid"),a=r("./Dom"),u=r("./Tag"),s=r("./Bag"),l=r("./RuleSet"),c=r("./Mixin"),f=(r("../mixin/PromiseMixin"),r("../mixin/EventTargetMixin"));function v(e){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function y(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,void 0,"symbol"===v(o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),n)}var i,o}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(this,r)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=Symbol("dontParse"),j=Symbol("expandBind"),P=Symbol("uuid"),T=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(k,c.Mixin["with"](f.EventTargetMixin));var y,b,_,T=w(k);function k(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),(t=T.call(this,r,n))[f.EventTargetMixin.EventTargetParent]=n,Object.defineProperty(S(t),"args",{value:e.Bindable.make(r)}),Object.defineProperty(S(t),P,{value:t.constructor.uuid()}),Object.defineProperty(S(t),"nodesAttached",{value:new s.Bag(function(e,t,r){})}),Object.defineProperty(S(t),"nodesDetached",{value:new s.Bag(function(e,t,r){})}),Object.defineProperty(S(t),"_onRemove",{value:new s.Bag(function(e,t,r){})}),Object.defineProperty(S(t),"cleanup",{value:[]}),Object.defineProperty(S(t),"parent",{value:n}),Object.defineProperty(S(t),"views",{value:new Map}),Object.defineProperty(S(t),"viewLists",{value:new Map}),Object.defineProperty(S(t),"withViews",{value:new Map}),Object.defineProperty(S(t),"tags",{value:e.Bindable.make({})}),Object.defineProperty(S(t),"nodes",{value:e.Bindable.make([])}),Object.defineProperty(S(t),"timeouts",{value:new Map}),Object.defineProperty(S(t),"intervals",{value:[]}),Object.defineProperty(S(t),"frames",{value:[]}),Object.defineProperty(S(t),"ruleSet",{value:new l.RuleSet}),Object.defineProperty(S(t),"preRuleSet",{value:new l.RuleSet}),Object.defineProperty(S(t),"subBindings",{value:{}}),Object.defineProperty(S(t),"templates",{value:{}}),Object.defineProperty(S(t),"eventCleanup",{value:[]}),Object.defineProperty(S(t),"unpauseCallbacks",{value:new Map}),Object.defineProperty(S(t),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(S(t),"rendered",{value:new Promise(function(e,r){return Object.defineProperty(S(t),"renderComplete",{value:e})})}),t.onRemove(function(){t[f.EventTargetMixin.Parent]&&(t[f.EventTargetMixin.Parent]=null)}),t.controller=S(t),t.template="",t.firstNode=null,t.lastNode=null,t.viewList=null,t.mainView=null,t.preserve=!1,t.removed=!1,t.loaded=Promise.resolve(S(t)),t}return y=k,b=[{key:"_id",get:function(){return this[P]}},{key:"onFrame",value:function(e){var t=this,r=!1,n=function(){r=!0};return requestAnimationFrame(function(){return function n(i){t.removed||r||(t.paused||e(Date.now()),requestAnimationFrame(n))}(Date.now())}),this.frames.push(n),n}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var r=this,n={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},i=function(){t(),n.fired=!0,r.timeouts.delete(n.timeout)},o=setTimeout(i,e);return n.callback=i,n.timeout=o,this.timeouts.set(n.timeout,n),o}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t,r=p(this.timeouts);try{for(r.s();!(t=r.n()).done;){var n=d(t.value,2),i=(n[0],n[1]);clearTimeout(i.timeout),this.timeouts.delete(i.timeout)}}catch(e){r.e(e)}finally{r.f()}})},{key:"onInterval",value:function(e,t){var r=setInterval(t,e);return this.intervals.push({timeout:r,callback:t,time:e,paused:!1}),r}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,r=p(this.timeouts);try{for(r.s();!(t=r.n()).done;){var n=d(t.value,2),i=(n[0],n[1]);i.fired?this.timeouts.delete(i.timeout):(clearTimeout(i.timeout),i.paused=!0,i.time=Math.max(0,i.time-(Date.now()-i.created)))}}catch(e){r.e(e)}finally{r.f()}for(var o in this.intervals)clearInterval(this.intervals[o].timeout)}else{var a,u=p(this.timeouts);try{for(u.s();!(a=u.n()).done;){var s=d(a.value,2),l=(s[0],s[1]);l.paused&&(l.fired?this.timeouts.delete(l.timeout):(l.timeout=setTimeout(l.callback,l.time),l.paused=!1))}}catch(e){u.e(e)}finally{u.f()}for(var c in this.intervals)this.intervals[c].timeout.paused&&(this.intervals[c].timeout.paused=!1,this.intervals[c].timeout=setInterval(this.intervals[c].callback,this.intervals[c].time));var f,v=p(this.unpauseCallbacks);try{for(v.s();!(f=v.n()).done;){(0,d(f.value,2)[1])()}}catch(e){v.e(e)}finally{v.f()}this.unpauseCallbacks.clear()}var h,y=p(this.viewLists);try{for(y.s();!(h=y.n()).done;){var b=d(h.value,2);b[0];b[1].pause(!!e)}}catch(e){y.e(e)}finally{y.f()}for(var m in this.tags)if(Array.isArray(this.tags[m]))for(var g in this.tags[m])this.tags[m][g].pause(!!e);else this.tags[m].pause(!!e)}},{key:"render",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r instanceof k&&(r=r.firstNode.parentNode),n instanceof k&&(n=n.firstNode),this.firstNode)return this.reRender(r,n);this.dispatchEvent(new CustomEvent("render"));var i=this.template instanceof DocumentFragment?this.template.cloneNode(!0):k.templates.has(this.template),o=i?this.template instanceof DocumentFragment?i:k.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(i||this.template instanceof DocumentFragment||k.templates.set(this.template,o.cloneNode(!0)),this.mainView||this.preRuleSet.apply(o,this),this.mapTags(o),this.mainView||this.ruleSet.apply(o,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(h(Array.from(o.childNodes)),[this.lastNode])),this.postRender(r),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(r){var a=r.getRootNode();if(n?(r.insertBefore(this.firstNode,n),r.insertBefore(this.lastNode,n)):(r.appendChild(this.firstNode),r.appendChild(this.lastNode)),r.insertBefore(o,this.lastNode),0,a.isConnected)this.attached(a,r),this.dispatchAttached(a,r);else{r.addEventListener("cvDomAttached",function e(n){n.target.isConnected&&(t.attached(a,r),t.dispatchAttached(a,r),r.removeEventListener("cvDomAttached",e))})}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:r||this,node:t,root:e,mainView:this}})),this.dispatchDomAttached(r);var n,i=p(this.nodesAttached.items());try{for(i.s();!(n=i.n()).done;){(0,n.value)(e,t)}}catch(e){i.e(e)}finally{i.f()}}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).forEach(function(r){r.matches&&(a.Dom.mapTags(r,!1,function(r,n){r.matches&&r.dispatchEvent(new CustomEvent("cvDomAttached",{target:r,detail:{view:e||t,mainView:t}}))}),r.dispatchEvent(new CustomEvent("cvDomAttached",{target:r,detail:{view:e||t,mainView:t}})))})}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var r=new DocumentFragment;if(this.firstNode.isConnected){var n=this.nodesDetached.items();for(var i in n)n[i]()}if(r.append.apply(r,h(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(r,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var o=e.getRootNode();o.isConnected&&(this.attached(o,e),this.dispatchAttached(o,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;a.Dom.mapTags(e,!1,function(e,r){e[E]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==r.currentNode&&(r.currentNode=e)})}},{key:"mapExpandableTag",value:function(t){var r=t[j];r&&(r(),t[j]=!1);var n=d(e.Bindable.resolve(this.args,t.getAttribute("cv-expand"),!0),2),i=n[0],o=n[1];return t.removeAttribute("cv-expand"),i[o]||(i[o]={}),i[o]=e.Bindable.make(i[o]),this.onRemove(t[j]=i[o].bindTo(function(e,r,n,i,o){i||void 0===e?t.removeAttribute(r,e):null!==e?t.setAttribute(r,e):t.setAttribute(r,"")})),t}},{key:"compileExpandableTag",value:function(t){return function(r){var n=t.cloneNode(!0),i=n.getAttribute("cv-expand"),o=e.Bindable.make(r.args[i]||{});n.removeAttribute("cv-expand");var a=function(){if("name"===u||"type"===u)return"continue";var t=o.bindTo(u,function(e,t){return function(r){e.setAttribute(t,r)}}(n,u));r.onRemove(function(){t(),o.isBound()&&e.Bindable.clearBindings(o)})};for(var u in o)a();return n}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(t){var r=t.getAttribute("cv-attr").split(/[,;]/).map(function(e){return e.split(":")});return t.removeAttribute("cv-attr"),function(n){var i=t.cloneNode(!0),o=function(){var t=r[a][1]||r[a][0],o=d(e.Bindable.resolve(n.args,t,!0),2),u=o[0],s=o[1],l=r[a][0];n.onRemove(u.bindTo(s,function(e,t,r,n){n||void 0===e?i.removeAttribute(l,e):null!==e?i.setAttribute(l,e):i.setAttribute(l,"")}))};for(var a in r)o();return i}}},{key:"mapInterpolatableTag",value:function(t){var r=this,n=this.interpolateRegex;if(t.nodeType===Node.TEXT_NODE){var i=t.nodeValue;if(!this.interpolatable(i))return t;for(var o,a=0,s=function(){var n=o[2],s=!1,l=!1,c=n.split("|"),h=!1;if(c.length>1&&(h=r.stringTransformer(c.slice(1)),n=c[0]),"$$"===n.substr(0,2)&&(s=!0,l=!0,n=n.substr(2)),"$"===n.substr(0,1)&&(s=!0,n=n.substr(1)),"000"===n.substr(0,3))return expand=!0,n=n.substr(3),"continue";var p=i.substring(a,o.index);a=o.index+o[1].length;var y,b=document.createTextNode(p);b[E]=!0,t.parentNode.insertBefore(b,t),(y=s?document.createElement("div"):document.createTextNode(""))[E]=!0;var m=r.args,g=n;if(n.match(/\./)){var w=d(e.Bindable.resolve(r.args,n,!0),2);m=w[0],g=w[1]}if(t.parentNode.insertBefore(y,t),"object"!==v(m))return"break";var S=(m=e.Bindable.make(m)).bindTo(g,function(e,n,i){if(i[n]!==e&&(i[n]instanceof k||i[n]instanceof Node||i[n]instanceof u.Tag)&&(i[n].preserve||i[n].remove()),y.nodeValue="",l&&!(e instanceof k)){var o,a=null!==(o=e)&&void 0!==o?o:"";(e=new k(r.args,r)).template=a}if(h&&(e=h(e)),e instanceof k){e[f.EventTargetMixin.EventTargetParent]=r;var c=function(t,n){e.dispatchAttached(t,n,r)};r.nodesAttached.add(c),e.render(t.parentNode,y);var v=function(){e.preserve||e.remove()};r.onRemove(v),e.onRemove(function(){r.nodesAttached.remove(c),r._onRemove.remove(v)})}else e instanceof Node?(t.parentNode.insertBefore(e,y),r.onRemove(function(){return e.remove()})):e instanceof u.Tag?e.node?(t.parentNode.insertBefore(e.node,y),r.onRemove(function(){return e.remove()})):e.remove():(e instanceof Object&&e.__toString instanceof Function&&(e=e.__toString()),s?y.innerHTML=e:y.nodeValue=e);y[E]=!0});r.onRemove(S)};o=n.exec(i);){var l=s();if("continue"!==l&&"break"===l)break}var c=i.substring(a),h=document.createTextNode(c);h[E]=!0,t.parentNode.insertBefore(h,t),t.nodeValue=""}else if(t.nodeType===Node.ELEMENT_NODE)for(var p=function(){if(!r.interpolatable(t.attributes[y].value))return"continue";for(var i,o=0,a=t.attributes[y].value,u=t.attributes[y],s={},l=[];i=n.exec(a);)l.push(a.substring(o,i.index)),s[i[2]]||(s[i[2]]=[]),s[i[2]].push(l.length),l.push(i[1]),o=i.index+i[1].length;l.push(a.substring(o));var c=function(){var n=r.args,i=f,o=f.split("|"),a=!1,c=f;if(o.length>1&&(a=r.stringTransformer(o.slice(1)),i=o[0]),i.match(/\./)){var v=d(e.Bindable.resolve(r.args,i,!0),2);n=v[0],i=v[1]}s[c];r.onRemove(n.bindTo(i,function(e,n,o,f){for(var v in a&&(e=a(e)),s)for(var h in s[c])l[s[c][h]]=o[v],n===i&&(l[s[c][h]]=e);r.paused?r.unpauseCallbacks.set(u,function(){return t.setAttribute(u.name,l.join(""))}):t.setAttribute(u.name,l.join(""))})),r.onRemove(function(){n.isBound()||e.Bindable.clearBindings(n)})};for(var f in s)c()},y=0;y<t.attributes.length;y++)p();return t}},{key:"mapRefTag",value:function(e){var t=d(e.getAttribute("cv-ref").split(":"),3),r=t[0],n=t[1],i=void 0===n?null:n,o=t[2],a=void 0===o?null:o,s=u.Tag;i&&(s=this.stringToClass(i)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var l=this;this.viewList&&(l=this.viewList.parent);var c=new s(e,this,r,void 0,this);for(e.___tag___=c,this.tags[r]=c;l;){var f=this.args[a];if(void 0!==f?(l.tags[r]||(l.tags[r]=[]),l.tags[r][f]=c):l.tags[r]=c,!l.parent)break;l=l.parent}return e}},{key:"mapBindTag",value:function(t){var r=this,n=t.getAttribute("cv-bind"),i=this.args,o=n,s=null;if(n.match(/\./)){var l=d(e.Bindable.resolve(this.args,n,!0),3);i=l[0],o=l[1],s=l[2]}i!==this.args&&(this.subBindings[n]=this.subBindings[n]||[],this.onRemove(this.args.bindTo(s,function(){for(;r.subBindings.length;)r.subBindings.shift()()})));var c=!1;"$"===o.substr(0,1)&&(o=o.substr(1),c=!0);var v=i.bindTo(o,function(e,n,i,o,s){(s instanceof k||s instanceof Node||s instanceof u.Tag)&&s!==e&&s.remove();var l=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(t.tagName)){var v=t.getAttribute("type");if(v&&"checkbox"===v.toLowerCase())t.checked=!!e,t.dispatchEvent(l);else if(v&&"radio"===v.toLowerCase())t.checked=e==t.value,t.dispatchEvent(l);else if("file"!==v){if("SELECT"===t.tagName){var h=function(){for(var r=0;r<t.options.length;r++){t.options[r].value==e&&(t.selectedIndex=r)}};h(),r.nodesAttached.add(h)}else t.value=null==e?"":e;t.dispatchEvent(l)}}else if(e instanceof k){var d,y=p(t.childNodes);try{for(y.s();!(d=y.n()).done;){d.value.remove()}}catch(e){y.e(e)}finally{y.f()}var b=function(t){e.dispatchDomAttached(r)};r.nodesAttached.add(b),e[f.EventTargetMixin.EventTargetParent]=r,e.render(t),e.onRemove(function(){return r.nodesAttached.remove(b)})}else if(e instanceof Node)t.insert(e);else if(e instanceof u.Tag)t.append(e.node);else if(c){if(t.innerHTML!==e){if(e=String(e),t.innerHTML===e.substring(0,t.innerHTML.length))t.innerHTML+=e.substring(t.innerHTML.length);else{var m,g=p(t.childNodes);try{for(g.s();!(m=g.n()).done;){m.value.remove()}}catch(e){g.e(e)}finally{g.f()}t.innerHTML=e}a.Dom.mapTags(t,!1,function(e){return e[E]=!0})}}else if(t.textContent!==e){var w,S=p(t.childNodes);try{for(S.s();!(w=S.n()).done;){w.value.remove()}}catch(e){S.e(e)}finally{S.f()}t.textContent=e}});i!==this.args&&this.subBindings[n].push(v),this.onRemove(v);var h=t.getAttribute("type"),y=t.getAttribute("multiple"),b=function(r){if(r.target===t)if(h&&"checkbox"===h.toLowerCase())t.checked?i[o]=r.target.getAttribute("value"):i[o]=!1;else if(r.target.matches("[contenteditable=true]"))i[o]=r.target.innerHTML;else if("file"===h&&y){var n=Array.from(r.target.files),a=i[o]||e.Bindable.onDeck(i,o);if(a&&n.length){var u=function(e){if(n[e]!==a[e])return n[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},a[e]=n[e],"break"};for(var s in n){if("break"===u(s))break}}else i[o]=n}else if("file"===h&&!y&&r.target.files.length){var l=r.target.files.item(0);l.toJSON=function(){return{name:l.name,size:l.size,type:l.type,date:l.lastModified}},i[o]=l}else i[o]=r.target.value};return"file"===h||"radio"===h?t.addEventListener("change",b):(t.addEventListener("input",b),t.addEventListener("change",b),t.addEventListener("value-changed",b)),this.onRemove(function(){"file"===h||"radio"===h?t.removeEventListener("change",b):(t.removeEventListener("input",b),t.removeEventListener("change",b),t.removeEventListener("value-changed",b))}),t.removeAttribute("cv-bind"),t}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map(function(e){return e.split(":")}).forEach(function(r){var n,i=(r=r.map(function(e){return e.trim()})).length,o=String(r.shift()).trim(),a=String(r.shift()||o).trim(),u=String(r.shift()||"").trim(),s=[],l=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);l&&(a=l[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),l[2]&&(s=l[2].split(",").map(function(e){return e.trim()}))),s.length||s.push("$event"),o&&1!==i||(o=a);for(var c=t,f=function(){var e=c.controller;return"function"==typeof e[a]?(n=function(){e[a].apply(e,arguments)},"break"):"function"==typeof c[a]?(n=function(){var e;(e=c)[a].apply(e,arguments)},"break"):c.parent?void(c=c.parent):"break"};c;){if("break"===f())break}var v=function(r){var i=s.map(function(n){var i;return Number(n)==n?n:"event"===n||"$event"===n?r:"$view"===n?c:"$controller"===n?controller:"$tag"===n?e:"$parent"===n?t.parent:"$subview"===n?t:n in t.args?t.args[n]:(i=/^['"]([\w-]+?)["']$/.exec(n))?i[1]:void 0});if("function"!=typeof n)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));n.apply(void 0,h(i))},d={};switch(u.includes("p")?d.passive=!0:u.includes("P")&&(d.passive=!1),u.includes("c")?d.capture=!0:u.includes("C")&&(d.capture=!1),u.includes("o")?d.once=!0:u.includes("O")&&(d.once=!1),o){case"_init":v();break;case"_attach":t.nodesAttached.add(v);break;case"_detach":t.nodesDetached.add(v);break;default:e.addEventListener(o,v,d),t.onRemove(function(){e.removeEventListener(o,v,d)})}return[o,a,s]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var r=function(r){r.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?i.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",r),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,r)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(r){var n=e.cloneNode(!0);return n.setAttribute("href",t),n}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),r=window.prerenderer||navigator.userAgent.match(/prerender/i);return r&&(window.prerenderer=window.prerenderer||!0),("never"===t&&r||"only"===t&&!r)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(t){var r=this,n=t.getAttribute("cv-with"),i=t.getAttribute("cv-carry"),o=t.getAttribute("cv-view");t.removeAttribute("cv-with"),t.removeAttribute("cv-carry"),t.removeAttribute("cv-view");var a=o?this.stringToClass(o):k,u=new DocumentFragment;h(t.childNodes).forEach(function(e){return u.appendChild(e)});var s=[];i&&(s=i.split(",").map(function(e){return e.trim()}));var l=this.args.bindTo(n,function(n,i,o,l){for(r.withViews.has(t)&&r.withViews.delete(t);t.firstChild;)t.removeChild(t.firstChild);var c=new a({},r);r.onRemove(function(e){return function(){e.remove()}}(c)),c.template=u;var f=function(){var e=r.args.bindTo(s[h],function(e,t){c.args[t]=e});c.onRemove(e),r.onRemove(function(){e(),c.remove()})};for(var h in s)f();var d=function(){if("object"!==v(n))return"continue";var t=(n=e.Bindable.make(n)).bindTo(p,function(e,t,r,n){n?t in c.args&&delete c.args[t]:c.args[t]=e});c.args.bindTo(p,function(e,t,r,i){i?t in n&&delete n[t]:n[t]=e});r.onRemove(function(){t(),n.isBound()||e.Bindable.clearBindings(n),c.remove()}),c.onRemove(function(){t(),n.isBound()||e.Bindable.clearBindings(n)})};for(var p in n)d();c.render(t),r.withViews.set(t,c)});return this.onRemove(function(){r.withViews.delete(t),l()}),t}},{key:"mapViewTag",value:function(e){var t=this,r=e.getAttribute("cv-view");e.removeAttribute("cv-view");var n=new DocumentFragment;h(e.childNodes).forEach(function(e){return n.appendChild(e)});var i=r.split(":"),o=i.pop()?this.stringToClass(r):k,a=i.shift(),u=new o(this.args,this);return this.views.set(e,u),a&&this.views.set(a,u),this.onRemove(function(r){return function(){r.remove(),t.views.delete(e),t.views.delete(a)}}(u)),u.template=n,u.render(e),e}},{key:"mapEachTag",value:function(t){var r=this,i=t.getAttribute("cv-each"),o=t.getAttribute("cv-view");t.removeAttribute("cv-each"),t.removeAttribute("cv-view");var a=o?this.stringToClass(o):k,u=new DocumentFragment;h(t.childNodes).forEach(function(e){return u.appendChild(e)});var l=d(i.split(":"),3),c=l[0],f=l[1],v=l[2],p=this.args,y=c;if(c.match(/\./)){var b=d(e.Bindable.resolve(this.args,c,!0),2);p=b[0],y=b[1]}var m=p.bindTo(y,function(e,i,o,l,c){e instanceof s.Bag&&(e=e.list),r.viewLists.has(t)&&r.viewLists.get(t).remove();var h=new n.ViewList(u,f,e,r,v,a),d=function(){return h.remove()};r.onRemove(d),h.onRemove(function(){return r._onRemove.remove(d)});var p=r.args.bindTo(function(e,t,r,n){"_id"!==t&&(n?t in h.subArgs&&delete h.subArgs[t]:h.subArgs[t]=e)}),y=h.args.bindTo(function(e,t,n,i,o){"_id"!==t&&"value"!==t&&"___"!==String(t).substring(0,3)&&(i?delete r.args[t]:t in r.args&&(r.args[t]=e))});for(h.onRemove(p),h.onRemove(y),r.onRemove(p),r.onRemove(y);t.firstChild;)t.removeChild(t.firstChild);r.viewLists.set(t,h),h.render(t)});return this.onRemove(m),t}},{key:"mapIfTag",value:function(t){var r=this,n=t,i=n.getAttribute("cv-view"),o=n.getAttribute("cv-if"),u=n.getAttribute("cv-is"),l=!1,c=!1;n.removeAttribute("cv-view"),n.removeAttribute("cv-if"),n.removeAttribute("cv-is");var f=i?this.stringToClass(i):k;"!"===o.substr(0,1)&&(o=o.substr(1),l=!0),"?"===o.substr(0,1)&&(o=o.substr(1),c=!0);var v=new DocumentFragment;h(n.childNodes).forEach(function(e){return v.appendChild(e)});var p=this,y=new DocumentFragment,b=new f(Object.assign({},this.args),p);b.tags.bindTo(function(e,t){return r.tags[t]=e},{removeWith:this}),b.template=v;var m=p.args,g=o;if(o.match(/\./)){var w=d(e.Bindable.resolve(p.args,o,!0),2);m=w[0],g=w[1]}b.render(y);var S=m.bindTo(g,function(e,n){var i=e;c&&(e=null!==e&&void 0!==e),e instanceof s.Bag&&(e=e.list),Array.isArray(e)&&(e=!!e.length),null!==u&&(e=i==u),l&&(e=!e),e?(t.appendChild(y),h(y.childNodes).forEach(function(e){return a.Dom.mapTags(e,!1,function(e,t){e.matches&&e.dispatchEvent(new CustomEvent("cvDomAttached",{target:e,detail:{view:b||r,mainView:r}}))})})):(b.nodes.forEach(function(e){return y.appendChild(e)}),a.Dom.mapTags(y,!1,function(e,t){e.matches&&new CustomEvent("cvDomDetached",{target:e,detail:{view:b||r,mainView:r}})}))},{children:Array.isArray(m[g])});p.onRemove(S);var _=this.args.bindTo(function(e,t,r,n){"_id"!==t&&(n?t in b.args&&delete b.args[t]:b.args[t]=e)}),E=b.args.bindTo(function(e,t,n,i,o){"_id"!==t&&"___"!==String(t).substring(0,3)&&t in r.args&&(i?delete r.args[t]:r.args[t]=e)});return p.onRemove(function(){S(),_(),E(),p._onRemove.remove(S)}),this.onRemove(function(){_(),E(),b.remove(),p!==r&&p.remove()}),t}},{key:"compileIfTag",value:function(t){var r=t.getAttribute("cv-if"),n=!1;t.removeAttribute("cv-if"),"!"===r.substr(0,1)&&(r=r.substr(1),n=!0);var i=new DocumentFragment;return h(t.childNodes).forEach(function(e){return i.appendChild(e.cloneNode(!0))}),function(o){var a=t.cloneNode(),u=new DocumentFragment,s=new k({},o);s.template=i,o.syncBind(s);var l=o.args,c=r;if(r.match(/\./)){var f=d(e.Bindable.resolve(o.args,r,!0),2);l=f[0],c=f[1]}var v=!1,h=l.bindTo(c,function(e,t){if(!v){var r=o.args[c]||n?a:u;return s.render(r),void(v=!0)}Array.isArray(e)&&(e=!!e.length),n&&(e=!e),e?a.appendChild(u):s.nodes.forEach(function(e){return u.appendChild(e)})});o.onRemove(h);var p=function(){l.isBound()||e.Bindable.clearBindings(l)};return s.onRemove(function(){h(),p(),o._onRemove.remove(h),o._onRemove.remove(p)}),a}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),r=this.templates[t];if(!r){for(var n=this;n&&!(r=n.templates[t]);)n=this.parent;if(!r)return void console.error("Template ".concat(t," not found."))}var i=r();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(i),e}},{key:"syncBind",value:function(e){var t=this,r=this.args.bindTo(function(t,r,n,i){"_id"!==r&&e.args[r]!==t&&(e.args[r]=t)}),n=e.args.bindTo(function(e,r,n,i,o){if("_id"!==r){var a=e,u=o;a instanceof k&&(a=a.___ref___),u instanceof k&&(u=u.___ref___),a!==u&&u instanceof k&&o.remove(),r in t.args&&(t.args[r]=e)}});this.onRemove(r),this.onRemove(n),e.onRemove(function(){t._onRemove.remove(r),t._onRemove.remove(n)})}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.dispatchEvent(new CustomEvent("remove",{detail:{view:this},cancelable:!0}))){var r=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].forEach(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var r in e.nodes)e.nodes[r]&&e.nodes[r].dispatchEvent(new Event("cvDomDetached")),e.nodes[r]&&e.nodes[r].remove(),e.nodes[r]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};t?r():requestAnimationFrame(r);var n,i=p(this._onRemove.items());try{for(i.s();!(n=i.n()).done;){var o=n.value;o(),this._onRemove.remove(o)}}catch(e){i.e(e)}finally{i.f()}var a,u=p(this.cleanup);try{for(u.s();!(a=u.n()).done;){var s=a.value;s&&s()}}catch(e){u.e(e)}finally{u.f()}this.cleanup.length=0;var l,c=p(this.viewLists);try{for(c.s();!(l=c.n()).done;){var f=d(l.value,2);f[0];f[1].remove()}}catch(e){c.e(e)}finally{c.f()}this.viewLists.clear();var v,h=p(this.timeouts);try{for(h.s();!(v=h.n()).done;){var y=d(v.value,2),b=(y[0],y[1]);clearTimeout(b.timeout),this.timeouts.delete(b.timeout)}}catch(e){h.e(e)}finally{h.f()}var m,g=p(this.intervals);try{for(g.s();!(m=g.n()).done;){var w=m.value;clearInterval(w)}}catch(e){g.e(e)}finally{g.f()}this.intervals.length=0;var S,_=p(this.frames);try{for(_.s();!(S=_.n()).done;){(0,S.value)()}}catch(e){_.e(e)}finally{_.f()}this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0,this.dispatchEvent(new CustomEvent("removed",{detail:{view:this},cancelable:!0}))}}},{key:"findTag",value:function(e){for(var t in this.nodes){var r;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new u.Tag(this.nodes[t],this,void 0,void 0,this);if(r=this.nodes[t].querySelector(e))return new u.Tag(r,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return h(t.querySelectorAll(e))}).flat().map(function(e){return new u.Tag(e,t,void 0,void 0,t)})||[]}},{key:"onRemove",value:function(e){e instanceof Event||this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(r){for(var n in e){for(var i=t,o=e[n];i&&!i[o];)i=i.parent;if(!i)return;r=i[e[n]](r)}return r}}},{key:"stringToClass",value:function(e){if(k.refClasses.has(e))return k.refClasses.get(e);var t=e.split("/"),n=t[t.length-1],i=r(e);return k.refClasses.set(e,i[n]),i[n]}},{key:"preventParsing",value:function(e){e[E]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,r,n){var i=this;if("string"==typeof e&&(n=r,r=t,t=e,e=this),e instanceof k)return this.listen(e.nodes,t,r,n);if(Array.isArray(e))return e.map(function(e){return i.listen(e,t,r,n)}).forEach(function(e){return e()});if(e instanceof u.Tag)return this.listen(e.element,t,r,n);e.addEventListener(t,r,n);var o=function(){return e.removeEventListener(t,r,n)},a=function(){o(),o=function(){}};return this.onRemove(function(){return a()}),a}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],_=[{key:"from",value:function(e){var t=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}},{key:"isView",value:function(){return k}},{key:"uuid",value:function(){return new o.Uuid}}],b&&m(y.prototype,b),_&&m(y,_),Object.defineProperty(y,"prototype",{writable:!1}),k}();t.View=T,Object.defineProperty(T,"templates",{value:new Map}),Object.defineProperty(T,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=r("./Bindable"),n=r("./SetMap"),i=r("./Bag");function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,void 0,"symbol"===u(o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),n)}var i,o}var l=function(){function t(r,n,o,a){var s=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.removed=!1,this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(o||{}),this.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=c,this._onRemove=new i.Bag,this.template=r,this.subProperty=n,this.keyProperty=l,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=a,this.rendered=new Promise(function(e,t){Object.defineProperty(s,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t,r,n,i){"bindTo"!=t&&(s.paused=!0)}),this.args.___after(function(e,t,r,n,i){"bindTo"!=t&&(s.paused=r.length>1,s.reRender())});var f=this.args.value.bindTo(function(e,t,r,n){if(!s.paused){var i=t;if("symbol"!==u(t))if(isNaN(t)&&(i="_"+t),n)for(var o in s.views[i]&&s.views[i].remove(),delete s.views[i],s.views)isNaN(o)?s.views[o].args[s.keyProperty]=o.substr(1):s.views[o].args[s.keyProperty]=o;else s.views[i]?s.views[i]&&s.views[i].args&&(s.views[i].args[s.keyProperty]=t,s.views[i].args[s.subProperty]=e):(cancelAnimationFrame(s.willReRender),s.willReRender=requestAnimationFrame(function(){s.reRender()}))}});this._onRemove.add(f),Object.preventExtensions(this)}var r,a,l;return r=t,(a=[{key:"render",value:function(e){var t,r=this,n=[],i=o(this.views);try{var a=function(){var r=t.value;r.render(e),n.push(r.rendered.then(function(){return r}))};for(i.s();!(t=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}this.tag=e,Promise.all(n).then(function(e){return r.renderComplete(e)}),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],r=new n.SetMap;for(var i in this.views){var a=this.views[i],u=a.args[this.subProperty];r.add(u,a),t[i]=a}var s=[],l=new Set;this.downDebind.length&&this.downDebind.forEach(function(e){return e&&e()}),this.upDebind.length&&this.upDebind.forEach(function(e){return e&&e()}),this.upDebind.length=0,this.downDebind.length=0;var c=1/0,f=1/0,v=function(){var t=!1,n=h;if(isNaN(n)?n="_"+h:String(n).length&&(n=Number(n)),void 0!==e.args.value[h]&&r.has(e.args.value[h])){var i=r.getOne(e.args.value[h]);i&&(i.args[e.keyProperty]=h,s[n]=i,l.add(i),t=!0,isNaN(n)||(c=Math.min(c,n),n>0&&(f=Math.min(f,n))),r.remove(e.args.value[h],i))}if(!t){var o={},a=s[n]=new e.viewClass(o,e.parent);isNaN(n)||(c=Math.min(c,n),n>0&&(f=Math.min(f,n))),s[n].template=e.template,s[n].viewList=e,s[n].args[e.keyProperty]=h,s[n].args[e.subProperty]=e.args.value[h],e.upDebind[n]=o.bindTo(e.subProperty,function(t,r,n,i){var a=o[e.keyProperty];i?delete e.args.value[a]:e.args.value[a]=t}),e.downDebind[n]=e.subArgs.bindTo(function(e,t,r,n){n?delete o[t]:o[t]=e});var u=function(){e.upDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.upDebind.length=0},v=function(){e.downDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.downDebind.length=0};a.onRemove(function(){e._onRemove.remove(u),e._onRemove.remove(v),e.upDebind[n]&&e.upDebind[n](),e.downDebind[n]&&e.downDebind[n](),delete e.upDebind[n],delete e.downDebind[n]}),e._onRemove.add(u),e._onRemove.add(v),o[e.subProperty]=e.args.value[h]}};for(var h in this.args.value)v();for(var d in t)l.has(t[d])||t[d].remove();if(Array.isArray(this.args.value)){var p=0===c&&void 0!==s[1]&&s.length>1||f===1/0?c:f;this.rendered=function t(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=s.length-r-1;n>p&&void 0===s[n];)n--;if(n<p)return Promise.resolve();if(s[n]===e.views[n])return s[n]&&!s[n].firstNode?(s[n].render(e.tag,s[n+1]),s[n].rendered.then(function(){return t(Number(r)+1)})):0===r||r%500?t(Number(r)+1):new Promise(function(e){return requestAnimationFrame(function(){return e(t(Number(r)+1))})});return s[n].render(e.tag,s[n+1]),e.views.splice(n,0,s[n]),s[n].rendered.then(function(){return t(r+1)})}()}else{var y,b=[],m=Object.assign({},s),g=function(e){return parseInt(e)===e-0},w=o(Object.keys(s).sort(function(e,t){return g(e)&&g(t)?Math.sign(e-t):g(e)||g(t)?!g(e)&&g(t)?-1:g(e)&&!g(t)?1:void 0:0}));try{var S=function(){var t=y.value;if(delete m[t],s[t].firstNode&&s[t]===e.views[t])return"continue";s[t].render(e.tag),b.push(s[t].rendered.then(function(){return s[t]}))};for(w.s();!(y=w.n()).done;)S()}catch(e){w.e(e)}finally{w.f()}for(var _ in m)delete this.args.views[_],m.remove();this.rendered=Promise.all(b)}for(var E in s)isNaN(E)?s[E].args[this.keyProperty]=E.substr(1):s[E].args[this.keyProperty]=E;this.views=Array.isArray(this.args.value)?[].concat(s):s,l.clear(),this.willReRender=!1,this.rendered.then(function(){e.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}})),e.tag.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}}))})}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var r=this._onRemove.items();for(var n in r)this._onRemove.remove(r[n]),r[n]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&e.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&s(r.prototype,a),l&&s(r,l),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.ViewList=l}()}),require.register("curvature/input/Keyboard.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Keyboard=void 0;var e=r("../base/Bindable");function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===n(a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}var o=function(){function t(){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxDecay=120,this.comboTime=500,this.listening=!1,this.focusElement=document.body,this[e.Bindable.NoGetters]=!0,Object.defineProperty(this,"combo",{value:e.Bindable.make([])}),Object.defineProperty(this,"whichs",{value:e.Bindable.make({})}),Object.defineProperty(this,"codes",{value:e.Bindable.make({})}),Object.defineProperty(this,"keys",{value:e.Bindable.make({})}),Object.defineProperty(this,"pressedWhich",{value:e.Bindable.make({})}),Object.defineProperty(this,"pressedCode",{value:e.Bindable.make({})}),Object.defineProperty(this,"pressedKey",{value:e.Bindable.make({})}),Object.defineProperty(this,"releasedWhich",{value:e.Bindable.make({})}),Object.defineProperty(this,"releasedCode",{value:e.Bindable.make({})}),Object.defineProperty(this,"releasedKey",{value:e.Bindable.make({})}),Object.defineProperty(this,"keyRefs",{value:e.Bindable.make({})}),document.addEventListener("keyup",function(e){r.listening&&(r.keys[e.key]>0||!r.focusElement||document.activeElement===r.focusElement||r.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(e.preventDefault(),r.releasedWhich[e.which]=Date.now(),r.releasedCode[e.code]=Date.now(),r.releasedKey[e.key]=Date.now(),r.whichs[e.which]=-1,r.codes[e.code]=-1,r.keys[e.key]=-1)}),document.addEventListener("keydown",function(e){r.listening&&(!r.focusElement||document.activeElement===r.focusElement||r.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(e.preventDefault(),e.repeat||(r.combo.push(e.code),clearTimeout(r.comboTimer),r.comboTimer=setTimeout(function(){return r.combo.splice(0)},r.comboTime),r.pressedWhich[e.which]=Date.now(),r.pressedCode[e.code]=Date.now(),r.pressedKey[e.key]=Date.now(),r.keys[e.key]>0||(r.whichs[e.which]=1,r.codes[e.code]=1,r.keys[e.key]=1)))});var n=function(e){for(var t in r.keys)r.keys[t]<0||(r.releasedKey[t]=Date.now(),r.keys[t]=-1);for(var n in r.codes)r.codes[n]<0||(r.releasedCode[n]=Date.now(),r.codes[n]=-1);for(var i in r.whichs)r.whichs[i]<0||(r.releasedWhich[i]=Date.now(),r.whichs[i]=-1)};window.addEventListener("blur",n),window.addEventListener("visibilitychange",function(){"visible"!==document.visibilityState&&n()})}var r,n,o;return r=t,o=[{key:"get",value:function(){return this.instance=this.instance||e.Bindable.make(new this)}}],(n=[{key:"getKeyRef",value:function(t){return this.keyRefs[t]=this.keyRefs[t]||e.Bindable.make({})}},{key:"getKeyTime",value:function(e){var t=this.releasedKey[e],r=this.pressedKey[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getCodeTime",value:function(e){var t=this.releasedCode[e],r=this.pressedCode[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getWhichTime",value:function(e){var t=this.releasedWhich[e],r=this.pressedWhich[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getKey",value:function(e){return this.keys[e]?this.keys[e]:0}},{key:"getKeyCode",value:function(e){return this.codes[e]?this.codes[e]:0}},{key:"reset",value:function(){for(var e in this.keys)delete this.keys[e];for(var e in this.codes)delete this.codes[e];for(var e in this.whichs)delete this.whichs[e]}},{key:"update",value:function(){for(var e in this.keys)this.keys[e]>0?this.keys[e]++:this.keys[e]>-this.maxDecay?this.keys[e]--:delete this.keys[e];for(var e in this.codes){var t=this.releasedCode[e],r=this.pressedCode[e],n=this.getKeyRef(e);if(this.codes[e]>0){if(n.frames=this.codes[e]++,n.time=r?Date.now()-r:0,n.down=!0,!t||t<r)return;return-1*(Date.now()-t)}this.codes[e]>-this.maxDecay?(n.frames=this.codes[e]--,n.time=t-Date.now(),n.down=!1):(n.frames=0,n.time=0,n.down=!1,delete this.codes[e])}for(var e in this.whichs)this.whichs[e]>0?this.whichs[e]++:this.whichs[e]>-this.maxDecay?this.whichs[e]--:delete this.whichs[e]}}])&&i(r.prototype,n),o&&i(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Keyboard=o}()}),require.register("curvature/mixin/EventTargetMixin.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var n,i=r("../base/Mixin");function o(t,r,n){return(r=function(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=Symbol("EventTargetParent"),v=Symbol("CallHandler"),h=Symbol("Capture"),d=Symbol("Bubble"),p=(Symbol("Target"),Symbol("HandlersBubble")),y=Symbol("HandlersCapture"),b=(o(n={},i.Mixin.Constructor,function(){this[y]=new Map,this[p]=new Map}),o(n,"dispatchEvent",function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];"string"==typeof i&&(i=new CustomEvent(i),r[0]=i),i.cvPath=i.cvPath||[],i.cvTarget=i.cvCurrentTarget=this;var o=this[h].apply(this,r);if(i.cancelable&&(!1===o||i.cancelBubble))return o;var a=[];if(this[y].has(i.type)){var l=this[y].get(i.type),c=s(l);c.forEach(function(e){return e.push(l)}),a.push.apply(a,s(c))}if(this[p].has(i.type)){var b=this[p].get(i.type),m=s(b);m.forEach(function(e){return e.push(b)}),a.push.apply(a,s(m))}a.push([function(){return e[v].apply(e,r)},{},null]);for(var g=0,w=a;g<w.length;g++){var S=u(w[g],3),_=S[0],E=S[1],j=S[2];if(E.once&&j.delete(_),o=_(i),i.cancelable&&!1===o)break}return i.cancelable&&(i.cancelBubble||!1===o)||this[d].apply(this,r),this[f]||Object.freeze(i.cvPath),i.returnValue}),o(n,"addEventListener",function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0===n&&(n={useCapture:!0});var i=p;n.useCapture&&(i=y),this[i].has(e)||this[i].set(e,new Map),this[i].get(e).set(t,n),n.signal&&n.signal.addEventListener("abort",function(i){return r.removeEventListener(e,t,n)},{once:!0})}),o(n,"removeEventListener",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0===r&&(r={useCapture:!0});var n=p;r.useCapture&&(n=y),this[n].has(e)&&this[n].get(e).delete(t)}),o(n,h,function(){var e,t=arguments.length<=0?void 0:arguments[0];if(t.cvPath.push(this),this[f]){var r=(e=this[f])[h].apply(e,arguments);if((!t.cancelable||!1!==r&&!t.cancelBubble)&&this[f][y].has(t.type)){t.cvCurrentTarget=this[f];var n,i=t.type,o=this[f][y].get(i),s=a(o);try{for(s.s();!(n=s.n()).done;){var l=u(n.value,2),c=l[0];if(l[1].once&&o.delete(c),r=c(t),t.cancelable&&(!1===r||t.cancelBubble))break}}catch(e){s.e(e)}finally{s.f()}return r}}}),o(n,d,function(){var e,t,r=arguments.length<=0?void 0:arguments[0];if(r.bubbles&&this[f]&&!r.cancelBubble){var n,i;if(!this[f][p].has(r.type))return(n=this[f])[d].apply(n,arguments);r.cvCurrentTarget=this[f];r.type;var o,s=this[f][p].get(r.type),l=a(s);try{for(l.s();!(o=l.n()).done;){var c=u(o.value,2),h=c[0];if(c[1].once&&s.delete(h),i=h(r),r.cancelable&&!1===i)return i}}catch(e){l.e(e)}finally{l.f()}return i=(e=this[f])[v].apply(e,arguments),r.cancelable&&(!1===i||r.cancelBubble)?i:(t=this[f])[d].apply(t,arguments)}}),o(n,v,function(){var e=arguments.length<=0?void 0:arguments[0];if(!e.defaultPrevented){var t="on".concat(e.type[0].toUpperCase()+e.type.slice(1));return"function"==typeof this[t]?this[t](e):void 0}}),n);t.EventTargetMixin=b,Object.defineProperty(b,"Parent",{value:f})}()}),require.register("curvature/mixin/PromiseMixin.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,n=r("../base/Mixin");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=Symbol("Promise"),u=Symbol("Accept"),s=Symbol("Reject"),l=(o(e={},n.Mixin.Constructor,function(){var e=this;this[a]=new Promise(function(t,r){e[u]=t,e[s]=r})}),o(e,"then",function(){var e;return(e=this[a]).then.apply(e,arguments)}),o(e,"catch",function(){var e;return(e=this[a]).catch.apply(e,arguments)}),o(e,"finally",function(){var e;return(e=this[a]).finally.apply(e,arguments)}),e);t.PromiseMixin=l,Object.defineProperty(l,"Reject",{value:s}),Object.defineProperty(l,"Accept",{value:u})}()}),require.register("Config.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0,(e.Config=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)})).title="wgl2d"}),require.register("gl2d/Gl2d.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Gl2d=void 0;e.Gl2d=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t||document.createElement("canvas"),this.context=this.element.getContext("webgl"),this.screenScale=1,this.zoomLevel=2},(r=[{key:"cleanup",value:function(){this.context.deleteProgram(this.program)}},{key:"createShader",value:function(e){var r=null;switch(e.substring(e.lastIndexOf(".")+1).toUpperCase()){case"VERT":r=this.context.VERTEX_SHADER;break;case"FRAG":r=this.context.FRAGMENT_SHADER}var n=this.context.createShader(r),i=t(e);if(this.context.shaderSource(n,i),this.context.compileShader(n),this.context.getShaderParameter(n,this.context.COMPILE_STATUS))return n;console.error(this.context.getShaderInfoLog(n)),this.context.deleteShader(n)}},{key:"createProgram",value:function(e,t){var r=this.context.createProgram();return this.context.attachShader(r,e),this.context.attachShader(r,t),this.context.linkProgram(r),this.context.detachShader(r,e),this.context.detachShader(r,t),this.context.deleteShader(e),this.context.deleteShader(t),this.context.getProgramParameter(r,this.context.LINK_STATUS)?r:(console.error(this.context.getProgramInfoLog(r)),this.context.deleteProgram(r),r)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}()}),require.register("home/View.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var i=t("curvature/base/View"),o=t("curvature/input/Keyboard"),a=t("curvature/base/Bag"),u=t("Config"),s=t("../world/Map"),l=t("../sprite/SpriteSheet"),c=t("../sprite/SpriteBoard"),f=t("../ui/Controller"),v=t("../ui/MapEditor"),h=t("../model/Entity"),d=t("../sprite/Camera"),p=t("../model/Controller"),y=t("../sprite/Sprite");function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function g(e,t,r){return t=w(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var _={};_.onScreenJoyPad=new f.Controller,_.keyboard=o.Keyboard.get();e.View=function(e){function r(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),window.smProfiling=!0,(n=g(this,r,[e])).template=t("./view.tmp"),n.routes=[],n.entities=new a.Bag,n.keyboard=_.keyboard,n.speed=24,n.maxSpeed=n.speed,n.args.controller=_.onScreenJoyPad,n.args.fps=0,n.args.sps=0,n.args.camX=0,n.args.camY=0,n.args.frameLock=60,n.args.simulationLock=60,n.args.showEditor=!1,n.keyboard.listening=!0,n.keyboard.keys.bindTo("e",function(e,t,r,i){e>0&&n.map.export()}),n.keyboard.keys.bindTo("Escape",function(e,t,r,i){-1===e&&n.spriteBoard.unselect()}),n.keyboard.keys.bindTo("Home",function(e,t,r,i){e>0&&n.args.frameLock++}),n.keyboard.keys.bindTo("End",function(e,t,r,i){e>0&&(n.args.frameLock--,n.args.frameLock<0&&(n.args.frameLock=0))}),n.keyboard.keys.bindTo("PageUp",function(e,t,r,i){e>0&&n.args.simulationLock++}),n.keyboard.keys.bindTo("PageDown",function(e,t,r,i){e>0&&(n.args.simulationLock--,n.args.simulationLock<0&&(n.args.simulationLock=0))}),n.spriteSheet=new l.SpriteSheet,n.map=new s.Map,n.map.import(),n.args.mapEditor=new v.MapEditor({spriteSheet:n.spriteSheet,map:n.map}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(r,i.View),n=r,(o=[{key:"onRendered",value:function(){var e=this,t=new c.SpriteBoard(this.tags.canvas.element,this.map);this.spriteBoard=t;var r=new h.Entity({sprite:new y.Sprite({src:void 0,spriteBoard:t,spriteSheet:this.spriteSheet}),controller:new p.Controller({keyboard:this.keyboard,onScreenJoyPad:this.args.controller}),camera:d.Camera});this.entities.add(r),this.spriteBoard.sprites.add(r.sprite),this.spriteBoard.following=r,this.keyboard.keys.bindTo("=",function(t,r,n,i){t>0&&e.zoom(1)}),this.keyboard.keys.bindTo("+",function(t,r,n,i){t>0&&e.zoom(1)}),this.keyboard.keys.bindTo("-",function(t,r,n,i){t>0&&e.zoom(-1)}),this.args.mapEditor.args.bindTo("selectedGraphic",function(t){if(t&&null!=e.spriteBoard.selected.globalX){e.args.showEditor=!1;var r=e.spriteBoard.selected.startGlobalX,n=e.spriteBoard.selected.globalX;if(n<r){var i=[r,n];n=i[0],r=i[1]}for(;r<=n;r++){var o=e.spriteBoard.selected.startGlobalY,a=e.spriteBoard.selected.globalY;if(a<o){var u=[o,a];a=u[0],o=u[1]}for(;o<=a;o++)e.map.setTile(r,o,t)}e.map.setTile(e.spriteBoard.selected.globalX,e.spriteBoard.selected.globalY,t),e.spriteBoard.resize(),e.spriteBoard.unselect()}}),this.spriteBoard.selected.bindTo(function(t,r,n,i,o){null!=e.spriteBoard.selected.localX?(e.args.mapEditor.select(e.spriteBoard.selected),e.args.showEditor=!0,e.spriteBoard.resize()):e.args.showEditor=!1},{wait:0}),this.args.showEditor=!0,window.addEventListener("resize",function(){return e.resize()});var n=0,i=[],o=[],a=function(t){window.requestAnimationFrame(a),e.spriteBoard.draw();var r=(t/=1e3)-t;for(e.args._fps=1/r,i.push(e.args._fps);i.length>5;)i.shift();e.args.camX=Number(d.Camera.x).toFixed(2),e.args.camY=Number(d.Camera.y).toFixed(2)};this.spriteBoard.gl2d.zoomLevel=document.body.clientWidth/1024*2,this.resize(),a(performance.now()),setInterval(function(){!function(t){var r=(t/=1e3)-n;if(0!=e.args.simulationLock){if(!(r<1/(e.args.simulationLock+e.args.simulationLock/60*10)))for(n=t,e.keyboard.update(),Object.values(e.entities.items()).map(function(e){e.simulate()}),e.args._sps=1/r,o.push(e.args._sps);o.length>5;)o.shift()}else o=[0]}(performance.now())},0),setInterval(function(){var t=i.reduce(function(e,t){return e+t},0)/i.length;e.args.fps=t.toFixed(3).padStart(5," ")},227),setInterval(function(){document.title="".concat(u.Config.title," ").concat(e.args.fps," FPS")},227/3),setInterval(function(){var t=o.reduce(function(e,t){return e+t},0)/o.length;e.args.sps=t.toFixed(3).padStart(5," ")},115.5)}},{key:"resize",value:function(e,t){this.args.width=this.tags.canvas.element.width=e||document.body.clientWidth,this.args.height=this.tags.canvas.element.height=t||document.body.clientHeight,this.args.rwidth=Math.trunc((e||document.body.clientWidth)/this.spriteBoard.gl2d.zoomLevel),this.args.rheight=Math.trunc((t||document.body.clientHeight)/this.spriteBoard.gl2d.zoomLevel);var r=this.spriteBoard.gl2d.screenScale;this.spriteBoard.gl2d.screenScale=document.body.clientWidth/1024,this.spriteBoard.gl2d.zoomLevel*=this.spriteBoard.gl2d.screenScale/r,this.spriteBoard.resize()}},{key:"scroll",value:function(e){var t=e.deltaY>0?-1:e.deltaY<0?1:0;this.zoom(t)}},{key:"zoom",value:function(e){var t=32*this.spriteBoard.gl2d.screenScale,r=.6667*this.spriteBoard.gl2d.screenScale,n=.05*this.spriteBoard.gl2d.zoomLevel,i=this.spriteBoard.gl2d.zoomLevel+e*n;i<r?i=r:i>t&&(i=t),this.spriteBoard.gl2d.zoomLevel!==i&&(this.spriteBoard.gl2d.zoomLevel=i,this.resize())}}])&&b(n.prototype,o),f&&b(n,f),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,f}()}),require.register("home/view.tmp.html",function(e,t,r){r.exports='<canvas\n\tcv-ref = "canvas:curvature/base/Tag"\n\tcv-on  = "wheel:scroll(event);"\n></canvas>\n<div class = "hud fps">\n [[sps]] simulations/s / [[simulationLock]] \n [[fps]] frames/s      / [[frameLock]] \n\n Res [[rwidth]] x [[rheight]]\n     [[width]] x [[height]]\n \n Pos [[camX]] x [[camY]]\n\n  Sim:   Pg Up / Dn\n  Frame: Home / End \n  Scale: + / - \n\n</div>\n<div class = "reticle"></div>\n\n[[controller]]\n\n<div cv-if = "showEditor">\n\t[[mapEditor]]\n\t--\n\t[[mmm]]\n</span>\n'}),require.register("initialize.js",function(e,t,r){"use strict";var n=t("curvature/base/Router"),i=t("home/View");void 0!==Proxy&&document.addEventListener("DOMContentLoaded",function(){var e=new i.View;n.Router.listen(e),e.render(document.body)})}),require.register("inject/Container.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var i=t("./Injectable");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function u(e,t,r){return t=s(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e.Container=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,i.Injectable),r=t,(n=[{key:"inject",value:function(e){return new this.constructor(Object.assign({},this,e))}}])&&o(r.prototype,n),a&&o(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}()}),require.register("inject/Injectable.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return t=o(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],o(e).constructor):t.apply(e,r))}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Injectable=void 0;var f={},v={};e.Injectable=function(){function e(){u(this,e);var t=this.constructor.injections(),r=this.constructor.context();for(var n in f[r]||(f[r]={}),v[r]||(v[r]={}),t){var i=t[n];!f[r][n]&&i.prototype&&(/[A-Z]/.test(String(n)[0])&&(f[r][n]=i))}for(var o in t){var a=void 0,s=f[r][o]||t[o];/[A-Z]/.test(String(o)[0])?(s.prototype?v[r][o]||(v[r][o]=new s):v[r][o]=s,a=v[r][o]):a=s.prototype?new s:s,Object.defineProperty(this,o,{enumerable:!1,writable:!1,value:a})}}return l(e,null,[{key:"injections",value:function(){return{}}},{key:"context",value:function(){return"."}},{key:"inject",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";if(!(this.prototype instanceof e||this===e))throw new Error("Cannot access injectable subclass!\n\nAre you trying to instantiate like this?\n\n\tnew X.inject({...});\n\nIf so please try:\n\n\tnew (X.inject({...}));\n\nPlease note the parenthesis.\n");var n=this.injections();return function(e){function o(){return u(this,o),i(this,o,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(o,e),l(o,null,[{key:"injections",value:function(){return Object.assign({},n,t)}},{key:"context",value:function(){return r}}])}(this)}}])}()}),require.register("inject/Single.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.single=e.Single=void 0;var a=e.Single=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="sss."+Math.random()});e.single=new a}),require.register("model/Controller.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Controller=void 0;var n=t("curvature/base/Bindable");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function a(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}e.Controller=function(){return e=function e(t){var r=this,i=t.keyboard,o=t.onScreenJoyPad;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"triggers",n.Bindable.makeBindable({})),a(this,"axis",n.Bindable.makeBindable({})),i.keys.bindTo(function(e,t,n,i){e>0?r.keyPress(t,e,n[t]):-1!==e||r.keyRelease(t,e,n[t])}),o.args.bindTo("x",function(e){r.axis[0]=e/50}),o.args.bindTo("y",function(e){r.axis[1]=e/50})},(t=[{key:"keyPress",value:function(e,t,r){if(/^[0-9]$/.test(e))this.triggers[e]=!0;else switch(e){case"ArrowRight":this.axis[0]=1;break;case"ArrowDown":this.axis[1]=1;break;case"ArrowLeft":this.axis[0]=-1;break;case"ArrowUp":this.axis[1]=-1}}},{key:"keyRelease",value:function(e,t,r){if(/^[0-9]$/.test(e))this.triggers[e]=!1;else switch(e){case"ArrowRight":this.axis[0]>0&&(this.axis[0]=0),this.axis[0]=0;case"ArrowLeft":this.axis[0]<0&&(this.axis[0]=0);break;case"ArrowDown":this.axis[1]>0&&(this.axis[1]=0);case"ArrowUp":this.axis[1]<0&&(this.axis[1]=0)}}}])&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()}),require.register("model/Entity.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Entity=void 0;t("../sprite/Camera");function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}e.Entity=function(){return e=function e(t){var r=t.sprite,n=t.controller;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.direction="south",this.state="standing",this.sprite=r,this.controller=n},(t=[{key:"create",value:function(){}},{key:"simulate",value:function(){var e=this.controller.axis[0]||0,t=this.controller.axis[1]||0;for(var r in this.controller.triggers)this.controller.triggers[r]&&console.log(r);e=Math.min(1,Math.max(e,-1)),t=Math.min(1,Math.max(t,-1)),this.sprite.x+=e>0?Math.ceil(4*e):Math.floor(4*e),this.sprite.y+=t>0?Math.ceil(4*t):Math.floor(4*t);var n,i=!1;Math.abs(e)>Math.abs(t)&&(i=!0),i?(this.direction="west",e>0&&(this.direction="east"),this.state="walking"):t?(this.direction="north",t>0&&(this.direction="south"),this.state="walking"):this.state="standing",(n=this.sprite[this.state][this.direction])&&this.sprite.setFrames(n)}},{key:"destroy",value:function(){}}])&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()}),require.register("overlay/overlay.frag",function(e,t,r){r.exports="precision mediump float;\n\nuniform vec4 u_color;\nvarying vec2 v_texCoord;\n\nvoid main() {\n   // gl_FragColor = texture2D(u_image, v_texCoord);\n   gl_FragColor = vec4(1.0, 1.0, 0.0, 0.25);\n}\n"}),require.register("overlay/overlay.vert",function(e,t,r){r.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\nvarying vec2 v_texCoord;\n\nvoid main()\n{\n   vec2 zeroToOne = a_position / u_resolution;\n   vec2 zeroToTwo = zeroToOne * 2.0;\n   vec2 clipSpace = zeroToTwo - 1.0;\n\n   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n   v_texCoord  = a_texCoord;\n}\n"}),require.register("sprite/Background.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Background=void 0;var n=t("./Surface"),i=t("./Camera"),o=t("./SpriteSheet");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}e.Background=function(){return e=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.spriteBoard=t,this.spriteSheet=new o.SpriteSheet,this.panes=[],this.panesXY={},this.maxPanes=9,this.map=r,this.layer=n,this.tileWidth=32,this.tileHeight=32,this.surfaceWidth=5,this.surfaceHeight=5},(t=[{key:"renderPane",value:function(e,t,r){var i,o=e*this.tileWidth*this.surfaceWidth*this.spriteBoard.gl2d.zoomLevel,a=t*this.tileHeight*this.surfaceHeight*this.spriteBoard.gl2d.zoomLevel;this.panesXY[o]&&this.panesXY[o][a]?i=this.panesXY[o][a]:(i=new n.Surface(this.spriteBoard,this.spriteSheet,this.map,this.surfaceWidth,this.surfaceHeight,o,a,this.layer),this.panesXY[o]||(this.panesXY[o]={}),this.panesXY[o][a]||(this.panesXY[o][a]=i)),this.panes.push(i),this.panes.length>this.maxPanes&&this.panes.shift()}},{key:"draw",value:function(){this.panes.length=0;var e=Math.floor(i.Camera.x/(this.surfaceWidth*this.tileWidth*this.spriteBoard.gl2d.zoomLevel)+0),t=Math.floor(i.Camera.y/(this.surfaceHeight*this.tileHeight*this.spriteBoard.gl2d.zoomLevel)+0),r=[-1,0,1];for(var n in r)for(var o in r)this.renderPane(e+r[n],t+r[o]);this.panes.forEach(function(e){return e.draw()})}},{key:"resize",value:function(e,t){for(var r in this.panesXY)for(var n in this.panesXY[r])delete this.panesXY[r][n];for(;this.panes.length;)this.panes.pop();this.surfaceWidth=Math.ceil(e/this.tileWidth),this.surfaceHeight=Math.ceil(t/this.tileHeight),this.draw()}},{key:"simulate",value:function(){}}])&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()}),require.register("sprite/Camera.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function o(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var u=e.Camera=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)});o(u,"x",0),o(u,"y",0),o(u,"width",0),o(u,"height",0)}),require.register("sprite/Sprite.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var n=t("curvature/base/Bindable"),i=t("./Camera");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}e.Sprite=function(){function e(t){var r=this,i=t.src,o=t.spriteBoard,a=t.spriteSheet;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[n.Bindable.Prevent]=!0,this.z=0,this.x=0,this.y=0,this.width=0,this.height=0,this.scale=1,this.frames=[],this.frameDelay=4,this.currentDelay=this.frameDelay,this.currentFrame=0,this.currentFrames="",this.speed=0,this.maxSpeed=8,this.moving=!1,this.RIGHT=0,this.DOWN=1,this.LEFT=2,this.UP=3,this.EAST=this.RIGHT,this.SOUTH=this.DOWN,this.WEST=this.LEFT,this.NORTH=this.UP,this.standing={north:["player_standing_north.png"],south:["player_standing_south.png"],west:["player_standing_west.png"],east:["player_standing_east.png"]},this.walking={north:["player_walking_north.png","player_walking_north.png","player_standing_north.png","player_walking_north2.png","player_walking_north2.png","player_standing_north.png"],south:["player_walking_south.png","player_walking_south.png","player_standing_south.png","player_walking_south2.png","player_walking_south2.png","player_standing_south.png"],west:["player_walking_west.png","player_walking_west.png","player_standing_west.png","player_standing_west.png","player_walking_west2.png","player_walking_west2.png","player_standing_west.png","player_standing_west.png"],east:["player_walking_east.png","player_walking_east.png","player_standing_east.png","player_standing_east.png","player_walking_east2.png","player_walking_east2.png","player_standing_east.png","player_standing_east.png"]},this.spriteBoard=o;var u=this.spriteBoard.gl2d.context;this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture);var s=function(){return parseInt(255*Math.random())};u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array([s(),s(),0,255])),this.spriteSheet=a,this.spriteSheet.ready.then(function(t){var n=r.spriteSheet.getFrame(i);n&&e.loadTexture(r.spriteBoard.gl2d,n).then(function(e){r.texture=e.texture,r.width=e.image.width*r.scale,r.height=e.image.height*r.scale})})}return t=e,o=[{key:"loadTexture",value:function(t,r){var n=t.context;return this.promises||(this.promises={}),this.promises[r]?this.promises[r]:(this.promises[r]=e.loadImage(r).then(function(e){var t=n.createTexture();return n.bindTexture(n.TEXTURE_2D,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),{image:e,texture:t}}),this.promises[r])}},{key:"loadImage",value:function(e){return new Promise(function(t,r){var n=new Image;n.src=e,n.addEventListener("load",function(e){t(n)})})}}],(r=[{key:"draw",value:function(){this.frameDelay=this.maxSpeed-Math.abs(this.speed),this.frameDelay>this.maxSpeed&&(this.frameDelay=this.maxSpeed),this.currentDelay<=0?(this.currentDelay=this.frameDelay,this.currentFrame++):this.currentDelay--,this.currentFrame>=this.frames.length&&(this.currentFrame=this.currentFrame-this.frames.length);var e=this.frames[this.currentFrame];e&&(this.texture=e.texture,this.width=e.width*this.scale,this.height=e.height*this.scale);var t=this.spriteBoard.gl2d.context;t.bindTexture(t.TEXTURE_2D,this.texture),this.setRectangle(this.x*this.spriteBoard.gl2d.zoomLevel-i.Camera.x+i.Camera.width*this.spriteBoard.gl2d.zoomLevel/2,this.y*this.spriteBoard.gl2d.zoomLevel-i.Camera.y+i.Camera.height*this.spriteBoard.gl2d.zoomLevel/2+.5*-this.height*this.spriteBoard.gl2d.zoomLevel,this.width*this.spriteBoard.gl2d.zoomLevel,this.height*this.spriteBoard.gl2d.zoomLevel),t.drawArrays(t.TRIANGLES,0,6)}},{key:"setFrames",value:function(t){var r=this,n=t.join(" ");if(this.currentFrames!==n){this.currentFrames=n;this.spriteSheet.ready.then(function(n){var i=n.getFrames(t).map(function(t){return function(t){return e.loadTexture(r.spriteBoard.gl2d,t)}(t).then(function(e){return{texture:e.texture,width:e.image.width,height:e.image.height}})});Promise.all(i).then(function(e){return r.frames=e})})}}},{key:"setRectangle",value:function(e,t,r,n){var i=this.spriteBoard.gl2d.context;i.bindBuffer(i.ARRAY_BUFFER,this.spriteBoard.positionBuffer);var o=e,a=t,u=e+r,s=t+n;i.bufferData(i.ARRAY_BUFFER,new Float32Array([o+0,a,this.z,u+0,a,this.z,o,s,this.z,o,s,this.z,u+0,a,this.z,u,s,this.z]),i.STREAM_DRAW)}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,o}()}),require.register("sprite/SpriteBoard.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteBoard=void 0;var n=t("curvature/base/Bag"),i=t("./Background"),o=t("../gl2d/Gl2d"),a=t("./Camera"),u=t("./Sprite"),s=t("curvature/base/Bindable"),l=t("./SpriteSheet");function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}e.SpriteBoard=function(){return e=function e(t,r){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[s.Bindable.Prevent]=!0,this.map=r,this.mouse={x:null,y:null,clickX:null,clickY:null},this.sprites=new n.Bag,a.Camera.width=t.width,a.Camera.height=t.height,this.gl2d=new o.Gl2d(t);var f=this.gl2d.context;f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA),f.enable(f.BLEND),this.program=this.gl2d.createProgram(this.gl2d.createShader("sprite/texture.vert"),this.gl2d.createShader("sprite/texture.frag")),this.overlayProgram=this.gl2d.createProgram(this.gl2d.createShader("overlay/overlay.vert"),this.gl2d.createShader("overlay/overlay.frag")),this.positionLocation=f.getAttribLocation(this.program,"a_position"),this.texCoordLocation=f.getAttribLocation(this.program,"a_texCoord"),this.positionBuffer=f.createBuffer(),this.texCoordBuffer=f.createBuffer(),this.resolutionLocation=f.getUniformLocation(this.program,"u_resolution"),this.tilePosLocation=f.getUniformLocation(this.program,"u_tileNo"),this.colorLocation=f.getUniformLocation(this.program,"u_color"),this.overlayLocation=f.getAttribLocation(this.overlayProgram,"a_position"),this.overlayResolution=f.getUniformLocation(this.overlayProgram,"u_resolution"),this.overlayColor=f.getUniformLocation(this.overlayProgram,"u_color"),f.bindBuffer(f.ARRAY_BUFFER,this.positionBuffer),f.enableVertexAttribArray(this.positionLocation),f.vertexAttribPointer(this.positionLocation,3,f.FLOAT,!1,0,0),f.enableVertexAttribArray(this.texCoordLocation),f.bindBuffer(f.ARRAY_BUFFER,this.texCoordBuffer),f.vertexAttribPointer(this.texCoordLocation,2,f.FLOAT,!1,0,0),document.addEventListener("mousemove",function(e){c.mouse.x=e.clientX,c.mouse.y=e.clientY}),this.selected={localX:null,localY:null,globalX:null,globalY:null,startGlobalX:null,startGlobalY:null},this.selected=s.Bindable.makeBindable(this.selected),this.background=new i.Background(this,r);var v=new l.SpriteSheet;for(var h in Array(16).fill()){var d=new u.Sprite({src:"barrel.png",spriteBoard:this,spriteSheet:v});d.x=32*h%128,d.y=32*Math.trunc(32*h/128),this.sprites.add(d)}this.sprites.add(this.background),this.following=null},(t=[{key:"unselect",value:function(){return null!==this.selected.localX&&(this.selected.localX=null,this.selected.localY=null,this.selected.globalX=null,this.selected.globalY=null,!0)}},{key:"draw",value:function(){this.following&&(a.Camera.x=(16+this.following.sprite.x)*this.gl2d.zoomLevel||0,a.Camera.y=(16+this.following.sprite.y)*this.gl2d.zoomLevel||0);var e=this.gl2d.context;e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height),e.uniform2f(this.resolutionLocation,e.canvas.width,e.canvas.height),e.useProgram(this.program);var t=this.sprites.items();window.smProfiling&&console.time("sort"),t.sort(function(e,t){return e instanceof i.Background&&!(t instanceof i.Background)?-1:t instanceof i.Background&&!(e instanceof i.Background)?1:void 0===e.z?-1:void 0===t.z?1:e.z-t.z}),window.smProfiling&&(console.timeEnd("sort"),window.smProfiling=!1),t.forEach(function(e){e.z=e instanceof i.Background?-1:e.y,e.draw()})}},{key:"resize",value:function(e,t){e=e||this.gl2d.element.width,t=t||this.gl2d.element.height,a.Camera.x*=this.gl2d.zoomLevel,a.Camera.y*=this.gl2d.zoomLevel,a.Camera.width=e/this.gl2d.zoomLevel,a.Camera.height=t/this.gl2d.zoomLevel,this.background.resize(a.Camera.width,a.Camera.height)}},{key:"setRectangle",value:function(e,t,r,n){var i=this.gl2d.context;i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer);var o=e,a=e+r,u=t,s=t+n;i.bufferData(i.ARRAY_BUFFER,new Float32Array([o,u,this.z,a,u,this.z,o,s,this.z,o,s,this.z,a,u,this.z,a,s,this.z]),i.STREAM_DRAW)}}])&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()}),require.register("sprite/SpriteSheet.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteSheet=void 0;e.SpriteSheet=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageUrl="/spritesheet.png",this.boxesUrl="/spritesheet.json",this.vertices={},this.frames={},this.width=0,this.height=0;var r=new Request(this.boxesUrl),n=fetch(r).then(function(e){return e.json()}).then(function(e){return t.boxes=e}),i=new Promise(function(e){t.image=new Image,t.image.src=t.imageUrl,t.image.onload=function(){e()}});this.ready=Promise.all([n,i]).then(function(){return t.processImage()}).then(function(){return t})},r=[{key:"loadTexture",value:function(e,t){var r=e.context;return this.texturePromises||(this.texturePromises={}),this.texturePromises[t]?this.texturePromises[t]:this.texturePromises[t]=this.loadImage(t).then(function(e){var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),{image:e,texture:t}})}},{key:"loadImage",value:function(e){return this.imagePromises||(this.imagePromises={}),this.imagePromises[e]?this.imagePromises[e]:(this.imagePromises[e]=new Promise(function(t,r){var n=new Image;n.src=e,n.addEventListener("load",function(e){t(n)})}),this.imagePromises[e])}}],(t=[{key:"processImage",value:function(){var e=this;if(this.boxes&&this.boxes.frames){var t=document.createElement("canvas");t.width=this.image.width,t.height=this.image.height;var r=t.getContext("2d",{willReadFrequently:!0});r.drawImage(this.image,0,0);var n=[],i=function(t){var i=document.createElement("canvas");i.width=e.boxes.frames[t].frame.w,i.height=e.boxes.frames[t].frame.h;var o=i.getContext("2d");e.boxes.frames[t].frame&&o.putImageData(r.getImageData(e.boxes.frames[t].frame.x,e.boxes.frames[t].frame.y,e.boxes.frames[t].frame.w,e.boxes.frames[t].frame.h),0,0),e.boxes.frames[t].text&&(o.fillStyle=e.boxes.frames[t].color||"white",o.font=e.boxes.frames[t].font||"".concat(e.boxes.frames[t].frame.h,"px sans-serif"),o.textAlign="center",o.fillText(e.boxes.frames[t].text,e.boxes.frames[t].frame.w/2,e.boxes.frames[t].frame.h,e.boxes.frames[t].frame.w),o.textAlign=null,o.font=null),n.push(new Promise(function(r){i.toBlob(function(n){e.frames[e.boxes.frames[t].filename]=URL.createObjectURL(n),r(e.frames[e.boxes.frames[t].filename])})}))};for(var o in this.boxes.frames)i(o);return Promise.all(n)}}},{key:"getVertices",value:function(e){return this.vertices[e]}},{key:"getFrame",value:function(e){return this.frames[e]}},{key:"getFrames",value:function(e){var t=this;return Array.isArray(e)?e.map(function(e){return t.getFrame(e)}):this.getFramesByPrefix(e)}},{key:"getFramesByPrefix",value:function(e){var t=[];for(var r in this.frames)r.substring(0,e.length)===e&&t.push(this.frames[r]);return t}}])&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()}),require.register("sprite/Surface.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Surface=void 0;var n=t("curvature/base/Bindable"),i=t("./Camera");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}e.Surface=function(){return e=function e(t,r,i){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[n.Bindable.Prevent]=!0,this.spriteBoard=t,this.spriteSheet=r,this.x=s,this.y=l,this.z=f,this.layer=c,this.xSize=a,this.ySize=u,this.tileWidth=32,this.tileHeight=32,this.width=this.xSize*this.tileWidth,this.height=this.ySize*this.tileHeight,this.map=i,this.texVertices=[];var v=this.spriteBoard.gl2d.context;this.subTextures={},this.spriteSheet.ready.then(function(e){for(var t=[],r=o.xSize*o.ySize,n=function(e){var r=e%o.xSize+Math.floor(o.x/o.tileWidth),n=Math.floor(e/o.xSize)+Math.floor(o.y/o.tileHeight),i=o.map.getTile(r,n,o.layer);if(Array.isArray(i)){var a=0;o.subTextures[e]=[],t.push(Promise.all(i.map(function(t){return o.spriteSheet.constructor.loadTexture(o.spriteBoard.gl2d,t).then(function(t){o.subTextures[e][a]=t.texture,a++})})))}else t.push(o.spriteSheet.constructor.loadTexture(gl2d,i).then(function(t){return o.subTextures[e]=t.texture}))},i=0;i<r;i++)n(i);Promise.all(t).then(function(){return o.assemble()})}),this.pane=v.createTexture(),v.bindTexture(v.TEXTURE_2D,this.pane),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,this.width,this.height,0,v.RGBA,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),this.frameBuffer=v.createFramebuffer(),v.bindFramebuffer(v.FRAMEBUFFER,this.frameBuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,this.pane,0)},(t=[{key:"draw",value:function(){var e=this.spriteBoard.gl2d.context;e.bindTexture(e.TEXTURE_2D,this.pane);var t=this.x+-i.Camera.x+i.Camera.width*this.spriteBoard.gl2d.zoomLevel/2,r=this.y+-i.Camera.y+i.Camera.height*this.spriteBoard.gl2d.zoomLevel/2;this.setRectangle(t,r,this.width*this.spriteBoard.gl2d.zoomLevel,this.height*this.spriteBoard.gl2d.zoomLevel),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLES,0,6)}},{key:"assemble",value:function(){var e=this.spriteBoard.gl2d.context;e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.viewport(0,0,this.width,this.height),e.clearColor(Math.random(),Math.random(),Math.random(),1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.uniform4f(this.spriteBoard.colorLocation,1,0,0,1),e.uniform2f(this.spriteBoard.resolutionLocation,this.width,this.height),this.subTextures[0][0]&&(e.bindTexture(e.TEXTURE_2D,this.subTextures[0][0]),e.bindBuffer(e.ARRAY_BUFFER,this.spriteBoard.texCoordBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,this.width/32,0,0,-this.height/32,0,-this.height/32,this.width/32,0,this.width/32,-this.height/32]),e.STATIC_DRAW),this.setRectangle(0,0,this.width,this.height),e.drawArrays(e.TRIANGLES,0,6));var t=0,r=0;for(var n in this.subTextures){for(var i in Array.isArray(this.subTextures[n])||(this.subTextures[n]=[this.subTextures[n]]),this.subTextures[n])e.uniform3f(this.spriteBoard.tilePosLocation,Number(n),Object.keys(this.subTextures).length,0),e.bindBuffer(e.ARRAY_BUFFER,this.spriteBoard.texCoordBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),this.setRectangle(t,r+this.tileHeight,this.tileWidth,-this.tileHeight),e.drawArrays(e.TRIANGLES,0,6);(t+=this.tileWidth)>=this.width&&(t=0,r+=this.tileHeight)}e.uniform3f(this.spriteBoard.tilePosLocation,0,0,0)}},{key:"setRectangle",value:function(e,t,r,n){var i=this.spriteBoard.gl2d.context;i.bindBuffer(i.ARRAY_BUFFER,this.spriteBoard.positionBuffer);var o=e,a=e+r,u=t,s=t+n;i.bufferData(i.ARRAY_BUFFER,new Float32Array([o,s,this.z,a,s,this.z,o,u,this.z,o,u,this.z,a,s,this.z,a,u,this.z]),i.STATIC_DRAW)}}])&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()}),require.register("sprite/TextureBank.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.TextureBank=void 0;e.TextureBank=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)})}),require.register("sprite/texture.frag",function(e,t,r){r.exports="// texture.frag\n\nprecision mediump float;\n\nuniform sampler2D u_image;\nuniform vec4 u_color;\nvarying vec2 v_texCoord;\nuniform vec3 u_tileNo;\n\n\nvec2 ripple(vec2 texCoord, float ripple, float disp) {\n  return vec2(v_texCoord.x + sin(v_texCoord.y * ripple) * disp, v_texCoord.y);\n}\n\nvoid main() {\n  vec2 v_displaced = ripple(v_texCoord, 0.0, 0.0);\n  // vec2 v_displaced = ripple(v_texCoord, 3.1415 * 2.0, 0.025);\n\n  if (v_displaced.x > 1.0) {\n    v_displaced.x = 1.0 - (v_displaced.x - 1.0);\n  }\n\n  if (v_displaced.x < 0.0) {\n    v_displaced.x = abs(v_displaced.x);\n  }\n\n  // gl_FragColor.w = gl_FragColor.w * 0.5;\n  if (u_tileNo.z > 0.0) {\n    gl_FragColor = vec4(u_tileNo.x / u_tileNo.y, 0, 0, 1.0);\n  } \n  else {\n    gl_FragColor = texture2D(u_image, v_displaced);\n  }\n  // gl_FragColor = gl_PointCoord.yyxx;\n}\n"}),require.register("sprite/texture.vert",function(e,t,r){r.exports="// texture.vert\n\nattribute vec3 a_position;\nattribute vec2 a_texCoord;\n\nuniform   vec2 u_resolution;\n\nvarying   vec2 v_texCoord;\n\nvoid main()\n{\n  vec2 zeroToOne = a_position.xy / u_resolution;\n  vec2 zeroToTwo = zeroToOne * 2.0;\n  vec2 clipSpace = zeroToTwo - 1.0;\n\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n  v_texCoord  = a_texCoord;\n}\n"}),require.register("ui/Controller.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Controller=void 0;var i=t("curvature/base/View");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function u(e,t,r){return t=s(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e.Controller=function(e){function r(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=u(this,r,[e])).template=t("./controller.tmp"),n.dragStart=!1,n.args.dragging=!1,n.args.x=0,n.args.y=0,window.addEventListener("mousemove",function(e){n.moveStick(e)}),window.addEventListener("mouseup",function(e){n.dropStick(e)}),window.addEventListener("touchmove",function(e){n.moveStick(e)}),window.addEventListener("touchend",function(e){n.dropStick(e)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(r,i.View),n=r,(a=[{key:"dragStick",value:function(e){var t=e;e.preventDefault(),e.touches&&e.touches[0]&&(t=e.touches[0]),this.args.dragging=!0,this.dragStart={x:t.clientX,y:t.clientY}}},{key:"moveStick",value:function(e){if(this.args.dragging){var t=e;e.touches&&e.touches[0]&&(t=e.touches[0]),this.args.xx=t.clientX-this.dragStart.x,this.args.yy=t.clientY-this.dragStart.y;this.args.xx<-50?this.args.x=-50:this.args.xx>50?this.args.x=50:this.args.x=this.args.xx,this.args.yy<-50?this.args.y=-50:this.args.yy>50?this.args.y=50:this.args.y=this.args.yy}}},{key:"dropStick",value:function(e){this.args.dragging=!1,this.args.x=0,this.args.y=0}}])&&o(n.prototype,a),s&&o(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,s}()}),require.register("ui/MapEditor.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MapEditor=void 0;var i=t("curvature/base/View");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function u(e,t,r){return t=s(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e.MapEditor=function(e){function r(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=u(this,r,[e])).template=t("./mapEditor.tmp"),e.spriteSheet.ready.then(function(e){n.args.tiles=e.frames}),n.args.bindTo("selectedGraphic",function(e){n.args.selectedGraphic=null},{wait:0}),n.args.multiSelect=!1,n.args.selection={},n.args.selectedImage=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(r,i.View),n=r,(a=[{key:"selectGraphic",value:function(e){console.log(e),this.args.selectedGraphic=e}},{key:"select",value:function(e){Object.assign(this.args.selection,e),e.globalX!==e.startGlobalX||e.globalY!==e.startGlobalY?this.args.multiSelect=!0:this.args.multiSelect=!1,this.args.multiSelect||(this.args.selectedImages=this.args.map.getTile(e.globalX,e.globalY))}}])&&o(n.prototype,a),s&&o(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,s}()}),require.register("ui/controller.tmp.html",function(e,t,r){r.exports='<div class = "controller">\n\t<div class = "joystick" cv-on = "\n\t\ttouchstart:dragStick(event);\n\t\tmousedown:dragStick(event);\n\t">\n\t\t<div class = "pad" style = "position: relative; transform:translate([[x]]px,[[y]]px);"></div>\n\t</div>\n\n\t<div class = "button">A</div>\n\t<div class = "button">B</div>\n\t<div class = "button">C</div>\n</div>'}),require.register("ui/mapEditor.tmp.html",function(e,t,r){r.exports='<div class = "tab-page mapEditor">\n\t<div class = "tabs">\n\t\t<div>Tile</div>\n\t\t<div>Layer</div>\n\t\t<div>Object</div>\n\t\t<div>Trigger</div>\n\t\t<div>Map</div>\n\t</div>\n\n\t<div class = "tile">\n\t\t<div class = "selected">\n\t\t\t<div cv-if = "!multiSelect">\n\t\t\t\t<p style = "font-size: large">\n\t\t\t\t\t([[selection.globalX]], [[selection.globalY]])\n\t\t\t\t</p>\n\t\t\t\t<p cv-each = "selectedImages:selectedImage:sI">\n\t\t\t\t\t<button>-</button>\n\t\t\t\t\t<img class = "current" cv-attr = "src:selectedImage">\n\t\t\t\t</p>\n\t\t\t\t<button>+</button>\n\t\t\t</div>\n\t\t\t<div cv-if = "multiSelect">\n\t\t\t\t<p style = "font-size: large">\n\t\t\t\t\t([[selection.startGlobalX]], [[selection.startGlobalY]]) - ([[selection.globalX]], [[selection.globalY]])\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class = "tiles" cv-each = "tiles:tile:t">\n\t\t\t<img cv-attr = "src:tile,title:t" cv-on = "click:selectGraphic(t);">\n\t\t</div>\n\t</div>\n\t\x3c!-- <div class = "tile">OBJECT MODE</div>\n\t<div class = "tile">TRIGGER MODE</div>\n\t<div class = "tile">MAP MODE</div> --\x3e\n</div>'}),require.register("world/Actor.js",function(e,t,r){"use strict"}),require.register("world/Floor.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Floor=void 0;var n=t("../sprite/Sprite");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}e.Floor=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl2d=t,this.sprites=[],this.resize(9,9)},(t=[{key:"resize",value:function(e,t){this.width=e,this.height=t;for(var r=0;r<e;r++)for(var i=0;i<t;i++){var o=new n.Sprite(this.gl2d,"/floorTile.png");o.x=32*r,o.y=32*i,this.sprites.push(o)}}},{key:"draw",value:function(){this.sprites.map(function(e){return e.draw()})}}])&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()}),require.register("world/Map.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;var i=t("../sprite/SpriteSheet"),o=t("../inject/Injectable"),a=t("curvature/base/Bindable");function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function l(e,t,r){return t=c(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r))}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e.Map=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=l(this,t))[a.Bindable.Prevent]=!0,e.tiles={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,o.Injectable.inject({SpriteSheet:i.SpriteSheet})),r=t,(n=[{key:"getTile",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.tiles["".concat(e,",").concat(t,"--").concat(r)])return[this.SpriteSheet.getFrame(this.tiles["".concat(e,",").concat(t,"--").concat(r)])];return e%4==0&&t%4==0&&"cheese.png",-1===e&&-1===t?[this.SpriteSheet.getFrame("box_face.png")]:[this.SpriteSheet.getFrame("floorTile.png")]}},{key:"setTile",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.tiles["".concat(e,",").concat(t,"--").concat(n)]=r}},{key:"export",value:function(){console.log(JSON.stringify(this.tiles))}},{key:"import",value:function(e){e='{"-2,11":"lava_center_middle.png","-1,11":"lava_center_middle.png","0,11":"lava_center_middle.png"}',this.tiles=JSON.parse(e)}}])&&u(r.prototype,n),s&&u(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,s}()}),require.register("___globals___",function(e,t,r){})}(),require("___globals___");
