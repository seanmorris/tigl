{"version":3,"sources":["node_modules/curvature/base/Bag.js","node_modules/curvature/base/Bindable.js","node_modules/curvature/base/Cache.js","node_modules/curvature/base/Config.js","node_modules/curvature/base/Dom.js","node_modules/curvature/base/Mixin.js","node_modules/curvature/base/Router.js","node_modules/curvature/base/Routes.js","node_modules/curvature/base/RuleSet.js","node_modules/curvature/base/SetMap.js","node_modules/curvature/base/Tag.js","node_modules/curvature/base/Uuid.js","node_modules/curvature/base/View.js","node_modules/curvature/base/ViewList.js","node_modules/curvature/input/Keyboard.js","node_modules/curvature/mixin/EventTargetMixin.js","node_modules/curvature/mixin/PromiseMixin.js","app/Config.js","app/gl2d/Gl2d.js","app/home/View.js","app/home/view.tmp.html","app/initialize.js","app/inject/Container.js","app/inject/Injectable.js","app/inject/Single.js","app/input/Axis.js","app/input/Button.js","app/input/Controller.js","app/math/Geometry.js","app/math/Matrix.js","app/math/Quadtree.js","app/math/QuickTree.js","app/math/Ray.js","app/math/Rectangle.js","app/math/SMTree.js","app/math/Split.js","app/model/BalllController.js","app/model/BarrelController.js","app/model/Entity.js","app/model/InputManager.js","app/model/PlayerController.js","app/model/Spawner.js","app/overlay/overlay.frag","app/overlay/overlay.vert","app/session/Session.js","app/sprite/Camera.js","app/sprite/MapRenderer.js","app/sprite/Parallax.js","app/sprite/Sprite.js","app/sprite/SpriteBoard.js","app/sprite/SpriteSheet.js","app/sprite/TextureBank.js","app/sprite/Tileset.js","app/sprite/texture.frag","app/sprite/texture.vert","app/ui/OnScreenJoyPad.js","app/ui/onScreenJoyPad.tmp.html","app/world/EntityPallet.js","app/world/TileMap.js","app/world/World.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["Config","exports","_createClass","_classCallCheck","title","Program","_ref","gl","vertexShader","fragmentShader","uniforms","attributes","_defineProperty","context","program","createProgram","attachShader","linkProgram","detachShader","deleteShader","getProgramParameter","LINK_STATUS","console","error","getProgramInfoLog","deleteProgram","uniform","location","getUniformLocation","warn","attribute","getAttribLocation","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","buffers","key","value","use","useProgram","uniformF","name","_len","arguments","length","floats","Array","_key","uniformI","_len2","ints","_key2","Gl2d","element","document","createElement","getContext","createShader","extension","substring","lastIndexOf","type","toUpperCase","VERTEX_SHADER","FRAGMENT_SHADER","shader","source","require","shaderSource","compileShader","success","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","_ref2","createTexture","width","height","texture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","createFramebuffer","framebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","enableBlending","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","_View","_Camera","_OnScreenJoyPad","_Keyboard","_Session","_Config","a","n","TypeError","_defineProperties","e","r","t","o","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","prototype","i","_toPrimitive","Symbol","toPrimitive","call","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","_setPrototypeOf","Application","onScreenJoyPad","OnScreenJoyPad","keyboard","Keyboard","get","View","_BaseView","args","_this","window","smProfiling","template","routes","speed","maxSpeed","joypad","fps","sps","camX","camY","showEditor","listening","keys","bindTo","v","k","d","session","frameLock","simulationLock","zoom","onRendered","Session","tags","canvas","world","addEventListener","resize","fThen","sThen","simulate","now","hidden","toFixed","draw","requestAnimationFrame","Camera","x","y","spriteBoard","following","posX","sprite","posY","zoomLevel","body","clientHeight","setInterval","performance","oldScale","screenScale","clientWidth","rwidth","Math","trunc","rheight","scroll","event","delta","deltaY","BaseView","_Router","view","Router","listen","_","log","render","_Injectable2","Container","_Injectable","inject","injections","assign","Injectable","classes","objects","injection","test","instance","undefined","Error","existingInjections","_class","Single","random","single","Axis","_ref$deadZone","deadZone","_ref$proportional","proportional","tilt","magnitude","abs","sign","zero","Button","update","options","pressure","time","press","active","release","_Axis","_Button","map","fn","axisMap","buttonMap","buttonRemap","Controller","_ref$keys","_ref$gamepad","gamepad","_ref$keyboard","defineProperties","buttons","axes","button","willRumble","duration","strongMagnitude","weakMagnitude","id","match","stopVibing","vibrationActuator","playEffect","setTimeout","rumble","readInput","_ref3","_ref3$gamepads","gamepads","tilted","pressed","released","tookInput","Set","add","getKeyCode","keycode","buttonIds","isArray","buttonId","axis","inputId","axisId","axisMove","_ref4","slice","move","concreteId","abstractId","serialize","replay","input","buttonIsMapped","keyIsMapped","keyCode","Geometry","lineIntersectsLine","x1a","y1a","x2a","y2a","x1b","y1b","x2b","y2b","ax","ay","bx","by","crossProduct","cx","cy","Matrix","identity","translate","dx","dy","scale","rotate","theta","s","sin","c","cos","shearX","shearY","multiply","matA","matB","output","fill","j","composite","transform","points","matrix","point","row","push","Float32Array","filter","_Bindable","_Rectangle2","Quadtree","_Rectangle","x1","y1","x2","y2","minSize","parent","Bindable","Prevent","items","split","backMap","Map","ulCell","urCell","blCell","brCell","entity","contains","xSize","ySize","size","xSizeHalf","ySizeHalf","item","delete","set","has","startCell","cell","prune","isPrunable","findLeaf","_this$ulCell$findLeaf","select","w","h","xMax","yMax","dump","Rectangle","_Quadtree2","_superPropGet","p","_get","_superPropBase","getOwnPropertyDescriptor","hasOwnProperty","registry","WeakMap","QuickTree","_Quadtree","selectRect","result","deleteFromAllTrees","forEach","tree","_Geometry","Ray","cast","startX","startY","layerId","angle","maxDistance","rayFlags","DEFAULT_FLAGS","endX","endY","terrain","castTerrain","entities","castEntity","centerX","centerY","sizeX","max","sizeY","candidates","getEntitiesForRect","collisions","candidate","rect","toLines","intersection","existing","hypot","ceil","EPSILON","bs","ox","oy","sx","sy","currentDistance","getSolid","startTile","getCollisionTile","initMode","modeX","modeY","oldModeX","oldModeY","bf","checkX","checkY","rayX","rayY","solidsX","solidsY","logPoints","iterations","mag","px","py","round","ALL_POINTS","union","distSquares","pow","minDistSq","min","nearest","indexOf","sqrt","T_LAST_EMPTY","isOverlapping","other","isFlushWith","isInside","isOutside","toTriangles","dim","depthSymbol","Segment","start","end","prev","dimension","depth","rectangles","subTree","SMTree","at","RangeError","b","rectangle","rectMin","rectMax","freeze","empty","Infinity","isRectangle","object","segments","startIndex","findSegment","splitSegment","endIndex","splice","query","results","xStartIndex","xEndIndex","segment","yStartIndex","yEndIndex","index","splitSegments","lo","hi","current","floor","Split","intToBytes","bytes","bytesToInt","bytesToInt3","_Split","Uint8ClampedArray","Uint16Array","Uint32Array","BallController","onCreate","entityData","xSpeed","ySpeed","xMove","yMove","castTerrainRay","PI","actualDistance","BarrelController","grounded","ySpriteOffset","direction","atan2","distance","hit","castRay","_Sprite","Entity","controller","inputManager","_entityData$x","_entityData$y","_entityData$width","_entityData$height","Sprite","src","xSpriteOffset","fixFPE","destroy","InputManager","makeBindable","keyPress","keyRelease","triggers","_Ray","fireRegion","waterRegion","PlayerController","state","xDirection","xAxis","yAxis","changeAnimation","_SpriteSheet","_Entity2","ownKeys","getOwnPropertySymbols","_objectSpread","getOwnPropertyDescriptors","Spawner","_Entity","spawnType","spawnClass","spriteSheet","SpriteSheet","spriteImage","addEntity","removeEntity","_QuickTree","_SpriteBoard","_World","_Controller","_EntityPallet","_PlayerController","_BalllController","_BarrelController","EntityPallet","register","removed","WeakSet","paused","loaded","World","URL","href","SpriteBoard","ready","then","initialize","maps","properties","startId","startDef","entityDefs","playerClass","resolve","player","camera","sprites","getMapsForPoint","quadTree","navigator","getGamepads","visible","nearBy","getMapsForRect","MapRenderer","tileWidth","tileHeight","xOffset","yOffset","gl2d","tileMapping","tileTexture","parseInt","pixel","Uint8Array","tileSetWidth","tileSetHeight","pixels","negSafeMod","halfTileWidth","halfTileHeight","tilesWide","tilesHigh","xTile","xWorld","yTile","yWorld","xPos","yPos","drawProgram","activeTexture","TEXTURE2","TEXTURE3","tilePixelLayers","getSlice","tilePixels","setRectangle","drawBuffer","drawArrays","TRIANGLES","TEXTURE0","a_texCoord","bufferData","STATIC_DRAW","a_position","ParallaxLayer","Parallax","slices","parallaxLayers","textures","assemble","loadSlices","imageLayers","layerData","loadImage","image","_layerData$offsety","_layerData$parallaxx","layer","layerBottom","offsety","offset","parallax","parallaxx","REPEAT","Promise","all","ratio","imagePromises","accept","reject","Image","_Matrix","z","currentAnimation","moving","frames","currentDelay","currentFrame","currentFrames","RIGHT","DOWN","LEFT","UP","EAST","SOUTH","WEST","NORTH","region","getFrame","tileCount","animations","animation","textureId","tileid","effectBuffer","xOff","yOff","_MapRenderer","_Parallax","_Gl2d","currentMap","mouse","clickX","clickY","renderMode","colorLocation","u_color","tilePosLocation","u_tileNo","regionLocation","u_region","drawLayer","effectLayer","clientX","clientY","mapRenderers","nextParallax","visibleMaps","renderer","difference","viewport","clearColor","clear","COLOR_BUFFER_BIT","backgroundColor","color","substr","g","timeEnd","mr","sort","TEXTURE1","TEXTURE4","step","STREAM_DRAW","_Tileset2","_Tileset","tilesetData","default","willReadFrequently","processImage","tile","tiles","drawImage","frameId","columns","getImageData","data","Tileset","TextureBank","firstgid","imageheight","imagewidth","margin","spacing","tilecount","tileheight","tilewidth","firstGid","getReady","_await$await$fetch$js","fetch","json","onload","imageWidth","imageHeight","rows","_View2","dragStart","dragging","moveStick","dropStick","dragStick","pos","preventDefault","touches","xx","yy","limit","objectPallet","typeName","_Spawner","TileMap","fileName","emptyTiles","tilesIndexes","canvases","contexts","tileLayers","objectLayers","mapData","collisionLayers","layers","class","backgroundcolor","property","tilesets","spawn","tileTotal","reduce","destination","ctxDestination","tileset","ctxSource","xSource","ySource","xDestination","yDestination","putImageData","tileData","tileValues","ImageData","entityDef","spawner","getTileFromLayer","getColor","getPixel","tileNumber","offsetX","offsetY","tileSetX","tileSetY","localX","localY","tileX","tileY","values","_TileMap","_SMTree","mTree","rectMap","worldData","m","rects","solid","tilemaps","tilemap","castEntityRay","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","url","date","Date","toString","replace","browser","userAgent","toLowerCase","forceRepaint","reloaders","page","reload","stylesheet","querySelectorAll","link","val","getAttribute","offsetHeight","javascript","scripts","textScripts","script","text","srcScripts","onLoad","eval","remove","newScript","async","head","appendChild","port","host","server","hostname","connect","connection","onmessage","message","reloader","onerror","readyState","close","onclose"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACl0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;IC3CaA,MAAM,GAAAC,OAAA,CAAAD,MAAA,gBAAAE,YAAA,UAAAF,OAAA;EAAAG,eAAA,OAAAH,MAAA;AAAA;AAAG;AAEtBA,MAAM,CAACI,KAAK,GAAG,MAAM;AACrB;;;;;;;;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","file":"docs/app.js","sourcesContent":["\nrequire.register(\"curvature/base/Bag.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bag = void 0;\nvar _Bindable = require(\"./Bindable\");\nvar _Mixin = require(\"./Mixin\");\nvar _EventTargetMixin = require(\"../mixin/EventTargetMixin\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nvar toId = function toId(_int) {\n  return Number(_int);\n};\nvar fromId = function fromId(id) {\n  return parseInt(id);\n};\nvar Mapped = Symbol('Mapped');\nvar Has = Symbol('Has');\nvar Add = Symbol('Add');\nvar Remove = Symbol('Remove');\nvar Delete = Symbol('Delete');\nvar Bag = /*#__PURE__*/function (_Mixin$with) {\n  _inherits(Bag, _Mixin$with);\n  var _super = _createSuper(Bag);\n  function Bag() {\n    var _this;\n    var changeCallback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n    _classCallCheck(this, Bag);\n    _this = _super.call(this);\n    _this.changeCallback = changeCallback;\n    _this.content = new Map();\n    _this.current = 0;\n    _this.length = 0;\n    _this.list = _Bindable.Bindable.makeBindable([]);\n    _this.meta = Symbol('meta');\n    _this.type = undefined;\n    return _this;\n  }\n  _createClass(Bag, [{\n    key: \"has\",\n    value: function has(item) {\n      if (this[Mapped]) {\n        return this[Mapped].has(item);\n      }\n      return this[Has](item);\n    }\n  }, {\n    key: Has,\n    value: function value(item) {\n      return this.content.has(item);\n    }\n  }, {\n    key: \"add\",\n    value: function add(item) {\n      if (this[Mapped]) {\n        return this[Mapped].add(item);\n      }\n      return this[Add](item);\n    }\n  }, {\n    key: Add,\n    value: function value(item) {\n      if (item === undefined || !(item instanceof Object)) {\n        throw new Error('Only objects may be added to Bags.');\n      }\n      if (this.type && !(item instanceof this.type)) {\n        console.error(this.type, item);\n        throw new Error(\"Only objects of type \".concat(this.type, \" may be added to this Bag.\"));\n      }\n      item = _Bindable.Bindable.make(item);\n      if (this.content.has(item)) {\n        return;\n      }\n      var adding = new CustomEvent('adding', {\n        detail: {\n          item: item\n        }\n      });\n      if (!this.dispatchEvent(adding)) {\n        return;\n      }\n      var id = toId(this.current++);\n      this.content.set(item, id);\n      this.list[id] = item;\n      if (this.changeCallback) {\n        this.changeCallback(item, this.meta, Bag.ITEM_ADDED, id);\n      }\n      var add = new CustomEvent('added', {\n        detail: {\n          item: item,\n          id: id\n        }\n      });\n      this.dispatchEvent(add);\n      this.length = this.size;\n      return id;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(item) {\n      if (this[Mapped]) {\n        return this[Mapped].remove(item);\n      }\n      return this[Remove](item);\n    }\n  }, {\n    key: Remove,\n    value: function value(item) {\n      if (item === undefined || !(item instanceof Object)) {\n        throw new Error('Only objects may be removed from Bags.');\n      }\n      if (this.type && !(item instanceof this.type)) {\n        console.error(this.type, item);\n        throw new Error(\"Only objects of type \".concat(this.type, \" may be removed from this Bag.\"));\n      }\n      item = _Bindable.Bindable.make(item);\n      if (!this.content.has(item)) {\n        if (this.changeCallback) {\n          this.changeCallback(item, this.meta, 0, undefined);\n        }\n        return false;\n      }\n      var removing = new CustomEvent('removing', {\n        detail: {\n          item: item\n        }\n      });\n      if (!this.dispatchEvent(removing)) {\n        return;\n      }\n      var id = this.content.get(item);\n      delete this.list[id];\n      this.content[\"delete\"](item);\n      if (this.changeCallback) {\n        this.changeCallback(item, this.meta, Bag.ITEM_REMOVED, id);\n      }\n      var remove = new CustomEvent('removed', {\n        detail: {\n          item: item,\n          id: id\n        }\n      });\n      this.dispatchEvent(remove);\n      this.length = this.size;\n      return item;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(item) {\n      if (this[Mapped]) {\n        return this[Mapped][\"delete\"](item);\n      }\n      this[Delete](item);\n    }\n  }, {\n    key: Delete,\n    value: function value(item) {\n      this.remove(item);\n    }\n  }, {\n    key: \"map\",\n    value: function map() {\n      var mapper = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (x) {\n        return x;\n      };\n      var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (x) {\n        return x;\n      };\n      var mappedItems = new WeakMap();\n      var mappedBag = new Bag();\n      mappedBag[Mapped] = this;\n      this.addEventListener('added', function (event) {\n        var item = event.detail.item;\n        if (!filter(item)) {\n          return;\n        }\n        if (mappedItems.has(item)) {\n          return;\n        }\n        var mapped = mapper(item);\n        mappedItems.set(item, mapped);\n        mappedBag[Add](mapped);\n      });\n      this.addEventListener('removed', function (event) {\n        var item = event.detail.item;\n        if (!mappedItems.has(item)) {\n          return;\n        }\n        var mapped = mappedItems.get(item);\n        mappedItems[\"delete\"](item);\n        mappedBag[Remove](mapped);\n      });\n      return mappedBag;\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this.content.size;\n    }\n  }, {\n    key: \"items\",\n    value: function items() {\n      return Array.from(this.content.entries()).map(function (entry) {\n        return entry[0];\n      });\n    }\n  }]);\n  return Bag;\n}(_Mixin.Mixin[\"with\"](_EventTargetMixin.EventTargetMixin));\nexports.Bag = Bag;\nObject.defineProperty(Bag, 'ITEM_ADDED', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: 1\n});\nObject.defineProperty(Bag, 'ITEM_REMOVED', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: -1\n});\n  })();\n});","\nrequire.register(\"curvature/base/Bindable.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bindable = void 0;\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar Ref = Symbol('ref');\nvar Original = Symbol('original');\nvar Deck = Symbol('deck');\nvar Binding = Symbol('binding');\nvar SubBinding = Symbol('subBinding');\nvar BindingAll = Symbol('bindingAll');\nvar IsBindable = Symbol('isBindable');\nvar Wrapping = Symbol('wrapping');\nvar Names = Symbol('Names');\nvar Executing = Symbol('executing');\nvar Stack = Symbol('stack');\nvar ObjSymbol = Symbol('object');\nvar Wrapped = Symbol('wrapped');\nvar Unwrapped = Symbol('unwrapped');\nvar GetProto = Symbol('getProto');\nvar OnGet = Symbol('onGet');\nvar OnAllGet = Symbol('onAllGet');\nvar BindChain = Symbol('bindChain');\nvar Descriptors = Symbol('Descriptors');\nvar Before = Symbol('Before');\nvar After = Symbol('After');\nvar NoGetters = Symbol('NoGetters');\nvar TypedArray = Object.getPrototypeOf(Int8Array);\nvar SetIterator = Set.prototype[Symbol.iterator];\nvar MapIterator = Map.prototype[Symbol.iterator];\nvar win = globalThis;\nvar excludedClasses = [win.Node, win.File, win.Map, win.Set, win.WeakMap, win.WeakSet, win.ArrayBuffer, win.ResizeObserver, win.MutationObserver, win.PerformanceObserver, win.IntersectionObserver, win.IDBCursor, win.IDBCursorWithValue, win.IDBDatabase, win.IDBFactory, win.IDBIndex, win.IDBKeyRange, win.IDBObjectStore, win.IDBOpenDBRequest, win.IDBRequest, win.IDBTransaction, win.IDBVersionChangeEvent, win.Event, win.CustomEvent, win.FileSystemFileHandle].filter(function (x) {\n  return typeof x === 'function';\n});\nvar Bindable = /*#__PURE__*/function () {\n  function Bindable() {\n    _classCallCheck(this, Bindable);\n  }\n  _createClass(Bindable, null, [{\n    key: \"isBindable\",\n    value: function isBindable(object) {\n      if (!object || !object[IsBindable]) {\n        return false;\n      }\n      return object[IsBindable] === Bindable;\n    }\n  }, {\n    key: \"onDeck\",\n    value: function onDeck(object, key) {\n      return object[Deck][key] || false;\n    }\n  }, {\n    key: \"ref\",\n    value: function ref(object) {\n      return object[Ref] || object || false;\n    }\n  }, {\n    key: \"makeBindable\",\n    value: function makeBindable(object) {\n      return this.make(object);\n    }\n  }, {\n    key: \"shuck\",\n    value: function shuck(original, seen) {\n      seen = seen || new Map();\n      var clone = {};\n      if (original instanceof TypedArray || original instanceof ArrayBuffer) {\n        var _clone = original.slice(0);\n        seen.set(original, _clone);\n        return _clone;\n      }\n      var properties = Object.keys(original);\n      for (var i in properties) {\n        var ii = properties[i];\n        if (ii.substring(0, 3) === '___') {\n          continue;\n        }\n        var alreadyCloned = seen.get(original[ii]);\n        if (alreadyCloned) {\n          clone[ii] = alreadyCloned;\n          continue;\n        }\n        if (original[ii] === original) {\n          seen.set(original[ii], clone);\n          clone[ii] = clone;\n          continue;\n        }\n        if (original[ii] && _typeof(original[ii]) === 'object') {\n          var originalProp = original[ii];\n          if (Bindable.isBindable(original[ii])) {\n            originalProp = original[ii][Original];\n          }\n          clone[ii] = this.shuck(originalProp, seen);\n        } else {\n          clone[ii] = original[ii];\n        }\n        seen.set(original[ii], clone[ii]);\n      }\n      if (Bindable.isBindable(original)) {\n        delete clone.bindTo;\n        delete clone.isBound;\n      }\n      return clone;\n    }\n  }, {\n    key: \"make\",\n    value: function make(object) {\n      var _this = this;\n      if (!object || !['function', 'object'].includes(_typeof(object))) {\n        return object;\n      }\n      if (object[Ref]) {\n        return object[Ref];\n      }\n      if (object[IsBindable]) {\n        return object;\n      }\n      if (Object.isSealed(object) || Object.isFrozen(object) || !Object.isExtensible(object) || excludedClasses.filter(function (x) {\n        return object instanceof x;\n      }).length) {\n        return object;\n      }\n      Object.defineProperty(object, IsBindable, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: Bindable\n      });\n      Object.defineProperty(object, Ref, {\n        configurable: true,\n        enumerable: false,\n        writable: true,\n        value: false\n      });\n      Object.defineProperty(object, Original, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: object\n      });\n      Object.defineProperty(object, Deck, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: {}\n      });\n      Object.defineProperty(object, Binding, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: {}\n      });\n      Object.defineProperty(object, SubBinding, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: new Map()\n      });\n      Object.defineProperty(object, BindingAll, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, Executing, {\n        enumerable: false,\n        writable: true\n      });\n      Object.defineProperty(object, Wrapping, {\n        enumerable: false,\n        writable: true\n      });\n      Object.defineProperty(object, Stack, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, Before, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, After, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: []\n      });\n      Object.defineProperty(object, Wrapped, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: Object.preventExtensions(new Map())\n      });\n      Object.defineProperty(object, Unwrapped, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: {}\n      });\n      Object.defineProperty(object, Descriptors, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: Object.preventExtensions(new Map())\n      });\n      var bindTo = function bindTo(property) {\n        var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        var bindToAll = false;\n        if (Array.isArray(property)) {\n          var debinders = property.map(function (p) {\n            return bindTo(p, callback, options);\n          });\n          return function () {\n            return debinders.forEach(function (d) {\n              return d();\n            });\n          };\n        }\n        if (property instanceof Function) {\n          options = callback || {};\n          callback = property;\n          bindToAll = true;\n        }\n        if (options.delay >= 0) {\n          callback = _this.wrapDelayCallback(callback, options.delay);\n        }\n        if (options.throttle >= 0) {\n          callback = _this.wrapThrottleCallback(callback, options.throttle);\n        }\n        if (options.wait >= 0) {\n          callback = _this.wrapWaitCallback(callback, options.wait);\n        }\n        if (options.frame) {\n          callback = _this.wrapFrameCallback(callback, options.frame);\n        }\n        if (options.idle) {\n          callback = _this.wrapIdleCallback(callback);\n        }\n        if (bindToAll) {\n          var bindIndex = object[BindingAll].length;\n          object[BindingAll].push(callback);\n          if (!('now' in options) || options.now) {\n            for (var i in object) {\n              callback(object[i], i, object, false);\n            }\n          }\n          return function () {\n            delete object[BindingAll][bindIndex];\n          };\n        }\n        if (!object[Binding][property]) {\n          object[Binding][property] = new Set();\n        }\n\n        // let bindIndex = object[Binding][property].length;\n\n        if (options.children) {\n          var original = callback;\n          callback = function callback() {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n            var v = args[0];\n            var subDebind = object[SubBinding].get(original);\n            if (subDebind) {\n              object[SubBinding][\"delete\"](original);\n              subDebind();\n            }\n            if (_typeof(v) !== 'object') {\n              original.apply(void 0, args);\n              return;\n            }\n            var vv = Bindable.make(v);\n            if (Bindable.isBindable(vv)) {\n              object[SubBinding].set(original, vv.bindTo(function () {\n                for (var _len2 = arguments.length, subArgs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  subArgs[_key2] = arguments[_key2];\n                }\n                return original.apply(void 0, args.concat(subArgs));\n              }, Object.assign({}, options, {\n                children: false\n              })));\n            }\n            original.apply(void 0, args);\n          };\n        }\n        object[Binding][property].add(callback);\n        if (!('now' in options) || options.now) {\n          callback(object[property], property, object, false);\n        }\n        var debinder = function debinder() {\n          var subDebind = object[SubBinding].get(callback);\n          if (subDebind) {\n            object[SubBinding][\"delete\"](callback);\n            subDebind();\n          }\n          if (!object[Binding][property]) {\n            return;\n          }\n          if (!object[Binding][property].has(callback)) {\n            return;\n          }\n          object[Binding][property][\"delete\"](callback);\n        };\n        if (options.removeWith && options.removeWith instanceof View) {\n          options.removeWith.onRemove(function () {\n            return debinder;\n          });\n        }\n        return debinder;\n      };\n      Object.defineProperty(object, 'bindTo', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: bindTo\n      });\n      var ___before = function ___before(callback) {\n        var beforeIndex = object[Before].length;\n        object[Before].push(callback);\n        var cleaned = false;\n        return function () {\n          if (cleaned) {\n            return;\n          }\n          cleaned = true;\n          delete object[Before][beforeIndex];\n        };\n      };\n      var ___after = function ___after(callback) {\n        var afterIndex = object[After].length;\n        object[After].push(callback);\n        var cleaned = false;\n        return function () {\n          if (cleaned) {\n            return;\n          }\n          cleaned = true;\n          delete object[After][afterIndex];\n        };\n      };\n      Object.defineProperty(object, BindChain, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: function value(path, callback) {\n          var parts = path.split('.');\n          var node = parts.shift();\n          var subParts = parts.slice(0);\n          var debind = [];\n          debind.push(object.bindTo(node, function (v, k, t, d) {\n            var rest = subParts.join('.');\n            if (subParts.length === 0) {\n              callback(v, k, t, d);\n              return;\n            }\n            if (v === undefined) {\n              v = t[k] = _this.make({});\n            }\n            debind = debind.concat(v[BindChain](rest, callback));\n          }));\n          return function () {\n            return debind.forEach(function (x) {\n              return x();\n            });\n          };\n        }\n      });\n      Object.defineProperty(object, '___before', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: ___before\n      });\n      Object.defineProperty(object, '___after', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: ___after\n      });\n      var isBound = function isBound() {\n        for (var i in object[BindingAll]) {\n          if (object[BindingAll][i]) {\n            return true;\n          }\n        }\n        for (var _i in object[Binding]) {\n          var _iterator = _createForOfIteratorHelper(object[Binding][_i]),\n            _step;\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var callback = _step.value;\n              if (callback) {\n                return true;\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        }\n        return false;\n      };\n      Object.defineProperty(object, 'isBound', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: isBound\n      });\n      var _loop = function _loop(i) {\n        if (object[i] && object[i] instanceof Object && !object[i] instanceof Promise) {\n          if (!excludedClasses.filter(function (excludeClass) {\n            return object[i] instanceof excludeClass;\n          }).length && Object.isExtensible(object[i]) && !Object.isSealed(object[i])) {\n            object[i] = Bindable.make(object[i]);\n          }\n        }\n      };\n      for (var i in object) {\n        _loop(i);\n      }\n      var set = function set(target, key, value) {\n        if (wrapped.has(key)) {\n          wrapped[\"delete\"](key);\n        }\n        if (key === Original) {\n          return true;\n        }\n        var onDeck = object[Deck];\n\n        // if(onDeck[key] !== undefined && onDeck[key] === value)\n        if (key in onDeck && onDeck[key] === value) {\n          return true;\n        }\n        if (key.slice && key.slice(-3) === '___') {\n          return true;\n        }\n        if (target[key] === value || typeof value === 'number' && isNaN(onDeck[key]) && isNaN(value)) {\n          return true;\n        }\n        if (value && value instanceof Object) {\n          if (!excludedClasses.filter(function (x) {\n            return object instanceof x;\n          }).length && Object.isExtensible(object) && !Object.isSealed(object)) {\n            if (!object[NoGetters]) {}\n            value = Bindable.make(value);\n          }\n        }\n        onDeck[key] = value;\n        for (var _i2 in object[BindingAll]) {\n          if (!object[BindingAll][_i2]) {\n            continue;\n          }\n          object[BindingAll][_i2](value, key, target, false);\n        }\n        var stop = false;\n        if (key in object[Binding]) {\n          var _iterator2 = _createForOfIteratorHelper(object[Binding][key]),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var callback = _step2.value;\n              if (callback(value, key, target, false, target[key]) === false) {\n                stop = true;\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n        delete onDeck[key];\n        if (!stop) {\n          var descriptor = Object.getOwnPropertyDescriptor(target, key);\n          var excluded = target instanceof File && key == 'lastModifiedDate';\n          if (!excluded && (!descriptor || descriptor.writable) && target[key] === value) {\n            target[key] = value;\n          }\n        }\n        var result = Reflect.set(target, key, value);\n        if (Array.isArray(target) && object[Binding]['length']) {\n          for (var _i3 in object[Binding]['length']) {\n            var _callback = object[Binding]['length'][_i3];\n            _callback(target.length, 'length', target, false, target.length);\n          }\n        }\n        return result;\n      };\n      var deleteProperty = function deleteProperty(target, key) {\n        var onDeck = object[Deck];\n        if (onDeck[key] !== undefined) {\n          return true;\n        }\n        if (!(key in target)) {\n          return true;\n        }\n        if (descriptors.has(key)) {\n          var descriptor = descriptors.get(key);\n          if (descriptor && !descriptor.configurable) {\n            return false;\n          }\n          descriptors[\"delete\"](key);\n        }\n        onDeck[key] = null;\n        if (wrapped.has(key)) {\n          wrapped[\"delete\"](key);\n        }\n        for (var _i4 in object[BindingAll]) {\n          object[BindingAll][_i4](undefined, key, target, true, target[key]);\n        }\n        if (key in object[Binding]) {\n          var _iterator3 = _createForOfIteratorHelper(object[Binding][key]),\n            _step3;\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var binding = _step3.value;\n              binding(undefined, key, target, true, target[key]);\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n        }\n        delete onDeck[key];\n        delete target[key];\n        return true;\n      };\n      var construct = function construct(target, args) {\n        var key = 'constructor';\n        for (var _i5 in target[Before]) {\n          target[Before][_i5](target, key, object[Stack], undefined, args);\n        }\n        var instance = Bindable.make(_construct(target[Original], _toConsumableArray(args)));\n        for (var _i6 in target[After]) {\n          target[After][_i6](target, key, object[Stack], instance, args);\n        }\n        return instance;\n      };\n      var descriptors = object[Descriptors];\n      var wrapped = object[Wrapped];\n      var stack = object[Stack];\n      var get = function get(target, key) {\n        if (wrapped.has(key)) {\n          return wrapped.get(key);\n        }\n        if (key === Ref || key === Original || key === 'apply' || key === 'isBound' || key === 'bindTo' || key === '__proto__' || key === 'constructor') {\n          return object[key];\n        }\n        var descriptor;\n        if (descriptors.has(key)) {\n          descriptor = descriptors.get(key);\n        } else {\n          descriptor = Object.getOwnPropertyDescriptor(object, key);\n          descriptors.set(key, descriptor);\n        }\n        if (descriptor && !descriptor.configurable && !descriptor.writable) {\n          return object[key];\n        }\n        if (OnAllGet in object) {\n          return object[OnAllGet](key);\n        }\n        if (OnGet in object && !(key in object)) {\n          return object[OnGet](key);\n        }\n        if (descriptor && !descriptor.configurable && !descriptor.writable) {\n          wrapped.set(key, object[key]);\n          return object[key];\n        }\n        if (typeof object[key] === 'function') {\n          if (Names in object[key]) {\n            return object[key];\n          }\n          Object.defineProperty(object[Unwrapped], key, {\n            configurable: false,\n            enumerable: false,\n            writable: true,\n            value: object[key]\n          });\n          var prototype = Object.getPrototypeOf(object);\n          var isMethod = prototype[key] === object[key];\n          var objRef = typeof Promise === 'function' && object instanceof Promise || typeof Map === 'function' && object instanceof Map || typeof Set === 'function' && object instanceof Set || typeof MapIterator === 'function' && object.prototype === MapIterator || typeof SetIterator === 'function' && object.prototype === SetIterator || typeof SetIterator === 'function' && object.prototype === SetIterator || typeof WeakMap === 'function' && object instanceof WeakMap || typeof WeakSet === 'function' && object instanceof WeakSet || typeof Date === 'function' && object instanceof Date || typeof TypedArray === 'function' && object instanceof TypedArray || typeof ArrayBuffer === 'function' && object instanceof ArrayBuffer || typeof EventTarget === 'function' && object instanceof EventTarget || typeof ResizeObserver === 'function' && object instanceof ResizeObserver || typeof MutationObserver === 'function' && object instanceof MutationObserver || typeof PerformanceObserver === 'function' && object instanceof PerformanceObserver || typeof IntersectionObserver === 'function' && object instanceof IntersectionObserver || typeof object[Symbol.iterator] === 'function' && key === 'next' ? object : object[Ref];\n          var wrappedMethod = function wrappedMethod() {\n            object[Executing] = key;\n            stack.unshift(key);\n            for (var _len3 = arguments.length, providedArgs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n              providedArgs[_key3] = arguments[_key3];\n            }\n            var _iterator4 = _createForOfIteratorHelper(object[Before]),\n              _step4;\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                var beforeCallback = _step4.value;\n                beforeCallback(object, key, stack, object, providedArgs);\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n            var ret;\n            if (new.target) {\n              ret = _construct(object[Unwrapped][key], providedArgs);\n            } else {\n              var func = object[Unwrapped][key];\n              if (isMethod) {\n                ret = func.apply(objRef || object, providedArgs);\n              } else {\n                ret = func.apply(void 0, providedArgs);\n              }\n            }\n            var _iterator5 = _createForOfIteratorHelper(object[After]),\n              _step5;\n            try {\n              for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                var afterCallback = _step5.value;\n                afterCallback(object, key, stack, object, providedArgs);\n              }\n            } catch (err) {\n              _iterator5.e(err);\n            } finally {\n              _iterator5.f();\n            }\n            object[Executing] = null;\n            stack.shift();\n            return ret;\n          };\n          wrappedMethod[Names] = wrappedMethod[Names] || new WeakMap();\n          wrappedMethod[Names].set(object, key);\n          wrappedMethod[OnAllGet] = function (key) {\n            var selfName = wrappedMethod[Names].get(object);\n            return object[selfName][key];\n          };\n          var result = Bindable.make(wrappedMethod);\n          wrapped.set(key, result);\n          return result;\n        }\n        return object[key];\n      };\n      var getPrototypeOf = function getPrototypeOf(target) {\n        if (GetProto in object) {\n          return object[GetProto];\n        }\n        return Reflect.getPrototypeOf(target);\n      };\n      var handler = {\n        get: get,\n        set: set,\n        construct: construct,\n        getPrototypeOf: getPrototypeOf,\n        deleteProperty: deleteProperty\n      };\n      if (object[NoGetters]) {\n        delete handler.get;\n      }\n      Object.defineProperty(object, Ref, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: new Proxy(object, handler)\n      });\n      return object[Ref];\n    }\n  }, {\n    key: \"clearBindings\",\n    value: function clearBindings(object) {\n      var clearObj = function clearObj(o) {\n        return Object.keys(o).map(function (k) {\n          return delete o[k];\n        });\n      };\n      var maps = function maps(func) {\n        return function () {\n          for (var _len4 = arguments.length, os = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            os[_key4] = arguments[_key4];\n          }\n          return os.map(func);\n        };\n      };\n      var clearObjs = maps(clearObj);\n      clearObjs(object[Wrapped], object[Binding], object[BindingAll], object[After], object[Before]);\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(object, path) {\n      var owner = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var node;\n      var pathParts = path.split('.');\n      var top = pathParts[0];\n      while (pathParts.length) {\n        if (owner && pathParts.length === 1) {\n          var obj = this.make(object);\n          return [obj, pathParts.shift(), top];\n        }\n        node = pathParts.shift();\n        if (!node in object || !object[node] || !(object[node] instanceof Object)) {\n          object[node] = {};\n        }\n        object = this.make(object[node]);\n      }\n      return [this.make(object), node, top];\n    }\n  }, {\n    key: \"wrapDelayCallback\",\n    value: function wrapDelayCallback(callback, delay) {\n      return function () {\n        for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n          args[_key5] = arguments[_key5];\n        }\n        return setTimeout(function () {\n          return callback.apply(void 0, args);\n        }, delay);\n      };\n    }\n  }, {\n    key: \"wrapThrottleCallback\",\n    value: function wrapThrottleCallback(callback, throttle) {\n      var _this2 = this;\n      this.throttles.set(callback, false);\n      return function () {\n        if (_this2.throttles.get(callback, true)) {\n          return;\n        }\n        callback.apply(void 0, arguments);\n        _this2.throttles.set(callback, true);\n        setTimeout(function () {\n          _this2.throttles.set(callback, false);\n        }, throttle);\n      };\n    }\n  }, {\n    key: \"wrapWaitCallback\",\n    value: function wrapWaitCallback(callback, wait) {\n      var _this3 = this;\n      return function () {\n        for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          args[_key6] = arguments[_key6];\n        }\n        var waiter;\n        if (waiter = _this3.waiters.get(callback)) {\n          _this3.waiters[\"delete\"](callback);\n          clearTimeout(waiter);\n        }\n        waiter = setTimeout(function () {\n          return callback.apply(void 0, args);\n        }, wait);\n        _this3.waiters.set(callback, waiter);\n      };\n    }\n  }, {\n    key: \"wrapFrameCallback\",\n    value: function wrapFrameCallback(callback, frames) {\n      return function () {\n        for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n          args[_key7] = arguments[_key7];\n        }\n        requestAnimationFrame(function () {\n          return callback.apply(void 0, args);\n        });\n      };\n    }\n  }, {\n    key: \"wrapIdleCallback\",\n    value: function wrapIdleCallback(callback) {\n      return function () {\n        for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n          args[_key8] = arguments[_key8];\n        }\n        // Compatibility for Safari 08/2020\n        var req = window.requestIdleCallback || requestAnimationFrame;\n        req(function () {\n          return callback.apply(void 0, args);\n        });\n      };\n    }\n  }]);\n  return Bindable;\n}();\nexports.Bindable = Bindable;\n_defineProperty(Bindable, \"waiters\", new WeakMap());\n_defineProperty(Bindable, \"throttles\", new WeakMap());\nObject.defineProperty(Bindable, 'OnGet', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: OnGet\n});\nObject.defineProperty(Bindable, 'NoGetters', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: NoGetters\n});\nObject.defineProperty(Bindable, 'GetProto', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: GetProto\n});\nObject.defineProperty(Bindable, 'OnAllGet', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: OnAllGet\n});\n  })();\n});","\nrequire.register(\"curvature/base/Cache.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Cache = void 0;\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar Cache = /*#__PURE__*/function () {\n  function Cache() {\n    _classCallCheck(this, Cache);\n  }\n  _createClass(Cache, null, [{\n    key: \"store\",\n    value: function store(key, value, expiry) {\n      var bucket = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'standard';\n      var expiration = 0;\n      if (expiry) {\n        expiration = expiry * 1000 + new Date().getTime();\n      }\n      if (!this.buckets) {\n        this.buckets = new Map();\n      }\n      if (!this.buckets.has(bucket)) {\n        this.buckets.set(bucket, new Map());\n      }\n      var eventEnd = new CustomEvent('cvCacheStore', {\n        cancelable: true,\n        detail: {\n          key: key,\n          value: value,\n          expiry: expiry,\n          bucket: bucket\n        }\n      });\n      if (document.dispatchEvent(eventEnd)) {\n        this.buckets.get(bucket).set(key, {\n          value: value,\n          expiration: expiration\n        });\n      }\n    }\n  }, {\n    key: \"load\",\n    value: function load(key) {\n      var defaultvalue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var bucket = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'standard';\n      var eventEnd = new CustomEvent('cvCacheLoad', {\n        cancelable: true,\n        detail: {\n          key: key,\n          defaultvalue: defaultvalue,\n          bucket: bucket\n        }\n      });\n      if (!document.dispatchEvent(eventEnd)) {\n        return defaultvalue;\n      }\n      if (this.buckets && this.buckets.has(bucket) && this.buckets.get(bucket).has(key)) {\n        var entry = this.buckets.get(bucket).get(key);\n        // console.log(this.bucket[bucket][key].expiration, (new Date).getTime());\n        if (entry.expiration === 0 || entry.expiration > new Date().getTime()) {\n          return this.buckets.get(bucket).get(key).value;\n        }\n      }\n      return defaultvalue;\n    }\n  }]);\n  return Cache;\n}();\nexports.Cache = Cache;\n  })();\n});","\nrequire.register(\"curvature/base/Config.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Config = void 0;\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar AppConfig = {};\nvar _require = require;\ntry {\n  AppConfig = _require('/Config').Config || {};\n} catch (error) {\n  globalThis.devMode === true && console.error(error);\n}\nvar Config = /*#__PURE__*/function () {\n  function Config() {\n    _classCallCheck(this, Config);\n  }\n  _createClass(Config, null, [{\n    key: \"get\",\n    value: function get(name) {\n      return this.configs[name];\n    }\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this.configs[name] = value;\n      return this;\n    }\n  }, {\n    key: \"dump\",\n    value: function dump() {\n      return this.configs;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      for (var _len = arguments.length, configs = new Array(_len), _key = 0; _key < _len; _key++) {\n        configs[_key] = arguments[_key];\n      }\n      for (var i in configs) {\n        var config = configs[i];\n        if (typeof config === 'string') {\n          config = JSON.parse(config);\n        }\n        for (var name in config) {\n          var value = config[name];\n          return this.configs[name] = value;\n        }\n      }\n      return this;\n    }\n  }]);\n  return Config;\n}();\nexports.Config = Config;\nObject.defineProperty(Config, 'configs', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: AppConfig\n});\n  })();\n});","\nrequire.register(\"curvature/base/Dom.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dom = void 0;\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar traversals = 0;\nvar Dom = /*#__PURE__*/function () {\n  function Dom() {\n    _classCallCheck(this, Dom);\n  }\n  _createClass(Dom, null, [{\n    key: \"mapTags\",\n    value: function mapTags(doc, selector, callback, startNode, endNode) {\n      var result = [];\n      var started = true;\n      if (startNode) {\n        started = false;\n      }\n      var ended = false;\n      var treeWalker = document.createTreeWalker(doc, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT, {\n        acceptNode: function acceptNode(node, walker) {\n          if (!started) {\n            if (node === startNode) {\n              started = true;\n            } else {\n              return NodeFilter.FILTER_SKIP;\n            }\n          }\n          if (endNode && node === endNode) {\n            ended = true;\n          }\n          if (ended) {\n            return NodeFilter.FILTER_SKIP;\n          }\n          if (selector) {\n            if (node instanceof Element) {\n              if (node.matches(selector)) {\n                return NodeFilter.FILTER_ACCEPT;\n              }\n            }\n            return NodeFilter.FILTER_SKIP;\n          }\n          return NodeFilter.FILTER_ACCEPT;\n        }\n      }, false);\n      var traversal = traversals++;\n      while (treeWalker.nextNode()) {\n        result.push(callback(treeWalker.currentNode, treeWalker));\n      }\n      return result;\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(doc, event) {\n      doc.dispatchEvent(event);\n      Dom.mapTags(doc, false, function (node) {\n        node.dispatchEvent(event);\n      });\n    }\n  }]);\n  return Dom;\n}();\nexports.Dom = Dom;\n  })();\n});","\nrequire.register(\"curvature/base/Mixin.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Mixin = void 0;\nvar _Bindable = require(\"./Bindable\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar Constructor = Symbol('constructor');\nvar MixinList = Symbol('mixinList');\nvar Mixin = /*#__PURE__*/function () {\n  function Mixin() {\n    _classCallCheck(this, Mixin);\n  }\n  _createClass(Mixin, null, [{\n    key: \"from\",\n    value: function from(baseClass) {\n      for (var _len = arguments.length, mixins = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        mixins[_key - 1] = arguments[_key];\n      }\n      var newClass = /*#__PURE__*/function (_baseClass) {\n        _inherits(newClass, _baseClass);\n        var _super = _createSuper(newClass);\n        function newClass() {\n          var _this;\n          _classCallCheck(this, newClass);\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          var instance = baseClass.constructor ? _this = _super.call.apply(_super, [this].concat(args)) : null;\n          var _iterator = _createForOfIteratorHelper(mixins),\n            _step;\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var mixin = _step.value;\n              if (mixin[Mixin.Constructor]) {\n                mixin[Mixin.Constructor].apply(_assertThisInitialized(_this));\n              }\n              switch (_typeof(mixin)) {\n                case 'function':\n                  Mixin.mixClass(mixin, newClass);\n                  break;\n                case 'object':\n                  Mixin.mixObject(mixin, _assertThisInitialized(_this));\n                  break;\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n          return _possibleConstructorReturn(_this, instance);\n        }\n        return _createClass(newClass);\n      }(baseClass);\n      return newClass;\n    }\n  }, {\n    key: \"make\",\n    value: function make() {\n      for (var _len3 = arguments.length, classes = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        classes[_key3] = arguments[_key3];\n      }\n      var base = classes.pop();\n      return Mixin.to.apply(Mixin, [base].concat(classes));\n    }\n  }, {\n    key: \"to\",\n    value: function to(base) {\n      var descriptors = {};\n      for (var _len4 = arguments.length, mixins = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        mixins[_key4 - 1] = arguments[_key4];\n      }\n      mixins.map(function (mixin) {\n        switch (_typeof(mixin)) {\n          case 'object':\n            Object.assign(descriptors, Object.getOwnPropertyDescriptors(mixin));\n            break;\n          case 'function':\n            Object.assign(descriptors, Object.getOwnPropertyDescriptors(mixin.prototype));\n            break;\n        }\n        delete descriptors.constructor;\n        Object.defineProperties(base.prototype, descriptors);\n      });\n    }\n  }, {\n    key: \"with\",\n    value: function _with() {\n      for (var _len5 = arguments.length, mixins = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        mixins[_key5] = arguments[_key5];\n      }\n      return this.from.apply(this, [/*#__PURE__*/function () {\n        function _class() {\n          _classCallCheck(this, _class);\n        }\n        return _createClass(_class);\n      }()].concat(mixins));\n    }\n  }, {\n    key: \"mixObject\",\n    value: function mixObject(mixin, instance) {\n      var _iterator2 = _createForOfIteratorHelper(Object.getOwnPropertyNames(mixin)),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var func = _step2.value;\n          if (typeof mixin[func] === 'function') {\n            instance[func] = mixin[func].bind(instance);\n            continue;\n          }\n          instance[func] = mixin[func];\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      var _iterator3 = _createForOfIteratorHelper(Object.getOwnPropertySymbols(mixin)),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _func = _step3.value;\n          if (typeof mixin[_func] === 'function') {\n            instance[_func] = mixin[_func].bind(instance);\n            continue;\n          }\n          instance[_func] = mixin[_func];\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"mixClass\",\n    value: function mixClass(cls, newClass) {\n      var _iterator4 = _createForOfIteratorHelper(Object.getOwnPropertyNames(cls.prototype)),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var func = _step4.value;\n          if (['name', 'prototype', 'length'].includes(func)) {\n            continue;\n          }\n          var descriptor = Object.getOwnPropertyDescriptor(newClass, func);\n          if (descriptor && !descriptor.writable) {\n            continue;\n          }\n          if (typeof cls[func] !== 'function') {\n            newClass.prototype[func] = cls.prototype[func];\n            continue;\n          }\n          newClass.prototype[func] = cls.prototype[func].bind(newClass.prototype);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      var _iterator5 = _createForOfIteratorHelper(Object.getOwnPropertySymbols(cls.prototype)),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _func2 = _step5.value;\n          if (typeof cls[_func2] !== 'function') {\n            newClass.prototype[_func2] = cls.prototype[_func2];\n            continue;\n          }\n          newClass.prototype[_func2] = cls.prototype[_func2].bind(newClass.prototype);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      var _iterator6 = _createForOfIteratorHelper(Object.getOwnPropertyNames(cls)),\n        _step6;\n      try {\n        var _loop = function _loop() {\n          var func = _step6.value;\n          if (['name', 'prototype', 'length'].includes(func)) {\n            return \"continue\";\n          }\n          var descriptor = Object.getOwnPropertyDescriptor(newClass, func);\n          if (descriptor && !descriptor.writable) {\n            return \"continue\";\n          }\n          if (typeof cls[func] !== 'function') {\n            newClass[func] = cls[func];\n            return \"continue\";\n          }\n          var prev = newClass[func] || false;\n          var meth = cls[func].bind(newClass);\n          newClass[func] = function () {\n            prev && prev.apply(void 0, arguments);\n            return meth.apply(void 0, arguments);\n          };\n        };\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _ret = _loop();\n          if (_ret === \"continue\") continue;\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n      var _iterator7 = _createForOfIteratorHelper(Object.getOwnPropertySymbols(cls)),\n        _step7;\n      try {\n        var _loop2 = function _loop2() {\n          var func = _step7.value;\n          if (typeof cls[func] !== 'function') {\n            newClass.prototype[func] = cls[func];\n            return \"continue\";\n          }\n          var prev = newClass[func] || false;\n          var meth = cls[func].bind(newClass);\n          newClass[func] = function () {\n            prev && prev.apply(void 0, arguments);\n            return meth.apply(void 0, arguments);\n          };\n        };\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var _ret2 = _loop2();\n          if (_ret2 === \"continue\") continue;\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n    }\n  }, {\n    key: \"mix\",\n    value: function mix(mixinTo) {\n      var constructors = [];\n      var allStatic = {};\n      var allInstance = {};\n      var mixable = _Bindable.Bindable.makeBindable(mixinTo);\n      var _loop3 = function _loop3(base) {\n        var instanceNames = Object.getOwnPropertyNames(base.prototype);\n        var staticNames = Object.getOwnPropertyNames(base);\n        var prefix = /^(before|after)__(.+)/;\n        var _iterator8 = _createForOfIteratorHelper(staticNames),\n          _step8;\n        try {\n          var _loop5 = function _loop5() {\n            var methodName = _step8.value;\n            var match = methodName.match(prefix);\n            if (match) {\n              switch (match[1]) {\n                case 'before':\n                  mixable.___before(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n                    var method = base[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n                  break;\n                case 'after':\n                  mixable.___after(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n                    var method = base[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n                  break;\n              }\n              return \"continue\";\n            }\n            if (allStatic[methodName]) {\n              return \"continue\";\n            }\n            if (typeof base[methodName] !== 'function') {\n              return \"continue\";\n            }\n            allStatic[methodName] = base[methodName];\n          };\n          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n            var _ret3 = _loop5();\n            if (_ret3 === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator8.e(err);\n        } finally {\n          _iterator8.f();\n        }\n        var _iterator9 = _createForOfIteratorHelper(instanceNames),\n          _step9;\n        try {\n          var _loop6 = function _loop6() {\n            var methodName = _step9.value;\n            var match = methodName.match(prefix);\n            if (match) {\n              switch (match[1]) {\n                case 'before':\n                  mixable.___before(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n                    var method = base.prototype[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n                  break;\n                case 'after':\n                  mixable.___after(function (t, e, s, o, a) {\n                    if (e !== match[2]) {\n                      return;\n                    }\n                    var method = base.prototype[methodName].bind(o);\n                    return method.apply(void 0, _toConsumableArray(a));\n                  });\n                  break;\n              }\n              return \"continue\";\n            }\n            if (allInstance[methodName]) {\n              return \"continue\";\n            }\n            if (typeof base.prototype[methodName] !== 'function') {\n              return \"continue\";\n            }\n            allInstance[methodName] = base.prototype[methodName];\n          };\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var _ret4 = _loop6();\n            if (_ret4 === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n      };\n      for (var base = this; base && base.prototype; base = Object.getPrototypeOf(base)) {\n        _loop3(base);\n      }\n      for (var methodName in allStatic) {\n        mixinTo[methodName] = allStatic[methodName].bind(mixinTo);\n      }\n      var _loop4 = function _loop4(_methodName) {\n        mixinTo.prototype[_methodName] = function () {\n          for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            args[_key6] = arguments[_key6];\n          }\n          return allInstance[_methodName].apply(this, args);\n        };\n      };\n      for (var _methodName in allInstance) {\n        _loop4(_methodName);\n      }\n      return mixable;\n    }\n  }]);\n  return Mixin;\n}();\nexports.Mixin = Mixin;\nMixin.Constructor = Constructor;\n  })();\n});","\nrequire.register(\"curvature/base/Router.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Router = void 0;\nvar _View = require(\"./View\");\nvar _Cache = require(\"./Cache\");\nvar _Config = require(\"./Config\");\nvar _Routes = require(\"./Routes\");\nvar _globalThis$CustomEve;\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar NotFoundError = Symbol('NotFound');\nvar InternalError = Symbol('Internal');\nglobalThis.CustomEvent = (_globalThis$CustomEve = globalThis.CustomEvent) !== null && _globalThis$CustomEve !== void 0 ? _globalThis$CustomEve : globalThis.Event;\nvar Router = /*#__PURE__*/function () {\n  function Router() {\n    _classCallCheck(this, Router);\n  }\n  _createClass(Router, null, [{\n    key: \"wait\",\n    value: function wait(view) {\n      var _this = this;\n      var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'DOMContentLoaded';\n      var node = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document;\n      node.addEventListener(event, function () {\n        _this.listen(view);\n      });\n    }\n  }, {\n    key: \"listen\",\n    value: function listen(listener) {\n      var _this2 = this;\n      var routes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      this.listener = listener || this.listener;\n      this.routes = routes || listener.routes;\n      Object.assign(this.query, this.queryOver({}));\n      var listen = function listen(event) {\n        event.preventDefault();\n        if (event.state && 'routedId' in event.state) {\n          if (event.state.routedId <= _this2.routeCount) {\n            _this2.history.splice(event.state.routedId);\n            _this2.routeCount = event.state.routedId;\n          } else if (event.state.routedId > _this2.routeCount) {\n            _this2.history.push(event.state.prev);\n            _this2.routeCount = event.state.routedId;\n          }\n          _this2.state = event.state;\n        } else {\n          if (_this2.prevPath !== null && _this2.prevPath !== location.pathname) {\n            _this2.history.push(_this2.prevPath);\n          }\n        }\n        if (location.origin !== 'null') {\n          _this2.match(location.pathname, listener);\n        } else {\n          _this2.match(_this2.nextPath, listener);\n        }\n      };\n      window.addEventListener('cvUrlChanged', listen);\n      window.addEventListener('popstate', listen);\n      var route = location.origin !== 'null' ? location.pathname + location.search : false;\n      if (location.origin && location.hash) {\n        route += location.hash;\n      }\n      var state = {\n        routedId: this.routeCount,\n        url: location.pathname,\n        prev: this.prevPath\n      };\n      if (location.origin !== 'null') {\n        history.replaceState(state, null, location.pathname);\n      }\n      this.go(route !== false ? route : '/');\n    }\n  }, {\n    key: \"go\",\n    value: function go(path) {\n      var silent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var configTitle = _Config.Config.get('title');\n      if (configTitle) {\n        document.title = configTitle;\n      }\n      var state = {\n        routedId: this.routeCount,\n        prev: this.prevPath,\n        url: location.pathname\n      };\n      if (silent === -1) {\n        this.match(path, this.listener, true);\n      } else if (location.origin === 'null') {\n        this.nextPath = path;\n      } else if (silent === 2 && location.pathname !== path) {\n        history.replaceState(state, null, path);\n      } else if (location.pathname !== path) {\n        history.pushState(state, null, path);\n      }\n      if (!silent || silent < 0) {\n        if (silent === false) {\n          this.path = null;\n        }\n        if (!silent) {\n          if (path.substring(0, 1) === '#') {\n            window.dispatchEvent(new HashChangeEvent('hashchange'));\n          } else {\n            window.dispatchEvent(new CustomEvent('cvUrlChanged'));\n          }\n        }\n      }\n      this.prevPath = path;\n    }\n  }, {\n    key: \"processRoute\",\n    value: function processRoute(routes, selected, args) {\n      var result = false;\n      if (typeof routes[selected] === 'function') {\n        if (routes[selected].prototype instanceof _View.View) {\n          result = new routes[selected](args);\n        } else {\n          result = routes[selected](args);\n        }\n      } else {\n        result = routes[selected];\n      }\n      return result;\n    }\n  }, {\n    key: \"handleError\",\n    value: function handleError(error, routes, selected, args, listener, path, prev, forceRefresh) {\n      console.error(error);\n      if (typeof document !== 'undefined') {\n        document.dispatchEvent(new CustomEvent('cvRouteError', {\n          detail: {\n            error: error,\n            path: path,\n            prev: prev,\n            view: listener,\n            routes: routes,\n            selected: selected\n          }\n        }));\n      }\n      var result = globalThis['devMode'] ? 'Unexpected error: ' + String(error) : 'Unexpected error.';\n      if (routes[InternalError]) {\n        args[InternalError] = error;\n        result = this.processRoute(routes, InternalError, args);\n      }\n      this.update(listener, path, result, routes, selected, args, forceRefresh);\n    }\n  }, {\n    key: \"match\",\n    value: function match(path, listener) {\n      var _this3 = this;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var event = null,\n        request = null,\n        forceRefresh = false;\n      if (options === true) {\n        forceRefresh = options;\n      }\n      if (options && _typeof(options) === 'object') {\n        forceRefresh = options.forceRefresh;\n        event = options.event;\n      }\n      if (typeof document !== 'undefined' && this.path === path && !forceRefresh) {\n        return;\n      }\n      var origin = 'http://example.com';\n      if (typeof document !== 'undefined') {\n        origin = location.origin !== \"null\" ? location.origin : origin;\n        this.queryString = location.search;\n      }\n      var url = new URL(path, origin);\n      path = this.path = url.pathname;\n      if (typeof document === 'undefined') {\n        this.queryString = url.search;\n      }\n      var prev = this.prevPath;\n      var current = listener && listener.args ? listener.args.content : null;\n      var routes = this.routes || listener && listener.routes || _Routes.Routes.dump();\n      var query = new URLSearchParams(this.queryString);\n      if (event && event.request) {\n        this.request = event.request;\n      }\n      for (var key in Object.keys(this.query)) {\n        delete this.query[key];\n      }\n      var _iterator = _createForOfIteratorHelper(query),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n            _key = _step$value[0],\n            value = _step$value[1];\n          this.query[_key] = value;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var args = {},\n        selected = false,\n        result = '';\n      if (path.substring(0, 1) === '/') {\n        path = path.substring(1);\n      }\n      path = path.split('/');\n      for (var i in this.query) {\n        args[i] = this.query[i];\n      }\n      L1: for (var _i in routes) {\n        var route = _i.split('/');\n        if (route.length < path.length && route[route.length - 1] !== '*') {\n          continue;\n        }\n        L2: for (var j in route) {\n          if (route[j].substr(0, 1) == '%') {\n            var argName = null;\n            var groups = /^%(\\w+)\\??/.exec(route[j]);\n            if (groups && groups[1]) {\n              argName = groups[1];\n            }\n            if (!argName) {\n              throw new Error(\"\".concat(route[j], \" is not a valid argument segment in route \\\"\").concat(_i, \"\\\"\"));\n            }\n            if (!path[j]) {\n              if (route[j].substr(route[j].length - 1, 1) == '?') {\n                args[argName] = '';\n              } else {\n                continue L1;\n              }\n            } else {\n              args[argName] = path[j];\n            }\n          } else if (route[j] !== '*' && path[j] !== route[j]) {\n            continue L1;\n          }\n        }\n        selected = _i;\n        result = routes[_i];\n        if (route[route.length - 1] === '*') {\n          args.pathparts = path.slice(route.length - 1);\n        }\n        break;\n      }\n      var eventStart = new CustomEvent('cvRouteStart', {\n        cancelable: true,\n        detail: {\n          path: path,\n          prev: prev,\n          root: listener,\n          selected: selected,\n          routes: routes\n        }\n      });\n      if (typeof document !== 'undefined') {\n        if (!document.dispatchEvent(eventStart)) {\n          return;\n        }\n      }\n      if (!forceRefresh && listener && current && result instanceof Object && current instanceof result && !(result instanceof Promise) && current.update(args)) {\n        listener.args.content = current;\n        return true;\n      }\n      if (!(selected in routes)) {\n        routes[selected] = routes[NotFoundError];\n      }\n      try {\n        result = this.processRoute(routes, selected, args);\n        if (result === false) {\n          result = this.processRoute(routes, NotFoundError, args);\n        }\n        if (!(result instanceof Promise)) {\n          result = Promise.resolve(result);\n\n          // return this.update(\n          // \tlistener\n          // \t, path\n          // \t, result\n          // \t, routes\n          // \t, selected\n          // \t, args\n          // \t, forceRefresh\n          // );\n        }\n\n        if (typeof document === 'undefined') {\n          return result;\n        }\n        return result.then(function (realResult) {\n          _this3.update(listener, path, realResult, routes, selected, args, forceRefresh);\n        })[\"catch\"](function (error) {\n          _this3.handleError(error, routes, selected, args, listener, path, prev, forceRefresh);\n        });\n      } catch (error) {\n        this.handleError(error, routes, selected, args, listener, path, prev, forceRefresh);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(listener, path, result, routes, selected, args, forceRefresh) {\n      if (!listener) {\n        return;\n      }\n      var prev = this.prevPath;\n      var event = new CustomEvent('cvRoute', {\n        cancelable: true,\n        detail: {\n          result: result,\n          path: path,\n          prev: prev,\n          view: listener,\n          routes: routes,\n          selected: selected\n        }\n      });\n      if (result !== false) {\n        if (listener.args.content instanceof _View.View) {\n          listener.args.content.pause(true);\n          listener.args.content.remove();\n        }\n        if (document.dispatchEvent(event)) {\n          listener.args.content = result;\n        }\n        if (result instanceof _View.View) {\n          result.pause(false);\n          result.update(args, forceRefresh);\n        }\n      }\n      var eventEnd = new CustomEvent('cvRouteEnd', {\n        cancelable: true,\n        detail: {\n          result: result,\n          path: path,\n          prev: prev,\n          view: listener,\n          routes: routes,\n          selected: selected\n        }\n      });\n      document.dispatchEvent(eventEnd);\n    }\n  }, {\n    key: \"queryOver\",\n    value: function queryOver() {\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var params = new URLSearchParams(location.search);\n      var finalArgs = {};\n      var query = {};\n      var _iterator2 = _createForOfIteratorHelper(params),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var pair = _step2.value;\n          query[pair[0]] = pair[1];\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      finalArgs = Object.assign(finalArgs, query, args);\n      delete finalArgs['api'];\n      return finalArgs;\n\n      // for(let i in query)\n      // {\n      // \tfinalArgs[i] = query[i];\n      // }\n\n      // for(let i in args)\n      // {\n      // \tfinalArgs[i] = args[i];\n      // }\n    }\n  }, {\n    key: \"queryToString\",\n    value: function queryToString() {\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var fresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var parts = [],\n        finalArgs = args;\n      if (!fresh) {\n        finalArgs = this.queryOver(args);\n      }\n      for (var i in finalArgs) {\n        if (finalArgs[i] === '') {\n          continue;\n        }\n        parts.push(i + '=' + encodeURIComponent(finalArgs[i]));\n      }\n      return parts.join('&');\n    }\n  }, {\n    key: \"setQuery\",\n    value: function setQuery(name, value, silent) {\n      var args = this.queryOver();\n      args[name] = value;\n      if (value === undefined) {\n        delete args[name];\n      }\n      var queryString = this.queryToString(args, true);\n      this.go(location.pathname + (queryString ? '?' + queryString : '?'), silent);\n    }\n  }]);\n  return Router;\n}();\nexports.Router = Router;\nObject.defineProperty(Router, 'query', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: {}\n});\nObject.defineProperty(Router, 'history', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: []\n});\nObject.defineProperty(Router, 'routeCount', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: 0\n});\nObject.defineProperty(Router, 'prevPath', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: null\n});\nObject.defineProperty(Router, 'queryString', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: null\n});\nObject.defineProperty(Router, 'InternalError', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: InternalError\n});\nObject.defineProperty(Router, 'NotFoundError', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: NotFoundError\n});\n  })();\n});","\nrequire.register(\"curvature/base/Routes.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Routes = void 0;\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar AppRoutes = {};\nvar _require = require;\nvar imported = false;\nvar runImport = function runImport() {\n  if (imported) {\n    return;\n  }\n  ;\n  try {\n    Object.assign(AppRoutes, _require('Routes').Routes || {});\n  } catch (error) {\n    globalThis.devMode === true && console.warn(error);\n  }\n  imported = true;\n};\nvar Routes = /*#__PURE__*/function () {\n  function Routes() {\n    _classCallCheck(this, Routes);\n  }\n  _createClass(Routes, null, [{\n    key: \"get\",\n    value: function get(name) {\n      runImport();\n      return this.routes[name];\n    }\n  }, {\n    key: \"dump\",\n    value: function dump() {\n      runImport();\n      return this.routes;\n    }\n  }]);\n  return Routes;\n}();\nexports.Routes = Routes;\nObject.defineProperty(Routes, 'routes', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: AppRoutes\n});\n  })();\n});","\nrequire.register(\"curvature/base/RuleSet.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RuleSet = void 0;\nvar _Dom = require(\"./Dom\");\nvar _Tag = require(\"./Tag\");\nvar _View = require(\"./View\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar RuleSet = /*#__PURE__*/function () {\n  function RuleSet() {\n    _classCallCheck(this, RuleSet);\n  }\n  _createClass(RuleSet, [{\n    key: \"add\",\n    value: function add(selector, callback) {\n      this.rules = this.rules || {};\n      this.rules[selector] = this.rules[selector] || [];\n      this.rules[selector].push(callback);\n      return this;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply() {\n      var doc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n      var view = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      RuleSet.apply(doc, view);\n      for (var selector in this.rules) {\n        for (var i in this.rules[selector]) {\n          var callback = this.rules[selector][i];\n          var wrapped = RuleSet.wrap(doc, callback, view);\n          var nodes = doc.querySelectorAll(selector);\n          var _iterator = _createForOfIteratorHelper(nodes),\n            _step;\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var node = _step.value;\n              wrapped(node);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"purge\",\n    value: function purge() {\n      if (!this.rules) {\n        return;\n      }\n      for (var _i = 0, _Object$entries = Object.entries(this.rules); _i < _Object$entries.length; _i++) {\n        var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n          k = _Object$entries$_i[0],\n          v = _Object$entries$_i[1];\n        if (!this.rules[k]) {\n          continue;\n        }\n        for (var kk in this.rules[k]) {\n          delete this.rules[k][kk];\n        }\n      }\n    }\n  }], [{\n    key: \"add\",\n    value: function add(selector, callback) {\n      this.globalRules = this.globalRules || {};\n      this.globalRules[selector] = this.globalRules[selector] || [];\n      this.globalRules[selector].push(callback);\n      return this;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply() {\n      var doc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n      var view = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      for (var selector in this.globalRules) {\n        for (var i in this.globalRules[selector]) {\n          var callback = this.globalRules[selector][i];\n          var wrapped = this.wrap(doc, callback, view);\n          var nodes = doc.querySelectorAll(selector);\n          var _iterator2 = _createForOfIteratorHelper(nodes),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var node = _step2.value;\n              wrapped(node);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"wait\",\n    value: function wait() {\n      var _this = this;\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'DOMContentLoaded';\n      var node = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n      var listener = function (event, node) {\n        return function () {\n          node.removeEventListener(event, listener);\n          return _this.apply();\n        };\n      }(event, node);\n      node.addEventListener(event, listener);\n    }\n  }, {\n    key: \"wrap\",\n    value: function wrap(doc, originalCallback) {\n      var view = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var callback = originalCallback;\n      if (originalCallback instanceof _View.View || originalCallback && originalCallback.prototype && originalCallback.prototype instanceof _View.View) {\n        callback = function callback() {\n          return originalCallback;\n        };\n      }\n      return function (element) {\n        if (typeof element.___cvApplied___ === 'undefined') {\n          Object.defineProperty(element, '___cvApplied___', {\n            enumerable: false,\n            writable: false,\n            value: new WeakSet()\n          });\n        }\n        if (element.___cvApplied___.has(originalCallback)) {\n          return;\n        }\n        var direct, parentView;\n        if (view) {\n          direct = parentView = view;\n          if (view.viewList) {\n            parentView = view.viewList.parent;\n          }\n        }\n        var tag = new _Tag.Tag(element, parentView, null, undefined, direct);\n        var parent = tag.element.parentNode;\n        var sibling = tag.element.nextSibling;\n        var result = callback(tag);\n        if (result !== false) {\n          element.___cvApplied___.add(originalCallback);\n        }\n        if (result instanceof HTMLElement) {\n          result = new _Tag.Tag(result);\n        }\n        if (result instanceof _Tag.Tag) {\n          if (!result.element.contains(tag.element)) {\n            while (tag.element.firstChild) {\n              result.element.appendChild(tag.element.firstChild);\n            }\n            tag.remove();\n          }\n          if (sibling) {\n            parent.insertBefore(result.element, sibling);\n          } else {\n            parent.appendChild(result.element);\n          }\n        }\n        if (result && result.prototype && result.prototype instanceof _View.View) {\n          result = new result({}, view);\n        }\n        if (result instanceof _View.View) {\n          if (view) {\n            view.cleanup.push(function (r) {\n              return function () {\n                r.remove();\n              };\n            }(result));\n            view.cleanup.push(view.args.bindTo(function (v, k, t) {\n              t[k] = v;\n              result.args[k] = v;\n            }));\n            view.cleanup.push(result.args.bindTo(function (v, k, t, d) {\n              t[k] = v;\n              view.args[k] = v;\n            }));\n          }\n          tag.clear();\n          result.render(tag.element);\n        }\n      };\n    }\n  }]);\n  return RuleSet;\n}();\nexports.RuleSet = RuleSet;\n  })();\n});","\nrequire.register(\"curvature/base/SetMap.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SetMap = void 0;\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar SetMap = /*#__PURE__*/function () {\n  function SetMap() {\n    _classCallCheck(this, SetMap);\n    _defineProperty(this, \"_map\", new Map());\n  }\n  _createClass(SetMap, [{\n    key: \"has\",\n    value: function has(key) {\n      return this._map.has(key);\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      return this._map.get(key);\n    }\n  }, {\n    key: \"getOne\",\n    value: function getOne(key) {\n      var set = this.get(key);\n      var _iterator = _createForOfIteratorHelper(set),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var entry = _step.value;\n          return entry;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"add\",\n    value: function add(key, value) {\n      var set = this._map.get(key);\n      if (!set) {\n        this._map.set(key, set = new Set());\n      }\n      return set.add(value);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key, value) {\n      var set = this._map.get(key);\n      if (!set) {\n        return;\n      }\n      var res = set[\"delete\"](value);\n      if (!set.size) {\n        this._map[\"delete\"](key);\n      }\n      return res;\n    }\n  }, {\n    key: \"values\",\n    value: function values() {\n      return _construct(Set, _toConsumableArray(_toConsumableArray(this._map.values()).map(function (set) {\n        return _toConsumableArray(set.values());\n      })));\n    }\n  }]);\n  return SetMap;\n}();\nexports.SetMap = SetMap;\n  })();\n});","\nrequire.register(\"curvature/base/Tag.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tag = void 0;\nvar _Bindable = require(\"./Bindable\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar CurrentStyle = Symbol('CurrentStyle');\nvar styler = function styler(styles) {\n  if (!this.node) {\n    return;\n  }\n  for (var property in styles) {\n    var stringedProperty = String(styles[property]);\n    if (this[CurrentStyle].has(property) && this[CurrentStyle].get(property) === styles[property]) {\n      continue;\n    }\n    if (property[0] === '-') {\n      this.node.style.setProperty(property, stringedProperty);\n    } else {\n      this.node.style[property] = stringedProperty;\n    }\n    if (styles[property] !== undefined) {\n      this[CurrentStyle].set(property, styles[property]);\n    } else {\n      this[CurrentStyle][\"delete\"](property);\n    }\n  }\n};\nvar getter = function getter(name) {\n  var _this = this;\n  if (typeof this[name] === 'function') {\n    return this[name];\n  }\n  if (this.node && typeof this.node[name] === 'function') {\n    return function () {\n      var _this$node;\n      return (_this$node = _this.node)[name].apply(_this$node, arguments);\n    };\n  }\n  if (name === 'style') {\n    return this.proxy.style;\n  }\n  if (this.node && name in this.node) {\n    return this.node[name];\n  }\n  return this[name];\n};\nvar Tag = /*#__PURE__*/function () {\n  function Tag(element, parent, ref, index, direct) {\n    var _this2 = this;\n    _classCallCheck(this, Tag);\n    if (typeof element === 'string') {\n      var subdoc = document.createRange().createContextualFragment(element);\n      element = subdoc.firstChild;\n    }\n    this.element = _Bindable.Bindable.makeBindable(element);\n    this.node = this.element;\n    this.parent = parent;\n    this.direct = direct;\n    this.ref = ref;\n    this.index = index;\n    this.cleanup = [];\n    this[_Bindable.Bindable.OnAllGet] = getter.bind(this);\n    this[CurrentStyle] = new Map();\n    var boundStyler = _Bindable.Bindable.make(styler.bind(this));\n    Object.defineProperty(this, 'style', {\n      value: boundStyler\n    });\n    this.proxy = _Bindable.Bindable.make(this);\n    this.proxy.style.bindTo(function (v, k, t, d) {\n      if (_this2[CurrentStyle].has(k) && _this2[CurrentStyle].get(k) === v) {\n        return;\n      }\n      _this2.node.style[k] = v;\n      if (!d && v !== undefined) {\n        _this2[CurrentStyle].set(k, v);\n      } else {\n        _this2[CurrentStyle][\"delete\"](k);\n      }\n    });\n    this.proxy.bindTo(function (v, k) {\n      if (k === 'index') {\n        return;\n      }\n      if (k in element && element[k] !== v) {\n        element[k] = v;\n      }\n      return false;\n    });\n    return this.proxy;\n  }\n  _createClass(Tag, [{\n    key: \"attr\",\n    value: function attr(attributes) {\n      for (var attribute in attributes) {\n        if (attributes[attribute] === undefined) {\n          this.node.removeAttribute(attribute);\n        } else if (attributes[attribute] === null) {\n          this.node.setAttribute(attribute, '');\n        } else {\n          this.node.setAttribute(attribute, attributes[attribute]);\n        }\n      }\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      if (this.node) {\n        this.node.remove();\n      }\n      _Bindable.Bindable.clearBindings(this);\n      var cleanup;\n      while (cleanup = this.cleanup.shift()) {\n        cleanup();\n      }\n      this.clear();\n      if (!this.node) {\n        return;\n      }\n      var detachEvent = new Event('cvDomDetached');\n      this.node.dispatchEvent(detachEvent);\n      this.node = this.element = this.ref = this.parent = undefined;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (!this.node) {\n        return;\n      }\n      var detachEvent = new Event('cvDomDetached');\n      while (this.node.firstChild) {\n        this.node.firstChild.dispatchEvent(detachEvent);\n        this.node.removeChild(this.node.firstChild);\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var paused = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    }\n  }, {\n    key: \"listen\",\n    value: function listen(eventName, callback, options) {\n      var node = this.node;\n      node.addEventListener(eventName, callback, options);\n      var remove = function remove() {\n        node.removeEventListener(eventName, callback, options);\n      };\n      var remover = function remover() {\n        remove();\n        remove = function remove() {\n          return console.warn('Already removed!');\n        };\n      };\n      this.parent.onRemove(function () {\n        return remover();\n      });\n      return remover;\n    }\n  }]);\n  return Tag;\n}();\nexports.Tag = Tag;\n  })();\n});","\nrequire.register(\"curvature/base/Uuid.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Uuid = void 0;\nvar _Symbol$toPrimitive;\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n_Symbol$toPrimitive = Symbol.toPrimitive;\nvar Uuid = /*#__PURE__*/function () {\n  function Uuid() {\n    var uuid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4;\n    _classCallCheck(this, Uuid);\n    _defineProperty(this, \"uuid\", null);\n    _defineProperty(this, \"version\", 4);\n    if (uuid) {\n      if (!uuid || typeof uuid !== 'string' && !(uuid instanceof Uuid) || !uuid.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/)) {\n        throw new Error(\"Invalid input for Uuid: \\\"\".concat(uuid, \"\\\"\"));\n      }\n      this.version = version;\n      this.uuid = uuid;\n    } else if (typeof crypto.randomUUID === 'function') {\n      this.uuid = crypto.randomUUID();\n    } else {\n      this.uuid = ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n        return (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16);\n      });\n    }\n    Object.freeze(this);\n  }\n  _createClass(Uuid, [{\n    key: _Symbol$toPrimitive,\n    value: function value() {\n      return this.toString();\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.uuid;\n    }\n  }, {\n    key: \"toJson\",\n    value: function toJson() {\n      return {\n        version: this.version,\n        uuid: this.uuid\n      };\n    }\n  }]);\n  return Uuid;\n}();\nexports.Uuid = Uuid;\n  })();\n});","\nrequire.register(\"curvature/base/View.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.View = void 0;\nvar _Bindable = require(\"./Bindable\");\nvar _ViewList = require(\"./ViewList\");\nvar _Router = require(\"./Router\");\nvar _Uuid = require(\"./Uuid\");\nvar _Dom = require(\"./Dom\");\nvar _Tag = require(\"./Tag\");\nvar _Bag = require(\"./Bag\");\nvar _RuleSet = require(\"./RuleSet\");\nvar _Mixin = require(\"./Mixin\");\nvar _PromiseMixin = require(\"../mixin/PromiseMixin\");\nvar _EventTargetMixin = require(\"../mixin/EventTargetMixin\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nvar dontParse = Symbol('dontParse');\nvar expandBind = Symbol('expandBind');\nvar uuid = Symbol('uuid');\nvar moveIndex = 0;\nvar View = /*#__PURE__*/function (_Mixin$with) {\n  _inherits(View, _Mixin$with);\n  var _super = _createSuper(View);\n  function View() {\n    var _this;\n    var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var mainView = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    _classCallCheck(this, View);\n    _this = _super.call(this, args, mainView);\n    _this[_EventTargetMixin.EventTargetMixin.EventTargetParent] = mainView;\n    Object.defineProperty(_assertThisInitialized(_this), 'args', {\n      value: _Bindable.Bindable.make(args)\n    });\n    Object.defineProperty(_assertThisInitialized(_this), uuid, {\n      value: _this.constructor.uuid()\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'nodesAttached', {\n      value: new _Bag.Bag(function (i, s, a) {})\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'nodesDetached', {\n      value: new _Bag.Bag(function (i, s, a) {})\n    });\n    Object.defineProperty(_assertThisInitialized(_this), '_onRemove', {\n      value: new _Bag.Bag(function (i, s, a) {})\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'cleanup', {\n      value: []\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'parent', {\n      value: mainView\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'views', {\n      value: new Map()\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'viewLists', {\n      value: new Map()\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'withViews', {\n      value: new Map()\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'tags', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'nodes', {\n      value: _Bindable.Bindable.make([])\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'timeouts', {\n      value: new Map()\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'intervals', {\n      value: []\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'frames', {\n      value: []\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'ruleSet', {\n      value: new _RuleSet.RuleSet()\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'preRuleSet', {\n      value: new _RuleSet.RuleSet()\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'subBindings', {\n      value: {}\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'templates', {\n      value: {}\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'eventCleanup', {\n      value: []\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'unpauseCallbacks', {\n      value: new Map()\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'interpolateRegex', {\n      value: /(\\[\\[((?:\\$+)?[\\w\\.\\|-]+)\\]\\])/g\n    });\n    Object.defineProperty(_assertThisInitialized(_this), 'rendered', {\n      value: new Promise(function (accept, reject) {\n        return Object.defineProperty(_assertThisInitialized(_this), 'renderComplete', {\n          value: accept\n        });\n      })\n    });\n    _this.onRemove(function () {\n      if (!_this[_EventTargetMixin.EventTargetMixin.Parent]) {\n        return;\n      }\n      _this[_EventTargetMixin.EventTargetMixin.Parent] = null;\n    });\n    _this.controller = _assertThisInitialized(_this);\n    _this.template = \"\";\n    _this.firstNode = null;\n    _this.lastNode = null;\n    _this.viewList = null;\n    _this.mainView = null;\n    _this.preserve = false;\n    _this.removed = false;\n    _this.loaded = Promise.resolve(_assertThisInitialized(_this));\n\n    // return Bindable.make(this);\n    return _this;\n  }\n  _createClass(View, [{\n    key: \"_id\",\n    get: function get() {\n      return this[uuid];\n    }\n  }, {\n    key: \"onFrame\",\n    value: function onFrame(callback) {\n      var _this2 = this;\n      var stopped = false;\n      var cancel = function cancel() {\n        stopped = true;\n      };\n      var c = function c(timestamp) {\n        if (_this2.removed || stopped) {\n          return;\n        }\n        if (!_this2.paused) {\n          callback(Date.now());\n        }\n        requestAnimationFrame(c);\n      };\n      requestAnimationFrame(function () {\n        return c(Date.now());\n      });\n      this.frames.push(cancel);\n      return cancel;\n    }\n  }, {\n    key: \"onNextFrame\",\n    value: function onNextFrame(callback) {\n      return requestAnimationFrame(function () {\n        return callback(Date.now());\n      });\n    }\n  }, {\n    key: \"onIdle\",\n    value: function onIdle(callback) {\n      return requestIdleCallback(function () {\n        return callback(Date.now());\n      });\n    }\n  }, {\n    key: \"onTimeout\",\n    value: function onTimeout(time, callback) {\n      var _this3 = this;\n      var timeoutInfo = {\n        timeout: null,\n        callback: null,\n        time: time,\n        fired: false,\n        created: new Date().getTime(),\n        paused: false\n      };\n      var wrappedCallback = function wrappedCallback() {\n        callback();\n        timeoutInfo.fired = true;\n        _this3.timeouts[\"delete\"](timeoutInfo.timeout);\n      };\n      var timeout = setTimeout(wrappedCallback, time);\n      timeoutInfo.callback = wrappedCallback;\n      timeoutInfo.timeout = timeout;\n      this.timeouts.set(timeoutInfo.timeout, timeoutInfo);\n      return timeout;\n    }\n  }, {\n    key: \"clearTimeout\",\n    value: function (_clearTimeout) {\n      function clearTimeout(_x) {\n        return _clearTimeout.apply(this, arguments);\n      }\n      clearTimeout.toString = function () {\n        return _clearTimeout.toString();\n      };\n      return clearTimeout;\n    }(function (timeout) {\n      var _iterator = _createForOfIteratorHelper(this.timeouts),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n            callback = _step$value[0],\n            timeoutInfo = _step$value[1];\n          clearTimeout(timeoutInfo.timeout);\n          this.timeouts[\"delete\"](timeoutInfo.timeout);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    })\n  }, {\n    key: \"onInterval\",\n    value: function onInterval(time, callback) {\n      var timeout = setInterval(callback, time);\n      this.intervals.push({\n        timeout: timeout,\n        callback: callback,\n        time: time,\n        paused: false\n      });\n      return timeout;\n    }\n  }, {\n    key: \"clearInterval\",\n    value: function (_clearInterval) {\n      function clearInterval(_x2) {\n        return _clearInterval.apply(this, arguments);\n      }\n      clearInterval.toString = function () {\n        return _clearInterval.toString();\n      };\n      return clearInterval;\n    }(function (timeout) {\n      for (var i in this.intervals) {\n        if (timeout === this.intervals[i].timeout) {\n          clearInterval(this.intervals[i].timeout);\n          delete this.intervals[i];\n        }\n      }\n    })\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var paused = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n      if (paused === undefined) {\n        this.paused = !this.paused;\n      }\n      this.paused = paused;\n      if (this.paused) {\n        var _iterator2 = _createForOfIteratorHelper(this.timeouts),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _step2$value = _slicedToArray(_step2.value, 2),\n              callback = _step2$value[0],\n              timeout = _step2$value[1];\n            if (timeout.fired) {\n              this.timeouts[\"delete\"](timeout.timeout);\n              continue;\n            }\n            clearTimeout(timeout.timeout);\n            timeout.paused = true;\n            timeout.time = Math.max(0, timeout.time - (Date.now() - timeout.created));\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        for (var i in this.intervals) {\n          clearInterval(this.intervals[i].timeout);\n        }\n      } else {\n        var _iterator3 = _createForOfIteratorHelper(this.timeouts),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _step3$value = _slicedToArray(_step3.value, 2),\n              _callback = _step3$value[0],\n              _timeout = _step3$value[1];\n            if (!_timeout.paused) {\n              continue;\n            }\n            if (_timeout.fired) {\n              this.timeouts[\"delete\"](_timeout.timeout);\n              continue;\n            }\n            _timeout.timeout = setTimeout(_timeout.callback, _timeout.time);\n            _timeout.paused = false;\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n        for (var _i2 in this.intervals) {\n          if (!this.intervals[_i2].timeout.paused) {\n            continue;\n          }\n          this.intervals[_i2].timeout.paused = false;\n          this.intervals[_i2].timeout = setInterval(this.intervals[_i2].callback, this.intervals[_i2].time);\n        }\n        var _iterator4 = _createForOfIteratorHelper(this.unpauseCallbacks),\n          _step4;\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _step4$value = _slicedToArray(_step4.value, 2),\n              _callback2 = _step4$value[1];\n            _callback2();\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n        this.unpauseCallbacks.clear();\n      }\n      var _iterator5 = _createForOfIteratorHelper(this.viewLists),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _step5$value = _slicedToArray(_step5.value, 2),\n            tag = _step5$value[0],\n            viewList = _step5$value[1];\n          viewList.pause(!!paused);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      for (var _i3 in this.tags) {\n        if (Array.isArray(this.tags[_i3])) {\n          for (var j in this.tags[_i3]) {\n            this.tags[_i3][j].pause(!!paused);\n          }\n          continue;\n        }\n        this.tags[_i3].pause(!!paused);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$nodes,\n        _this4 = this;\n      var parentNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var insertPoint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      if (parentNode instanceof View) {\n        parentNode = parentNode.firstNode.parentNode;\n      }\n      if (insertPoint instanceof View) {\n        insertPoint = insertPoint.firstNode;\n      }\n      if (this.firstNode) {\n        return this.reRender(parentNode, insertPoint);\n      }\n      this.dispatchEvent(new CustomEvent('render'));\n      var templateParsed = this.template instanceof DocumentFragment ? this.template.cloneNode(true) : View.templates.has(this.template);\n      var subDoc = templateParsed ? this.template instanceof DocumentFragment ? templateParsed : View.templates.get(this.template).cloneNode(true) : document.createRange().createContextualFragment(this.template);\n      if (!templateParsed && !(this.template instanceof DocumentFragment)) {\n        View.templates.set(this.template, subDoc.cloneNode(true));\n      }\n      this.mainView || this.preRuleSet.apply(subDoc, this);\n      this.mapTags(subDoc);\n      this.mainView || this.ruleSet.apply(subDoc, this);\n      if (window.devMode === true) {\n        this.firstNode = document.createComment(\"Template \".concat(this._id, \" Start\"));\n        this.lastNode = document.createComment(\"Template \".concat(this._id, \" End\"));\n      } else {\n        this.firstNode = document.createTextNode('');\n        this.lastNode = document.createTextNode('');\n      }\n      (_this$nodes = this.nodes).push.apply(_this$nodes, [this.firstNode].concat(_toConsumableArray(Array.from(subDoc.childNodes)), [this.lastNode]));\n      this.postRender(parentNode);\n      this.dispatchEvent(new CustomEvent('rendered'));\n      if (!this.dispatchAttach()) {\n        return;\n      }\n      if (parentNode) {\n        var rootNode = parentNode.getRootNode();\n        if (insertPoint) {\n          parentNode.insertBefore(this.firstNode, insertPoint);\n          parentNode.insertBefore(this.lastNode, insertPoint);\n        } else {\n          parentNode.appendChild(this.firstNode);\n          parentNode.appendChild(this.lastNode);\n        }\n        parentNode.insertBefore(subDoc, this.lastNode);\n        moveIndex++;\n        if (rootNode.isConnected) {\n          this.attached(rootNode, parentNode);\n          this.dispatchAttached(rootNode, parentNode);\n        } else {\n          var firstDomAttach = function firstDomAttach(event) {\n            if (!event.target.isConnected) {\n              return;\n            }\n            _this4.attached(rootNode, parentNode);\n            _this4.dispatchAttached(rootNode, parentNode);\n            parentNode.removeEventListener('cvDomAttached', firstDomAttach);\n          };\n          parentNode.addEventListener('cvDomAttached', firstDomAttach);\n        }\n      }\n      this.renderComplete(this.nodes);\n      return this.nodes;\n    }\n  }, {\n    key: \"dispatchAttach\",\n    value: function dispatchAttach() {\n      return this.dispatchEvent(new CustomEvent('attach', {\n        cancelable: true,\n        target: this\n      }));\n    }\n  }, {\n    key: \"dispatchAttached\",\n    value: function dispatchAttached(rootNode, parentNode) {\n      var view = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n      this.dispatchEvent(new CustomEvent('attached', {\n        detail: {\n          view: view || this,\n          node: parentNode,\n          root: rootNode,\n          mainView: this\n        }\n      }));\n      this.dispatchDomAttached(view);\n      var _iterator6 = _createForOfIteratorHelper(this.nodesAttached.items()),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var callback = _step6.value;\n          callback(rootNode, parentNode);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }, {\n    key: \"dispatchDomAttached\",\n    value: function dispatchDomAttached(view) {\n      var _this5 = this;\n      this.nodes.filter(function (n) {\n        return n.nodeType !== Node.COMMENT_NODE;\n      }).forEach(function (child) {\n        if (!child.matches) {\n          return;\n        }\n        _Dom.Dom.mapTags(child, false, function (tag, walker) {\n          if (!tag.matches) {\n            return;\n          }\n          tag.dispatchEvent(new CustomEvent('cvDomAttached', {\n            target: tag,\n            detail: {\n              view: view || _this5,\n              mainView: _this5\n            }\n          }));\n        });\n        child.dispatchEvent(new CustomEvent('cvDomAttached', {\n          target: child,\n          detail: {\n            view: view || _this5,\n            mainView: _this5\n          }\n        }));\n      });\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender(parentNode, insertPoint) {\n      var willReRender = this.dispatchEvent(new CustomEvent('reRender'), {\n        cancelable: true,\n        target: this\n      });\n      if (!willReRender) {\n        return;\n      }\n      var subDoc = new DocumentFragment();\n      if (this.firstNode.isConnected) {\n        var detach = this.nodesDetached.items();\n        for (var i in detach) {\n          detach[i]();\n        }\n      }\n      subDoc.append.apply(subDoc, _toConsumableArray(this.nodes));\n      if (parentNode) {\n        if (insertPoint) {\n          parentNode.insertBefore(this.firstNode, insertPoint);\n          parentNode.insertBefore(this.lastNode, insertPoint);\n        } else {\n          parentNode.appendChild(this.firstNode);\n          parentNode.appendChild(this.lastNode);\n        }\n        parentNode.insertBefore(subDoc, this.lastNode);\n        this.dispatchEvent(new CustomEvent('reRendered'), {\n          cancelable: true,\n          target: this\n        });\n        var rootNode = parentNode.getRootNode();\n        if (rootNode.isConnected) {\n          this.attached(rootNode, parentNode);\n          this.dispatchAttached(rootNode, parentNode);\n        }\n      }\n      return this.nodes;\n    }\n  }, {\n    key: \"mapTags\",\n    value: function mapTags(subDoc) {\n      var _this6 = this;\n      _Dom.Dom.mapTags(subDoc, false, function (tag, walker) {\n        if (tag[dontParse]) {\n          return;\n        }\n        if (tag.matches) {\n          tag = _this6.mapInterpolatableTag(tag);\n          tag = tag.matches('[cv-template]') && _this6.mapTemplateTag(tag) || tag;\n          tag = tag.matches('[cv-slot]') && _this6.mapSlotTag(tag) || tag;\n          tag = tag.matches('[cv-prerender]') && _this6.mapPrendererTag(tag) || tag;\n          tag = tag.matches('[cv-link]') && _this6.mapLinkTag(tag) || tag;\n          tag = tag.matches('[cv-attr]') && _this6.mapAttrTag(tag) || tag;\n          tag = tag.matches('[cv-expand]') && _this6.mapExpandableTag(tag) || tag;\n          tag = tag.matches('[cv-ref]') && _this6.mapRefTag(tag) || tag;\n          tag = tag.matches('[cv-on]') && _this6.mapOnTag(tag) || tag;\n          tag = tag.matches('[cv-each]') && _this6.mapEachTag(tag) || tag;\n          tag = tag.matches('[cv-bind]') && _this6.mapBindTag(tag) || tag;\n          tag = tag.matches('[cv-with]') && _this6.mapWithTag(tag) || tag;\n          tag = tag.matches('[cv-if]') && _this6.mapIfTag(tag) || tag;\n          tag = tag.matches('[cv-view]') && _this6.mapViewTag(tag) || tag;\n        } else {\n          tag = _this6.mapInterpolatableTag(tag);\n        }\n        if (tag !== walker.currentNode) {\n          walker.currentNode = tag;\n        }\n      });\n    }\n  }, {\n    key: \"mapExpandableTag\",\n    value: function mapExpandableTag(tag) {\n      /*/\n      const tagCompiler = this.compileExpandableTag(tag);\n      \tconst newTag = tagCompiler(this);\n      \ttag.replaceWith(newTag);\n      \treturn newTag;\n      /*/\n\n      var existing = tag[expandBind];\n      if (existing) {\n        existing();\n        tag[expandBind] = false;\n      }\n      var _Bindable$resolve = _Bindable.Bindable.resolve(this.args, tag.getAttribute('cv-expand'), true),\n        _Bindable$resolve2 = _slicedToArray(_Bindable$resolve, 2),\n        proxy = _Bindable$resolve2[0],\n        expandProperty = _Bindable$resolve2[1];\n      tag.removeAttribute('cv-expand');\n      if (!proxy[expandProperty]) {\n        proxy[expandProperty] = {};\n      }\n      proxy[expandProperty] = _Bindable.Bindable.make(proxy[expandProperty]);\n      this.onRemove(tag[expandBind] = proxy[expandProperty].bindTo(function (v, k, t, d, p) {\n        if (d || v === undefined) {\n          tag.removeAttribute(k, v);\n          return;\n        }\n        if (v === null) {\n          tag.setAttribute(k, '');\n          return;\n        }\n        tag.setAttribute(k, v);\n      }));\n\n      // let expandProperty = tag.getAttribute('cv-expand');\n      // let expandArg = Bindable.makeBindable(\n      // \tthis.args[expandProperty] || {}\n      // );\n\n      // tag.removeAttribute('cv-expand');\n\n      // for(let i in expandArg)\n      // {\n      // \tif(i === 'name' || i === 'type')\n      // \t{\n      // \t\tcontinue;\n      // \t}\n\n      // \tlet debind = expandArg.bindTo(i, ((tag,i)=>(v)=>{\n      // \t\ttag.setAttribute(i, v);\n      // \t})(tag,i));\n\n      // \tthis.onRemove(()=>{\n      // \t\tdebind();\n      // \t\tif(expandArg.isBound())\n      // \t\t{\n      // \t\t\tBindable.clearBindings(expandArg);\n      // \t\t}\n      // \t});\n      // }\n\n      return tag;\n      //*/\n    }\n  }, {\n    key: \"compileExpandableTag\",\n    value: function compileExpandableTag(sourceTag) {\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode(true);\n        var expandProperty = tag.getAttribute('cv-expand');\n        var expandArg = _Bindable.Bindable.make(bindingView.args[expandProperty] || {});\n        tag.removeAttribute('cv-expand');\n        var _loop = function _loop() {\n          if (i === 'name' || i === 'type') {\n            return \"continue\";\n          }\n          var debind = expandArg.bindTo(i, function (tag, i) {\n            return function (v) {\n              tag.setAttribute(i, v);\n            };\n          }(tag, i));\n          bindingView.onRemove(function () {\n            debind();\n            if (expandArg.isBound()) {\n              _Bindable.Bindable.clearBindings(expandArg);\n            }\n          });\n        };\n        for (var i in expandArg) {\n          var _ret = _loop();\n          if (_ret === \"continue\") continue;\n        }\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapAttrTag\",\n    value: function mapAttrTag(tag) {\n      //*/\n      var tagCompiler = this.compileAttrTag(tag);\n      var newTag = tagCompiler(this);\n      tag.replaceWith(newTag);\n      return newTag;\n\n      /*/\n      \tlet attrProperty = tag.getAttribute('cv-attr');\n      \ttag.removeAttribute('cv-attr');\n      \tlet pairs = attrProperty.split(',');\n      let attrs = pairs.map((p) => p.split(':'));\n      \tfor (let i in attrs)\n      {\n      \tlet proxy        = this.args;\n      \tlet bindProperty = attrs[i][1];\n      \tlet property     = bindProperty;\n      \t\tif(bindProperty.match(/\\./))\n      \t{\n      \t\t[proxy, property] = Bindable.resolve(\n      \t\t\tthis.args\n      \t\t\t, bindProperty\n      \t\t\t, true\n      \t\t);\n      \t}\n      \t\tlet attrib = attrs[i][0];\n      \t\tthis.onRemove(proxy.bindTo(\n      \t\tproperty\n      \t\t, (v)=>{\n      \t\t\tif(v == null)\n      \t\t\t{\n      \t\t\t\ttag.setAttribute(attrib, '');\n      \t\t\t\treturn;\n      \t\t\t}\n      \t\t\ttag.setAttribute(attrib, v);\n      \t\t}\n      \t));\n      }\n      \treturn tag;\n      \t//*/\n    }\n  }, {\n    key: \"compileAttrTag\",\n    value: function compileAttrTag(sourceTag) {\n      var attrProperty = sourceTag.getAttribute('cv-attr');\n      var pairs = attrProperty.split(/[,;]/);\n      var attrs = pairs.map(function (p) {\n        return p.split(':');\n      });\n      sourceTag.removeAttribute('cv-attr');\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode(true);\n        var _loop2 = function _loop2() {\n          var bindProperty = attrs[i][1] || attrs[i][0];\n          var _Bindable$resolve3 = _Bindable.Bindable.resolve(bindingView.args, bindProperty, true),\n            _Bindable$resolve4 = _slicedToArray(_Bindable$resolve3, 2),\n            proxy = _Bindable$resolve4[0],\n            property = _Bindable$resolve4[1];\n          var attrib = attrs[i][0];\n          bindingView.onRemove(proxy.bindTo(property, function (v, k, t, d) {\n            if (d || v === undefined) {\n              tag.removeAttribute(attrib, v);\n              return;\n            }\n            if (v === null) {\n              tag.setAttribute(attrib, '');\n              return;\n            }\n            tag.setAttribute(attrib, v);\n          }));\n        };\n        for (var i in attrs) {\n          _loop2();\n        }\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapInterpolatableTag\",\n    value: function mapInterpolatableTag(tag) {\n      var _this7 = this;\n      var regex = this.interpolateRegex;\n      if (tag.nodeType === Node.TEXT_NODE) {\n        var original = tag.nodeValue;\n        if (!this.interpolatable(original)) {\n          return tag;\n        }\n        var header = 0;\n        var match;\n        var _loop3 = function _loop3() {\n          var bindProperty = match[2];\n          var unsafeHtml = false;\n          var unsafeView = false;\n          var propertySplit = bindProperty.split('|');\n          var transformer = false;\n          if (propertySplit.length > 1) {\n            transformer = _this7.stringTransformer(propertySplit.slice(1));\n            bindProperty = propertySplit[0];\n          }\n          if (bindProperty.substr(0, 2) === '$$') {\n            unsafeHtml = true;\n            unsafeView = true;\n            bindProperty = bindProperty.substr(2);\n          }\n          if (bindProperty.substr(0, 1) === '$') {\n            unsafeHtml = true;\n            bindProperty = bindProperty.substr(1);\n          }\n          if (bindProperty.substr(0, 3) === '000') {\n            expand = true;\n            bindProperty = bindProperty.substr(3);\n            return \"continue\";\n          }\n          var staticPrefix = original.substring(header, match.index);\n          header = match.index + match[1].length;\n          var staticNode = document.createTextNode(staticPrefix);\n          staticNode[dontParse] = true;\n          tag.parentNode.insertBefore(staticNode, tag);\n          var dynamicNode;\n          if (unsafeHtml) {\n            dynamicNode = document.createElement('div');\n          } else {\n            dynamicNode = document.createTextNode('');\n          }\n          dynamicNode[dontParse] = true;\n          var proxy = _this7.args;\n          var property = bindProperty;\n          if (bindProperty.match(/\\./)) {\n            var _Bindable$resolve5 = _Bindable.Bindable.resolve(_this7.args, bindProperty, true);\n            var _Bindable$resolve6 = _slicedToArray(_Bindable$resolve5, 2);\n            proxy = _Bindable$resolve6[0];\n            property = _Bindable$resolve6[1];\n          }\n          tag.parentNode.insertBefore(dynamicNode, tag);\n          if (_typeof(proxy) !== 'object') {\n            return \"break\";\n          }\n          proxy = _Bindable.Bindable.make(proxy);\n          var debind = proxy.bindTo(property, function (v, k, t) {\n            if (t[k] !== v && (t[k] instanceof View || t[k] instanceof Node || t[k] instanceof _Tag.Tag)) {\n              if (!t[k].preserve) {\n                t[k].remove();\n              }\n            }\n            dynamicNode.nodeValue = '';\n            if (unsafeView && !(v instanceof View)) {\n              var _v;\n              var unsafeTemplate = (_v = v) !== null && _v !== void 0 ? _v : '';\n              v = new View(_this7.args, _this7);\n              v.template = unsafeTemplate;\n            }\n            if (transformer) {\n              v = transformer(v);\n            }\n            if (v instanceof View) {\n              v[_EventTargetMixin.EventTargetMixin.EventTargetParent] = _this7;\n              var onAttach = function onAttach(rootNode, parentNode) {\n                v.dispatchAttached(rootNode, parentNode, _this7);\n              };\n              _this7.nodesAttached.add(onAttach);\n              v.render(tag.parentNode, dynamicNode);\n              var cleanup = function cleanup() {\n                if (!v.preserve) {\n                  v.remove();\n                }\n              };\n              _this7.onRemove(cleanup);\n              v.onRemove(function () {\n                _this7.nodesAttached.remove(onAttach);\n                _this7._onRemove.remove(cleanup);\n              });\n            } else if (v instanceof Node) {\n              tag.parentNode.insertBefore(v, dynamicNode);\n              _this7.onRemove(function () {\n                return v.remove();\n              });\n            } else if (v instanceof _Tag.Tag) {\n              if (v.node) {\n                tag.parentNode.insertBefore(v.node, dynamicNode);\n                _this7.onRemove(function () {\n                  return v.remove();\n                });\n              } else {\n                v.remove();\n              }\n            } else {\n              if (v instanceof Object && v.__toString instanceof Function) {\n                v = v.__toString();\n              }\n              if (unsafeHtml) {\n                dynamicNode.innerHTML = v;\n              } else {\n                dynamicNode.nodeValue = v;\n              }\n            }\n            dynamicNode[dontParse] = true;\n          });\n          _this7.onRemove(debind);\n        };\n        while (match = regex.exec(original)) {\n          var _ret2 = _loop3();\n          if (_ret2 === \"continue\") continue;\n          if (_ret2 === \"break\") break;\n        }\n        var staticSuffix = original.substring(header);\n        var staticNode = document.createTextNode(staticSuffix);\n        staticNode[dontParse] = true;\n        tag.parentNode.insertBefore(staticNode, tag);\n        tag.nodeValue = '';\n      } else if (tag.nodeType === Node.ELEMENT_NODE) {\n        var _loop4 = function _loop4() {\n          if (!_this7.interpolatable(tag.attributes[i].value)) {\n            return \"continue\";\n          }\n          var header = 0;\n          var match;\n          var original = tag.attributes[i].value;\n          var attribute = tag.attributes[i];\n          var bindProperties = {};\n          var segments = [];\n          while (match = regex.exec(original)) {\n            segments.push(original.substring(header, match.index));\n            if (!bindProperties[match[2]]) {\n              bindProperties[match[2]] = [];\n            }\n            bindProperties[match[2]].push(segments.length);\n            segments.push(match[1]);\n            header = match.index + match[1].length;\n          }\n          segments.push(original.substring(header));\n          var _loop5 = function _loop5() {\n            var proxy = _this7.args;\n            var property = j;\n            var propertySplit = j.split('|');\n            var transformer = false;\n            var longProperty = j;\n            if (propertySplit.length > 1) {\n              transformer = _this7.stringTransformer(propertySplit.slice(1));\n              property = propertySplit[0];\n            }\n            if (property.match(/\\./)) {\n              var _Bindable$resolve7 = _Bindable.Bindable.resolve(_this7.args, property, true);\n              var _Bindable$resolve8 = _slicedToArray(_Bindable$resolve7, 2);\n              proxy = _Bindable$resolve8[0];\n              property = _Bindable$resolve8[1];\n            }\n            var matching = [];\n            var bindProperty = j;\n            var matchingSegments = bindProperties[longProperty];\n\n            // const changeAttribute = (v, k, t, d) => {\n            // \ttag.setAttribute(attribute.name, segments.join(''));\n            // };\n\n            _this7.onRemove(proxy.bindTo(property, function (v, k, t, d) {\n              if (transformer) {\n                v = transformer(v);\n              }\n              for (var _i4 in bindProperties) {\n                for (var _j in bindProperties[longProperty]) {\n                  segments[bindProperties[longProperty][_j]] = t[_i4];\n                  if (k === property) {\n                    segments[bindProperties[longProperty][_j]] = v;\n                  }\n                }\n              }\n              if (!_this7.paused) {\n                // changeAttribute(v,k,t,d);\n                tag.setAttribute(attribute.name, segments.join(''));\n              } else {\n                // this.unpauseCallbacks.set(attribute, () => changeAttribute(v,k,t,d));\n                _this7.unpauseCallbacks.set(attribute, function () {\n                  return tag.setAttribute(attribute.name, segments.join(''));\n                });\n              }\n            }));\n            _this7.onRemove(function () {\n              if (!proxy.isBound()) {\n                _Bindable.Bindable.clearBindings(proxy);\n              }\n            });\n          };\n          for (var j in bindProperties) {\n            _loop5();\n          }\n        };\n        for (var i = 0; i < tag.attributes.length; i++) {\n          var _ret3 = _loop4();\n          if (_ret3 === \"continue\") continue;\n        }\n      }\n      return tag;\n    }\n  }, {\n    key: \"mapRefTag\",\n    value: function mapRefTag(tag) {\n      var refAttr = tag.getAttribute('cv-ref');\n      var _refAttr$split = refAttr.split(':'),\n        _refAttr$split2 = _slicedToArray(_refAttr$split, 3),\n        refProp = _refAttr$split2[0],\n        _refAttr$split2$ = _refAttr$split2[1],\n        refClassname = _refAttr$split2$ === void 0 ? null : _refAttr$split2$,\n        _refAttr$split2$2 = _refAttr$split2[2],\n        refKey = _refAttr$split2$2 === void 0 ? null : _refAttr$split2$2;\n      var refClass = _Tag.Tag;\n      if (refClassname) {\n        refClass = this.stringToClass(refClassname);\n      }\n      tag.removeAttribute('cv-ref');\n      Object.defineProperty(tag, '___tag___', {\n        enumerable: false,\n        writable: true\n      });\n      this.onRemove(function () {\n        tag.___tag___ = null;\n        tag.remove();\n      });\n      var parent = this;\n      var direct = this;\n      if (this.viewList) {\n        parent = this.viewList.parent;\n        // if(!this.viewList.parent.tags[refProp])\n        // {\n        // \tthis.viewList.parent.tags[refProp] = [];\n        // }\n\n        // let refKeyVal = this.args[refKey];\n\n        // this.viewList.parent.tags[refProp][refKeyVal] = new refClass(\n        // \ttag, this, refProp, refKeyVal\n        // );\n      } else {\n        // this.tags[refProp] = new refClass(\n        // \ttag, this, refProp\n        // );\n      }\n      var tagObject = new refClass(tag, this, refProp, undefined, direct);\n      tag.___tag___ = tagObject;\n      this.tags[refProp] = tagObject;\n      while (parent) {\n        var refKeyVal = this.args[refKey];\n        if (refKeyVal !== undefined) {\n          if (!parent.tags[refProp]) {\n            parent.tags[refProp] = [];\n          }\n          parent.tags[refProp][refKeyVal] = tagObject;\n        } else {\n          parent.tags[refProp] = tagObject;\n        }\n        if (!parent.parent) {\n          break;\n        }\n        parent = parent.parent;\n      }\n      return tag;\n    }\n  }, {\n    key: \"mapBindTag\",\n    value: function mapBindTag(tag) {\n      var _this8 = this;\n      var bindArg = tag.getAttribute('cv-bind');\n      var proxy = this.args;\n      var property = bindArg;\n      var top = null;\n      if (bindArg.match(/\\./)) {\n        var _Bindable$resolve9 = _Bindable.Bindable.resolve(this.args, bindArg, true);\n        var _Bindable$resolve10 = _slicedToArray(_Bindable$resolve9, 3);\n        proxy = _Bindable$resolve10[0];\n        property = _Bindable$resolve10[1];\n        top = _Bindable$resolve10[2];\n      }\n      if (proxy !== this.args) {\n        this.subBindings[bindArg] = this.subBindings[bindArg] || [];\n        this.onRemove(this.args.bindTo(top, function () {\n          while (_this8.subBindings.length) {\n            _this8.subBindings.shift()();\n          }\n        }));\n      }\n      var unsafeHtml = false;\n      if (property.substr(0, 1) === '$') {\n        property = property.substr(1);\n        unsafeHtml = true;\n      }\n      var debind = proxy.bindTo(property, function (v, k, t, d, p) {\n        if ((p instanceof View || p instanceof Node || p instanceof _Tag.Tag) && p !== v) {\n          p.remove();\n        }\n        var autoChangedEvent = new CustomEvent('cvAutoChanged', {\n          bubbles: true\n        });\n        if (['INPUT', 'SELECT', 'TEXTAREA'].includes(tag.tagName)) {\n          var _type = tag.getAttribute('type');\n          if (_type && _type.toLowerCase() === 'checkbox') {\n            tag.checked = !!v;\n            tag.dispatchEvent(autoChangedEvent);\n          } else if (_type && _type.toLowerCase() === 'radio') {\n            tag.checked = v == tag.value;\n            tag.dispatchEvent(autoChangedEvent);\n          } else if (_type !== 'file') {\n            if (tag.tagName === 'SELECT') {\n              var selectOption = function selectOption() {\n                for (var i = 0; i < tag.options.length; i++) {\n                  var option = tag.options[i];\n                  if (option.value == v) {\n                    tag.selectedIndex = i;\n                  }\n                }\n              };\n              selectOption();\n              _this8.nodesAttached.add(selectOption);\n            } else {\n              tag.value = v == null ? '' : v;\n            }\n            tag.dispatchEvent(autoChangedEvent);\n          }\n        } else {\n          if (v instanceof View) {\n            var _iterator7 = _createForOfIteratorHelper(tag.childNodes),\n              _step7;\n            try {\n              for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                var node = _step7.value;\n                node.remove();\n              }\n            } catch (err) {\n              _iterator7.e(err);\n            } finally {\n              _iterator7.f();\n            }\n            var onAttach = function onAttach(parentNode) {\n              v.dispatchDomAttached(_this8);\n\n              // if(v.nodes.length && v.dispatchAttach())\n              // {\n              // \tv.attached(parentNode.getRootNode(), parentNode, this);\n              // \tv.dispatchAttached(parentNode.getRootNode(), parentNode, this);\n              // }\n            };\n\n            _this8.nodesAttached.add(onAttach);\n            v[_EventTargetMixin.EventTargetMixin.EventTargetParent] = _this8;\n            v.render(tag);\n            v.onRemove(function () {\n              return _this8.nodesAttached.remove(onAttach);\n            });\n          } else if (v instanceof Node) {\n            tag.insert(v);\n          } else if (v instanceof _Tag.Tag) {\n            tag.append(v.node);\n          } else if (unsafeHtml) {\n            if (tag.innerHTML !== v) {\n              v = String(v);\n              if (tag.innerHTML === v.substring(0, tag.innerHTML.length)) {\n                tag.innerHTML += v.substring(tag.innerHTML.length);\n              } else {\n                var _iterator8 = _createForOfIteratorHelper(tag.childNodes),\n                  _step8;\n                try {\n                  for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n                    var _node = _step8.value;\n                    _node.remove();\n                  }\n                } catch (err) {\n                  _iterator8.e(err);\n                } finally {\n                  _iterator8.f();\n                }\n                tag.innerHTML = v;\n              }\n              _Dom.Dom.mapTags(tag, false, function (t) {\n                return t[dontParse] = true;\n              });\n            }\n          } else {\n            if (tag.textContent !== v) {\n              var _iterator9 = _createForOfIteratorHelper(tag.childNodes),\n                _step9;\n              try {\n                for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n                  var _node2 = _step9.value;\n                  _node2.remove();\n                }\n              } catch (err) {\n                _iterator9.e(err);\n              } finally {\n                _iterator9.f();\n              }\n              tag.textContent = v;\n            }\n          }\n        }\n      });\n      if (proxy !== this.args) {\n        this.subBindings[bindArg].push(debind);\n      }\n      this.onRemove(debind);\n      var type = tag.getAttribute('type');\n      var multi = tag.getAttribute('multiple');\n      var inputListener = function inputListener(event) {\n        if (event.target !== tag) {\n          return;\n        }\n        if (type && type.toLowerCase() === 'checkbox') {\n          if (tag.checked) {\n            proxy[property] = event.target.getAttribute('value');\n          } else {\n            proxy[property] = false;\n          }\n        } else if (event.target.matches('[contenteditable=true]')) {\n          proxy[property] = event.target.innerHTML;\n        } else if (type === 'file' && multi) {\n          var files = Array.from(event.target.files);\n          var current = proxy[property] || _Bindable.Bindable.onDeck(proxy, property);\n          if (!current || !files.length) {\n            proxy[property] = files;\n          } else {\n            var _loop6 = function _loop6(i) {\n              if (files[i] !== current[i]) {\n                files[i].toJSON = function () {\n                  return {\n                    name: file[i].name,\n                    size: file[i].size,\n                    type: file[i].type,\n                    date: file[i].lastModified\n                  };\n                };\n                current[i] = files[i];\n                return \"break\";\n              }\n            };\n            for (var i in files) {\n              var _ret4 = _loop6(i);\n              if (_ret4 === \"break\") break;\n            }\n          }\n        } else if (type === 'file' && !multi && event.target.files.length) {\n          var _file = event.target.files.item(0);\n          _file.toJSON = function () {\n            return {\n              name: _file.name,\n              size: _file.size,\n              type: _file.type,\n              date: _file.lastModified\n            };\n          };\n          proxy[property] = _file;\n        } else {\n          proxy[property] = event.target.value;\n        }\n      };\n      if (type === 'file' || type === 'radio') {\n        tag.addEventListener('change', inputListener);\n      } else {\n        tag.addEventListener('input', inputListener);\n        tag.addEventListener('change', inputListener);\n        tag.addEventListener('value-changed', inputListener);\n      }\n      this.onRemove(function () {\n        if (type === 'file' || type === 'radio') {\n          tag.removeEventListener('change', inputListener);\n        } else {\n          tag.removeEventListener('input', inputListener);\n          tag.removeEventListener('change', inputListener);\n          tag.removeEventListener('value-changed', inputListener);\n        }\n      });\n      tag.removeAttribute('cv-bind');\n      return tag;\n    }\n  }, {\n    key: \"mapOnTag\",\n    value: function mapOnTag(tag) {\n      var _this9 = this;\n      var referents = String(tag.getAttribute('cv-on'));\n      referents.split(';').map(function (a) {\n        return a.split(':');\n      }).forEach(function (a) {\n        a = a.map(function (a) {\n          return a.trim();\n        });\n        var argLen = a.length;\n        var eventName = String(a.shift()).trim();\n        var callbackName = String(a.shift() || eventName).trim();\n        var eventFlags = String(a.shift() || '').trim();\n        var argList = [];\n        var groups = /(\\w+)(?:\\(([$\\w\\s-'\",]+)\\))?/.exec(callbackName);\n        if (groups) {\n          callbackName = groups[1].replace(/(^[\\s\\n]+|[\\s\\n]+$)/, '');\n          if (groups[2]) {\n            argList = groups[2].split(',').map(function (s) {\n              return s.trim();\n            });\n          }\n        }\n        if (!argList.length) {\n          argList.push('$event');\n        }\n        if (!eventName || argLen === 1) {\n          eventName = callbackName;\n        }\n        var eventMethod;\n        var parent = _this9;\n        var _loop7 = function _loop7() {\n          var controller = parent.controller;\n          if (typeof controller[callbackName] === 'function') {\n            eventMethod = function eventMethod() {\n              controller[callbackName].apply(controller, arguments);\n            };\n            return \"break\";\n          } else if (typeof parent[callbackName] === 'function') {\n            eventMethod = function eventMethod() {\n              var _parent;\n              (_parent = parent)[callbackName].apply(_parent, arguments);\n            };\n            return \"break\";\n          }\n          if (parent.parent) {\n            parent = parent.parent;\n          } else {\n            return \"break\";\n          }\n        };\n        while (parent) {\n          var _ret5 = _loop7();\n          if (_ret5 === \"break\") break;\n        }\n        var eventListener = function eventListener(event) {\n          var argRefs = argList.map(function (arg) {\n            var match;\n            if (Number(arg) == arg) {\n              return arg;\n            } else if (arg === 'event' || arg === '$event') {\n              return event;\n            } else if (arg === '$view') {\n              return parent;\n            } else if (arg === '$controller') {\n              return controller;\n            } else if (arg === '$tag') {\n              return tag;\n            } else if (arg === '$parent') {\n              return _this9.parent;\n            } else if (arg === '$subview') {\n              return _this9;\n            } else if (arg in _this9.args) {\n              return _this9.args[arg];\n            } else if (match = /^['\"]([\\w-]+?)[\"']$/.exec(arg)) {\n              return match[1];\n            }\n          });\n          if (!(typeof eventMethod === 'function')) {\n            throw new Error(\"\".concat(callbackName, \" is not defined on View object.\") + \"\\n\" + \"Tag:\" + \"\\n\" + \"\".concat(tag.outerHTML));\n          }\n          eventMethod.apply(void 0, _toConsumableArray(argRefs));\n        };\n        var eventOptions = {};\n        if (eventFlags.includes('p')) {\n          eventOptions.passive = true;\n        } else if (eventFlags.includes('P')) {\n          eventOptions.passive = false;\n        }\n        if (eventFlags.includes('c')) {\n          eventOptions.capture = true;\n        } else if (eventFlags.includes('C')) {\n          eventOptions.capture = false;\n        }\n        if (eventFlags.includes('o')) {\n          eventOptions.once = true;\n        } else if (eventFlags.includes('O')) {\n          eventOptions.once = false;\n        }\n        switch (eventName) {\n          case '_init':\n            eventListener();\n            break;\n          case '_attach':\n            _this9.nodesAttached.add(eventListener);\n            break;\n          case '_detach':\n            _this9.nodesDetached.add(eventListener);\n            break;\n          default:\n            tag.addEventListener(eventName, eventListener, eventOptions);\n            _this9.onRemove(function () {\n              tag.removeEventListener(eventName, eventListener, eventOptions);\n            });\n            break;\n        }\n        return [eventName, callbackName, argList];\n      });\n      tag.removeAttribute('cv-on');\n      return tag;\n    }\n  }, {\n    key: \"mapLinkTag\",\n    value: function mapLinkTag(tag) {\n      /*/\n      const tagCompiler = this.compileLinkTag(tag);\n      \tconst newTag = tagCompiler(this);\n      \ttag.replaceWith(newTag);\n      \treturn newTag;\n      /*/\n\n      var linkAttr = tag.getAttribute('cv-link');\n      tag.setAttribute('href', linkAttr);\n      var linkClick = function linkClick(event) {\n        event.preventDefault();\n        if (linkAttr.substring(0, 4) === 'http' || linkAttr.substring(0, 2) === '//') {\n          window.open(tag.getAttribute('href', linkAttr));\n          return;\n        }\n        _Router.Router.go(tag.getAttribute('href'));\n      };\n      tag.addEventListener('click', linkClick);\n      this.onRemove(function (tag, eventListener) {\n        return function () {\n          tag.removeEventListener('click', eventListener);\n          tag = undefined;\n          eventListener = undefined;\n        };\n      }(tag, linkClick));\n      tag.removeAttribute('cv-link');\n      return tag;\n      //*/\n    }\n  }, {\n    key: \"compileLinkTag\",\n    value: function compileLinkTag(sourceTag) {\n      var linkAttr = sourceTag.getAttribute('cv-link');\n      sourceTag.removeAttribute('cv-link');\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode(true);\n        tag.setAttribute('href', linkAttr);\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapPrendererTag\",\n    value: function mapPrendererTag(tag) {\n      var prerenderAttr = tag.getAttribute('cv-prerender');\n      var prerendering = window.prerenderer || navigator.userAgent.match(/prerender/i);\n      if (prerendering) {\n        window.prerenderer = window.prerenderer || true;\n      }\n      if (prerenderAttr === 'never' && prerendering || prerenderAttr === 'only' && !prerendering) {\n        tag.parentNode.removeChild(tag);\n      }\n      return tag;\n    }\n  }, {\n    key: \"mapWithTag\",\n    value: function mapWithTag(tag) {\n      var _this10 = this;\n      var withAttr = tag.getAttribute('cv-with');\n      var carryAttr = tag.getAttribute('cv-carry');\n      var viewAttr = tag.getAttribute('cv-view');\n      tag.removeAttribute('cv-with');\n      tag.removeAttribute('cv-carry');\n      tag.removeAttribute('cv-view');\n      var viewClass = viewAttr ? this.stringToClass(viewAttr) : View;\n      var subTemplate = new DocumentFragment();\n      _toConsumableArray(tag.childNodes).forEach(function (n) {\n        return subTemplate.appendChild(n);\n      });\n      var carryProps = [];\n      if (carryAttr) {\n        carryProps = carryAttr.split(',').map(function (s) {\n          return s.trim();\n        });\n      }\n      var debind = this.args.bindTo(withAttr, function (v, k, t, d) {\n        if (_this10.withViews.has(tag)) {\n          _this10.withViews[\"delete\"](tag);\n        }\n        while (tag.firstChild) {\n          tag.removeChild(tag.firstChild);\n        }\n        var view = new viewClass({}, _this10);\n        _this10.onRemove(function (view) {\n          return function () {\n            view.remove();\n          };\n        }(view));\n        view.template = subTemplate;\n        var _loop8 = function _loop8() {\n          var debind = _this10.args.bindTo(carryProps[i], function (v, k) {\n            view.args[k] = v;\n          });\n          view.onRemove(debind);\n          _this10.onRemove(function () {\n            debind();\n            view.remove();\n          });\n        };\n        for (var i in carryProps) {\n          _loop8();\n        }\n        var _loop9 = function _loop9() {\n          if (_typeof(v) !== 'object') {\n            return \"continue\";\n          }\n          v = _Bindable.Bindable.make(v);\n          var debind = v.bindTo(_i5, function (vv, kk, tt, dd) {\n            if (!dd) {\n              view.args[kk] = vv;\n            } else if (kk in view.args) {\n              delete view.args[kk];\n            }\n          });\n          var debindUp = view.args.bindTo(_i5, function (vv, kk, tt, dd) {\n            if (!dd) {\n              v[kk] = vv;\n            } else if (kk in v) {\n              delete v[kk];\n            }\n          });\n          _this10.onRemove(function () {\n            debind();\n            if (!v.isBound()) {\n              _Bindable.Bindable.clearBindings(v);\n            }\n            view.remove();\n          });\n          view.onRemove(function () {\n            debind();\n            if (!v.isBound()) {\n              _Bindable.Bindable.clearBindings(v);\n            }\n          });\n        };\n        for (var _i5 in v) {\n          var _ret6 = _loop9();\n          if (_ret6 === \"continue\") continue;\n        }\n        view.render(tag);\n        _this10.withViews.set(tag, view);\n      });\n      this.onRemove(function () {\n        _this10.withViews[\"delete\"](tag);\n        debind();\n      });\n      return tag;\n    }\n  }, {\n    key: \"mapViewTag\",\n    value: function mapViewTag(tag) {\n      var _this11 = this;\n      var viewAttr = tag.getAttribute('cv-view');\n      tag.removeAttribute('cv-view');\n      var subTemplate = new DocumentFragment();\n      _toConsumableArray(tag.childNodes).forEach(function (n) {\n        return subTemplate.appendChild(n);\n      });\n      var parts = viewAttr.split(':');\n      var viewClass = parts.pop() ? this.stringToClass(viewAttr) : View;\n      var viewName = parts.shift();\n      var view = new viewClass(this.args, this);\n      this.views.set(tag, view);\n      if (viewName) {\n        this.views.set(viewName, view);\n      }\n      this.onRemove(function (view) {\n        return function () {\n          view.remove();\n          _this11.views[\"delete\"](tag);\n          _this11.views[\"delete\"](viewName);\n        };\n      }(view));\n      view.template = subTemplate;\n      view.render(tag);\n      return tag;\n    }\n  }, {\n    key: \"mapEachTag\",\n    value: function mapEachTag(tag) {\n      var _this12 = this;\n      var eachAttr = tag.getAttribute('cv-each');\n      var viewAttr = tag.getAttribute('cv-view');\n      tag.removeAttribute('cv-each');\n      tag.removeAttribute('cv-view');\n      var viewClass = viewAttr ? this.stringToClass(viewAttr) : View;\n      var subTemplate = new DocumentFragment();\n      _toConsumableArray(tag.childNodes).forEach(function (n) {\n        return subTemplate.appendChild(n);\n      });\n      var _eachAttr$split = eachAttr.split(':'),\n        _eachAttr$split2 = _slicedToArray(_eachAttr$split, 3),\n        eachProp = _eachAttr$split2[0],\n        asProp = _eachAttr$split2[1],\n        keyProp = _eachAttr$split2[2];\n      var proxy = this.args;\n      var property = eachProp;\n      if (eachProp.match(/\\./)) {\n        var _Bindable$resolve11 = _Bindable.Bindable.resolve(this.args, eachProp, true);\n        var _Bindable$resolve12 = _slicedToArray(_Bindable$resolve11, 2);\n        proxy = _Bindable$resolve12[0];\n        property = _Bindable$resolve12[1];\n      }\n      var debind = proxy.bindTo(property, function (v, k, t, d, p) {\n        if (v instanceof _Bag.Bag) {\n          v = v.list;\n        }\n        if (_this12.viewLists.has(tag)) {\n          _this12.viewLists.get(tag).remove();\n        }\n        var viewList = new _ViewList.ViewList(subTemplate, asProp, v, _this12, keyProp, viewClass);\n        var viewListRemover = function viewListRemover() {\n          return viewList.remove();\n        };\n        _this12.onRemove(viewListRemover);\n        viewList.onRemove(function () {\n          return _this12._onRemove.remove(viewListRemover);\n        });\n        var debindA = _this12.args.bindTo(function (v, k, t, d) {\n          if (k === '_id') {\n            return;\n          }\n          if (!d) {\n            viewList.subArgs[k] = v;\n          } else {\n            if (k in viewList.subArgs) {\n              delete viewList.subArgs[k];\n            }\n          }\n        });\n        var debindB = viewList.args.bindTo(function (v, k, t, d, p) {\n          if (k === '_id' || k === 'value' || String(k).substring(0, 3) === '___') {\n            return;\n          }\n          if (!d) {\n            if (k in _this12.args) {\n              _this12.args[k] = v;\n            }\n          } else {\n            delete _this12.args[k];\n          }\n        });\n        viewList.onRemove(debindA);\n        viewList.onRemove(debindB);\n        _this12.onRemove(debindA);\n        _this12.onRemove(debindB);\n        while (tag.firstChild) {\n          tag.removeChild(tag.firstChild);\n        }\n        _this12.viewLists.set(tag, viewList);\n        viewList.render(tag);\n      });\n      this.onRemove(debind);\n      return tag;\n    }\n  }, {\n    key: \"mapIfTag\",\n    value: function mapIfTag(tag) {\n      var _this13 = this;\n      var sourceTag = tag;\n      var viewProperty = sourceTag.getAttribute('cv-view');\n      var ifProperty = sourceTag.getAttribute('cv-if');\n      var isProperty = sourceTag.getAttribute('cv-is');\n      var inverted = false;\n      var defined = false;\n      sourceTag.removeAttribute('cv-view');\n      sourceTag.removeAttribute('cv-if');\n      sourceTag.removeAttribute('cv-is');\n      var viewClass = viewProperty ? this.stringToClass(viewProperty) : View;\n      if (ifProperty.substr(0, 1) === '!') {\n        ifProperty = ifProperty.substr(1);\n        inverted = true;\n      }\n      if (ifProperty.substr(0, 1) === '?') {\n        ifProperty = ifProperty.substr(1);\n        defined = true;\n      }\n      var subTemplate = new DocumentFragment();\n      _toConsumableArray(sourceTag.childNodes).forEach(function (n) {\n        return subTemplate.appendChild(n);\n      });\n      var bindingView = this;\n      var ifDoc = new DocumentFragment();\n      var view = new viewClass(Object.assign({}, this.args), bindingView);\n      view.tags.bindTo(function (v, k) {\n        return _this13.tags[k] = v;\n      }, {\n        removeWith: this\n      });\n      view.template = subTemplate;\n      var proxy = bindingView.args;\n      var property = ifProperty;\n      if (ifProperty.match(/\\./)) {\n        var _Bindable$resolve13 = _Bindable.Bindable.resolve(bindingView.args, ifProperty, true);\n        var _Bindable$resolve14 = _slicedToArray(_Bindable$resolve13, 2);\n        proxy = _Bindable$resolve14[0];\n        property = _Bindable$resolve14[1];\n      }\n      view.render(ifDoc);\n      var propertyDebind = proxy.bindTo(property, function (v, k) {\n        var o = v;\n        if (defined) {\n          v = v !== null && v !== undefined;\n        }\n        if (v instanceof _Bag.Bag) {\n          v = v.list;\n        }\n        if (Array.isArray(v)) {\n          v = !!v.length;\n        }\n        if (isProperty !== null) {\n          v = o == isProperty;\n        }\n        if (inverted) {\n          v = !v;\n        }\n        if (v) {\n          tag.appendChild(ifDoc);\n          _toConsumableArray(ifDoc.childNodes).forEach(function (node) {\n            return _Dom.Dom.mapTags(node, false, function (tag, walker) {\n              if (!tag.matches) {\n                return;\n              }\n              tag.dispatchEvent(new CustomEvent('cvDomAttached', {\n                target: tag,\n                detail: {\n                  view: view || _this13,\n                  mainView: _this13\n                }\n              }));\n            });\n          });\n        } else {\n          view.nodes.forEach(function (n) {\n            return ifDoc.appendChild(n);\n          });\n          _Dom.Dom.mapTags(ifDoc, false, function (tag, walker) {\n            if (!tag.matches) {\n              return;\n            }\n            new CustomEvent('cvDomDetached', {\n              target: tag,\n              detail: {\n                view: view || _this13,\n                mainView: _this13\n              }\n            });\n          });\n        }\n      }, {\n        children: Array.isArray(proxy[property])\n      });\n\n      // const propertyDebind = this.args.bindChain(property, onUpdate);\n\n      bindingView.onRemove(propertyDebind);\n      var debindA = this.args.bindTo(function (v, k, t, d) {\n        if (k === '_id') {\n          return;\n        }\n        if (!d) {\n          view.args[k] = v;\n        } else if (k in view.args) {\n          delete view.args[k];\n        }\n      });\n      var debindB = view.args.bindTo(function (v, k, t, d, p) {\n        if (k === '_id' || String(k).substring(0, 3) === '___') {\n          return;\n        }\n        if (k in _this13.args) {\n          if (!d) {\n            _this13.args[k] = v;\n          } else {\n            delete _this13.args[k];\n          }\n        }\n      });\n      var viewDebind = function viewDebind() {\n        propertyDebind();\n        debindA();\n        debindB();\n        bindingView._onRemove.remove(propertyDebind);\n        // bindingView._onRemove.remove(bindableDebind);\n      };\n\n      bindingView.onRemove(viewDebind);\n      this.onRemove(function () {\n        debindA();\n        debindB();\n        view.remove();\n        if (bindingView !== _this13) {\n          bindingView.remove();\n        }\n      });\n      return tag;\n    }\n  }, {\n    key: \"compileIfTag\",\n    value: function compileIfTag(sourceTag) {\n      var ifProperty = sourceTag.getAttribute('cv-if');\n      var inverted = false;\n      sourceTag.removeAttribute('cv-if');\n      if (ifProperty.substr(0, 1) === '!') {\n        ifProperty = ifProperty.substr(1);\n        inverted = true;\n      }\n      var subTemplate = new DocumentFragment();\n      _toConsumableArray(sourceTag.childNodes).forEach(function (n) {\n        return subTemplate.appendChild(n.cloneNode(true));\n      });\n      return function (bindingView) {\n        var tag = sourceTag.cloneNode();\n        var ifDoc = new DocumentFragment();\n        var view = new View({}, bindingView);\n        view.template = subTemplate;\n        // view.parent   = bindingView;\n\n        bindingView.syncBind(view);\n        var proxy = bindingView.args;\n        var property = ifProperty;\n        if (ifProperty.match(/\\./)) {\n          var _Bindable$resolve15 = _Bindable.Bindable.resolve(bindingView.args, ifProperty, true);\n          var _Bindable$resolve16 = _slicedToArray(_Bindable$resolve15, 2);\n          proxy = _Bindable$resolve16[0];\n          property = _Bindable$resolve16[1];\n        }\n        var hasRendered = false;\n        var propertyDebind = proxy.bindTo(property, function (v, k) {\n          if (!hasRendered) {\n            var renderDoc = bindingView.args[property] || inverted ? tag : ifDoc;\n            view.render(renderDoc);\n            hasRendered = true;\n            return;\n          }\n          if (Array.isArray(v)) {\n            v = !!v.length;\n          }\n          if (inverted) {\n            v = !v;\n          }\n          if (v) {\n            tag.appendChild(ifDoc);\n          } else {\n            view.nodes.forEach(function (n) {\n              return ifDoc.appendChild(n);\n            });\n          }\n        });\n\n        // let cleaner = bindingView;\n\n        // while(cleaner.parent)\n        // {\n        // \tcleaner = cleaner.parent;\n        // }\n\n        bindingView.onRemove(propertyDebind);\n        var bindableDebind = function bindableDebind() {\n          if (!proxy.isBound()) {\n            _Bindable.Bindable.clearBindings(proxy);\n          }\n        };\n        var viewDebind = function viewDebind() {\n          propertyDebind();\n          bindableDebind();\n          bindingView._onRemove.remove(propertyDebind);\n          bindingView._onRemove.remove(bindableDebind);\n        };\n        view.onRemove(viewDebind);\n        return tag;\n      };\n    }\n  }, {\n    key: \"mapTemplateTag\",\n    value: function mapTemplateTag(tag) {\n      var templateName = tag.getAttribute('cv-template');\n      tag.removeAttribute('cv-template');\n      this.templates[templateName] = function () {\n        return tag.tagName === 'TEMPLATE' ? tag.content.cloneNode(true) : new DocumentFragment(tag.innerHTML);\n      };\n      this.rendered.then(function () {\n        return tag.remove();\n      });\n      return tag;\n    }\n  }, {\n    key: \"mapSlotTag\",\n    value: function mapSlotTag(tag) {\n      var templateName = tag.getAttribute('cv-slot');\n      var getTemplate = this.templates[templateName];\n      if (!getTemplate) {\n        var parent = this;\n        while (parent) {\n          getTemplate = parent.templates[templateName];\n          if (getTemplate) {\n            break;\n          }\n          parent = this.parent;\n        }\n        if (!getTemplate) {\n          console.error(\"Template \".concat(templateName, \" not found.\"));\n          return;\n        }\n      }\n      var template = getTemplate();\n      tag.removeAttribute('cv-slot');\n      while (tag.firstChild) {\n        tag.firstChild.remove();\n      }\n      tag.appendChild(template);\n      return tag;\n    }\n  }, {\n    key: \"syncBind\",\n    value: function syncBind(subView) {\n      var _this14 = this;\n      var debindA = this.args.bindTo(function (v, k, t, d) {\n        if (k === '_id') {\n          return;\n        }\n        if (subView.args[k] !== v) {\n          subView.args[k] = v;\n        }\n      });\n      var debindB = subView.args.bindTo(function (v, k, t, d, p) {\n        if (k === '_id') {\n          return;\n        }\n        var newRef = v;\n        var oldRef = p;\n        if (newRef instanceof View) {\n          newRef = newRef.___ref___;\n        }\n        if (oldRef instanceof View) {\n          oldRef = oldRef.___ref___;\n        }\n        if (newRef !== oldRef && oldRef instanceof View) {\n          p.remove();\n        }\n        if (k in _this14.args) {\n          _this14.args[k] = v;\n        }\n      });\n      this.onRemove(debindA);\n      this.onRemove(debindB);\n      subView.onRemove(function () {\n        _this14._onRemove.remove(debindA);\n        _this14._onRemove.remove(debindB);\n      });\n    }\n  }, {\n    key: \"postRender\",\n    value: function postRender(parentNode) {}\n  }, {\n    key: \"attached\",\n    value: function attached(parentNode) {}\n  }, {\n    key: \"interpolatable\",\n    value: function interpolatable(str) {\n      return !!String(str).match(this.interpolateRegex);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var _this15 = this;\n      var now = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!this.dispatchEvent(new CustomEvent('remove', {\n        detail: {\n          view: this\n        },\n        cancelable: true\n      }))) {\n        return;\n      }\n      var remover = function remover() {\n        for (var i in _this15.tags) {\n          if (Array.isArray(_this15.tags[i])) {\n            _this15.tags[i] && _this15.tags[i].forEach(function (t) {\n              return t.remove();\n            });\n            _this15.tags[i].splice(0);\n          } else {\n            _this15.tags[i] && _this15.tags[i].remove();\n            _this15.tags[i] = undefined;\n          }\n        }\n        for (var _i6 in _this15.nodes) {\n          _this15.nodes[_i6] && _this15.nodes[_i6].dispatchEvent(new Event('cvDomDetached'));\n          _this15.nodes[_i6] && _this15.nodes[_i6].remove();\n          _this15.nodes[_i6] = undefined;\n        }\n        _this15.nodes.splice(0);\n        _this15.firstNode = _this15.lastNode = undefined;\n      };\n      if (now) {\n        remover();\n      } else {\n        requestAnimationFrame(remover);\n      }\n      var callbacks = this._onRemove.items();\n      var _iterator10 = _createForOfIteratorHelper(callbacks),\n        _step10;\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var callback = _step10.value;\n          callback();\n          this._onRemove.remove(callback);\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n      var _iterator11 = _createForOfIteratorHelper(this.cleanup),\n        _step11;\n      try {\n        for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n          var cleanup = _step11.value;\n          cleanup && cleanup();\n        }\n      } catch (err) {\n        _iterator11.e(err);\n      } finally {\n        _iterator11.f();\n      }\n      this.cleanup.length = 0;\n      var _iterator12 = _createForOfIteratorHelper(this.viewLists),\n        _step12;\n      try {\n        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n          var _step12$value = _slicedToArray(_step12.value, 2),\n            tag = _step12$value[0],\n            viewList = _step12$value[1];\n          viewList.remove();\n        }\n      } catch (err) {\n        _iterator12.e(err);\n      } finally {\n        _iterator12.f();\n      }\n      this.viewLists.clear();\n      var _iterator13 = _createForOfIteratorHelper(this.timeouts),\n        _step13;\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var _step13$value = _slicedToArray(_step13.value, 2),\n            _callback3 = _step13$value[0],\n            timeout = _step13$value[1];\n          clearTimeout(timeout.timeout);\n          this.timeouts[\"delete\"](timeout.timeout);\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n      var _iterator14 = _createForOfIteratorHelper(this.intervals),\n        _step14;\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var interval = _step14.value;\n          clearInterval(interval);\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n      this.intervals.length = 0;\n      var _iterator15 = _createForOfIteratorHelper(this.frames),\n        _step15;\n      try {\n        for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n          var frame = _step15.value;\n          frame();\n        }\n      } catch (err) {\n        _iterator15.e(err);\n      } finally {\n        _iterator15.f();\n      }\n      this.frames.length = 0;\n      this.preRuleSet.purge();\n      this.ruleSet.purge();\n      this.removed = true;\n      this.dispatchEvent(new CustomEvent('removed', {\n        detail: {\n          view: this\n        },\n        cancelable: true\n      }));\n    }\n  }, {\n    key: \"findTag\",\n    value: function findTag(selector) {\n      for (var i in this.nodes) {\n        var result = void 0;\n        if (!this.nodes[i].querySelector) {\n          continue;\n        }\n        if (this.nodes[i].matches(selector)) {\n          return new _Tag.Tag(this.nodes[i], this, undefined, undefined, this);\n        }\n        if (result = this.nodes[i].querySelector(selector)) {\n          return new _Tag.Tag(result, this, undefined, undefined, this);\n        }\n      }\n    }\n  }, {\n    key: \"findTags\",\n    value: function findTags(selector) {\n      var _this16 = this;\n      return this.nodes.filter(function (n) {\n        return n.querySelectorAll;\n      }).map(function (n) {\n        return _toConsumableArray(n.querySelectorAll(selector));\n      }).flat().map(function (n) {\n        return new _Tag.Tag(n, _this16, undefined, undefined, _this16);\n      }) || [];\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove(callback) {\n      if (callback instanceof Event) {\n        return;\n      }\n      this._onRemove.add(callback);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {}\n  }, {\n    key: \"beforeUpdate\",\n    value: function beforeUpdate(args) {}\n  }, {\n    key: \"afterUpdate\",\n    value: function afterUpdate(args) {}\n  }, {\n    key: \"stringTransformer\",\n    value: function stringTransformer(methods) {\n      var _this17 = this;\n      return function (x) {\n        for (var m in methods) {\n          var parent = _this17;\n          var method = methods[m];\n          while (parent && !parent[method]) {\n            parent = parent.parent;\n          }\n          if (!parent) {\n            return;\n          }\n          x = parent[methods[m]](x);\n        }\n        return x;\n      };\n    }\n  }, {\n    key: \"stringToClass\",\n    value: function stringToClass(refClassname) {\n      if (View.refClasses.has(refClassname)) {\n        return View.refClasses.get(refClassname);\n      }\n      var refClassSplit = refClassname.split('/');\n      var refShortClass = refClassSplit[refClassSplit.length - 1];\n      var refClass = require(refClassname);\n      View.refClasses.set(refClassname, refClass[refShortClass]);\n      return refClass[refShortClass];\n    }\n  }, {\n    key: \"preventParsing\",\n    value: function preventParsing(node) {\n      node[dontParse] = true;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.nodes.map(function (n) {\n        return n.outerHTML;\n      }).join(' ');\n    }\n  }, {\n    key: \"listen\",\n    value: function listen(node, eventName, callback, options) {\n      var _this18 = this;\n      if (typeof node === 'string') {\n        options = callback;\n        callback = eventName;\n        eventName = node;\n        node = this;\n      }\n      if (node instanceof View) {\n        return this.listen(node.nodes, eventName, callback, options);\n      }\n      if (Array.isArray(node)) {\n        return node.map(function (n) {\n          return _this18.listen(n, eventName, callback, options);\n        }).forEach(function (r) {\n          return r();\n        });\n      }\n      if (node instanceof _Tag.Tag) {\n        return this.listen(node.element, eventName, callback, options);\n      }\n      node.addEventListener(eventName, callback, options);\n      var remove = function remove() {\n        return node.removeEventListener(eventName, callback, options);\n      };\n      var remover = function remover() {\n        remove();\n        remove = function remove() {};\n      };\n      this.onRemove(function () {\n        return remover();\n      });\n      return remover;\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      for (var n in this.nodes) {\n        this.nodes[n].remove();\n      }\n      return this.nodes;\n    }\n  }], [{\n    key: \"from\",\n    value: function from(template) {\n      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var view = new this(args, mainView);\n      view.template = template;\n      return view;\n    }\n  }, {\n    key: \"isView\",\n    value: function isView() {\n      return View;\n    }\n  }, {\n    key: \"uuid\",\n    value: function uuid() {\n      return new _Uuid.Uuid();\n    }\n  }]);\n  return View;\n}(_Mixin.Mixin[\"with\"](_EventTargetMixin.EventTargetMixin));\nexports.View = View;\nObject.defineProperty(View, 'templates', {\n  value: new Map()\n});\nObject.defineProperty(View, 'refClasses', {\n  value: new Map()\n});\n  })();\n});","\nrequire.register(\"curvature/base/ViewList.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ViewList = void 0;\nvar _Bindable = require(\"./Bindable\");\nvar _SetMap = require(\"./SetMap\");\nvar _Bag = require(\"./Bag\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar ViewList = /*#__PURE__*/function () {\n  function ViewList(template, subProperty, list, parent) {\n    var _this = this;\n    var keyProperty = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    var viewClass = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n    _classCallCheck(this, ViewList);\n    this.removed = false;\n    this.args = _Bindable.Bindable.makeBindable({});\n    this.args.value = _Bindable.Bindable.makeBindable(list || {});\n    this.subArgs = _Bindable.Bindable.makeBindable({});\n    this.views = [];\n    this.cleanup = [];\n    this.viewClass = viewClass;\n    this._onRemove = new _Bag.Bag();\n    this.template = template;\n    this.subProperty = subProperty;\n    this.keyProperty = keyProperty;\n    this.tag = null;\n    this.downDebind = [];\n    this.upDebind = [];\n    this.paused = false;\n    this.parent = parent;\n    this.rendered = new Promise(function (accept, reject) {\n      Object.defineProperty(_this, 'renderComplete', {\n        configurable: false,\n        writable: true,\n        value: accept\n      });\n    });\n    this.willReRender = false;\n    this.args.___before(function (t, e, s, o, a) {\n      if (e == 'bindTo') {\n        return;\n      }\n      _this.paused = true;\n    });\n    this.args.___after(function (t, e, s, o, a) {\n      if (e == 'bindTo') {\n        return;\n      }\n      _this.paused = s.length > 1;\n      _this.reRender();\n    });\n    var debind = this.args.value.bindTo(function (v, k, t, d) {\n      if (_this.paused) {\n        return;\n      }\n      var kk = k;\n      if (_typeof(k) === 'symbol') {\n        return;\n      }\n      if (isNaN(k)) {\n        kk = '_' + k;\n      }\n      if (d) {\n        if (_this.views[kk]) {\n          _this.views[kk].remove();\n        }\n        delete _this.views[kk];\n        for (var i in _this.views) {\n          if (isNaN(i)) {\n            _this.views[i].args[_this.keyProperty] = i.substr(1);\n            continue;\n          }\n          _this.views[i].args[_this.keyProperty] = i;\n        }\n      } else if (!_this.views[kk]) {\n        cancelAnimationFrame(_this.willReRender);\n        _this.willReRender = requestAnimationFrame(function () {\n          _this.reRender();\n        });\n      } else if (_this.views[kk] && _this.views[kk].args) {\n        _this.views[kk].args[_this.keyProperty] = k;\n        _this.views[kk].args[_this.subProperty] = v;\n      }\n    });\n    this._onRemove.add(debind);\n    Object.preventExtensions(this);\n  }\n  _createClass(ViewList, [{\n    key: \"render\",\n    value: function render(tag) {\n      var _this2 = this;\n      var renders = [];\n      var _iterator = _createForOfIteratorHelper(this.views),\n        _step;\n      try {\n        var _loop = function _loop() {\n          var view = _step.value;\n          view.render(tag);\n          renders.push(view.rendered.then(function () {\n            return view;\n          }));\n        };\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      this.tag = tag;\n      Promise.all(renders).then(function (views) {\n        return _this2.renderComplete(views);\n      });\n      this.parent.dispatchEvent(new CustomEvent('listRendered', {\n        detail: {\n          detail: {\n            key: this.subProperty,\n            value: this.args.value\n          }\n        }\n      }));\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      var _this3 = this;\n      if (this.paused || !this.tag) {\n        return;\n      }\n      var views = [];\n      var existingViews = new _SetMap.SetMap();\n      for (var i in this.views) {\n        var view = this.views[i];\n        var rawValue = view.args[this.subProperty];\n        existingViews.add(rawValue, view);\n        views[i] = view;\n      }\n      var finalViews = [];\n      var finalViewSet = new Set();\n      this.downDebind.length && this.downDebind.forEach(function (d) {\n        return d && d();\n      });\n      this.upDebind.length && this.upDebind.forEach(function (d) {\n        return d && d();\n      });\n      this.upDebind.length = 0;\n      this.downDebind.length = 0;\n      var minKey = Infinity;\n      var anteMinKey = Infinity;\n      var _loop2 = function _loop2() {\n        var found = false;\n        var k = _i;\n        if (isNaN(k)) {\n          k = '_' + _i;\n        } else if (String(k).length) {\n          k = Number(k);\n        }\n        if (_this3.args.value[_i] !== undefined && existingViews.has(_this3.args.value[_i])) {\n          var existingView = existingViews.getOne(_this3.args.value[_i]);\n          if (existingView) {\n            existingView.args[_this3.keyProperty] = _i;\n            finalViews[k] = existingView;\n            finalViewSet.add(existingView);\n            found = true;\n            if (!isNaN(k)) {\n              minKey = Math.min(minKey, k);\n              k > 0 && (anteMinKey = Math.min(anteMinKey, k));\n            }\n            existingViews.remove(_this3.args.value[_i], existingView);\n          }\n        }\n        if (!found) {\n          var viewArgs = {};\n          var _view = finalViews[k] = new _this3.viewClass(viewArgs, _this3.parent);\n          if (!isNaN(k)) {\n            minKey = Math.min(minKey, k);\n            k > 0 && (anteMinKey = Math.min(anteMinKey, k));\n          }\n          finalViews[k].template = _this3.template;\n          finalViews[k].viewList = _this3;\n          finalViews[k].args[_this3.keyProperty] = _i;\n          finalViews[k].args[_this3.subProperty] = _this3.args.value[_i];\n          _this3.upDebind[k] = viewArgs.bindTo(_this3.subProperty, function (v, k, t, d) {\n            var index = viewArgs[_this3.keyProperty];\n            if (d) {\n              delete _this3.args.value[index];\n              return;\n            }\n            _this3.args.value[index] = v;\n          });\n          _this3.downDebind[k] = _this3.subArgs.bindTo(function (v, k, t, d) {\n            if (d) {\n              delete viewArgs[k];\n              return;\n            }\n            viewArgs[k] = v;\n          });\n          var upDebind = function upDebind() {\n            _this3.upDebind.filter(function (x) {\n              return x;\n            }).forEach(function (d) {\n              return d();\n            });\n            _this3.upDebind.length = 0;\n          };\n          var downDebind = function downDebind() {\n            _this3.downDebind.filter(function (x) {\n              return x;\n            }).forEach(function (d) {\n              return d();\n            });\n            _this3.downDebind.length = 0;\n          };\n          _view.onRemove(function () {\n            _this3._onRemove.remove(upDebind);\n            _this3._onRemove.remove(downDebind);\n            _this3.upDebind[k] && _this3.upDebind[k]();\n            _this3.downDebind[k] && _this3.downDebind[k]();\n            delete _this3.upDebind[k];\n            delete _this3.downDebind[k];\n          });\n          _this3._onRemove.add(upDebind);\n          _this3._onRemove.add(downDebind);\n          viewArgs[_this3.subProperty] = _this3.args.value[_i];\n        }\n      };\n      for (var _i in this.args.value) {\n        _loop2();\n      }\n      for (var _i2 in views) {\n        if (!finalViewSet.has(views[_i2])) {\n          views[_i2].remove();\n        }\n      }\n      if (Array.isArray(this.args.value)) {\n        var localMin = minKey === 0 && finalViews[1] !== undefined && finalViews.length > 1 || anteMinKey === Infinity ? minKey : anteMinKey;\n        var renderRecurse = function renderRecurse() {\n          var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var ii = finalViews.length - i - 1;\n          while (ii > localMin && finalViews[ii] === undefined) {\n            ii--;\n          }\n          if (ii < localMin) {\n            return Promise.resolve();\n          }\n          if (finalViews[ii] === _this3.views[ii]) {\n            if (finalViews[ii] && !finalViews[ii].firstNode) {\n              finalViews[ii].render(_this3.tag, finalViews[ii + 1]);\n              return finalViews[ii].rendered.then(function () {\n                return renderRecurse(Number(i) + 1);\n              });\n            } else {\n              var split = 500;\n              if (i === 0 || i % split) {\n                return renderRecurse(Number(i) + 1);\n              } else {\n                return new Promise(function (accept) {\n                  return requestAnimationFrame(function () {\n                    return accept(renderRecurse(Number(i) + 1));\n                  });\n                });\n              }\n            }\n          }\n          finalViews[ii].render(_this3.tag, finalViews[ii + 1]);\n          _this3.views.splice(ii, 0, finalViews[ii]);\n          return finalViews[ii].rendered.then(function () {\n            return renderRecurse(i + 1);\n          });\n        };\n        this.rendered = renderRecurse();\n      } else {\n        var renders = [];\n        var leftovers = Object.assign({}, finalViews);\n        var isInt = function isInt(x) {\n          return parseInt(x) === x - 0;\n        };\n        var keys = Object.keys(finalViews).sort(function (a, b) {\n          if (isInt(a) && isInt(b)) {\n            return Math.sign(a - b);\n          }\n          if (!isInt(a) && !isInt(b)) {\n            return 0;\n          }\n          if (!isInt(a) && isInt(b)) {\n            return -1;\n          }\n          if (isInt(a) && !isInt(b)) {\n            return 1;\n          }\n        });\n        var _iterator2 = _createForOfIteratorHelper(keys),\n          _step2;\n        try {\n          var _loop3 = function _loop3() {\n            var i = _step2.value;\n            delete leftovers[i];\n            if (finalViews[i].firstNode && finalViews[i] === _this3.views[i]) {\n              return \"continue\";\n            }\n            finalViews[i].render(_this3.tag);\n            renders.push(finalViews[i].rendered.then(function () {\n              return finalViews[i];\n            }));\n          };\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _ret = _loop3();\n            if (_ret === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        for (var _i3 in leftovers) {\n          delete this.args.views[_i3];\n          leftovers.remove();\n        }\n        this.rendered = Promise.all(renders);\n      }\n      for (var _i4 in finalViews) {\n        if (isNaN(_i4)) {\n          finalViews[_i4].args[this.keyProperty] = _i4.substr(1);\n          continue;\n        }\n        finalViews[_i4].args[this.keyProperty] = _i4;\n      }\n      this.views = Array.isArray(this.args.value) ? [].concat(finalViews) : finalViews;\n      finalViewSet.clear();\n      this.willReRender = false;\n      this.rendered.then(function () {\n        _this3.parent.dispatchEvent(new CustomEvent('listRendered', {\n          detail: {\n            detail: {\n              key: _this3.subProperty,\n              value: _this3.args.value,\n              tag: _this3.tag\n            }\n          }\n        }));\n        _this3.tag.dispatchEvent(new CustomEvent('listRendered', {\n          detail: {\n            detail: {\n              key: _this3.subProperty,\n              value: _this3.args.value,\n              tag: _this3.tag\n            }\n          }\n        }));\n      });\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var _pause = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      for (var i in this.views) {\n        this.views[i].pause(_pause);\n      }\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove(callback) {\n      this._onRemove.add(callback);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      for (var i in this.views) {\n        this.views[i].remove();\n      }\n      var onRemove = this._onRemove.items();\n      for (var _i5 in onRemove) {\n        this._onRemove.remove(onRemove[_i5]);\n        onRemove[_i5]();\n      }\n      var cleanup;\n      while (this.cleanup.length) {\n        cleanup = this.cleanup.pop();\n        cleanup();\n      }\n      this.views = [];\n      while (this.tag && this.tag.firstChild) {\n        this.tag.removeChild(this.tag.firstChild);\n      }\n      if (this.subArgs) {\n        _Bindable.Bindable.clearBindings(this.subArgs);\n      }\n      _Bindable.Bindable.clearBindings(this.args);\n      if (this.args.value && !this.args.value.isBound()) {\n        _Bindable.Bindable.clearBindings(this.args.value);\n      }\n      this.removed = true;\n    }\n  }]);\n  return ViewList;\n}();\nexports.ViewList = ViewList;\n  })();\n});","\nrequire.register(\"curvature/input/Keyboard.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Keyboard = void 0;\nvar _Bindable = require(\"../base/Bindable\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar Keyboard = /*#__PURE__*/function () {\n  function Keyboard() {\n    var _this = this;\n    _classCallCheck(this, Keyboard);\n    this.maxDecay = 120;\n    this.comboTime = 500;\n    this.listening = false;\n    this.focusElement = document.body;\n    this[_Bindable.Bindable.NoGetters] = true;\n    Object.defineProperty(this, 'combo', {\n      value: _Bindable.Bindable.make([])\n    });\n    Object.defineProperty(this, 'whichs', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'codes', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'keys', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'pressedWhich', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'pressedCode', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'pressedKey', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'releasedWhich', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'releasedCode', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'releasedKey', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'keyRefs', {\n      value: _Bindable.Bindable.make({})\n    });\n    document.addEventListener('keyup', function (event) {\n      if (!_this.listening) {\n        return;\n      }\n      if (!(_this.keys[event.key] > 0) && _this.focusElement && document.activeElement !== _this.focusElement && (!_this.focusElement.contains(document.activeElement) || document.activeElement.matches('input,textarea'))) {\n        return;\n      }\n      event.preventDefault();\n      _this.releasedWhich[event.which] = Date.now();\n      _this.releasedCode[event.code] = Date.now();\n      _this.releasedKey[event.key] = Date.now();\n      _this.whichs[event.which] = -1;\n      _this.codes[event.code] = -1;\n      _this.keys[event.key] = -1;\n    });\n    document.addEventListener('keydown', function (event) {\n      if (!_this.listening) {\n        return;\n      }\n      if (_this.focusElement && document.activeElement !== _this.focusElement && (!_this.focusElement.contains(document.activeElement) || document.activeElement.matches('input,textarea'))) {\n        return;\n      }\n      event.preventDefault();\n      if (event.repeat) {\n        return;\n      }\n      _this.combo.push(event.code);\n      clearTimeout(_this.comboTimer);\n      _this.comboTimer = setTimeout(function () {\n        return _this.combo.splice(0);\n      }, _this.comboTime);\n      _this.pressedWhich[event.which] = Date.now();\n      _this.pressedCode[event.code] = Date.now();\n      _this.pressedKey[event.key] = Date.now();\n      if (_this.keys[event.key] > 0) {\n        return;\n      }\n      _this.whichs[event.which] = 1;\n      _this.codes[event.code] = 1;\n      _this.keys[event.key] = 1;\n    });\n    var windowBlur = function windowBlur(event) {\n      for (var i in _this.keys) {\n        if (_this.keys[i] < 0) {\n          continue;\n        }\n        _this.releasedKey[i] = Date.now();\n        _this.keys[i] = -1;\n      }\n      for (var _i in _this.codes) {\n        if (_this.codes[_i] < 0) {\n          continue;\n        }\n        _this.releasedCode[_i] = Date.now();\n        _this.codes[_i] = -1;\n      }\n      for (var _i2 in _this.whichs) {\n        if (_this.whichs[_i2] < 0) {\n          continue;\n        }\n        _this.releasedWhich[_i2] = Date.now();\n        _this.whichs[_i2] = -1;\n      }\n    };\n    window.addEventListener('blur', windowBlur);\n    window.addEventListener('visibilitychange', function () {\n      if (document.visibilityState === 'visible') {\n        return;\n      }\n      windowBlur();\n    });\n  }\n  _createClass(Keyboard, [{\n    key: \"getKeyRef\",\n    value: function getKeyRef(keyCode) {\n      var keyRef = this.keyRefs[keyCode] = this.keyRefs[keyCode] || _Bindable.Bindable.make({});\n      return keyRef;\n    }\n  }, {\n    key: \"getKeyTime\",\n    value: function getKeyTime(key) {\n      var released = this.releasedKey[key];\n      var pressed = this.pressedKey[key];\n      if (!pressed) {\n        return 0;\n      }\n      if (!released || released < pressed) {\n        return Date.now() - pressed;\n      }\n      return (Date.now() - released) * -1;\n    }\n  }, {\n    key: \"getCodeTime\",\n    value: function getCodeTime(code) {\n      var released = this.releasedCode[code];\n      var pressed = this.pressedCode[code];\n      if (!pressed) {\n        return 0;\n      }\n      if (!released || released < pressed) {\n        return Date.now() - pressed;\n      }\n      return (Date.now() - released) * -1;\n    }\n  }, {\n    key: \"getWhichTime\",\n    value: function getWhichTime(code) {\n      var released = this.releasedWhich[code];\n      var pressed = this.pressedWhich[code];\n      if (!pressed) {\n        return 0;\n      }\n      if (!released || released < pressed) {\n        return Date.now() - pressed;\n      }\n      return (Date.now() - released) * -1;\n    }\n  }, {\n    key: \"getKey\",\n    value: function getKey(key) {\n      if (!this.keys[key]) {\n        return 0;\n      }\n      return this.keys[key];\n    }\n  }, {\n    key: \"getKeyCode\",\n    value: function getKeyCode(code) {\n      if (!this.codes[code]) {\n        return 0;\n      }\n      return this.codes[code];\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      for (var i in this.keys) {\n        delete this.keys[i];\n      }\n      for (var i in this.codes) {\n        delete this.codes[i];\n      }\n      for (var i in this.whichs) {\n        delete this.whichs[i];\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      for (var i in this.keys) {\n        if (this.keys[i] > 0) {\n          this.keys[i]++;\n        } else if (this.keys[i] > -this.maxDecay) {\n          this.keys[i]--;\n        } else {\n          delete this.keys[i];\n        }\n      }\n      for (var i in this.codes) {\n        var released = this.releasedCode[i];\n        var pressed = this.pressedCode[i];\n        var keyRef = this.getKeyRef(i);\n        if (this.codes[i] > 0) {\n          keyRef.frames = this.codes[i]++;\n          keyRef.time = pressed ? Date.now() - pressed : 0;\n          keyRef.down = true;\n          if (!released || released < pressed) {\n            return;\n          }\n          return (Date.now() - released) * -1;\n        } else if (this.codes[i] > -this.maxDecay) {\n          keyRef.frames = this.codes[i]--;\n          keyRef.time = released - Date.now();\n          keyRef.down = false;\n        } else {\n          keyRef.frames = 0;\n          keyRef.time = 0;\n          keyRef.down = false;\n          delete this.codes[i];\n        }\n      }\n      for (var i in this.whichs) {\n        if (this.whichs[i] > 0) {\n          this.whichs[i]++;\n        } else if (this.whichs[i] > -this.maxDecay) {\n          this.whichs[i]--;\n        } else {\n          delete this.whichs[i];\n        }\n      }\n    }\n  }], [{\n    key: \"get\",\n    value: function get() {\n      return this.instance = this.instance || _Bindable.Bindable.make(new this());\n    }\n  }]);\n  return Keyboard;\n}();\nexports.Keyboard = Keyboard;\n  })();\n});","\nrequire.register(\"curvature/mixin/EventTargetMixin.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventTargetMixin = void 0;\nvar _Mixin = require(\"../base/Mixin\");\nvar _EventTargetMixin;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nvar EventTargetParent = Symbol('EventTargetParent');\nvar CallHandler = Symbol('CallHandler');\nvar Capture = Symbol('Capture');\nvar Bubble = Symbol('Bubble');\nvar Target = Symbol('Target');\nvar HandlersBubble = Symbol('HandlersBubble');\nvar HandlersCapture = Symbol('HandlersCapture');\nvar EventTargetMixin = (_EventTargetMixin = {}, _defineProperty(_EventTargetMixin, _Mixin.Mixin.Constructor, function () {\n  this[HandlersCapture] = new Map();\n  this[HandlersBubble] = new Map();\n}), _defineProperty(_EventTargetMixin, \"dispatchEvent\", function dispatchEvent() {\n  var _this = this;\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  var event = args[0];\n  if (typeof event === 'string') {\n    event = new CustomEvent(event);\n    args[0] = event;\n  }\n  event.cvPath = event.cvPath || [];\n  event.cvTarget = event.cvCurrentTarget = this;\n  var result = this[Capture].apply(this, args);\n  if (event.cancelable && (result === false || event.cancelBubble)) {\n    return result;\n  }\n  var handlers = [];\n  if (this[HandlersCapture].has(event.type)) {\n    var handlerMap = this[HandlersCapture].get(event.type);\n    var newHandlers = _toConsumableArray(handlerMap);\n    newHandlers.forEach(function (h) {\n      return h.push(handlerMap);\n    });\n    handlers.push.apply(handlers, _toConsumableArray(newHandlers));\n  }\n  if (this[HandlersBubble].has(event.type)) {\n    var _handlerMap = this[HandlersBubble].get(event.type);\n    var _newHandlers = _toConsumableArray(_handlerMap);\n    _newHandlers.forEach(function (h) {\n      return h.push(_handlerMap);\n    });\n    handlers.push.apply(handlers, _toConsumableArray(_newHandlers));\n  }\n  handlers.push([function () {\n    return _this[CallHandler].apply(_this, args);\n  }, {}, null]);\n  for (var _i = 0, _handlers = handlers; _i < _handlers.length; _i++) {\n    var _handlers$_i = _slicedToArray(_handlers[_i], 3),\n      handler = _handlers$_i[0],\n      options = _handlers$_i[1],\n      map = _handlers$_i[2];\n    if (options.once) {\n      map[\"delete\"](handler);\n    }\n    result = handler(event);\n    if (event.cancelable && result === false) {\n      break;\n    }\n  }\n  if (!event.cancelable || !event.cancelBubble && result !== false) {\n    this[Bubble].apply(this, args);\n  }\n  if (!this[EventTargetParent]) {\n    Object.freeze(event.cvPath);\n  }\n  return event.returnValue;\n}), _defineProperty(_EventTargetMixin, \"addEventListener\", function addEventListener(type, callback) {\n  var _this2 = this;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (options === true) {\n    options = {\n      useCapture: true\n    };\n  }\n  var handlers = HandlersBubble;\n  if (options.useCapture) {\n    handlers = HandlersCapture;\n  }\n  if (!this[handlers].has(type)) {\n    this[handlers].set(type, new Map());\n  }\n  this[handlers].get(type).set(callback, options);\n  if (options.signal) {\n    options.signal.addEventListener('abort', function (event) {\n      return _this2.removeEventListener(type, callback, options);\n    }, {\n      once: true\n    });\n  }\n}), _defineProperty(_EventTargetMixin, \"removeEventListener\", function removeEventListener(type, callback) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (options === true) {\n    options = {\n      useCapture: true\n    };\n  }\n  var handlers = HandlersBubble;\n  if (options.useCapture) {\n    handlers = HandlersCapture;\n  }\n  if (!this[handlers].has(type)) {\n    return;\n  }\n  this[handlers].get(type)[\"delete\"](callback);\n}), _defineProperty(_EventTargetMixin, Capture, function () {\n  var _this$EventTargetPare;\n  var event = arguments.length <= 0 ? undefined : arguments[0];\n  event.cvPath.push(this);\n  if (!this[EventTargetParent]) {\n    return;\n  }\n  var result = (_this$EventTargetPare = this[EventTargetParent])[Capture].apply(_this$EventTargetPare, arguments);\n  if (event.cancelable && (result === false || event.cancelBubble)) {\n    return;\n  }\n  if (!this[EventTargetParent][HandlersCapture].has(event.type)) {\n    return;\n  }\n  event.cvCurrentTarget = this[EventTargetParent];\n  var type = event.type;\n  var handlers = this[EventTargetParent][HandlersCapture].get(type);\n  var _iterator = _createForOfIteratorHelper(handlers),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _slicedToArray(_step.value, 2),\n        handler = _step$value[0],\n        options = _step$value[1];\n      if (options.once) {\n        handlers[\"delete\"](handler);\n      }\n      result = handler(event);\n      if (event.cancelable && (result === false || event.cancelBubble)) {\n        break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return result;\n}), _defineProperty(_EventTargetMixin, Bubble, function () {\n  var _this$EventTargetPare3, _this$EventTargetPare4;\n  var event = arguments.length <= 0 ? undefined : arguments[0];\n  if (!event.bubbles || !this[EventTargetParent] || event.cancelBubble) {\n    return;\n  }\n  if (!this[EventTargetParent][HandlersBubble].has(event.type)) {\n    var _this$EventTargetPare2;\n    return (_this$EventTargetPare2 = this[EventTargetParent])[Bubble].apply(_this$EventTargetPare2, arguments);\n  }\n  var result;\n  event.cvCurrentTarget = this[EventTargetParent];\n  var type = event.type;\n  var handlers = this[EventTargetParent][HandlersBubble].get(event.type);\n  var _iterator2 = _createForOfIteratorHelper(handlers),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _step2$value = _slicedToArray(_step2.value, 2),\n        handler = _step2$value[0],\n        options = _step2$value[1];\n      if (options.once) {\n        handlers[\"delete\"](handler);\n      }\n      result = handler(event);\n      if (event.cancelable && result === false) {\n        return result;\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  result = (_this$EventTargetPare3 = this[EventTargetParent])[CallHandler].apply(_this$EventTargetPare3, arguments);\n  if (event.cancelable && (result === false || event.cancelBubble)) {\n    return result;\n  }\n  return (_this$EventTargetPare4 = this[EventTargetParent])[Bubble].apply(_this$EventTargetPare4, arguments);\n}), _defineProperty(_EventTargetMixin, CallHandler, function () {\n  var event = arguments.length <= 0 ? undefined : arguments[0];\n  if (event.defaultPrevented) {\n    return;\n  }\n  var defaultHandler = \"on\".concat(event.type[0].toUpperCase() + event.type.slice(1));\n  if (typeof this[defaultHandler] === 'function') {\n    return this[defaultHandler](event);\n  }\n}), _EventTargetMixin);\nexports.EventTargetMixin = EventTargetMixin;\nObject.defineProperty(EventTargetMixin, 'Parent', {\n  value: EventTargetParent\n});\n  })();\n});","\nrequire.register(\"curvature/mixin/PromiseMixin.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PromiseMixin = void 0;\nvar _Mixin = require(\"../base/Mixin\");\nvar _PromiseMixin;\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar _Promise = Symbol('Promise');\nvar Accept = Symbol('Accept');\nvar Reject = Symbol('Reject');\nvar PromiseMixin = (_PromiseMixin = {}, _defineProperty(_PromiseMixin, _Mixin.Mixin.Constructor, function () {\n  var _this = this;\n  this[_Promise] = new Promise(function (accept, reject) {\n    _this[Accept] = accept;\n    _this[Reject] = reject;\n  });\n}), _defineProperty(_PromiseMixin, \"then\", function then() {\n  var _this$_Promise;\n  return (_this$_Promise = this[_Promise]).then.apply(_this$_Promise, arguments);\n}), _defineProperty(_PromiseMixin, \"catch\", function _catch() {\n  var _this$_Promise2;\n  return (_this$_Promise2 = this[_Promise])[\"catch\"].apply(_this$_Promise2, arguments);\n}), _defineProperty(_PromiseMixin, \"finally\", function _finally() {\n  var _this$_Promise3;\n  return (_this$_Promise3 = this[_Promise])[\"finally\"].apply(_this$_Promise3, arguments);\n}), _PromiseMixin);\nexports.PromiseMixin = PromiseMixin;\nObject.defineProperty(PromiseMixin, 'Reject', {\n  value: Reject\n});\nObject.defineProperty(PromiseMixin, 'Accept', {\n  value: Accept\n});\n  })();\n});","export class Config {};\n\nConfig.title = 'tigl';\n// Config.\n","class Program\n{\n\tcontext = null;\n\tprogram = null;\n\n\tattributes = {};\n\tbuffers = {};\n\tuniforms = {};\n\n\tconstructor({gl, vertexShader, fragmentShader, uniforms, attributes})\n\t{\n\t\tthis.context = gl;\n\t\tthis.program = gl.createProgram();\n\n\t\tgl.attachShader(this.program, vertexShader);\n\t\tgl.attachShader(this.program, fragmentShader);\n\n\t\tgl.linkProgram(this.program);\n\n\t\tgl.detachShader(this.program, vertexShader);\n\t\tgl.detachShader(this.program, fragmentShader);\n\n\t\tgl.deleteShader(vertexShader);\n\t\tgl.deleteShader(fragmentShader);\n\n\t\tif(!gl.getProgramParameter(this.program, gl.LINK_STATUS))\n\t\t{\n\t\t\tconsole.error(gl.getProgramInfoLog(this.program));\n\t\t\tgl.deleteProgram(this.program);\n\t\t}\n\n\t\tfor(const uniform of uniforms)\n\t\t{\n\t\t\tconst location = gl.getUniformLocation(this.program, uniform);\n\n\t\t\tif(location === null)\n\t\t\t{\n\t\t\t\tconsole.warn(`Uniform ${uniform} not found.`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.uniforms[uniform] = location;\n\t\t}\n\n\t\tfor(const attribute of attributes)\n\t\t{\n\t\t\tconst location = gl.getAttribLocation(this.program, attribute);\n\n\t\t\tif(location === null)\n\t\t\t{\n\t\t\t\tconsole.warn(`Attribute ${attribute} not found.`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst buffer = gl.createBuffer();\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n\t\t\tgl.enableVertexAttribArray(location);\n\t\t\tgl.vertexAttribPointer(\n\t\t\t\tlocation\n\t\t\t\t, 2\n\t\t\t\t, gl.FLOAT\n\t\t\t\t, false\n\t\t\t\t, 0\n\t\t\t\t, 0\n\t\t\t);\n\n\t\t\tthis.attributes[attribute] = location;\n\t\t\tthis.buffers[attribute] = buffer;\n\t\t}\n\t}\n\n\tuse()\n\t{\n\t\tthis.context.useProgram(this.program);\n\t}\n\n\tuniformF(name, ...floats)\n\t{\n\t\tconst gl = this.context;\n\t\tgl[`uniform${floats.length}f`](this.uniforms[name], ...floats);\n\t}\n\n\tuniformI(name, ...ints)\n\t{\n\t\tconst gl = this.context;\n\t\tgl[`uniform${ints.length}i`](this.uniforms[name], ...ints);\n\t}\n}\n\nexport class Gl2d\n{\n\tconstructor(element)\n\t{\n\t\tthis.element = element || document.createElement('canvas');\n\t\tthis.context = this.element.getContext('webgl');\n\t}\n\n\tcreateShader(location)\n\t{\n\t\tconst extension = location.substring(location.lastIndexOf('.')+1);\n\t\tlet   type = null;\n\n\t\tswitch(extension.toUpperCase())\n\t\t{\n\t\t\tcase 'VERT':\n\t\t\t\ttype = this.context.VERTEX_SHADER;\n\t\t\t\tbreak;\n\t\t\tcase 'FRAG':\n\t\t\t\ttype = this.context.FRAGMENT_SHADER;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst shader = this.context.createShader(type);\n\t\tconst source = require(location);\n\n\t\tthis.context.shaderSource(shader, source);\n\t\tthis.context.compileShader(shader);\n\n\t\tconst success = this.context.getShaderParameter(\n\t\t\tshader, this.context.COMPILE_STATUS\n\t\t);\n\n\t\tif(success)\n\t\t{\n\t\t\treturn shader;\n\t\t}\n\n\t\tconsole.error(this.context.getShaderInfoLog(shader));\n\n\t\tthis.context.deleteShader(shader);\n\t}\n\n\tcreateProgram({vertexShader, fragmentShader, uniforms, attributes})\n\t{\n\t\tconst gl = this.context;\n\t\treturn new Program({gl, vertexShader, fragmentShader, uniforms, attributes});\n\t}\n\n\tcreateTexture(width, height)\n\t{\n\t\tconst gl = this.context;\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, width\n\t\t\t, height\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, null\n\t\t);\n\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n\t\treturn texture;\n\t}\n\n\tcreateFramebuffer(texture)\n\t{\n\t\tconst gl = this.context;\n\n\t\tconst framebuffer = gl.createFramebuffer();\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\n\t\tgl.framebufferTexture2D(\n\t\t\tgl.FRAMEBUFFER\n\t\t\t, gl.COLOR_ATTACHMENT0\n\t\t\t, gl.TEXTURE_2D\n\t\t\t, texture\n\t\t\t, 0\n\t\t);\n\n\t\treturn framebuffer;\n\t}\n\n\tenableBlending()\n\t{\n\t\tconst gl = this.context;\n\t\tgl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\t\tgl.enable(gl.BLEND);\n\t}\n}\n","import { View as BaseView } from 'curvature/base/View';\nimport { Camera } from '../sprite/Camera';\n\nimport { OnScreenJoyPad } from '../ui/OnScreenJoyPad';\nimport { Keyboard } from 'curvature/input/Keyboard'\n\nimport { Session } from '../session/Session';\nimport { Config } from 'Config';\n\nconst Application = {};\n\nApplication.onScreenJoyPad = new OnScreenJoyPad;\nApplication.keyboard = Keyboard.get();\n\nexport class View extends BaseView\n{\n\tconstructor(args)\n\t{\n\t\twindow.smProfiling = true;\n\t\tsuper(args);\n\t\tthis.template  = require('./view.tmp');\n\t\tthis.routes    = [];\n\n\t\tthis.keyboard  = Application.keyboard;\n\t\tthis.speed     = 24;\n\t\tthis.maxSpeed  = this.speed;\n\n\t\tthis.args.joypad = Application.onScreenJoyPad;\n\n\t\tthis.args.fps  = 0;\n\t\tthis.args.sps  = 0;\n\n\t\tthis.args.camX = 0;\n\t\tthis.args.camY = 0;\n\n\t\tthis.args.showEditor = false;\n\n\t\tthis.keyboard.listening = true;\n\n\t\tthis.keyboard.keys.bindTo('Home', (v,k,t,d)=>{\n\t\t\tif(!this.session || v < 0) return;\n\n\t\t\tif(v % 5 === 0)\n\t\t\t{\n\t\t\t\tthis.session.frameLock++;\n\n\t\t\t\tthis.args.frameLock = this.session.frameLock;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('End', (v,k,t,d)=>{\n\t\t\tif(!this.session || v < 0) return;\n\n\t\t\tif(v % 5 === 0)\n\t\t\t{\n\t\t\t\tthis.session.frameLock--;\n\n\t\t\t\tif(this.session.frameLock < 0)\n\t\t\t\t{\n\t\t\t\t\tthis.session.frameLock = 0;\n\t\t\t\t}\n\n\t\t\t\tthis.args.frameLock = this.session.frameLock;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('PageUp', (v,k,t,d)=>{\n\t\t\tif(!this.session || v < 0) return;\n\n\t\t\tif(v % 5 === 0)\n\t\t\t{\n\t\t\t\tthis.session.simulationLock++;\n\t\t\t}\n\n\t\t\tthis.args.simulationLock = this.session.simulationLock;\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('PageDown', (v,k,t,d)=>{\n\t\t\tif(!this.session || v < 0) return;\n\n\t\t\tif(v % 5 === 0)\n\t\t\t{\n\t\t\t\tthis.session.simulationLock--;\n\n\t\t\t\tif(this.session.simulationLock < 0)\n\t\t\t\t{\n\t\t\t\t\tthis.session.simulationLock = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.args.simulationLock = this.session.simulationLock;\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('=', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.zoom(1);\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('+', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.zoom(1);\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('-', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.zoom(-1);\n\t\t\t}\n\t\t});\n\n\t}\n\n\tonRendered()\n\t{\n\t\tthis.session = new Session({\n\t\t\tonScreenJoyPad: this.args.joypad\n\t\t\t, keyboard: this.keyboard\n\t\t\t, element: this.tags.canvas.element\n\t\t\t, world: '/world.json'\n\t\t});\n\n\t\tthis.args.frameLock = this.session.frameLock;\n\t\tthis.args.simulationLock = this.session.simulationLock;\n\n\t\twindow.addEventListener('resize', () => this.resize());\n\n\t\tlet fThen = 0;\n\t\tlet sThen = 0;\n\n\t\tconst simulate = now => {\n\t\t\tif(document.hidden)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!this.session.simulate(now))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.args.sps = (1000 / (now - sThen)).toFixed(3);\n\t\t\tsThen = now;\n\t\t};\n\n\t\tconst draw = now => {\n\t\t\tif(document.hidden)\n\t\t\t{\n\t\t\t\twindow.requestAnimationFrame(draw);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twindow.requestAnimationFrame(draw);\n\n\t\t\tif(!this.session.draw(now))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.args.fps = (1000 / (now - fThen)).toFixed(3);\n\t\t\tthis.args.camX = Number(Camera.x).toFixed(3);\n\t\t\tthis.args.camY = Number(Camera.y).toFixed(3);\n\n\t\t\tfThen = now;\n\n\t\t\tif(this.session.spriteBoard.following)\n\t\t\t{\n\t\t\t\tthis.args.posX = Number(this.session.spriteBoard.following.sprite.x).toFixed(3);\n\t\t\t\tthis.args.posY = Number(this.session.spriteBoard.following.sprite.y).toFixed(3);\n\t\t\t}\n\t\t};\n\n\t\tthis.session.spriteBoard.zoomLevel = document.body.clientHeight / 1280 * 4;\n\t\tthis.resize();\n\n\t\tsetInterval(() => simulate(performance.now()), 0);\n\t\tdraw(performance.now());\n\t}\n\n\tresize(x, y)\n\t{\n\t\tconst oldScale = this.session.spriteBoard.screenScale;\n\n\t\tthis.session.spriteBoard.screenScale = document.body.clientHeight / 1280;\n\t\tthis.session.spriteBoard.zoomLevel *= this.session.spriteBoard.screenScale / oldScale;\n\n\t\tthis.args.width  = this.tags.canvas.element.width   = x || document.body.clientWidth;\n\t\tthis.args.height = this.tags.canvas.element.height  = y || document.body.clientHeight;\n\n\t\tthis.args.rwidth = Math.trunc(\n\t\t\t(x || document.body.clientWidth)  / this.session.spriteBoard.zoomLevel\n\t\t);\n\n\t\tthis.args.rheight = Math.trunc(\n\t\t\t(y || document.body.clientHeight) / this.session.spriteBoard.zoomLevel\n\t\t);\n\n\t\tthis.session.spriteBoard.resize();\n\t}\n\n\tscroll(event)\n\t{\n\t\tlet delta = event.deltaY > 0 ? -1 : (\n\t\t\tevent.deltaY < 0 ? 1 : 0\n\t\t);\n\n\t\tthis.zoom(delta);\n\t}\n\n\tzoom(delta)\n\t{\n\t\tif(!this.session)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.session.spriteBoard.zoom(delta);\n\t\t// this.resize();\n\t}\n}\n","module.exports = \"<canvas\\n\\tcv-ref = \\\"canvas:curvature/base/Tag\\\"\\n\\tcv-on  = \\\"wheel:scroll(event);\\\"\\n></canvas>\\n\\n<div class = \\\"hud fps\\\">[[sps]] simulations/s / [[simulationLock]]\\n[[fps]] frames/s      / [[frameLock]]\\n\\nRes [[rwidth]] x [[rheight]]\\n    [[width]] x [[height]]\\n\\nCam [[camX]] x [[camY]]\\nPos [[posX]] x [[posY]]\\n\\n Sim:   Pg Up / Dn\\n Frame: Home / End\\n Scale: + / -\\n</div>\\n<div class = \\\"reticle\\\"></div>\\n\\n[[joypad]]\\n\"","import { Router } from 'curvature/base/Router';\nimport { View } from 'home/View';\n\nconst view = new View();\n\nRouter.listen(view, {\n\t'*': (...args) => {\n\t\tconsole.log(args);\n\t}\n});\n\ndocument.addEventListener('DOMContentLoaded', () => view.render(document.body));\n","import { Injectable } from './Injectable';\n\nexport class Container extends Injectable\n{\n\tinject(injections)\n\t{\n\t\treturn new this.constructor(Object.assign({}, this, injections));\n\t}\n}\n","let classes = {};\nlet objects = {};\n\nexport class Injectable\n{\n\tconstructor()\n\t{\n\t\tlet injections = this.constructor.injections();\n\t\tlet context    = this.constructor.context();\n\n\t\tif(!classes[context])\n\t\t{\n\t\t\tclasses[context] = {};\n\t\t}\n\n\t\tif(!objects[context])\n\t\t{\n\t\t\tobjects[context] = {};\n\t\t}\n\n\t\tfor(let name in injections)\n\t\t{\n\t\t\tlet injection = injections[name];\n\n\t\t\tif(classes[context][name] || !injection.prototype)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(/[A-Z]/.test(String(name)[0]))\n\t\t\t{\n\t\t\t\tclasses[context][name] = injection;\n\t\t\t}\n\n\t\t}\n\n\t\tfor(let name in injections)\n\t\t{\n\t\t\tlet instance  = undefined;\n\t\t\tlet injection = classes[context][name] || injections[name];\n\n\t\t\tif(/[A-Z]/.test(String(name)[0]))\n\t\t\t{\n\t\t\t\tif(injection.prototype)\n\t\t\t\t{\n\t\t\t\t\tif(!objects[context][name])\n\t\t\t\t\t{\n\t\t\t\t\t\tobjects[context][name] = new injection;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tobjects[context][name] = injection;\n\t\t\t\t}\n\n\t\t\t\tinstance = objects[context][name];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(injection.prototype)\n\t\t\t\t{\n\t\t\t\t\tinstance = new injection;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tinstance = injection;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tObject.defineProperty(this, name, {\n\t\t\t\tenumerable: false,\n\t\t\t\twritable:   false,\n\t\t\t\tvalue:      instance\n\t\t\t});\n\t\t}\n\n\t}\n\n\tstatic injections()\n\t{\n\t\treturn {};\n\t}\n\n\tstatic context()\n\t{\n\t\treturn '.';\n\t}\n\n\tstatic inject(injections, context = '.')\n\t{\n\t\tif(!(this.prototype instanceof Injectable || this === Injectable))\n\t\t{\n\t\t\tthrow new Error(`Cannot access injectable subclass!\n\nAre you trying to instantiate like this?\n\n\tnew X.inject({...});\n\nIf so please try:\n\n\tnew (X.inject({...}));\n\nPlease note the parenthesis.\n`);\n\t\t}\n\n\t\tlet existingInjections = this.injections();\n\n\t\treturn class extends this {\n\t\t\tstatic injections()\n\t\t\t{\n\t\t\t\treturn Object.assign({}, existingInjections, injections);\n\t\t\t}\n\t\t\tstatic context()\n\t\t\t{\n\t\t\t\treturn context;\n\t\t\t}\n\t\t};\n\t}\n}\n","class Single\n{\n\tconstructor()\n\t{\n\t\tthis.name = 'sss.' + Math.random();\n\t}\n}\n\nlet single = new Single;\n\nexport {Single, single};","export class Axis\n{\n\tmagnitude = 0;\n\tdelta     = 0;\n\n\tconstructor({deadZone = 0, proportional = true})\n\t{\n\t\tif(deadZone)\n\t\t{\n\t\t\tthis.proportional = proportional;\n\t\t\tthis.deadZone     = deadZone;\n\t\t}\n\t}\n\n\ttilt(magnitude)\n\t{\n\t\tif(this.deadZone && Math.abs(magnitude) >= this.deadZone)\n\t\t{\n\t\t\tmagnitude = (Math.abs(magnitude) - this.deadZone) / (1 - this.deadZone) * Math.sign(magnitude);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmagnitude = 0;\n\t\t}\n\n\t\tthis.delta     = Number(magnitude - this.magnitude).toFixed(3) - 0;\n\t\tthis.magnitude = Number(magnitude).toFixed(3) - 0;\n\t}\n\n\tzero()\n\t{\n\t\tthis.magnitude = this.delta = 0;\n\t}\n}\n","export class Button\n{\n\tactive   = false;\n\n\tpressure = 0;\n\tdelta    = 0;\n\ttime     = 0;\n\n\tupdate(options = {})\n\t{\n\t\tif(this.pressure)\n\t\t{\n\t\t\tthis.time++;\n\t\t}\n\t\telse if(!this.pressure && this.time > 0)\n\t\t{\n\t\t\tthis.time = -1;\n\t\t}\n\t\telse if(!this.pressure && this.time < 0)\n\t\t{\n\t\t\tthis.time--;\n\t\t}\n\n\t\tif(this.time < -1 && this.delta === -1)\n\t\t{\n\t\t\tthis.delta = 0;\n\t\t}\n\t}\n\n\tpress(pressure)\n\t{\n\t\tthis.delta    = Number(pressure - this.pressure).toFixed(3) - 0;\n\t\tthis.pressure = Number(pressure).toFixed(3) - 0;\n\t\tthis.active   = true;\n\t\tthis.time     = this.time > 0 ? this.time : 0;\n\t}\n\n\trelease()\n\t{\n\t\t// if(!this.active)\n\t\t// {\n\t\t// \treturn;\n\t\t// }\n\n\t\tthis.delta    = Number(-this.pressure).toFixed(3) - 0;\n\t\tthis.pressure = 0;\n\t\tthis.active   = false;\n\t}\n\n\tzero()\n\t{\n\t\tthis.pressure = this.delta = 0;\n\t\tthis.active   = false;\n\t}\n}\n","import { Axis } from './Axis';\nimport { Button } from './Button';\n\nconst keys = {\n\t'Space': 0\n\n\t, 'Enter':       0\n\t, 'NumpadEnter': 0\n\n\t, 'ControlLeft':  1\n\t, 'ControlRight': 1\n\n\t, 'ShiftLeft':  2\n\t, 'ShiftRight': 2\n\n\t, 'KeyZ':   3\n\t, 'KeyQ':   4\n\t, 'KeyE':   5\n\n\t, 'Digit1': 6\n\t, 'Digit3': 7\n\n\t, 'KeyBackspace': 8\n\n\t, 'KeyW':  12\n\t, 'KeyA':  14\n\t, 'KeyS':  13\n\t, 'KeyD':  15\n\n\t, 'KeyH': 112\n\t, 'KeyJ': 113\n\t, 'KeyK': 114\n\t, 'KeyL': 115\n\n\t, 'KeyP':  1020\n\t, 'KeyO':  1209\n\t, 'Pause': 1020\n\n\t, 'Tab': 11\n\n\t, 'ArrowUp':    12\n\t, 'ArrowDown':  13\n\t, 'ArrowLeft':  14\n\t, 'ArrowRight': 15\n\n\t, 'KeyMeta': 16\n\n\t, 'Numpad4': 112\n\t, 'Numpad2': 113\n\t, 'Numpad8': 114\n\t, 'Numpad6': 115\n\n\t, 'Backquote':      1010\n\t, 'NumpadAdd':      1011\n\t, 'NumpadSubtract': 1012\n\t, 'NumpadMultiply': 1013\n\t, 'NumpadDivide':   1014\n\n\t, 'PageUp':         1022\n\t, 'PageDown':       1023\n\t, 'Home':           1024\n\t, 'End':            1025\n\n\t, 'Escape':         [1020, 1050]\n\n\t, 'KeyB':           1201\n};\n\n[...Array(12)].map((x,fn) => keys[ `F${fn}` ] = 2000 + fn);\n\nconst axisMap = {\n\t12:   -1\n\t, 13: +1\n\t, 14: -0\n\t, 15: +0\n\n\t, 112: -2\n\t, 113: +3\n\t, 114: -3\n\t, 115: +2\n};\n\nconst buttonMap = {\n\t'-6': 14\n\t, '+6': 15\n\t, '-7': 12\n\t, '+7': 13\n};\n\nconst buttonRemap = {\n\t0:   1200\n\t, 1: 1201\n\t, 9: 1020\n\n\t, 4: 1022\n\t, 5: 1023\n};\n\nexport class Controller\n{\n\tconstructor({keys = {}, deadZone = 0, gamepad = null, keyboard = null})\n\t{\n\t\tthis.deadZone = deadZone;\n\n\t\tObject.defineProperties(this, {\n\t\t\tbuttons:    { value: {} }\n\t\t\t, pressure: { value: {} }\n\t\t\t, axes:     { value: {} }\n\t\t\t, keys:     { value: {} }\n\t\t});\n\t}\n\n\tupdate({gamepad} = {})\n\t{\n\t\tfor(const i in this.buttons)\n\t\t{\n\t\t\tconst button = this.buttons[i];\n\n\t\t\tbutton.update();\n\t\t}\n\n\t\tif(gamepad && this.willRumble)\n\t\t{\n\t\t\t// let vibeFactor = 1;\n\n\t\t\tif(typeof this.willRumble !== 'object')\n\t\t\t{\n\t\t\t\tthis.willRumble = {\n\t\t\t\t\tduration:        1000,\n\t\t\t\t\tstrongMagnitude: 1.0,\n\t\t\t\t\tweakMagnitude:   1.0,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif(gamepad.id && String(gamepad.id).match(/playstation.{0,5}3/i))\n\t\t\t{\n\t\t\t\tif(this.willRumble.duration < 100 && this.willRumble.strongMagnitude < 0.75)\n\t\t\t\t{\n\t\t\t\t\tthis.willRumble.duration = 0;\n\t\t\t\t\tthis.willRumble.weakMagnitude = 0;\n\t\t\t\t\tthis.willRumble.strongMagnitude = 0;\n\t\t\t\t}\n\n\t\t\t\tconst stopVibing = () => {\n\t\t\t\t\tif(this.willRumble)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tgamepad.vibrationActuator.playEffect(\"dual-rumble\", {\n\t\t\t\t\t\tduration: 0, weakMagnitude: 0, strongMagnitude: 0\n\t\t\t\t\t})\n\t\t\t\t};\n\n\t\t\t\tsetTimeout(stopVibing, this.willRumble.duration + -1);\n\t\t\t}\n\n\t\t\t// console.log({...this.willRumble, id: gamepad.id});\n\n\t\t\tif(gamepad.vibrationActuator && gamepad.vibrationActuator.playEffect)\n\t\t\t{\n\t\t\t\tgamepad.vibrationActuator.playEffect(\"dual-rumble\", this.willRumble);\n\t\t\t}\n\n\t\t\tthis.willRumble = false;\n\t\t}\n\t}\n\n\trumble(options = true)\n\t{\n\t\tthis.willRumble = options;\n\t}\n\n\treadInput({keyboard, gamepads = []})\n\t{\n\t\tconst tilted   = {};\n\t\tconst pressed  = {};\n\t\tconst released = {};\n\n\t\tconst tookInput = new Set;\n\n\t\tfor(let i = 0; i < gamepads.length; i++)\n\t\t{\n\t\t\tconst gamepad = gamepads[i];\n\n\t\t\tif(!gamepad)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor(const i in gamepad.buttons)\n\t\t\t{\n\t\t\t\tconst button = gamepad.buttons[i];\n\n\t\t\t\tif(button.pressed)\n\t\t\t\t{\n\t\t\t\t\tthis.press(i, button.value);\n\n\t\t\t\t\tpressed[i] = true;\n\n\t\t\t\t\ttookInput.add(gamepad);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(keyboard)\n\t\t{\n\t\t\tfor(const i in [...Array(10)])\n\t\t\t{\n\t\t\t\tif(pressed[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(keyboard.getKeyCode(i) > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.press(i, 1);\n\n\t\t\t\t\tpressed[i] = true;\n\n\t\t\t\t\ttookInput.add(keyboard);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(let keycode in keys)\n\t\t\t{\n\t\t\t\tif(pressed[keycode])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet buttonIds = keys[keycode];\n\n\t\t\t\tif(!Array.isArray(buttonIds))\n\t\t\t\t{\n\t\t\t\t\tbuttonIds = keys[keycode] = [buttonIds];\n\t\t\t\t}\n\n\t\t\t\tfor(const buttonId of buttonIds)\n\t\t\t\t{\n\t\t\t\t\tif(keyboard.getKeyCode(keycode) > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.press(buttonId, 1);\n\n\t\t\t\t\t\tpressed[buttonId] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(const gamepad of gamepads)\n\t\t{\n\t\t\tif(!gamepad)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor(const i in gamepad.buttons)\n\t\t\t{\n\t\t\t\tif(released[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(pressed[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst button = gamepad.buttons[i];\n\n\t\t\t\tif(this.buttons[i] && !button.pressed && this.buttons[i].active)\n\t\t\t\t{\n\t\t\t\t\tthis.release(i);\n\n\t\t\t\t\treleased[i] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(keyboard)\n\t\t{\n\t\t\tfor(const i in [...Array(10)])\n\t\t\t{\n\t\t\t\tif(released[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(pressed[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(keyboard.getKeyCode(i) < 0)\n\t\t\t\t{\n\t\t\t\t\tthis.release(i);\n\n\t\t\t\t\treleased[i] = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(let keycode in keys)\n\t\t\t{\n\t\t\t\tlet buttonIds = keys[keycode];\n\n\t\t\t\tif(!Array.isArray(buttonIds))\n\t\t\t\t{\n\t\t\t\t\tbuttonIds = keys[keycode] = [buttonIds];\n\t\t\t\t}\n\n\t\t\t\tfor(const buttonId of buttonIds)\n\t\t\t\t{\n\t\t\t\t\tif(released[buttonId])\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(pressed[buttonId])\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(keyboard.getKeyCode(keycode) < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.release(buttonId);\n\n\t\t\t\t\t\treleased[keycode] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(let i = 0; i < gamepads.length; i++)\n\t\t{\n\t\t\tconst gamepad = gamepads[i];\n\n\t\t\tif(!gamepad)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor(const i in gamepad.axes)\n\t\t\t{\n\t\t\t\tconst axis = gamepad.axes[i];\n\n\t\t\t\tif(Math.abs(axis) < this.deadZone)\n\t\t\t\t{\n\t\t\t\t\tif(!tilted[i])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.tilt(i, 0);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttilted[i] = true;\n\n\t\t\t\tthis.tilt(i, axis);\n\t\t\t}\n\t\t}\n\n\t\tfor(let inputId in axisMap)\n\t\t{\n\t\t\tif(!this.buttons[inputId])\n\t\t\t{\n\t\t\t\tthis.buttons[inputId] = new Button;\n\t\t\t}\n\n\t\t\tconst axis   = axisMap[ inputId ];\n\t\t\tconst value  = Math.sign(1/axis);\n\t\t\tconst axisId = Math.abs(axis);\n\n\t\t\tif(tilted[axisId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(this.buttons[inputId].active)\n\t\t\t{\n\t\t\t\ttilted[axisId] = true;\n\n\t\t\t\tthis.tilt(axisId, value);\n\t\t\t}\n\t\t\telse if(!tilted[axisId])\n\t\t\t{\n\t\t\t\tthis.tilt(axisId, 0);\n\t\t\t}\n\t\t}\n\n\t\tfor(let axisMove in buttonMap)\n\t\t{\n\t\t\tconst buttonId = buttonMap[axisMove];\n\n\t\t\tif(released[buttonId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(pressed[buttonId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst [move, axisId] = [axisMove.slice(0, 1), axisMove.slice(1)];\n\n\t\t\tif(!this.axes[axisId])\n\t\t\t{\n\t\t\t\tthis.axes[axisId] = new Axis({deadZone:this.deadZone})\n\t\t\t}\n\n\t\t\tconst axis = this.axes[axisId];\n\n\t\t\tif(axis.magnitude && Math.sign(axisMove) !== Math.sign(axis.magnitude))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst pressure = Math.abs(axis.magnitude);\n\n\t\t\tif(pressure)\n\t\t\t{\n\t\t\t\tthis.press(buttonId, pressure);\n\t\t\t\tpressed[buttonId] = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.release(buttonId, pressure);\n\t\t\t\treleased[buttonId] = true;\n\t\t\t}\n\t\t}\n\n\t\tfor(const concreteId in buttonRemap)\n\t\t{\n\t\t\tconst abstractId = buttonRemap[concreteId];\n\n\t\t\tif(released[abstractId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(pressed[abstractId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(!this.buttons[abstractId])\n\t\t\t{\n\t\t\t\tthis.buttons[abstractId] = new Button;\n\t\t\t}\n\n\t\t\tif(!this.buttons[concreteId])\n\t\t\t{\n\t\t\t\tthis.buttons[concreteId] = new Button;\n\t\t\t}\n\n\t\t\tif(this.buttons[concreteId].active)\n\t\t\t{\n\t\t\t\tthis.press(abstractId, this.buttons[concreteId].pressure);\n\t\t\t\tpressed[abstractId] = true;\n\n\t\t\t}\n\t\t\telse if(!pressed[abstractId])\n\t\t\t{\n\t\t\t\tthis.release(abstractId, this.buttons[concreteId].pressure);\n\t\t\t\treleased[abstractId] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn tookInput;\n\t}\n\n\ttilt(axisId, magnitude)\n\t{\n\t\tif(!this.axes[axisId])\n\t\t{\n\t\t\tthis.axes[axisId] = new Axis({deadZone:this.deadZone});\n\t\t}\n\n\t\tthis.axes[axisId].tilt(magnitude);\n\t}\n\n\tpress(buttonId, pressure = 1)\n\t{\n\t\tif(!this.buttons[buttonId])\n\t\t{\n\t\t\tthis.buttons[buttonId] = new Button;\n\t\t}\n\n\t\tthis.buttons[buttonId].press(pressure);\n\t}\n\n\trelease(buttonId)\n\t{\n\t\tif(!this.buttons[buttonId])\n\t\t{\n\t\t\tthis.buttons[buttonId] = new Button;\n\t\t}\n\n\t\tthis.buttons[buttonId].release();\n\t}\n\n\tserialize()\n\t{\n\t\tconst buttons = {};\n\n\t\tfor(const i in this.buttons)\n\t\t{\n\t\t\tbuttons[i] = this.buttons[i].pressure;\n\t\t}\n\n\t\tconst axes = {};\n\n\t\tfor(const i in this.axes)\n\t\t{\n\t\t\taxes[i] = this.axes[i].magnitude;\n\t\t}\n\n\t\treturn {axes, buttons};\n\t}\n\n\treplay(input)\n\t{\n\t\tif(input.buttons)\n\t\t{\n\t\t\tfor(const i in input.buttons)\n\t\t\t{\n\t\t\t\tif(input.buttons[i] > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.press(i, input.buttons[i]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.release(i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(input.axes)\n\t\t{\n\t\t\tfor(const i in input.axes)\n\t\t\t{\n\t\t\t\tif(input.axes[i].magnitude !== input.axes[i])\n\t\t\t\t{\n\t\t\t\t\tthis.tilt(i, input.axes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tzero()\n\t{\n\t\tfor(const i in this.axes)\n\t\t{\n\t\t\tthis.axes[i].zero();\n\t\t}\n\n\t\tfor(const i in this.buttons)\n\t\t{\n\t\t\tthis.buttons[i].zero();\n\t\t}\n\t}\n\n\tbuttonIsMapped(buttonId)\n\t{\n\t\treturn buttonId in buttonRemap;\n\t}\n\n\tkeyIsMapped(keyCode)\n\t{\n\t\treturn keyCode in keys;\n\t}\n}\n","export class Geometry\n{\n\tstatic lineIntersectsLine(x1a, y1a, x2a, y2a, x1b, y1b, x2b, y2b)\n\t{\n\t\tconst ax = x2a - x1a;\n\t\tconst ay = y2a - y1a;\n\n\t\tconst bx = x2b - x1b;\n\t\tconst by = y2b - y1b;\n\n\t\tconst crossProduct = ax * by - ay * bx;\n\n\t\t// Parallel Lines cannot intersect\n\t\tif(crossProduct === 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst cx = x1b - x1a;\n\t\tconst cy = y1b - y1a;\n\n\t\t// Is our point within the bounds of line a?\n\t\tconst d = (cx * ay - cy * ax) / crossProduct;\n\t\tif(d < 0 || d > 1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\t// Is our point within the bounds of line b?\n\t\tconst e = (cx * by - cy * bx) / crossProduct;\n\t\tif(e < 0 || e > 1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn [x1a + e * ax, y1a + e * ay];\n\t}\n}\n","export class Matrix\n{\n\tstatic identity()\n\t{\n\t\treturn [\n\t\t\t[1, 0, 0],\n\t\t\t[0, 1, 0],\n\t\t\t[0, 0, 1],\n\t\t];\n\t}\n\n\tstatic translate(dx, dy)\n\t{\n\t\treturn [\n\t\t\t[1, 0, dx],\n\t\t\t[0, 1, dy],\n\t\t\t[0, 0,  1],\n\t\t];\n\t}\n\n\tstatic scale(dx, dy)\n\t{\n\t\treturn [\n\t\t\t[dx, 0, 0],\n\t\t\t[0, dy, 0],\n\t\t\t[0, 0,  1],\n\t\t];\n\t}\n\n\tstatic rotate(theta)\n\t{\n\t\tconst s = Math.sin(theta);\n\t\tconst c = Math.cos(theta);\n\n\t\treturn [\n\t\t\t[c, -s, 0],\n\t\t\t[s,  c, 0],\n\t\t\t[0,  0, 1],\n\t\t];\n\t}\n\n\tstatic shearX(s)\n\t{\n\t\treturn [\n\t\t\t[1, s, 0],\n\t\t\t[0, 1, 0],\n\t\t\t[0, 0, 1],\n\t\t];\n\t}\n\n\tstatic shearY(s)\n\t{\n\t\treturn [\n\t\t\t[1, 0, 0],\n\t\t\t[s, 1, 0],\n\t\t\t[0, 0, 1],\n\t\t];\n\t}\n\n\tstatic multiply(matA, matB)\n\t{\n\t\tif(matA.length !== matB.length)\n\t\t{\n\t\t\tthrow new Error('Invalid matrices');\n\t\t}\n\n\t\tif(matA[0].length !== matB.length)\n\t\t{\n\t\t\tthrow new Error('Incompatible matrices');\n\t\t}\n\n\t\tconst output = Array(matA.length).fill().map(() => Array(matB[0].length).fill(0));\n\n\t\tfor(let i = 0; i < matA.length; i++)\n\t\t{\n\t\t\tfor(let j = 0; j < matB[0].length; j++)\n\t\t\t{\n\t\t\t\tfor(let k = 0; k < matA[0].length; k++)\n\t\t\t\t{\n\t\t\t\t\toutput[i][j] += matA[i][k] * matB[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tstatic composite(...mats)\n\t{\n\t\tlet output = this.identity();\n\n\t\tfor(let i = 0; i < mats.length; i++)\n\t\t{\n\t\t\toutput = this.multiply(output, mats[i]);\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tstatic transform(points, matrix)\n\t{\n\t\tconst output = [];\n\n\t\tfor(let i = 0; i < points.length; i += 2)\n\t\t{\n\t\t\tconst point = [points[i], points[i + 1], 1];\n\n\t\t\tfor(const row of matrix)\n\t\t\t{\n\t\t\t\toutput.push(\n\t\t\t\t\tpoint[0] * row[0]\n\t\t\t\t\t+ point[1] * row[1]\n\t\t\t\t\t+ point[2] * row[2]\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\treturn new Float32Array(output.filter((_, k) => (1 + k) % 3));\n\t}\n}\n","import { Bindable } from \"curvature/base/Bindable\";\nimport { Rectangle } from \"./Rectangle\";\n\nexport class Quadtree extends Rectangle\n{\n\tconstructor(x1, y1, x2, y2, minSize = 0, parent = null)\n\t{\n\t\tsuper(x1, y1, x2, y2);\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.items = new Set;\n\t\tthis.split = false;\n\t\tthis.minSize = minSize || 10;\n\t\tthis.backMap = parent ? parent.backMap : new Map\n\t\tthis.parent = parent;\n\n\t\tthis.ulCell = null;\n\t\tthis.urCell = null;\n\t\tthis.blCell = null;\n\t\tthis.brCell = null;\n\t}\n\n\tadd(entity)\n\t{\n\t\tif(!this.contains(entity.x, entity.y))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst xSize = this.x2 - this.x1;\n\t\tconst ySize = this.y2 - this.y1;\n\n\t\tif(this.split)\n\t\t{\n\t\t\treturn this.ulCell.add(entity)\n\t\t\t\t|| this.urCell.add(entity)\n\t\t\t\t|| this.blCell.add(entity)\n\t\t\t\t|| this.brCell.add(entity);\n\t\t}\n\t\telse if(this.items.size && xSize > this.minSize && ySize > this.minSize)\n\t\t{\n\t\t\tthis.split  = true;\n\n\t\t\tconst xSizeHalf = 0.5 * xSize;\n\t\t\tconst ySizeHalf = 0.5 * ySize;\n\n\t\t\tthis.ulCell = new Quadtree(\n\t\t\t\tthis.x1\n\t\t\t\t, this.y1\n\t\t\t\t, this.x1 + xSizeHalf\n\t\t\t\t, this.y1 + ySizeHalf\n\t\t\t\t, this.minSize\n\t\t\t\t, this\n\t\t\t);\n\n\t\t\tthis.blCell = new Quadtree(\n\t\t\t\tthis.x1\n\t\t\t\t, this.y1 + ySizeHalf\n\t\t\t\t, this.x1 + xSizeHalf\n\t\t\t\t, this.y2\n\t\t\t\t, this.minSize\n\t\t\t\t, this\n\t\t\t);\n\n\t\t\tthis.urCell = new Quadtree(\n\t\t\t\tthis.x1 + xSizeHalf\n\t\t\t\t, this.y1\n\t\t\t\t, this.x2\n\t\t\t\t, this.y1 + ySizeHalf\n\t\t\t\t, this.minSize\n\t\t\t\t, this\n\t\t\t);\n\n\t\t\tthis.brCell = new Quadtree(\n\t\t\t\tthis.x1 + xSizeHalf\n\t\t\t\t, this.y1 + ySizeHalf\n\t\t\t\t, this.x2\n\t\t\t\t, this.y2\n\t\t\t\t, this.minSize\n\t\t\t\t, this\n\t\t\t);\n\n\t\t\tfor(const item of this.items)\n\t\t\t{\n\t\t\t\tthis.items.delete(item);\n\n\t\t\t\tthis.ulCell.add(item)\n\t\t\t\t\t|| this.urCell.add(item)\n\t\t\t\t\t|| this.blCell.add(item)\n\t\t\t\t\t|| this.brCell.add(item);\n\t\t\t}\n\n\t\t\treturn this.ulCell.add(entity)\n\t\t\t\t|| this.urCell.add(entity)\n\t\t\t\t|| this.blCell.add(entity)\n\t\t\t\t|| this.brCell.add(entity);\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.backMap.set(entity, this);\n\t\t\tthis.items.add(entity);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tmove(entity)\n\t{\n\t\tif(!this.backMap.has(entity))\n\t\t{\n\t\t\t// console.warn('Entity not in Quadtree.');\n\t\t\treturn this.add(entity);\n\t\t}\n\n\t\tconst startCell = this.backMap.get(entity);\n\n\t\tlet cell = startCell;\n\t\twhile(cell && !cell.contains(entity.x, entity.y))\n\t\t{\n\t\t\tcell = cell.parent;\n\t\t}\n\n\t\tif(!cell)\n\t\t{\n\t\t\t// console.warn('No QuadTree cell found!');\n\t\t\tstartCell.delete(entity);\n\t\t\treturn false;\n\t\t}\n\n\t\tif(cell !== startCell)\n\t\t{\n\t\t\tstartCell.delete(entity);\n\t\t\tcell.add(entity);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdelete(entity)\n\t{\n\t\tif(!this.backMap.has(entity))\n\t\t{\n\t\t\tconsole.warn('Entity not in Quadtree.');\n\t\t\treturn false;\n\t\t}\n\n\t\tconst cell = this.backMap.get(entity);\n\n\t\tcell.items.delete(entity);\n\n\t\tif(cell.parent)\n\t\t{\n\t\t\tcell.parent.prune();\n\t\t}\n\n\t\tthis.backMap.delete(entity);\n\n\t\treturn true;\n\t}\n\n\tisPrunable()\n\t{\n\t\tif(this.split)\n\t\t{\n\t\t\treturn this.ulCell.isPrunable()\n\t\t\t\t&& this.urCell.isPrunable()\n\t\t\t\t&& this.blCell.isPrunable()\n\t\t\t\t&& this.brCell.isPrunable();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.items.size === 0;\n\t\t}\n\t}\n\n\tprune()\n\t{\n\t\tif(!this.isPrunable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.split = false;\n\n\t\tthis.ulCell = null;\n\t\tthis.urCell = null;\n\t\tthis.blCell = null;\n\t\tthis.brCell = null;\n\n\t\treturn true;\n\t}\n\n\tfindLeaf(x, y)\n\t{\n\t\tif(!this.contains(x, y))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif(!this.split)\n\t\t{\n\t\t\treturn this;\n\t\t}\n\n\t\treturn this.ulCell.findLeaf(x, y)\n\t\t\t?? this.urCell.findLeaf(x, y)\n\t\t\t?? this.blCell.findLeaf(x, y)\n\t\t\t?? this.brCell.findLeaf(x, y);\n\t}\n\n\thas(entity)\n\t{\n\t\tif(this.split)\n\t\t{\n\t\t\treturn this.ulCell.has(entity)\n\t\t\t\t|| this.urCell.has(entity)\n\t\t\t\t|| this.blCell.has(entity)\n\t\t\t\t|| this.brCell.has(entity);\n\t\t}\n\n\t\treturn this.items.has(entity);\n\t}\n\n\tselect(x, y, w, h)\n\t{\n\t\tconst xMax = x + w;\n\t\tconst yMax = y + h;\n\n\t\tif(xMax < this.x1 || x > this.x2)\n\t\t{\n\t\t\treturn new Set;\n\t\t}\n\n\t\tif(yMax < this.y1 || y > this.y2)\n\t\t{\n\t\t\treturn new Set;\n\t\t}\n\n\t\tif(this.split)\n\t\t{\n\t\t\treturn new Set([\n\t\t\t\t...this.ulCell.select(x, y, w, h)\n\t\t\t\t, ...this.urCell.select(x, y, w, h)\n\t\t\t\t, ...this.blCell.select(x, y, w, h)\n\t\t\t\t, ...this.brCell.select(x, y, w, h)\n\t\t\t]);\n\t\t}\n\n\t\treturn this.items;\n\t}\n\n\tdump()\n\t{\n\t\tif(this.split)\n\t\t{\n\t\t\treturn new Set([\n\t\t\t\t...this.ulCell.dump()\n\t\t\t\t, ...this.urCell.dump()\n\t\t\t\t, ...this.blCell.dump()\n\t\t\t\t, ...this.brCell.dump()\n\t\t\t]);\n\t\t}\n\n\t\treturn this.items;\n\t}\n}\n","import { Quadtree } from \"./Quadtree\";\nimport { Rectangle } from \"./Rectangle\";\n\nconst registry = new WeakMap();\n\nexport class QuickTree extends Quadtree\n{\n\tstatic deleteFromAllTrees(entity)\n\t{\n\t\tif(!registry.has(entity))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tregistry.get(entity).forEach(tree => tree.delete(entity));\n\t}\n\n\tadd(entity)\n\t{\n\t\tif(!super.add(entity))\n\t\t{\n\t\t\tif(!this.parent)\n\t\t\t{\n\t\t\t\tconsole.warn('Failed to add object to QuickTree.');\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif(!registry.has(entity))\n\t\t{\n\t\t\tregistry.set(entity, new Set());\n\t\t}\n\n\t\tregistry.get(entity).add(this);\n\t}\n\n\tdelete(entity)\n\t{\n\t\tif(!super.delete(entity))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(registry.has(entity))\n\t\t{\n\t\t\tregistry.get(entity).delete(this);\n\t\t}\n\t}\n\n\tselect(x, y, w, h)\n\t{\n\t\tconst selectRect = new Rectangle(x, y, x + w, y + h);\n\t\tconst result = super.select(x, y, w, h);\n\n\t\tfor(const entity of result)\n\t\t{\n\t\t\tif(!selectRect.contains(entity.x, entity.y))\n\t\t\t{\n\t\t\t\tresult.delete(entity);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","import { Geometry } from \"./Geometry\";\n\nexport class Ray\n{\n\tstatic T_LAST_EMPTY = 0b0000_0001;\n\tstatic T_ALL_POINTS = 0b0000_0010;\n\n\t// static E_ALL_ENTITIES = 0b0000_0001_0000_0000;\n\n\tstatic DEFAULT_FLAGS = 0b0000_0000;\n\n\tstatic cast(world, startX, startY, layerId, angle, maxDistance = 320, rayFlags = this.DEFAULT_FLAGS)\n\t{\n\t\tconst endX = startX + Math.cos(angle) * maxDistance;\n\t\tconst endY = startY + Math.sin(angle) * maxDistance;\n\n\t\tconst terrain = this.castTerrain(world, startX, startY, layerId, angle, maxDistance, rayFlags);\n\t\tconst entities = this.castEntity(world, startX, startY, endX, endY, rayFlags);\n\n\t\treturn {terrain, entities};\n\t}\n\n\tstatic castEntity(world, startX, startY, endX, endY, rayFlags = this.DEFAULT_FLAGS)\n\t{\n\t\tconst centerX = (startX + endX) * 0.5;\n\t\tconst centerY = (startY + endY) * 0.5;\n\n\t\tconst sizeX = Math.max(320, Math.abs(startX - endX));\n\t\tconst sizeY = Math.max(320, Math.abs(startY - endY));\n\n\t\tconst candidates = world.getEntitiesForRect(centerX, centerY, sizeX, sizeY);\n\t\tconst collisions = new Map;\n\n\t\tfor(const candidate of candidates)\n\t\t{\n\t\t\tconst points = candidate.rect.toLines();\n\n\t\t\tfor(let i = 0; i < points.length; i += 4)\n\t\t\t{\n\t\t\t\tconst x1 = points[i + 0];\n\t\t\t\tconst y1 = points[i + 1];\n\t\t\t\tconst x2 = points[i + 2];\n\t\t\t\tconst y2 = points[i + 3];\n\n\t\t\t\tconst intersection = Geometry.lineIntersectsLine(x1, y1, x2, y2, startX, startY, endX, endY);\n\n\t\t\t\tif(intersection)\n\t\t\t\t{\n\t\t\t\t\tif(collisions.has(candidate))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst existing = collisions.get(candidate);\n\n\t\t\t\t\t\tif(Math.hypot(startX - intersection[0], startY - intersection[1]) < Math.hypot(startX - existing[0], startY - existing[1]))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcollisions.set(candidate, intersection);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcollisions.set(candidate, intersection);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn collisions;\n\t}\n\n\tstatic castTerrain(world, startX, startY, layerId, angle, maxDistance = 320, rayFlags = this.DEFAULT_FLAGS)\n\t{\n\t\tmaxDistance = Math.ceil(maxDistance);\n\n\t\tconst cos = Math.cos(angle);\n\t\tconst sin = Math.sin(angle);\n\n\t\tconst endX = startX + (Math.abs(cos) > Number.EPSILON ? cos : 0) * maxDistance;\n\t\tconst endY = startY + (Math.abs(sin) > Number.EPSILON ? sin : 0) * maxDistance;\n\n\t\tconst bs = 32;\n\n\t\tconst dx = endX - startX;\n\t\tconst dy = endY - startY;\n\n\t\tconst ox = Math.sign(dx);\n\t\tconst oy = Math.sign(dy);\n\n\t\tconst sx = dx ? Math.hypot(1, (dy / dx)) : 0;\n\t\tconst sy = dy ? Math.hypot(1, (dx / dy)) : 0;\n\n\t\tlet currentDistance = 0;\n\n\t\tif(world.getSolid(startX, startY, layerId))\n\t\t{\n\t\t\treturn [startX, startY];\n\t\t}\n\n\t\tconst startTile = world.getCollisionTile(startX, startY, layerId);\n\n\t\tconst initMode = startTile === null ? 0 : 1;\n\n\t\tlet modeX = initMode;\n\t\tlet modeY = initMode;\n\n\t\tlet oldModeX = false;\n\t\tlet oldModeY = false;\n\n\t\tlet bf = initMode ? 1 : 1;\n\n\t\tconst ax = ox > 0 ? (bs - startX % bs) : ((startX % bs) + 1);\n\t\tconst ay = oy > 0 ? (bs - startY % bs) : ((startY % bs) + 1);\n\n\t\tlet checkX = initMode ? 0 : ax;\n\t\tlet checkY = initMode ? 0 : ay;\n\n\t\tlet rayX = checkX * sx * ox;\n\t\tlet rayY = checkY * sy * oy;\n\n\t\tconst solidsX = new Set;\n\t\tconst solidsY = new Set;\n\n\t\twindow.logPoints && console.time('rayCast');\n\n\t\tlet iterations = 0;\n\t\twhile(Math.abs(currentDistance) < maxDistance && !solidsX.size && !solidsY.size)\n\t\t{\n\t\t\tif(ox && (!oy || Math.abs(rayX) < Math.abs(rayY)))\n\t\t\t{\n\t\t\t\tconst mag = Math.abs(rayX);\n\n\t\t\t\tlet px = (startX + mag * cos);\n\t\t\t\tlet py = (startY + mag * sin);\n\n\t\t\t\tif(ox >= 0 && px % 1 > 0.99999) px = Math.round(px);\n\t\t\t\tif(oy >= 0 && py % 1 > 0.99999) py = Math.round(py);\n\t\t\t\tif(ox <= 0 && px % 1 < 0.00001) px = Math.round(px);\n\t\t\t\tif(oy <= 0 && py % 1 < 0.00001) py = Math.round(py);\n\n\t\t\t\toldModeX = modeX;\n\t\t\t\tmodeX = world.getCollisionTile(px, py, layerId);\n\t\t\t\tbf = modeX ? 1:bs;\n\n\t\t\t\tif(!modeX && oldModeX)\n\t\t\t\t{\n\t\t\t\t\tbf = ox < 0\n\t\t\t\t\t\t? ((startX + -checkX + 1) % bs)\n\t\t\t\t\t\t: (bs - ((startX + checkX) % bs));\n\t\t\t\t}\n\n\t\t\t\tif(world.getSolid(px, py, layerId))\n\t\t\t\t{\n\t\t\t\t\tsolidsX.add([px, py]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcurrentDistance = Math.abs(rayX);\n\t\t\t\tcheckX += bf;\n\t\t\t\trayX = checkX * sx * ox;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst mag = Math.abs(rayY);\n\n\t\t\t\tlet px = (startX + mag * cos);\n\t\t\t\tlet py = (startY + mag * sin);\n\n\t\t\t\tif(ox >= 0 && px % 1 > 0.99999) px = Math.round(px);\n\t\t\t\tif(oy >= 0 && py % 1 > 0.99999) py = Math.round(py);\n\t\t\t\tif(ox <= 0 && px % 1 < 0.00001) px = Math.round(px);\n\t\t\t\tif(oy <= 0 && py % 1 < 0.00001) py = Math.round(py);\n\n\t\t\t\toldModeY = modeY;\n\t\t\t\tmodeY = world.getCollisionTile(px, py, layerId)\n\n\t\t\t\tbf = modeY ? 1:bs;\n\n\t\t\t\tif(!modeY && oldModeY)\n\t\t\t\t{\n\t\t\t\t\tbf = oy < 0\n\t\t\t\t\t\t? ((startY + -checkY + 1) % bs)\n\t\t\t\t\t\t: (bs - ((startY + checkY) % bs));\n\t\t\t\t}\n\n\t\t\t\tif(world.getSolid(px, py, layerId))\n\t\t\t\t{\n\t\t\t\t\tsolidsY.add([px, py]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcurrentDistance = Math.abs(rayY);\n\t\t\t\tcheckY += bf;\n\t\t\t\trayY = checkY * sy * oy;\n\t\t\t}\n\n\t\t\titerations++;\n\t\t}\n\n\t\tconst points = [...solidsX, ...solidsY];\n\n\t\tif(rayFlags & this.ALL_POINTS)\n\t\t{\n\t\t\treturn new solidsX.union(solidsY);\n\t\t}\n\n\t\tconst distSquares = points.map(s => (s[0] - startX) ** 2 + (s[1] - startY) ** 2);\n\t\tconst minDistSq   = Math.min(...distSquares);\n\t\tconst nearest     = points[ distSquares.indexOf(minDistSq) ];\n\n\t\tif(nearest)\n\t\t{\n\t\t\tif(ox > 0 && nearest[0] % 1 > 0.99999) nearest[0] = Math.round(nearest[0]);\n\t\t\tif(ox < 0 && nearest[0] % 1 < 0.00001) nearest[0] = Math.round(nearest[0]);\n\t\t\tif(oy > 0 && nearest[1] % 1 > 0.99999) nearest[1] = Math.round(nearest[1]);\n\t\t\tif(oy < 0 && nearest[1] % 1 < 0.00001) nearest[1] = Math.round(nearest[1]);\n\t\t}\n\n\t\tif(Math.sqrt(minDistSq) > maxDistance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(rayFlags & this.T_LAST_EMPTY)\n\t\t{\n\t\t\treturn [\n\t\t\t\tnearest[0] + -cos * Math.sign(rayX)\n\t\t\t\t, nearest[1] + -sin * Math.sign(rayY)\n\t\t\t]\n\t\t}\n\n\t\treturn nearest;\n\t}\n}\n","export class Rectangle\n{\n\tconstructor(x1, y1, x2, y2)\n\t{\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x2;\n\t\tthis.y2 = y2;\n\t}\n\n\tcontains(x, y)\n\t{\n\t\tif(x < this.x1 || x > this.x2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif(y < this.y1 || y > this.y2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisOverlapping(other)\n\t{\n\t\tif(this.x1 >= other.x2 || this.x2 <= other.x1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.y1 >= other.y2 || this.y2 <= other.y1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisFlushWith(other)\n\t{\n\t\tif(this.x1 > other.x2 || other.x1 > this.x2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.y1 > other.y2 || other.y1 > this.y2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.x1 === other.x2 || other.x1 === this.x2)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif(this.y1 === other.y2 || other.y1 === this.y2)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tintersection(other)\n\t{\n\t\tif(!this.isOverlapping(other))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn new (this.constructor)(\n\t\t\tMath.max(this.x1, other.x1), Math.max(this.y1, other.y1)\n\t\t\t, Math.min(this.x2, other.x2), Math.min(this.y2, other.y2)\n\t\t);\n\t}\n\n\tisInside(other)\n\t{\n\t\treturn this.x1 >= other.x1\n\t\t\t&& this.y1 >= other.y1\n\t\t\t&& this.x2 <= other.x2\n\t\t\t&& this.y2 <= other.y2;\n\t}\n\n\tisOutside(other)\n\t{\n\t\treturn other.isInside(this);\n\t}\n\n\ttoLines()\n\t{\n\t\treturn [\n\t\t\tthis.x1, this.y1, this.x2, this.y1, // Top\n\t\t\tthis.x2, this.y1, this.x2, this.y2, // Right\n\t\t\tthis.x1, this.y2, this.x2, this.y2, // Bottom\n\t\t\tthis.x1, this.y1, this.x1, this.y2, // Left\n\t\t];\n\t}\n\n\ttoTriangles(dim = 2)\n\t{\n\t\tif(dim === 2)\n\t\t{\n\t\t\treturn [\n\t\t\t\tthis.x1, this.y1,\n\t\t\t\tthis.x2, this.y1,\n\t\t\t\tthis.x1, this.y2,\n\t\t\t\tthis.x1, this.y2,\n\t\t\t\tthis.x2, this.y1,\n\t\t\t\tthis.x2, this.y2,\n\t\t\t];\n\t\t}\n\n\t\tif(dim === 3)\n\t\t{\n\t\t\treturn [\n\t\t\t\tthis.x1, this.y1, 1,\n\t\t\t\tthis.x2, this.y1, 1,\n\t\t\t\tthis.x1, this.y2, 1,\n\t\t\t\tthis.x1, this.y2, 1,\n\t\t\t\tthis.x2, this.y1, 1,\n\t\t\t\tthis.x2, this.y2, 1,\n\t\t\t];\n\t\t}\n\n\t\tif(dim === 4)\n\t\t{\n\t\t\treturn [\n\t\t\t\tthis.x1, this.y1, 0, 1,\n\t\t\t\tthis.x2, this.y1, 0, 1,\n\t\t\t\tthis.x1, this.y2, 0, 1,\n\t\t\t\tthis.x1, this.y2, 0, 1,\n\t\t\t\tthis.x2, this.y1, 0, 1,\n\t\t\t\tthis.x2, this.y2, 0, 1,\n\t\t\t];\n\t\t}\n\n\t\treturn [\n\t\t\tthis.x1, this.y1, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x2, this.y1, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x1, this.y2, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x1, this.y2, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x2, this.y1, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x2, this.y2, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t];\n\t}\n}\n","const depthSymbol = Symbol('depth');\n\nclass Segment\n{\n\tconstructor(start, end, prev, dimension = 2, depth = 0)\n\t{\n\t\tthis.start = start;\n\t\tthis.end   = end;\n\t\tthis.depth = depth;\n\t\tthis.dimension = dimension;\n\t\tthis.size  = 0;\n\n\t\tthis.rectangles = new Set;\n\t\tthis.subTree = depth < 1\n\t\t\t? new SMTree({dimension, [depthSymbol]: 1 + depth})\n\t\t\t: null;\n\n\t\tthis.prev  = prev;\n\t}\n\n\tsplit(at)\n\t{\n\t\tif(at < this.start || at > this.end)\n\t\t{\n\t\t\tthrow new RangeError('Splitting segment out of bounds!');\n\t\t}\n\n\t\tif(at === this.start)\n\t\t{\n\t\t\treturn [this];\n\t\t}\n\n\t\tif(at === this.end)\n\t\t{\n\t\t\treturn [this];\n\t\t}\n\n\t\tconst a = new Segment(this.start, at, this.prev, this.dimension, this.depth);\n\t\tconst b = new Segment(at, this.end, a, this.dimension, this.depth);\n\n\t\tfor(const rectangle of this.rectangles)\n\t\t{\n\t\t\tconst rectMin = this.depth === 0 ? rectangle.x1 : rectangle.y1;\n\t\t\tconst rectMax = this.depth === 0 ? rectangle.x2 : rectangle.y2;\n\n\t\t\tif(rectMax < at)\n\t\t\t{\n\t\t\t\ta.add(rectangle);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(rectMin > at)\n\t\t\t{\n\t\t\t\tb.add(rectangle);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ta.add(rectangle);\n\t\t\tb.add(rectangle);\n\t\t}\n\n\t\treturn [a, b];\n\t}\n\n\tadd(rectangle)\n\t{\n\t\tObject.freeze(rectangle);\n\n\t\tif(this.subTree)\n\t\t{\n\t\t\tthis.subTree.add(rectangle);\n\t\t}\n\n\t\tthis.rectangles.add(rectangle);\n\t\tthis.size = this.rectangles.size;\n\t}\n\n\tdelete(rectangle)\n\t{\n\t\tif(this.subTree)\n\t\t{\n\t\t\tthis.subTree.delete(rectangle);\n\t\t}\n\n\t\tthis.rectangles.delete(rectangle);\n\t\tthis.size = this.rectangles.size;\n\n\t\tconst empty = (!this.rectangles.size) && this.start > -Infinity;\n\n\t\treturn empty;\n\t}\n}\n\nconst isRectangle = (object) => {\n\treturn 'x1' in object\n\t\t&& 'y1' in object\n\t\t&& 'x2' in object\n\t\t&& 'y2' in object\n\t\t&& object.x1 < object.x2\n\t\t&& object.y1 < object.y2;\n};\n\nexport class SMTree\n{\n\tconstructor(args = {dimension: 2, [depthSymbol]: 0})\n\t{\n\t\tthis.depth = args[depthSymbol];\n\t\tthis.dimension = args.dimension;\n\n\t\tthis.segments = [new Segment(-Infinity, Infinity, null, this.dimension, this.depth)];\n\t}\n\n\tadd(rectangle)\n\t{\n\t\tif(!isRectangle(rectangle))\n\t\t{\n\t\t\tthrow new Error('Object supplied is not a Rectangle. Must have properties: x1, y1, x2, y2.');\n\t\t}\n\n\t\tconst rectMin = this.depth === 0 ? rectangle.x1 : rectangle.y1;\n\t\tconst rectMax = this.depth === 0 ? rectangle.x2 : rectangle.y2;\n\n\t\tconst startIndex = this.findSegment(rectMin);\n\t\tthis.splitSegment(startIndex, rectMin);\n\n\t\tconst endIndex = this.findSegment(rectMax);\n\t\tthis.splitSegment(endIndex, rectMax);\n\n\t\tif(startIndex === endIndex)\n\t\t{\n\t\t\tthis.segments[startIndex].add(rectangle);\n\t\t\treturn;\n\t\t}\n\n\t\tfor(let i = 1 + startIndex; i <= endIndex; i++)\n\t\t{\n\t\t\tthis.segments[i].add(rectangle);\n\t\t}\n\t}\n\n\tdelete(rectangle)\n\t{\n\t\tif(!isRectangle(rectangle))\n\t\t{\n\t\t\tthrow new Error('Object supplied is not a Rectangle. Must have properties: x1, y1, x2, y2.');\n\t\t}\n\n\t\tconst rectMin = this.depth === 0 ? rectangle.x1 : rectangle.y1;\n\t\tconst rectMax = this.depth === 0 ? rectangle.x2 : rectangle.y2;\n\n\t\tconst startIndex = this.findSegment(rectMin);\n\t\tconst endIndex = this.findSegment(rectMax);\n\n\t\tconst empty = [];\n\n\t\tfor(let i = startIndex; i <= endIndex; i++)\n\t\t{\n\t\t\tif(i > 0 && this.segments[i].delete(rectangle))\n\t\t\t{\n\t\t\t\tempty.push(i);\n\t\t\t}\n\t\t}\n\n\t\tfor(let i = -1 + empty.length; i >= 0; i--)\n\t\t{\n\t\t\tconst e = empty[i];\n\n\t\t\tif(!this.segments[-1 + e])\n\t\t\t{\n\t\t\t\tthrow new Error('Cannot delete segment without predecessor.')\n\t\t\t}\n\n\t\t\tthis.segments[-1 + e].end = this.segments[e].end;\n\t\t\tthis.segments[1 + e].prev = this.segments[-1 + e];\n\t\t\tthis.segments.splice(e, 1);\n\t\t}\n\n\t\tif(this.segments.length === 2 && this.segments[0].size == 0 && this.segments[1].size === 0)\n\t\t{\n\t\t\tthis.segments[0].end = this.segments[1].end;\n\t\t\tthis.segments.length = 1;\n\t\t}\n\t}\n\n\tquery(x1, y1, x2, y2)\n\t{\n\t\tconst results = new Set;\n\n\t\tconst xStartIndex = this.findSegment(x1);\n\t\tconst xEndIndex = this.findSegment(x2);\n\n\t\tfor(let i = xStartIndex; i <= xEndIndex; i++)\n\t\t{\n\t\t\tconst segment = this.segments[i];\n\n\t\t\tif(!segment.subTree)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst yStartIndex = segment.subTree.findSegment(y1);\n\t\t\tconst yEndIndex = segment.subTree.findSegment(y2);\n\n\t\t\tfor(let j = yStartIndex; j <= yEndIndex; j++)\n\t\t\t{\n\t\t\t\tfor(const result of segment.subTree.segments[j].rectangles)\n\t\t\t\t{\n\t\t\t\t\tresults.add(result)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tsplitSegment(index, at)\n\t{\n\t\tif(at <= this.segments[index].start || at >= this.segments[index].end)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst splitSegments = this.segments[index].split(at);\n\n\t\tthis.segments.splice(index, 1, ...splitSegments);\n\t}\n\n\tfindSegment(at)\n\t{\n\t\tlet lo = 0;\n\t\tlet hi = -1 + this.segments.length;\n\n\t\tdo\n\t\t{\n\t\t\tconst current = Math.floor((lo + hi) * 0.5);\n\t\t\tconst segment = this.segments[current];\n\n\t\t\tif(segment.start < at && segment.end >= at)\n\t\t\t{\n\t\t\t\treturn current;\n\t\t\t}\n\n\t\t\tif(segment.start < at)\n\t\t\t{\n\t\t\t\tlo = 1 + current;\n\t\t\t}\n\n\t\t\tif(segment.end > at)\n\t\t\t{\n\t\t\t\thi = -1 + current;\n\t\t\t}\n\t\t} while(lo <= hi);\n\n\t\treturn -1;\n\t}\n}\n","export class Split\n{\n\tstatic bytes = new Uint8ClampedArray(4);\n\tstatic words = new Uint16Array(this.bytes.buffer);\n\tstatic value = new Uint32Array(this.bytes.buffer);\n\n\tstatic intToBytes(value)\n\t{\n\t\tthis.value[0] = value;\n\n\t\treturn [...this.bytes];\n\t}\n\n\tstatic bytesToInt(bytes)\n\t{\n\t\tthis.bytes[0] = bytes[0];\n\t\tthis.bytes[1] = bytes[1];\n\t\tthis.bytes[2] = bytes[2];\n\t\tthis.bytes[3] = bytes[3];\n\n\t\treturn this.value[0];\n\t}\n\n\tstatic bytesToInt3(bytes)\n\t{\n\t\tthis.bytes[0] = bytes[0];\n\t\tthis.bytes[1] = bytes[1];\n\t\tthis.bytes[2] = bytes[2];\n\t\tthis.bytes[3] = 0;\n\n\t\treturn this.value[0];\n\t}\n}\n","export class BallController\n{\n\tstatic spriteImage = './sphere.png';\n\n\tonCreate(entity, entityData)\n\t{\n\t\tentity.xSpeed = 0;\n\t\tentity.ySpeed = 0;\n\n\t\tentity.height = 32;\n\t\tentity.width  = 32;\n\t}\n\n\tsimulate(entity)\n\t{\n\t\tconst world = entity.session.world;\n\n\t\tif(entity.xSpeed || entity.ySpeed)\n\t\t{\n\t\t\tlet xMove = entity.xSpeed;\n\t\t\tlet yMove = entity.ySpeed;\n\n\t\t\tconst h = world.castTerrainRay(\n\t\t\t\tworld\n\t\t\t\t, entity.x + 0\n\t\t\t\t, entity.y + -16\n\t\t\t\t, 0\n\t\t\t\t, entity.xSpeed < 0 ? Math.PI : 0\n\t\t\t\t, Math.abs(entity.xSpeed) + 16\n\t\t\t\t, 0x01\n\t\t\t);\n\n\t\t\tconst v = world.castTerrainRay(\n\t\t\t\tworld\n\t\t\t\t, entity.x + 0\n\t\t\t\t, entity.y + -16\n\t\t\t\t, 0\n\t\t\t\t, Math.PI * 0.5 * Math.sign(entity.ySpeed)\n\t\t\t\t, Math.abs(entity.ySpeed) + 16\n\t\t\t\t, 0x1\n\t\t\t);\n\n\t\t\tif(h)\n\t\t\t{\n\t\t\t\tconst actualDistance = h[0] - entity.x;\n\t\t\t\txMove = actualDistance + -16 * Math.sign(entity.xSpeed);\n\t\t\t\tentity.xSpeed = -entity.xSpeed;\n\t\t\t}\n\n\t\t\tif(v)\n\t\t\t{\n\t\t\t\tconst actualDistance = v[1] - (entity.y + -16);\n\t\t\t\tyMove = actualDistance + -16 * Math.sign(entity.ySpeed);\n\t\t\t\tentity.ySpeed = -entity.ySpeed;\n\t\t\t}\n\n\t\t\tentity.x += xMove;\n\t\t\tentity.y += yMove;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst a = Math.PI * 2 * Math.random();\n\t\t\tconst s = 6;\n\t\t\tentity.xSpeed = Math.cos(a) * s;\n\t\t\tentity.ySpeed = Math.sin(a) * s;\n\t\t}\n\t}\n}\n","export class BarrelController\n{\n\tstatic spriteImage = '/barrel.png';\n\n\tonCreate(entity, entityData)\n\t{\n\t\tentity.xSpeed = 0;\n\t\tentity.ySpeed = 0;\n\n\t\tentity.height = 48;\n\t\tentity.width = 32;\n\n\t\tentity.grounded = true;\n\n\t\tentity.ySpriteOffset = 6;\n\t}\n\n\tsimulate(entity)\n\t{\n\t\tconst world = entity.session.world;\n\n\t\tif(!world.getSolid(entity.x, entity.y + 1))\n\t\t{\n\t\t\tentity.ySpeed = Math.min(8, entity.ySpeed + 0.5);\n\t\t\tentity.grounded = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tentity.ySpeed = Math.min(0, entity.ySpeed);\n\t\t\tentity.grounded = true;\n\t\t}\n\n\t\tif(world.getSolid(entity.x, entity.y) && !world.getSolid(entity.x, entity.y - 1))\n\t\t{\n\t\t\tentity.ySpeed = 0;\n\t\t\tentity.y--;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x, entity.y + -entity.height) && !world.getSolid(entity.x, entity.y))\n\t\t{\n\t\t\tentity.ySpeed = 0;\n\t\t\tentity.y++;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x + -entity.width * 0.5, entity.y + -8) && !world.getSolid(entity.x + entity.width * 0.5, entity.y + -8))\n\t\t{\n\t\t\tentity.xSpeed = 0;\n\t\t\tentity.x++;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x + entity.width * 0.5, entity.y + -8) && !world.getSolid(entity.x - entity.width * 0.5, entity.y + -8))\n\t\t{\n\t\t\tentity.xSpeed = 0;\n\t\t\tentity.x--;\n\t\t}\n\n\t\tif(entity.xSpeed || entity.ySpeed)\n\t\t{\n\t\t\tconst direction = Math.atan2(entity.ySpeed, entity.xSpeed);\n\t\t\tconst distance = Math.hypot(entity.ySpeed, entity.xSpeed);\n\t\t\tconst hit = world.castRay(\n\t\t\t\tentity.x\n\t\t\t\t, entity.y\n\t\t\t\t, 0\n\t\t\t\t, direction\n\t\t\t\t, distance\n\t\t\t\t, 0x01\n\t\t\t);\n\n\t\t\tlet xMove = entity.xSpeed;\n\t\t\tlet yMove = entity.ySpeed;\n\n\t\t\tif(hit.terrain)\n\t\t\t{\n\t\t\t\tconst actualDistance = Math.hypot(\n\t\t\t\t\tentity.x - hit.terrain[0]\n\t\t\t\t\t, entity.y - hit.terrain[1]\n\t\t\t\t);\n\n\t\t\t\txMove = Math.cos(direction) * actualDistance;\n\t\t\t\tyMove = Math.sin(direction) * actualDistance;\n\t\t\t}\n\n\t\t\tentity.x += xMove;\n\t\t\tentity.y += yMove;\n\t\t}\n\t}\n}\n","import { Bindable } from \"curvature/base/Bindable\";\nimport { Rectangle } from \"../math/Rectangle\";\nimport { Sprite } from '../sprite/Sprite';\n\nexport class Entity\n{\n\tconstructor(entityData)\n\t{\n\t\tconst {controller, session, inputManager, sprite, x = 0, y = 0, width = 32, height = 32} = entityData;\n\n\t\tthis[Bindable.Prevent] = true;\n\n\t\tthis.controller = controller;\n\n\t\tthis.sprite = sprite || new Sprite({\n\t\t\tsession\n\t\t\t, src: '/thing.png'\n\t\t\t, width: 32\n\t\t\t, height: 32\n\t\t});\n\n\t\tthis.inputManager = inputManager;\n\t\tthis.session = session;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\tthis.xSpriteOffset = 0;\n\t\tthis.ySpriteOffset = 0;\n\n\t\tthis.width  = width;\n\t\tthis.height = height;\n\n\t\tthis.rect = new Rectangle(\n\t\t\tx - width * 0.5, y - height,\n\t\t\tx + width * 0.5, y\n\t\t);\n\n\t\tcontroller && controller.onCreate(this, entityData);\n\t}\n\n\tsimulate()\n\t{\n\t\tthis.controller && this.controller.simulate(this);\n\n\t\tthis.rect.x1 = this.x - this.width * 0.5;\n\t\tthis.rect.x2 = this.x + this.width * 0.5;\n\n\t\tthis.rect.y1 = this.y - this.height;\n\t\tthis.rect.y2 = this.y;\n\n\t\tthis.sprite.x = this.x + this.xSpriteOffset;\n\t\tthis.sprite.y = this.y + this.ySpriteOffset;\n\n\t\tthis.fixFPE();\n\t}\n\n\tdestroy()\n\t{\n\t\tthis.controller && controller.destroy(this);\n\t}\n\n\tfixFPE()\n\t{\n\t\tif(this.x % 1 > 0.99999) this.x = Math.round(this.x);\n\t\tif(this.y % 1 > 0.99999) this.y = Math.round(this.y);\n\t\tif(this.x % 1 < 0.00001) this.x = Math.round(this.x);\n\t\tif(this.y % 1 < 0.00001) this.y = Math.round(this.y);\n\t}\n}\n","import { Bindable } from 'curvature/base/Bindable';\n\nexport class InputManager\n{\n\ttriggers = Bindable.makeBindable({});\n\taxis     = Bindable.makeBindable({});\n\n\tconstructor({keyboard, onScreenJoyPad})\n\t{\n\t\tkeyboard.keys.bindTo((v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.keyPress(k,v,t[k]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(v === -1)\n\t\t\t{\n\t\t\t\tthis.keyRelease(k,v,t[k]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t});\n\n\t\tonScreenJoyPad.args.bindTo('x', (v) => {\n\t\t\tthis.axis[0] = v / 50;\n\t\t});\n\n\t\tonScreenJoyPad.args.bindTo('y', (v) => {\n\t\t\tthis.axis[1] = v / 50;\n\t\t});\n\t}\n\n\tkeyPress(key, value, prev)\n\t{\n\t\tif(/^[0-9]$/.test(key))\n\t\t{\n\t\t\tthis.triggers[key] = true;\n\t\t\treturn;\n\t\t}\n\n\t\tswitch(key)\n\t\t{\n\t\t\tcase 'ArrowRight':\n\t\t\t\tthis.axis[0] = 1;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowDown':\n\t\t\t\tthis.axis[1] = 1;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowLeft':\n\t\t\t\tthis.axis[0] = -1;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowUp':\n\t\t\t\tthis.axis[1] = -1;\n\t\t\t\tbreak;\n\n\t\t\tcase ' ':\n\t\t\t\tthis.triggers[0] = true;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tkeyRelease(key, value, prev)\n\t{\n\t\tif(/^[0-9]$/.test(key))\n\t\t{\n\t\t\tthis.triggers[key] = false;\n\t\t\treturn;\n\t\t}\n\n\t\tswitch(key)\n\t\t{\n\t\t\tcase 'ArrowRight':\n\t\t\t\tif(this.axis[0] > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.axis[0] = 0;\n\t\t\t\t}\n\t\t\t\tthis.axis[0] = 0;\n\n\t\t\tcase 'ArrowLeft':\n\t\t\t\tif(this.axis[0] < 0)\n\t\t\t\t{\n\t\t\t\t\tthis.axis[0] = 0;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowDown':\n\t\t\t\tif(this.axis[1] > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.axis[1] = 0;\n\t\t\t\t}\n\n\t\t\tcase 'ArrowUp':\n\t\t\t\tif(this.axis[1] < 0)\n\t\t\t\t{\n\t\t\t\t\tthis.axis[1] = 0;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase ' ':\n\t\t\t\tthis.triggers[0] = false;\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import { Ray } from \"../math/Ray\";\n\nconst fireRegion  = [1, 0, 0];\nconst waterRegion = [0, 1, 1];\n\nexport class PlayerController\n{\n\tstatic spriteSheet = '/player.tsj';\n\n\tonCreate(entity, entityData)\n\t{\n\t\tentity.direction = 'south';\n\t\tentity.state = 'standing';\n\n\t\tentity.xSpeed = 0;\n\t\tentity.ySpeed = 0;\n\n\t\tentity.grounded = true;\n\n\t\tentity.xDirection = 0;\n\n\t\tentity.ySpriteOffset = 1;\n\t}\n\n\tsimulate(entity)\n\t{\n\t\tif(entity.state === 'jumping')\n\t\t{\n\t\t\tentity.height = 24;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tentity.height = 48;\n\t\t}\n\n\t\tconst speed = 4;\n\n\t\tconst xAxis = entity.inputManager ? ( Math.min(1, Math.max(entity.inputManager.axes[0].magnitude || 0, -1)) || 0 ) : 0;\n\t\tconst yAxis = entity.inputManager ? ( Math.min(1, Math.max(entity.inputManager.axes[1].magnitude || 0, -1)) || 0 ) : 0;\n\n\t\tconst world = entity.session.world;\n\n\t\tif(!world.getSolid(entity.x, entity.y + 1))\n\t\t{\n\t\t\tentity.ySpeed = Math.min(8, entity.ySpeed + 0.5);\n\t\t\tentity.grounded = false;\n\t\t}\n\t\telse if(entity.ySpeed >= 0)\n\t\t{\n\t\t\tentity.ySpeed = Math.min(0, entity.ySpeed);\n\t\t\tentity.grounded = true;\n\t\t}\n\n\t\tif(xAxis)\n\t\t{\n\t\t\tentity.xDirection = Math.sign(xAxis);\n\n\t\t\tif(!world.getSolid(entity.x + Math.sign(xAxis) * entity.width * 0.5 + Math.sign(xAxis), entity.y))\n\t\t\t{\n\t\t\t\tentity.xSpeed += xAxis * (entity.grounded ? 0.2 : 0.4);\n\t\t\t}\n\n\t\t\tif(Math.abs(entity.xSpeed) > 8)\n\t\t\t{\n\t\t\t\tentity.xSpeed = 8 * Math.sign(entity.xSpeed);\n\t\t\t}\n\n\t\t\tif(entity.grounded && xAxis && Math.sign(xAxis) !== Math.sign(entity.xSpeed))\n\t\t\t{\n\t\t\t\tentity.xSpeed *= 0.75;\n\t\t\t}\n\t\t}\n\t\telse if(entity.grounded)\n\t\t{\n\t\t\tentity.xSpeed *= 0.9;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tentity.xSpeed *= 0.99;\n\t\t}\n\n\t\tif(world.getSolid(entity.x, entity.y) && !world.getSolid(entity.x, entity.y + -entity.height))\n\t\t{\n\t\t\tentity.ySpeed = 0;\n\t\t\tentity.y--;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x, entity.y + -entity.height) && !world.getSolid(entity.x, entity.y))\n\t\t{\n\t\t\tentity.ySpeed = 0;\n\t\t\tentity.y++;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x + -entity.width * 0.5, entity.y + -8) && !world.getSolid(entity.x + entity.width * 0.5, entity.y + -8))\n\t\t{\n\t\t\tentity.xSpeed = 0;\n\t\t\tentity.x++;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x + entity.width * 0.5, entity.y + -8) && !world.getSolid(entity.x - entity.width * 0.5, entity.y + -8))\n\t\t{\n\t\t\tentity.xSpeed = 0;\n\t\t\tentity.x--;\n\t\t}\n\n\t\tif(entity.xSpeed || entity.ySpeed)\n\t\t{\n\t\t\tconst direction = Math.atan2(entity.ySpeed, entity.xSpeed);\n\t\t\tconst distance = Math.hypot(entity.ySpeed, entity.xSpeed);\n\n\t\t\tconst hit = Ray.cast(\n\t\t\t\tworld\n\t\t\t\t, entity.x\n\t\t\t\t, entity.y\n\t\t\t\t, 0\n\t\t\t\t, direction\n\t\t\t\t, distance\n\t\t\t\t, Ray.T_LAST_EMPTY\n\t\t\t);\n\n\t\t\tlet xMove = entity.xSpeed;\n\t\t\tlet yMove = entity.ySpeed;\n\n\t\t\tif(hit.terrain)\n\t\t\t{\n\t\t\t\tconst actualDistance = Math.hypot(\n\t\t\t\t\tentity.x - hit.terrain[0]\n\t\t\t\t\t, entity.y - hit.terrain[1]\n\t\t\t\t);\n\n\t\t\t\txMove = Math.cos(direction) * actualDistance;\n\t\t\t\tyMove = Math.sin(direction) * actualDistance;\n\t\t\t}\n\n\t\t\tentity.x += xMove;\n\t\t\tentity.y += yMove;\n\t\t}\n\n\t\tif(entity.grounded)\n\t\t{\n\t\t\tentity.state = xAxis ? 'walking' : 'standing';\n\n\t\t\tif(xAxis < 0)\n\t\t\t{\n\t\t\t\tentity.direction = 'west';\n\t\t\t}\n\t\t\telse if(xAxis > 0)\n\t\t\t{\n\t\t\t\tentity.direction = 'east';\n\t\t\t}\n\t\t}\n\n\t\tif(entity.grounded && entity.inputManager.buttons[0] && entity.inputManager.buttons[0].time === 1)\n\t\t{\n\t\t\tentity.grounded = false;\n\t\t\tentity.state = 'jumping';\n\t\t\tentity.ySpeed = -10;\n\t\t}\n\n\t\tentity.sprite.changeAnimation(`${entity.state}-${entity.direction}`);\n\n\t\t// if(Math.trunc(performance.now() / 1000) % 15 === 0)\n\t\t// {\n\t\t// \tentity.sprite.region = null;\n\t\t// }\n\n\t\t// if(Math.trunc(performance.now() / 1000) % 15 === 5)\n\t\t// {\n\t\t// \tentity.sprite.region = waterRegion;\n\t\t// }\n\n\t\t// if(Math.trunc(performance.now() / 1000) % 15 === 10)\n\t\t// {\n\t\t// \tentity.sprite.region = fireRegion;\n\t\t// }\n\n\t\t// if(entity.state === 'jumping' && entity.direction === 'south')\n\t\t// {\n\t\t// \tentity.direction = 'east';\n\t\t// }\n\t}\n}\n","import { SpriteSheet } from \"../sprite/SpriteSheet\";\nimport { Sprite } from \"../sprite/Sprite\";\nimport { Entity } from \"./Entity\";\n\nexport class Spawner extends Entity\n{\n\tconstructor(entityData)\n\t{\n\t\tsuper(entityData);\n\n\t\tthis.entityData = entityData;\n\n\t\tthis.spawnType = entityData.spawnType;\n\t\tthis.spawnClass = entityData.spawnClass;\n\t\tthis.session = entityData.session;\n\n\t\tthis.i = 0;\n\t}\n\n\tsimulate()\n\t{\n\t\tconst entityData = {...this.entityData};\n\t\tconst spawnClass = this.entityData.spawnClass;\n\n\t\tconst controller = new spawnClass;\n\n\t\tif(!entityData.sprite)\n\t\t{\n\t\t\tif(spawnClass.spriteSheet)\n\t\t\t{\n\t\t\t\tentityData.sprite = new Sprite({\n\t\t\t\t\tsession: entityData.session\n\t\t\t\t\t, spriteSheet: new SpriteSheet({source: spawnClass.spriteSheet})\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if(spawnClass.spriteImage)\n\t\t\t{\n\t\t\t\tentityData.sprite = new Sprite({\n\t\t\t\t\tsession: entityData.session\n\t\t\t\t\t, src: entityData.spawnClass.spriteImage\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst entity = new Entity({\n\t\t\t...entityData\n\t\t\t, controller\n\t\t\t, session: this.session\n\t\t\t, x: this.x\n\t\t\t, y: this.y\n\t\t});\n\n\t\tthis.session.addEntity(entity);\n\t\tthis.session.removeEntity(this);\n\t\tsuper.simulate();\n\t}\n}\n","module.exports = \"precision mediump float;\\n\\nuniform vec4 u_color;\\nvarying vec2 v_texCoord;\\n\\nvoid main() {\\n  // gl_FragColor = texture2D(u_image, v_texCoord);\\n  gl_FragColor = vec4(1.0, 1.0, 0.0, 0.25);\\n}\\n\"","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_texCoord;\\n\\nuniform vec2 u_resolution;\\nvarying vec2 v_texCoord;\\n\\nvoid main()\\n{\\n  vec2 zeroToOne = a_position / u_resolution;\\n  vec2 zeroToTwo = zeroToOne * 2.0;\\n  vec2 clipSpace = zeroToTwo - 1.0;\\n\\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\\n  v_texCoord  = a_texCoord;\\n}\\n\"","import { QuickTree } from \"../math/QuickTree\";\n\nimport { SpriteBoard } from \"../sprite/SpriteBoard\";\nimport { SpriteSheet } from '../sprite/SpriteSheet';\nimport { Sprite } from '../sprite/Sprite';\nimport { Entity } from '../model/Entity';\nimport { Camera } from '../sprite/Camera';\nimport { World } from \"../world/World\";\n\nimport { Controller } from '../input/Controller';\nimport { EntityPallet } from \"../world/EntityPallet\";\n\nimport { PlayerController } from '../model/PlayerController';\nimport { BallController } from \"../model/BalllController\";\nimport { BarrelController } from \"../model/BarrelController\";\n\nEntityPallet.register('@basic-platformer', PlayerController);\nEntityPallet.register('@barrel', BarrelController);\nEntityPallet.register('@ball', BallController);\n\nexport class Session\n{\n\tconstructor({element, world, keyboard, onScreenJoyPad})\n\t{\n\n\t\tthis.fThen = 0;\n\t\tthis.sThen = 0;\n\n\t\tthis.frameLock = 60;\n\t\tthis.simulationLock = 60;\n\n\t\tthis.entities  = new Set;\n\t\tthis.removed = new WeakSet;\n\n\t\tthis.paused = false;\n\n\t\tthis.loaded = false;\n\n\t\tthis.world = new World({source: new URL(world, location).href, session: this});\n\t\tthis.spriteBoard = new SpriteBoard({element, world: this.world, session: this});\n\n\t\tthis.keyboard = keyboard;\n\n\t\tthis.world.ready.then(() => this.initialize({keyboard, onScreenJoyPad}));\n\n\t\tthis.controller = new Controller({deadZone: 0.2});\n\t\tthis.controller.zero();\n\n\t\tthis.gamepad = null;\n\t\twindow.addEventListener('gamepadconnected', event => {\n\t\t\tconsole.log(event);\n\t\t\tthis.gamepad = event.gamepad;\n\n\t\t});\n\n\t\twindow.addEventListener('gamepaddisconnected', event => {\n\t\t\tif(!this.gamepad)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.gamepad = null;\n\t\t});\n\t}\n\n\tasync initialize()\n\t{\n\t\tthis.loaded = true;\n\n\t\tfor(const map of this.world.maps)\n\t\t{\n\t\t\tif(!map.properties['player-start'])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst startId = map.properties['player-start'];\n\t\t\tconst startDef = map.entityDefs[startId];\n\t\t\tconst playerClass = await EntityPallet.resolve(startDef.type);\n\n\t\t\tconst player = this.player = new Entity({\n\t\t\t\tcontroller: new playerClass,\n\t\t\t\tsession: this,\n\t\t\t\tx: startDef.x,\n\t\t\t\ty: startDef.y,\n\t\t\t\tinputManager: this.controller,\n\t\t\t\tsprite: new Sprite({\n\t\t\t\t\tsession: this,\n\t\t\t\t\tspriteSheet: new SpriteSheet({source: '/player.tsj'}),\n\t\t\t\t\twidth: 32,\n\t\t\t\t\theight: 48,\n\t\t\t\t}),\n\t\t\t\tcamera: Camera,\n\t\t\t});\n\n\t\t\tthis.spriteBoard.following = player;\n\t\t\tthis.addEntity(player);\n\t\t}\n\t}\n\n\taddEntity(entity)\n\t{\n\t\tif(this.entities.has(entity))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.entities.add(entity);\n\t\tthis.spriteBoard.sprites.add(entity.sprite);\n\t\tconst maps = this.world.getMapsForPoint(entity.x, entity.y);\n\t\tmaps.forEach(map => map.quadTree.add(entity));\n\t}\n\n\tremoveEntity(entity)\n\t{\n\t\tthis.entities.delete(entity);\n\t\tthis.spriteBoard.sprites.delete(entity.sprite);\n\t\tQuickTree.deleteFromAllTrees(entity)\n\t\tthis.removed.add(entity);\n\t}\n\n\tsimulate(now)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst delta = now - this.sThen;\n\n\t\tif(this.simulationLock == 0 || 0.2 + delta < (1000 / this.simulationLock))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.sThen = now;\n\n\t\tthis.keyboard.update();\n\t\tthis.controller.update({gamepad: this.gamepad});\n\t\tthis.controller.readInput({gamepads: navigator.getGamepads(), keyboard: this.keyboard});\n\n\t\tif(this.controller.buttons[1020] && this.controller.buttons[1020].time === 1)\n\t\t{\n\t\t\tthis.paused = !this.paused;\n\t\t}\n\n\t\tif(this.paused || !this.player)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.entities.forEach(entity => entity.sprite.visible = false);\n\n\t\tconst player = this.player;\n\t\tconst nearBy = this.world.getEntitiesForRect(\n\t\t\tplayer.x\n\t\t\t, player.y\n\t\t\t, (Camera.width * 1.0) + 64\n\t\t\t, (Camera.height * 1.0) + 64\n\t\t);\n\n\t\tnearBy.delete(player);\n\t\tnearBy.add(player);\n\n\t\tnearBy.forEach(entity => {\n\t\t\tentity.simulate(delta);\n\t\t\tconst maps = this.world.getMapsForRect(entity.x, entity.y, 100, 100);\n\t\t\tmaps.forEach(map => this.removed.has(entity) || map.quadTree.move(entity));\n\t\t\tentity.sprite.visible = true;\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tdraw(now)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst delta = now - this.fThen;\n\n\t\tif(this.frameLock == 0 || 0.2 + delta < (1000 / this.frameLock))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.spriteBoard.draw(delta);\n\t\tthis.fThen = now;\n\n\t\treturn true;\n\t}\n}\n","export class Camera\n{\n\tstatic x = 0;\n\tstatic y = 0;\n\tstatic width  = 0;\n\tstatic height = 0;\n}\n","import { Bindable } from 'curvature/base/Bindable';\n\nexport class MapRenderer\n{\n\tconstructor({spriteBoard, map})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.spriteBoard = spriteBoard;\n\n\t\tthis.loaded = false;\n\n\t\tthis.map = map;\n\t\tthis.width  = 0;\n\t\tthis.height = 0;\n\n\t\tthis.tileWidth  = 0;\n\t\tthis.tileHeight = 0;\n\n\t\tthis.xOffset = 0;\n\t\tthis.yOffset = 0;\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tthis.tileMapping = this.spriteBoard.gl2d.createTexture(1, 1);\n\t\tthis.tileTexture = this.spriteBoard.gl2d.createTexture(1, 1);\n\n\t\tconst r = () => parseInt(Math.random() * 0xFF);\n\t\tconst pixel = new Uint8Array([r(), r(), r(), 0xFF]);\n\n\t\tmap.ready.then(() => {\n\t\t\tthis.loaded = true;\n\t\t\tthis.tileWidth  = map.tileWidth;\n\t\t\tthis.tileHeight = map.tileHeight;\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, this.tileTexture);\n\t\t\tgl.texImage2D(\n\t\t\t\tgl.TEXTURE_2D\n\t\t\t\t, 0\n\t\t\t\t, gl.RGBA\n\t\t\t\t, map.tileSetWidth\n\t\t\t\t, map.tileSetHeight\n\t\t\t\t, 0\n\t\t\t\t, gl.RGBA\n\t\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t\t, map.pixels\n\t\t\t);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\n\t\t});\n\t}\n\n\tnegSafeMod(a,b)\n\t{\n\t\tif(a >= 0) return a % b;\n\t\treturn (b + a % b) % b;\n\t}\n\n\tdraw()\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tconst x = this.spriteBoard.following.sprite.x;\n\t\tconst y = this.spriteBoard.following.sprite.y;\n\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\n\t\tconst halfTileWidth  = this.tileWidth  * 0.5;\n\t\tconst halfTileHeight = this.tileHeight * 0.5;\n\n\t\tconst tilesWide = Math.floor(this.width / this.tileWidth);\n\t\tconst tilesHigh = Math.floor(this.height / this.tileHeight);\n\n\t\tconst xOffset = Math.floor(Math.floor((0.5 * this.width)  / 64) + 0) * 64;\n\t\tconst yOffset = Math.floor(Math.floor((0.5 * this.height) / 64) + 0) * 64;\n\n\t\tconst xTile = (x+halfTileWidth)/this.tileWidth\n\t\t\t+ -this.negSafeMod( x + halfTileWidth, 64 ) / this.tileWidth\n\t\t\t+ -this.map.xWorld / this.tileWidth\n\t\t\t+ -xOffset / this.tileWidth;\n\n\t\tconst yTile = (y+halfTileHeight)/this.tileHeight\n\t\t\t+ -this.negSafeMod( y + halfTileHeight, 64 ) / this.tileHeight\n\t\t\t+ -this.map.yWorld / this.tileHeight\n\t\t\t+ -yOffset / this.tileHeight;\n\n\t\tif(xTile + tilesWide < 0 || yTile + tilesHigh < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst xPos = zoom * (\n\t\t\t(this.width + this.xOffset) * 0.5\n\t\t\t+ -this.negSafeMod( x + halfTileWidth, 64 )\n\t\t\t+ -xOffset\n\t\t);\n\n\t\tconst yPos = zoom * (\n\t\t\t(this.height + this.yOffset) * 0.5\n\t\t\t+ -this.negSafeMod( y + halfTileHeight, 64 )\n\t\t\t+ -yOffset\n\t\t);\n\n\t\tthis.spriteBoard.drawProgram.uniformF('u_size', this.width, this.height);\n\t\tthis.spriteBoard.drawProgram.uniformF('u_tileSize', this.tileWidth, this.tileHeight);\n\t\tthis.spriteBoard.drawProgram.uniformF('u_mapTextureSize', this.map.tileSetWidth, this.map.tileSetHeight);\n\t\tthis.spriteBoard.drawProgram.uniformI('u_renderTiles', 1);\n\n\t\tgl.activeTexture(gl.TEXTURE2);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.tileTexture);\n\t\tthis.spriteBoard.drawProgram.uniformI('u_tiles', 2);\n\n\t\tgl.activeTexture(gl.TEXTURE3);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.tileMapping);\n\t\tthis.spriteBoard.drawProgram.uniformI('u_tileMapping', 3);\n\n\t\tconst tilePixelLayers = this.map.getSlice(xTile, yTile, tilesWide, tilesHigh, performance.now()/1000);\n\n\t\tfor(const tilePixels of tilePixelLayers)\n\t\t{\n\t\t\tgl.texImage2D(\n\t\t\t\tgl.TEXTURE_2D\n\t\t\t\t, 0\n\t\t\t\t, gl.RGBA\n\t\t\t\t, tilesWide\n\t\t\t\t, tilesHigh\n\t\t\t\t, 0\n\t\t\t\t, gl.RGBA\n\t\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t\t, tilePixels\n\t\t\t);\n\n\t\t\tthis.setRectangle(\n\t\t\t\txPos + this.tileWidth * 0.5 * zoom\n\t\t\t\t, yPos + this.tileHeight * zoom\n\t\t\t\t, this.width * zoom\n\t\t\t\t, this.height * zoom\n\t\t\t);\n\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.drawBuffer);\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\t\t}\n\n\t\t// Cleanup...\n\t\tthis.spriteBoard.drawProgram.uniformI('u_renderTiles', 0);\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\t\tgl.activeTexture(gl.TEXTURE2);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\n\t\tgl.activeTexture(gl.TEXTURE3);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\n\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tresize(x, y)\n\t{\n\t\tthis.width =  x + 0;\n\t\tthis.height = y + 0;\n\n\t\tthis.width =  Math.ceil(x / 128) * 128 + 128;\n\t\tthis.height = Math.ceil(y / 128) * 128 + 128;\n\n\t\tthis.xOffset = x - this.width;\n\t\tthis.yOffset = y - this.height;\n\t}\n\n\tsimulate()\n\t{}\n\n\tsetRectangle(x, y, width, height)\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_texCoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t0.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t]), gl.STATIC_DRAW);\n\n\t\tconst x1 = x;\n\t\tconst x2 = x + width;\n\t\tconst y1 = y;\n\t\tconst y2 = y + height;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\tx1, y2,\n\t\t\tx2, y2,\n\t\t\tx1, y1,\n\t\t\tx1, y1,\n\t\t\tx2, y2,\n\t\t\tx2, y1,\n\t\t]), gl.STATIC_DRAW);\n\t}\n}\n","import { Bindable } from 'curvature/base/Bindable';\n\nclass ParallaxLayer\n{\n\ttexture = null;\n\twidth = 0;\n\theight = 0;\n\toffset = 0;\n\tparallax = 0;\n}\n\nexport class Parallax\n{\n\tconstructor({spriteBoard, map})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.spriteBoard = spriteBoard;\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tthis.map = map;\n\t\tthis.texture = null;\n\n\t\tthis.height = 0;\n\n\t\tthis.slices = [\n\t\t\t'parallax/mountains-0.png'\n\t\t\t, 'parallax/sky-0-recolor.png'\n\t\t\t, 'parallax/sky-1-recolor.png'\n\t\t\t, 'parallax/sky-1b-recolor.png'\n\t\t\t, 'parallax/sky-2-recolor.png'\n\t\t];\n\n\t\tthis.parallaxLayers = [];\n\t\tthis.textures = [];\n\n\t\tthis.ready = map.ready.then(() => this.assemble(map)).then(() => {\n\t\t\tthis.loaded = true;\n\t\t});\n\n\t\tthis.loaded = false;\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\tassemble()\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tconst loadSlices = this.map.imageLayers.map(\n\t\t\t(layerData, index) => this.constructor.loadImage(layerData.image).then(image => {\n\t\t\t\tconst texture = this.textures[index] = gl.createTexture();\n\t\t\t\tconst layer = this.parallaxLayers[index] = new ParallaxLayer;\n\n\t\t\t\tconst layerBottom = image.height + layerData.offsety;\n\n\t\t\t\tif(this.height < layerBottom)\n\t\t\t\t{\n\t\t\t\t\tthis.height = layerBottom;\n\t\t\t\t}\n\n\t\t\t\tlayer.texture = texture;\n\t\t\t\tlayer.width = image.width;\n\t\t\t\tlayer.height = image.height;\n\t\t\t\tlayer.offset = layerData.offsety ?? 0;\n\t\t\t\tlayer.parallax = layerData.parallaxx ?? 1;\n\n\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\n\t\t\t\tgl.texImage2D(\n\t\t\t\t\tgl.TEXTURE_2D\n\t\t\t\t\t, 0\n\t\t\t\t\t, gl.RGBA\n\t\t\t\t\t, gl.RGBA\n\t\t\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t\t\t, image\n\t\t\t\t);\n\n\t\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n\t\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\t\t\t}\n\t\t));\n\n\t\treturn Promise.all(loadSlices);\n\t}\n\n\tdraw()\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\n\t\tthis.x = this.spriteBoard.following.sprite.x + -this.spriteBoard.width / zoom * 0.5;\n\t\tthis.y = this.spriteBoard.following.sprite.y;\n\n\t\tthis.spriteBoard.drawProgram.uniformI('u_renderParallax', 1);\n\t\tthis.spriteBoard.drawProgram.uniformF('u_scroll', this.x, this.y);\n\n\t\tgl.activeTexture(gl.TEXTURE0);\n\n\t\tfor(const layer of this.parallaxLayers)\n\t\t{\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, layer.texture);\n\n\t\t\tthis.spriteBoard.drawProgram.uniformF('u_size', layer.width, layer.width);\n\t\t\tthis.spriteBoard.drawProgram.uniformF('u_parallax', layer.parallax, 0);\n\n\t\t\tthis.setRectangle(\n\t\t\t\t0\n\t\t\t\t, this.spriteBoard.height + (-this.height + layer.offset) * zoom\n\t\t\t\t, layer.width * zoom\n\t\t\t\t, layer.height * zoom\n\t\t\t\t, layer.width\n\t\t\t);\n\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.drawBuffer);\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\t\t}\n\n\t\tthis.spriteBoard.drawProgram.uniformI('u_renderParallax', 0);\n\n\t\t// Cleanup...\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tstatic loadImage(src)\n\t{\n\t\tif(!this.imagePromises)\n\t\t{\n\t\t\tthis.imagePromises = {};\n\t\t}\n\n\t\tif(this.imagePromises[src])\n\t\t{\n\t\t\treturn this.imagePromises[src];\n\t\t}\n\n\t\tthis.imagePromises[src] = new Promise((accept, reject)=>{\n\t\t\tconst image = new Image();\n\t\t\timage.src   = src;\n\t\t\timage.addEventListener('load', (event)=>{\n\t\t\t\taccept(image);\n\t\t\t});\n\t\t});\n\n\t\treturn this.imagePromises[src];\n\t}\n\n\tsetRectangle(x, y, width, height)\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst ratio = this.spriteBoard.width / width;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_texCoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\t0.0, 0.0,\n\t\t\tratio, 0.0,\n\t\t\t0.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\tratio, 0.0,\n\t\t\tratio, 1.0,\n\t\t]), gl.STATIC_DRAW);\n\n\t\tconst x1 = x - 0;\n\t\tconst x2 = x + this.spriteBoard.width;\n\t\tconst y1 = y;\n\t\tconst y2 = y + height;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\tx1, y2,\n\t\t\tx2, y2,\n\t\t\tx1, y1,\n\t\t\tx1, y1,\n\t\t\tx2, y2,\n\t\t\tx2, y1,\n\t\t]), gl.STATIC_DRAW);\n\t}\n}\n","import { Bindable } from \"curvature/base/Bindable\";\nimport { SpriteSheet } from \"./SpriteSheet\";\nimport { Matrix } from \"../math/Matrix\";\nimport { Camera } from \"./Camera\";\n\nexport class Sprite\n{\n\tconstructor({src, session, spriteSheet, width, height, x, y, z})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.z = z || 0;\n\n\t\tthis.currentAnimation = null;\n\n\t\tthis.width  = 32 || width;\n\t\tthis.height = 32 || height;\n\t\tthis.scale  = 1;\n\n\t\tthis.visible = false;\n\t\tthis.moving = false;\n\n\t\tthis.textures = [];\n\t\tthis.frames = [];\n\t\tthis.currentDelay = 0;\n\t\tthis.currentFrame = 0;\n\t\tthis.currentFrames = '';\n\n\t\tthis.speed    = 0;\n\t\tthis.maxSpeed = 4;\n\n\n\t\tthis.RIGHT\t= 0;\n\t\tthis.DOWN\t= 1;\n\t\tthis.LEFT\t= 2;\n\t\tthis.UP\t\t= 3;\n\n\t\tthis.EAST\t= this.RIGHT;\n\t\tthis.SOUTH\t= this.DOWN;\n\t\tthis.WEST\t= this.LEFT;\n\t\tthis.NORTH\t= this.UP;\n\n\t\tthis.region = [0, 0, 0, 1];\n\n\t\tthis.spriteBoard = session.spriteBoard;\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tthis.texture = gl.createTexture();\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n\t\tconst r = () => parseInt(Math.random() * 255);\n\t\tconst pixel = new Uint8Array([r(), r(), r(), 255]);\n\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, 1\n\t\t\t, 1\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, pixel\n\t\t);\n\n\t\tif(src && !spriteSheet)\n\t\t{\n\t\t\tspriteSheet = new SpriteSheet({image: src});\n\t\t}\n\n\t\tthis.spriteSheet = spriteSheet;\n\n\t\tif(spriteSheet)\n\t\t{\n\t\t\tspriteSheet.ready.then(() => {\n\t\t\t\tthis.width = spriteSheet.tileWidth;\n\t\t\t\tthis.height = spriteSheet.tileHeight;\n\t\t\t\tthis.texture = this.createTexture( spriteSheet.getFrame(0) );\n\n\t\t\t\tfor(let i = 0; i < spriteSheet.tileCount; i++)\n\t\t\t\t{\n\t\t\t\t\tthis.textures[i] = this.createTexture( spriteSheet.getFrame(i) );\n\t\t\t\t}\n\n\t\t\t\tthis.changeAnimation('default');\n\t\t\t});\n\t\t}\n\t}\n\n\tdraw(delta)\n\t{\n\t\tif(this.currentDelay > 0)\n\t\t{\n\t\t\tthis.currentDelay -= delta;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.currentFrame++;\n\n\t\t\tif(this.spriteSheet && this.spriteSheet.animations[this.currentAnimation])\n\t\t\t{\n\t\t\t\tconst animation = this.spriteSheet.animations[this.currentAnimation];\n\n\t\t\t\tif(this.currentFrame >= animation.length)\n\t\t\t\t{\n\t\t\t\t\tthis.currentFrame = this.currentFrame % animation.length;\n\t\t\t\t}\n\n\t\t\t\tconst textureId = animation[this.currentFrame].tileid;\n\n\t\t\t\tconst texture = this.textures[ textureId ];\n\n\t\t\t\tif(texture)\n\t\t\t\t{\n\t\t\t\t\tthis.currentDelay = animation[this.currentFrame].duration;\n\t\t\t\t\tthis.texture = texture;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\t\tthis.spriteBoard.drawProgram.uniformF('u_region', 0, 0, 0, 0);\n\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n\t\tthis.setRectangle(\n\t\t\tthis.x * zoom + -Camera.x + (this.spriteBoard.width / 2)\n\t\t\t, this.y * zoom + -Camera.y + (this.spriteBoard.height / 2) + -this.height * zoom\n\t\t\t, this.width * zoom\n\t\t\t, this.height * zoom\n\t\t);\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.drawBuffer);\n\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\n\t\tthis.spriteBoard.drawProgram.uniformF('u_region', ...Object.assign(this.region || [0, 0, 0], {3: 1}));\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.effectBuffer);\n\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\n\t\tthis.spriteBoard.drawProgram.uniformF('u_region', 0, 0, 0, 0);\n\n\t\t// Cleanup...\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\treturn;\n\t}\n\n\tchangeAnimation(name)\n\t{\n\t\tif(!this.spriteSheet ||!this.spriteSheet.animations[name])\n\t\t{\n\t\t\tconsole.warn(`Animation ${name} not found.`);\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.currentAnimation !== name)\n\t\t{\n\t\t\tthis.currentAnimation = name;\n\t\t\tthis.currentDelay = 0;\n\t\t}\n\t}\n\n\tcreateTexture(pixels)\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, this.width\n\t\t\t, this.height\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, pixels\n\t\t);\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\n\t\treturn texture;\n\t}\n\n\tsetRectangle(x, y, width, height, transform = [])\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_texCoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t0.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t]), gl.STATIC_DRAW);\n\n\t\tconst x1 = x;\n\t\tconst y1 = y + 32 * zoom;\n\t\tconst x2 = x + width;\n\t\tconst y2 = y + height + 32 * zoom;\n\n\t\tconst points = new Float32Array([\n\t\t\tx1, y1,\n\t\t\tx2, y1,\n\t\t\tx1, y2,\n\t\t\tx1, y2,\n\t\t\tx2, y1,\n\t\t\tx2, y2,\n\t\t]);\n\n\t\tconst xOff = x + width  * 0.5;\n\t\tconst yOff = y + height * 0.5;\n\n\t\tconst t = Matrix.transform(points, Matrix.composite(\n\t\t\tMatrix.translate(xOff, yOff)\n\t\t\t// , Matrix.scale(Math.sin(theta), Math.cos(theta))\n\t\t\t// , Matrix.rotate(theta)\n\t\t\t, Matrix.translate(-xOff, -yOff)\n\t\t));\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, t, gl.STATIC_DRAW);\n\t}\n}\n","import { Bindable } from 'curvature/base/Bindable';\n\nimport { MapRenderer } from './MapRenderer';\nimport { Parallax } from './Parallax';\n\nimport { Gl2d } from '../gl2d/Gl2d';\nimport { Camera } from './Camera';\n\nexport class SpriteBoard\n{\n\tconstructor({element, world})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\n\t\tthis.maps = [];\n\n\t\tthis.world = world;\n\t\tthis.sprites = new Set;\n\t\tthis.currentMap = null;\n\n\t\tthis.screenScale = 1;\n\t\tthis.zoomLevel = 2;\n\n\t\tthis.mouse = {\n\t\t\tx: null\n\t\t\t, y: null\n\t\t\t, clickX: null\n\t\t\t, clickY: null\n\t\t};\n\n\t\tthis.parallax = null;\n\n\t\tthis.width = element.width;\n\t\tthis.height = element.height;\n\n\t\tCamera.width  = element.width;\n\t\tCamera.height = element.height;\n\n\t\tthis.gl2d = new Gl2d(element);\n\n\t\tthis.gl2d.enableBlending();\n\n\t\tconst attributes = ['a_position', 'a_texCoord'];\n\t\tconst uniforms = [\n\t\t\t'u_image'\n\t\t\t, 'u_effect'\n\t\t\t, 'u_tiles'\n\t\t\t, 'u_tileMapping'\n\n\t\t\t, 'u_size'\n\t\t\t, 'u_scale'\n\t\t\t, 'u_scroll'\n\t\t\t, 'u_stretch'\n\t\t\t, 'u_tileSize'\n\t\t\t, 'u_resolution'\n\t\t\t, 'u_mapTextureSize'\n\n\t\t\t, 'u_region'\n\t\t\t, 'u_parallax'\n\t\t\t, 'u_time'\n\n\t\t\t, 'u_renderTiles'\n\t\t\t, 'u_renderParallax'\n\t\t\t, 'u_renderMode'\n\t\t];\n\n\t\tthis.renderMode = 0;\n\n\t\tthis.drawProgram = this.gl2d.createProgram({\n\t\t\tvertexShader: this.gl2d.createShader('sprite/texture.vert')\n\t\t\t, fragmentShader: this.gl2d.createShader('sprite/texture.frag')\n\t\t\t, attributes\n\t\t\t, uniforms\n\t\t});\n\n\t\tthis.drawProgram.use();\n\n\t\tthis.colorLocation   = this.drawProgram.uniforms.u_color;\n\t\tthis.tilePosLocation = this.drawProgram.uniforms.u_tileNo;\n\t\tthis.regionLocation  = this.drawProgram.uniforms.u_region;\n\n\t\tthis.drawLayer = this.gl2d.createTexture(1000, 1000);\n\t\tthis.effectLayer = this.gl2d.createTexture(1000, 1000);\n\n\t\tthis.drawBuffer = this.gl2d.createFramebuffer(this.drawLayer);\n\t\tthis.effectBuffer = this.gl2d.createFramebuffer(this.effectLayer);\n\n\t\tdocument.addEventListener('mousemove', event => {\n\t\t\tthis.mouse.x = event.clientX;\n\t\t\tthis.mouse.y = event.clientY;\n\t\t});\n\n\t\tthis.mapRenderers = new Map;\n\t\tthis.following = null;\n\t}\n\n\tdraw(delta)\n\t{\n\t\tif(this.following)\n\t\t{\n\t\t\tCamera.x = (16 + this.following.sprite.x) * this.zoomLevel || 0;\n\t\t\tCamera.y = (16 + this.following.sprite.y) * this.zoomLevel || 0;\n\n\t\t\tconst maps = [...this.world.getMapsForPoint(this.following.x, this.following.y)];\n\n\t\t\tif(maps[0] && this.currentMap !== maps[0])\n\t\t\t{\n\t\t\t\tconst parallax = this.nextParallax = new Parallax({spriteBoard: this, map: maps[0]});\n\n\t\t\t\tthis.nextParallax.ready.then(() => {\n\t\t\t\t\tif(this.nextParallax === parallax)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.parallax = parallax;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.currentMap = maps[0];\n\t\t\t}\n\n\t\t\tconst visibleMaps = this.world.getMapsForRect(\n\t\t\t\tthis.following.sprite.x\n\t\t\t\t, this.following.sprite.y\n\t\t\t\t, Camera.width\n\t\t\t\t, Camera.height\n\t\t\t);\n\n\t\t\tconst mapRenderers = new Set;\n\n\t\t\tvisibleMaps.forEach(map => {\n\t\t\t\tmap.visible = true;\n\t\t\t\tif(this.mapRenderers.has(map))\n\t\t\t\t{\n\t\t\t\t\tmapRenderers.add(this.mapRenderers.get(map));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst renderer = new MapRenderer({spriteBoard: this, map});\n\t\t\t\tmapRenderers.add(renderer);\n\t\t\t\trenderer.resize(Camera.width, Camera.height);\n\t\t\t\tthis.mapRenderers.set(map, renderer);\n\t\t\t});\n\n\t\t\tnew Set(this.mapRenderers.keys())\n\t\t\t\t.difference(visibleMaps)\n\t\t\t\t.forEach(map => {\n\t\t\t\t\tthis.mapRenderers.delete(map);\n\t\t\t\t\tmap.visible = false;\n\t\t\t\t});\n\t\t}\n\n\t\tconst gl = this.gl2d.context;\n\n\t\tthis.drawProgram.uniformF('u_size', Camera.width, Camera.height);\n\t\tthis.drawProgram.uniformF('u_resolution', gl.canvas.width, gl.canvas.height);\n\t\tthis.drawProgram.uniformI('u_renderMode', this.renderMode);\n\n\t\tthis.drawProgram.uniformF('u_time', performance.now());\n\t\tthis.drawProgram.uniformF('u_region', 0, 0, 0, 0);\n\n\t\tgl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\t\tgl.clearColor(0, 0, 0, 1);\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.effectBuffer);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\n\t\tif(this.currentMap && this.currentMap.backgroundColor)\n\t\t{\n\t\t\tconst color = this.currentMap.backgroundColor.substr(1);\n\n\t\t\tconst r = parseInt(color.substr(-6, 2), 16) / 255;\n\t\t\tconst b = parseInt(color.substr(-4, 2), 16) / 255;\n\t\t\tconst g = parseInt(color.substr(-2, 2), 16) / 255;\n\t\t\tconst a = color.length === 8 ? parseInt(color.substr(-8, 2), 16) / 255 : 1;\n\n\t\t\tgl.clearColor(r, g, b, a);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgl.clearColor(0, 0, 0, 1);\n\t\t}\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.drawBuffer);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\n\t\tgl.clearColor(0, 0, 0, 0);\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\n\t\tthis.drawProgram.uniformF('u_size', Camera.width, Camera.height);\n\n\t\twindow.smProfiling && console.time('draw-parallax');\n\t\tthis.parallax && this.parallax.draw();\n\t\twindow.smProfiling && console.timeEnd('draw-parallax');\n\n\t\twindow.smProfiling && console.time('draw-tiles');\n\t\tthis.mapRenderers.forEach(mr => mr.draw());\n\t\twindow.smProfiling && console.timeEnd('draw-tiles');\n\n\t\twindow.smProfiling && console.time('draw-sprites');\n\t\tlet sprites = [...this.sprites];\n\t\t// sprites.forEach(s => s.z = s.y);\n\t\tsprites.sort((a,b) => {\n\t\t\tif(a.y === undefined)\n\t\t\t{\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif(b.y === undefined)\n\t\t\t{\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn a.y - b.y;\n\t\t});\n\t\tsprites.forEach(s => s.visible && s.draw(delta));\n\t\twindow.smProfiling && console.timeEnd('draw-sprites');\n\n\t\tif(window.smProfiling)\n\t\t{\n\t\t\twindow.smProfiling = false;\n\t\t}\n\n\t\t// Set the rectangle for both layers\n\t\tthis.setRectangle(\n\t\t\t0\n\t\t\t, this.gl2d.element.height\n\t\t\t, this.gl2d.element.width\n\t\t\t, -this.gl2d.element.height\n\t\t);\n\n\t\t// Switch to the main framebuffer\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\t\t// Put the drawLayer in tex0\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.drawLayer);\n\t\tthis.drawProgram.uniformI('u_image', 0);\n\n\t\t// Put the effectLayer in tex1\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.effectLayer);\n\t\tthis.drawProgram.uniformI('u_effect', 1);\n\n\t\t// Draw\n\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\n\t\t// Cleanup...\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\tgl.activeTexture(gl.TEXTURE4);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tresize(width, height)\n\t{\n\t\tconst gl = this.gl2d.context;\n\n\t\twidth  = width  || this.gl2d.element.width;\n\t\theight = height || this.gl2d.element.height;\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t\tCamera.x *= this.zoomLevel;\n\t\tCamera.y *= this.zoomLevel;\n\n\t\tCamera.width  = width  / this.zoomLevel;\n\t\tCamera.height = height / this.zoomLevel;\n\n\t\tthis.mapRenderers.forEach(mr => mr.resize(Camera.width, Camera.height));\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.drawLayer);\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, this.width\n\t\t\t, this.height\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, null\n\t\t);\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.effectLayer);\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, this.width\n\t\t\t, this.height\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, null\n\t\t);\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tzoom(delta)\n\t{\n\t\tconst max = this.screenScale * 32;\n\t\tconst min = this.screenScale * 0.2;\n\t\tconst step = 0.05 * this.zoomLevel;\n\n\t\tlet zoomLevel = delta * step + this.zoomLevel;\n\n\t\tif(zoomLevel < min)\n\t\t{\n\t\t\tzoomLevel = min;\n\t\t}\n\t\telse if(zoomLevel > max)\n\t\t{\n\t\t\tzoomLevel = max;\n\t\t}\n\n\t\tif(Math.abs(zoomLevel - 1) < 0.05)\n\t\t{\n\t\t\tzoomLevel = 1;\n\t\t}\n\n\t\tif(this.zoomLevel !== zoomLevel)\n\t\t{\n\t\t\tthis.zoomLevel = zoomLevel;\n\t\t\tthis.resize();\n\t\t}\n\t}\n\n\tsetRectangle(x, y, width, height)\n\t{\n\t\tconst gl = this.gl2d.context;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.drawProgram.buffers.a_texCoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t0.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t]), gl.STATIC_DRAW);\n\n\t\tconst x1 = x;\n\t\tconst x2 = x + width;\n\t\tconst y1 = y;\n\t\tconst y2 = y + height;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.drawProgram.buffers.a_position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\tx1, y1,\n\t\t\tx2, y1,\n\t\t\tx1, y2,\n\t\t\tx1, y2,\n\t\t\tx2, y1,\n\t\t\tx2, y2,\n\t\t]), gl.STREAM_DRAW);\n\t}\n}\n","import { Tileset } from \"./Tileset\";\n\nexport class SpriteSheet extends Tileset\n{\n\tconstructor(tilesetData)\n\t{\n\t\tsuper(tilesetData);\n\n\t\tthis.frames = [];\n\t\tthis.animations = {\n\t\t\tdefault: [{tileid: 0, duration: Infinity}]\n\t\t};\n\n\t\tthis.canvas  = document.createElement('canvas');\n\t\tthis.context = this.canvas.getContext(\"2d\", {willReadFrequently: true});\n\n\t\tthis.ready = this.ready.then(() => {\n\t\t\tthis.processImage();\n\n\t\t\tfor(const tile of this.tiles)\n\t\t\t{\n\t\t\t\tif(tile.animation)\n\t\t\t\t{\n\t\t\t\t\tthis.animations[tile.type] = tile.animation;\n\t\t\t\t}\n\t\t\t\telse if(tile.type)\n\t\t\t\t{\n\t\t\t\t\tthis.animations[tile.type] = [{duration: Infinity, tileid: tile.id}];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprocessImage()\n\t{\n\t\tthis.canvas.width  = this.image.width;\n\t\tthis.canvas.height = this.image.height;\n\n\t\tthis.context.drawImage(this.image, 0, 0);\n\n\t\tfor(let i = 0; i < this.tileCount; i++)\n\t\t{\n\t\t\tthis.frames[i] = this.getFrame(i)\n\t\t}\n\t}\n\n\tgetFrame(frameId)\n\t{\n\t\tframeId = frameId % this.tileCount;\n\t\tconst i = frameId % this.columns;\n\t\tconst j = Math.floor(frameId / this.columns);\n\n\t\treturn this.context.getImageData(\n\t\t\ti * this.tileWidth\n\t\t\t, j * this.tileHeight\n\t\t\t, this.tileWidth\n\t\t\t, this.tileHeight\n\t\t).data;\n\t}\n}\n","export class TextureBank\n{\n\t\n}","export class Tileset\n{\n\tconstructor({\n\t\tsource, map, firstgid, columns, image, imageheight, imagewidth\n\t\t, margin , name, spacing, tilecount, tileheight, tilewidth, tiles\n\t}){\n\t\tthis.firstGid = firstgid ?? 0;\n\t\tthis.tileCount  = tilecount ?? 0;\n\t\tthis.tileHeight = tileheight ?? 0;\n\t\tthis.tileWidth  = tilewidth ?? 0;\n\n\t\tif(source)\n\t\t{\n\t\t\tthis.source = new URL(source, location);\n\t\t}\n\n\t\tthis.map = map;\n\n\t\tthis.ready = this.getReady({\n\t\t\tsource, columns, image, imageheight, imagewidth, margin\n\t\t\t, name, spacing, tilecount, tileheight, tilewidth, tiles\n\t\t});\n\t}\n\n\tasync getReady({\n\t\tsource, columns, image, imageheight, imagewidth, margin, name\n\t\t, spacing, tilecount, tileheight, tilewidth, tiles\n\t}){\n\t\tif(source)\n\t\t{\n\t\t\t({columns, image, imageheight, imagewidth, margin, name,\n\t\t\t\tspacing, tilecount, tileheight, tilewidth, tiles\n\t\t\t} = await (await fetch(source)).json());\n\n\t\t\tfor(const tile of tiles)\n\t\t\t{\n\t\t\t\ttile.id += this.firstGid;\n\t\t\t}\n\t\t}\n\n\n\t\tthis.columns = columns ?? 1;\n\t\tthis.margin  = margin ?? 0;\n\t\tthis.name    = name ?? image;\n\t\tthis.spacing = spacing ?? 0;\n\t\tthis.tiles   = tiles ?? [];\n\n\t\tthis.tileCount  = tilecount ?? 1;\n\n\t\tthis.image = new Image;\n\n\t\tif(this.source)\n\t\t{\n\t\t\tthis.image.src = new URL(image, this.source);\n\t\t}\n\t\telse if(this.map)\n\t\t{\n\t\t\tthis.image.src = new URL(image, this.map.src);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.image.src = new URL(image, location);\n\t\t}\n\n\t\tawait new Promise(accept => this.image.onload = () => accept());\n\n\t\tthis.imageWidth  = imagewidth ?? this.image.width;\n\t\tthis.imageHeight = imageheight ?? this.image.height;\n\n\t\tthis.tileWidth  = tilewidth ?? this.imageWidth;\n\t\tthis.tileHeight = tileheight ?? this.imageHeight;\n\n\t\tthis.rows = Math.ceil(imageheight / tileheight) || 1;\n\t}\n}\n","module.exports = \"// texture.frag\\n#define M_PI 3.1415926535897932384626433832795\\n#define M_TAU M_PI / 2.0\\nprecision mediump float;\\n\\nvarying vec2 v_texCoord;\\nvarying vec2 v_position;\\n\\nuniform sampler2D u_image;\\nuniform sampler2D u_effect;\\nuniform sampler2D u_tiles;\\nuniform sampler2D u_tileMapping;\\n\\nuniform vec2 u_size;\\nuniform vec2 u_tileSize;\\nuniform vec2 u_resolution;\\nuniform vec2 u_mapTextureSize;\\n\\nuniform vec4 u_color;\\nuniform vec4 u_region;\\nuniform vec2 u_parallax;\\nuniform vec2 u_scroll;\\nuniform vec2 u_stretch;\\n\\nuniform float u_time;\\nuniform float u_scale;\\n\\nuniform int u_renderTiles;\\nuniform int u_renderParallax;\\nuniform int u_renderMode;\\n\\nfloat masked = 0.0;\\nfloat sorted = 1.0;\\nfloat displace = 1.0;\\nfloat blur = 1.0;\\n\\nvec2 rippleX(vec2 texCoord, float a, float b, float c) {\\n  vec2 rippled = vec2(\\n    v_texCoord.x + sin(v_texCoord.y * (a * u_size.y) + b) * c / u_size.x,\\n    v_texCoord.y\\n  );\\n\\n  if (rippled.x < 0.0) {\\n    rippled.x = abs(rippled.x);\\n  }\\n  else if (rippled.x > u_size.x) {\\n    rippled.x = u_size.x - (rippled.x - u_size.x);\\n  }\\n\\n  return rippled;\\n}\\n\\nvec2 rippleY(vec2 texCoord, float a, float b, float c) {\\n  vec2 rippled = vec2(v_texCoord.x, v_texCoord.y + sin(v_texCoord.x * (a * u_size.x) + b) * c / u_size.y);\\n\\n  if (rippled.y < 0.0) {\\n    rippled.x = abs(rippled.x);\\n  }\\n  else if (rippled.y > u_size.y) {\\n    rippled.y = u_size.y - (rippled.y - u_size.y);\\n  }\\n\\n  return rippled;\\n}\\n\\nvec4 motionBlur(sampler2D image, float angle, float magnitude, vec2 textCoord) {\\n  vec4 originalColor = texture2D(image, textCoord);\\n  vec4 dispColor = originalColor;\\n\\n  const float max = 10.0;\\n  float weight = 0.85;\\n\\n  for (float i = 0.0; i < max; i += 1.0) {\\n    if(i > abs(magnitude) || originalColor.a < 1.0) {\\n      break;\\n    }\\n    vec4 dispColorDown = texture2D(image, textCoord + vec2(\\n      cos(angle) * i * sign(magnitude) / u_size.x,\\n      sin(angle) * i * sign(magnitude) / u_size.y\\n    ));\\n    dispColor = dispColor * (1.0 - weight) + dispColorDown * weight;\\n    weight *= 0.8;\\n  }\\n\\n  return dispColor;\\n}\\n\\nvec4 linearBlur(sampler2D image, float angle, float magnitude, vec2 textCoord) {\\n  vec4 originalColor = texture2D(image, textCoord);\\n  vec4 dispColor = texture2D(image, textCoord);\\n\\n  const float max = 10.0;\\n  float weight = 0.65;\\n\\n  for (float i = 0.0; i < max; i += 0.25) {\\n    if(i > abs(magnitude)) {\\n      break;\\n    }\\n    vec4 dispColorUp = texture2D(image, textCoord + vec2(\\n      cos(angle) * -i * sign(magnitude) / u_size.x,\\n      sin(angle) * -i * sign(magnitude) / u_size.y\\n    ));\\n    vec4 dispColorDown = texture2D(image, textCoord + vec2(\\n      cos(angle) * i * sign(magnitude) / u_size.x,\\n      sin(angle) * i * sign(magnitude) / u_size.y\\n    ));\\n    dispColor = dispColor * (1.0 - weight) + dispColorDown * weight * 0.5 + dispColorUp * weight * 0.5;\\n    weight *= 0.70;\\n  }\\n\\n  return dispColor;\\n}\\n\\nvoid main() {\\n  vec4 originalColor = texture2D(u_image, v_texCoord);\\n  vec4 effectColor = texture2D(u_effect,  v_texCoord);\\n\\n  // This only applies when drawing the parallax background\\n  if (u_renderParallax == 1) {\\n\\n    float texelSize = 1.0 / u_size.x;\\n\\n    vec2 parallaxCoord = v_texCoord * vec2(1.0, -1.0) + vec2(0.0, 1.0)\\n      + vec2(u_scroll.x * texelSize * u_parallax.x, 0.0);\\n      // + vec2(u_time / 10000.0, 0.0);\\n      // + vec2(, 0.0);\\n      ;\\n\\n    gl_FragColor = texture2D(u_image,  parallaxCoord);\\n\\n    return;\\n  }\\n\\n  // This only applies when drawing tiles.\\n  if (u_renderTiles == 1) {\\n    float xTiles = floor(u_size.x / u_tileSize.x);\\n    float yTiles = floor(u_size.y / u_tileSize.y);\\n\\n    float xT = (v_texCoord.x * u_size.x) / u_tileSize.x;\\n    float yT = (v_texCoord.y * u_size.y) / u_tileSize.y;\\n\\n    float inv_xTiles = 1.0 / xTiles;\\n    float inv_yTiles = 1.0 / yTiles;\\n\\n    float xTile = floor(xT) * inv_xTiles;\\n    float yTile = floor(yT) * inv_yTiles;\\n\\n    float xOff = (xT * inv_xTiles - xTile) * xTiles;\\n    float yOff = (yT * inv_yTiles - yTile) * yTiles * -1.0 + 1.0;\\n\\n    float xWrap = u_mapTextureSize.x / u_tileSize.x;\\n    float yWrap = u_mapTextureSize.y / u_tileSize.y;\\n\\n    // Mode 1 draws tiles' x/y values as red & green\\n    if (u_renderMode == 1) {\\n      gl_FragColor = vec4(xTile, yTile, 0, 1.0);\\n      return;\\n    }\\n\\n    // Mode 2 is the same as mode 1 but adds combines\\n    // internal tile x/y to the blue channel\\n    if (u_renderMode == 2) {\\n      gl_FragColor = vec4(xTile, yTile, (xOff + yOff) * 0.5, 1.0);\\n      return;\\n    }\\n\\n    vec4 tile = texture2D(u_tileMapping, v_texCoord * vec2(1.0, -1.0) + vec2(0.0, 1.0));\\n\\n    float lo = tile.r * 256.0;\\n    float hi = tile.g * 256.0 * 256.0;\\n\\n    float tileNumber = lo + hi;\\n\\n    if (tileNumber == 0.0) {\\n      gl_FragColor.a = 0.0;\\n      return;\\n    }\\n\\n    // Mode 3 uses the tile number for the red/green channels\\n    if (u_renderMode == 3) {\\n      gl_FragColor = tile;\\n      gl_FragColor.b = 0.5;\\n      gl_FragColor.a = 1.0;\\n      return;\\n    }\\n\\n    // Mode 4 normalizes the tile number to all channels\\n    if (u_renderMode == 4) {\\n      gl_FragColor = vec4(\\n        mod(tileNumber, 256.0) / 256.0\\n        , mod(tileNumber, 256.0) / 256.0\\n        , mod(tileNumber, 256.0) / 256.0\\n        , 1.0\\n      );\\n      return;\\n    }\\n\\n    float tileSetX = floor(mod((-1.0 + tileNumber), xWrap));\\n    float tileSetY = floor((-1.0 + tileNumber) / xWrap);\\n\\n    vec4 tileColor = texture2D(u_tiles, vec2(\\n      xOff / xWrap + tileSetX * (u_tileSize.y / u_mapTextureSize.y)\\n      , yOff / yWrap + tileSetY * (u_tileSize.y / u_mapTextureSize.y)\\n    ));\\n\\n    gl_FragColor = tileColor;\\n\\n    return;\\n  }\\n\\n  // This if/else block only applies\\n  // when we're drawing the effectBuffer\\n  if (u_region.r > 0.0 || u_region.g > 0.0 || u_region.b > 0.0) {\\n    if (masked < 1.0 || originalColor.a > 0.0) {\\n      gl_FragColor = u_region;\\n    }\\n    return;\\n  }\\n  else if (u_region.a > 0.0) {\\n    if (sorted > 0.0) {\\n      gl_FragColor = vec4(0, 0, 0, originalColor.a > 0.0 ? 1.0 : 0.0);\\n    }\\n    else {\\n      gl_FragColor = vec4(0, 0, 0, 0.0);\\n    }\\n    return;\\n  };\\n\\n  // Mode 5 draws the effect buffer to the screen\\n  if (u_renderMode == 5) {\\n    gl_FragColor = effectColor;\\n    return;\\n  }\\n\\n  vec3 ripple = vec3(M_PI/8.0, u_time / 200.0, 1.0);\\n\\n  // This if/else block only applies\\n  // when we're drawing the drawBuffer\\n  if (effectColor == vec4(0, 1, 1, 1)) { // Water region\\n    vec2 texCoord = v_texCoord;\\n    vec4 v_blurredColor = originalColor;\\n    if (displace > 0.0) {\\n      texCoord = rippleX(v_texCoord, ripple.x, ripple.y, ripple.z);\\n      v_blurredColor = texture2D(u_image, texCoord);\\n    }\\n    if (blur > 0.0) {\\n      v_blurredColor = linearBlur(u_image, 0.0, 1.0, texCoord);\\n    }\\n    gl_FragColor = v_blurredColor * 0.65 + effectColor * 0.35;\\n  }\\n  else if (effectColor == vec4(1, 0, 0, 1)) { // Fire region\\n    vec2 v_displacement = rippleY(v_texCoord, ripple.x * 3.0, ripple.y * 1.5, ripple.z * 0.333);\\n    vec4 v_blurredColor = originalColor;\\n    if (displace > 0.0) {\\n      v_blurredColor = texture2D(u_image, v_displacement);\\n    }\\n    if (blur > 0.0) {\\n      v_blurredColor = motionBlur(u_image, -M_TAU, 1.0, v_displacement);\\n    }\\n    gl_FragColor = v_blurredColor * 0.75 + effectColor * 0.25;\\n  }\\n  else { // Null region\\n    gl_FragColor = originalColor;\\n  }\\n}\\n\"","module.exports = \"// texture.vert\\nprecision mediump float;\\n\\nattribute vec2 a_position;\\nattribute vec2 a_texCoord;\\n\\nuniform vec2 u_resolution;\\n\\nvarying vec2 v_texCoord;\\nvarying vec2 v_position;\\n\\nvoid main()\\n{\\n  vec2 zeroToOne = a_position / u_resolution;\\n  vec2 zeroToTwo = zeroToOne * 2.0;\\n  vec2 clipSpace = zeroToTwo - 1.0;\\n\\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\\n  v_texCoord  = a_texCoord;\\n  v_position  = a_position;\\n}\\n\"","import { View } from 'curvature/base/View';\n\nexport class OnScreenJoyPad extends View\n{\n\tconstructor(args)\n\t{\n\t\tsuper(args);\n\t\tthis.template  = require('./onScreenJoyPad.tmp');\n\t\tthis.dragStart = false;\n\n\t\tthis.args.dragging  = false;\n\t\tthis.args.x = 0;\n\t\tthis.args.y = 0;\n\n\t\twindow.addEventListener('mousemove', (event) => {\n\t\t\tthis.moveStick(event);\n\t\t});\n\n\t\twindow.addEventListener('mouseup', (event) => {\n\t\t\tthis.dropStick(event);\n\t\t});\n\n\t\twindow.addEventListener('touchmove', (event) => {\n\t\t\tthis.moveStick(event);\n\t\t});\n\n\t\twindow.addEventListener('touchend', (event) => {\n\t\t\tthis.dropStick(event);\n\t\t});\n\t}\n\n\tdragStick(event)\n\t{\n\t\tlet pos = event;\n\n\t\tevent.preventDefault();\n\n\t\tif(event.touches && event.touches[0])\n\t\t{\n\t\t\tpos = event.touches[0];\n\t\t}\n\n\t\tthis.args.dragging = true;\n\t\tthis.dragStart     = {\n\t\t\tx:   pos.clientX\n\t\t\t, y: pos.clientY\n\t\t};\n\t}\n\n\tmoveStick(event)\n\t{\n\t\tif(this.args.dragging)\n\t\t{\n\t\t\tlet pos = event;\n\n\t\t\tif(event.touches && event.touches[0])\n\t\t\t{\n\t\t\t\tpos = event.touches[0];\n\t\t\t}\n\n\t\t\tthis.args.xx = pos.clientX - this.dragStart.x;\n\t\t\tthis.args.yy = pos.clientY - this.dragStart.y;\n\n\t\t\tconst limit = 50;\n\n\t\t\tif(this.args.xx < -limit)\n\t\t\t{\n\t\t\t\tthis.args.x = -limit;\n\t\t\t}\n\t\t\telse if(this.args.xx > limit)\n\t\t\t{\n\t\t\t\tthis.args.x = limit;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.args.x = this.args.xx;\n\t\t\t}\n\n\t\t\tif(this.args.yy < -limit)\n\t\t\t{\n\t\t\t\tthis.args.y = -limit;\n\t\t\t}\n\t\t\telse if(this.args.yy > limit)\n\t\t\t{\n\t\t\t\tthis.args.y = limit;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.args.y = this.args.yy;\n\t\t\t}\n\t\t}\n\t}\n\n\tdropStick(event)\n\t{\n\t\tthis.args.dragging = false;\n\t\tthis.args.x = 0;\n\t\tthis.args.y = 0;\n\t}\n}\n","module.exports = \"<div class = \\\"controller\\\">\\n\\t<div class = \\\"joystick\\\" cv-on = \\\"\\n\\t\\ttouchstart:dragStick(event);\\n\\t\\tmousedown:dragStick(event);\\n\\t\\\">\\n\\t\\t<div class = \\\"pad\\\" style = \\\"position: relative; transform:translate([[x]]px,[[y]]px);\\\"></div>\\n\\t</div>\\n\\n\\t<div class = \\\"button\\\">A</div>\\n\\t<div class = \\\"button\\\">B</div>\\n\\t<div class = \\\"button\\\">C</div>\\n</div>\"","const objectPallet = {};\n\nexport class EntityPallet\n{\n\tstatic async resolve(typeName)\n\t{\n\t\tif(typeName[0] === '@')\n\t\t{\n\t\t\tif(objectPallet[ typeName ])\n\t\t\t{\n\t\t\t\treturn objectPallet[ typeName ];\n\t\t\t}\n\t\t}\n\t\telse if(typeName === 'http://' || typeName === 'https://')\n\t\t{\n\t\t\treturn (await import(typeName)).default;\n\t\t}\n\t}\n\n\tstatic register(typeName, spawnClass)\n\t{\n\t\tif(objectPallet[typeName])\n\t\t{\n\t\t\tconsole.warn(`Overwriting spawnclass!`);\n\t\t}\n\n\t\tobjectPallet[typeName] = spawnClass;\n\t}\n}","import { Bindable } from 'curvature/base/Bindable';\nimport { EntityPallet } from './EntityPallet';\nimport { Tileset } from '../sprite/Tileset';\nimport { QuickTree } from '../math/QuickTree';\nimport { Spawner } from '../model/Spawner';\n\nexport class TileMap\n{\n\tconstructor({fileName, session, x, y, width, height})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.src = fileName;\n\t\tthis.backgroundColor = null;\n\t\tthis.tileCount = 0;\n\n\t\tthis.xWorld = x;\n\t\tthis.yWorld = y;\n\n\t\tthis.width  = width;\n\t\tthis.height = height;\n\n\t\tthis.tileWidth  = 0;\n\t\tthis.tileHeight = 0;\n\n\t\tthis.tileSetWidth  = 0;\n\t\tthis.tileSetHeight = 0;\n\n\t\tthis.pixels = [];\n\t\tthis.image = document.createElement('img');\n\t\tthis.session = session;\n\n\t\tthis.properties = {};\n\t\tthis.entityDefs = {};\n\n\t\tthis.emptyTiles = new Set;\n\t\tthis.tilesIndexes = new Map;\n\t\tthis.canvases = new Map;\n\t\tthis.contexts = new Map;\n\t\tthis.tiles = null;\n\n\t\tthis.tileLayers   = [];\n\t\tthis.imageLayers  = [];\n\t\tthis.objectLayers = [];\n\n\t\tthis.ready = this.getReady(fileName);\n\n\t\tthis.animations = new Map;\n\t\tthis.visible = false;\n\n\t\tthis.quadTree = new QuickTree(x, x, x + this.width, y + this.height);\n\t}\n\n\tasync getReady(src)\n\t{\n\t\tconst mapData = await (await fetch(src)).json();\n\n\t\tthis.collisionLayers = mapData.layers.filter(layer => layer.type === 'tilelayer' && layer.class === 'collision');\n\t\tthis.tileLayers   = mapData.layers.filter(layer => layer.type === 'tilelayer' && layer.class !== 'collision');\n\t\tthis.imageLayers  = mapData.layers.filter(layer => layer.type === 'imagelayer');\n\t\tthis.objectLayers = mapData.layers.filter(layer => layer.type === 'objectgroup');\n\n\t\tthis.backgroundColor = mapData.backgroundcolor;\n\n\t\tif(mapData.properties)\n\t\tfor(const property of mapData.properties)\n\t\t{\n\t\t\tthis.properties[ property.name ] = property.value;\n\t\t}\n\n\t\tif(this.properties.backgroundColor)\n\t\t{\n\t\t\tthis.backgroundColor = this.properties.backgroundColor;\n\t\t}\n\n\t\tconst tilesets = mapData.tilesets.map(tilesetData => {\n\t\t\tif(tilesetData.source)\n\t\t\t{\n\t\t\t\ttilesetData.source = new URL(tilesetData.source, src).href;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttilesetData.map = this;\n\t\t\t}\n\t\t\treturn new Tileset(tilesetData);\n\t\t});\n\n\t\tthis.width  = mapData.width;\n\t\tthis.height = mapData.height;\n\n\t\tthis.tileWidth  = mapData.tilewidth;\n\t\tthis.tileHeight = mapData.tileheight;\n\n\t\tawait Promise.all(tilesets.map(t => t.ready));\n\n\t\tthis.assemble(tilesets);\n\t\tawait this.spawn();\n\n\t\treturn this;\n\t}\n\n\tassemble(tilesets)\n\t{\n\t\ttilesets.sort((a, b) => a.firstGid - b.firstGid);\n\n\t\tconst tileTotal = this.tileCount = tilesets.reduce((a, b) => a.tileCount + b.tileCount, {tileCount: 0});\n\n\t\tconst size = Math.ceil(Math.sqrt(tileTotal));\n\n\t\tconst destination = document.createElement('canvas');\n\t\tthis.tileSetWidth  = destination.width  = size * this.tileWidth;\n\t\tthis.tileSetHeight = destination.height = Math.ceil(tileTotal / size) * this.tileHeight;\n\n\t\tconst ctxDestination = destination.getContext('2d', {willReadFrequently: true});\n\n\t\tfor(const tileset of tilesets)\n\t\t{\n\t\t\tconst image = tileset.image;\n\t\t\tconst source = document.createElement('canvas');\n\n\t\t\tsource.width = image.width;\n\t\t\tsource.height = image.height;\n\n\t\t\tconst ctxSource = source.getContext('2d', {willReadFrequently: true});\n\n\t\t\tctxSource.drawImage(image, 0, 0);\n\n\t\t\tfor(let i = 0; i < tileset.tileCount; i++)\n\t\t\t{\n\t\t\t\tconst xSource = (i * this.tileWidth) % tileset.imageWidth;\n\t\t\t\tconst ySource = Math.floor((i * this.tileWidth) / tileset.imageWidth) * this.tileHeight;\n\n\t\t\t\tconst xDestination = (i * this.tileWidth) % destination.width;\n\t\t\t\tconst yDestination = Math.floor((i * this.tileWidth) / destination.width) * this.tileHeight;\n\t\t\t\tconst tile = ctxSource.getImageData(xSource, ySource, this.tileWidth, this.tileHeight);\n\n\t\t\t\tctxDestination.putImageData(tile, xDestination, yDestination);\n\n\t\t\t\tconst pixels = new Uint32Array(tile.data.buffer);\n\n\t\t\t\tlet empty = true;\n\n\t\t\t\tfor(const pixel of pixels)\n\t\t\t\t{\n\t\t\t\t\tif(pixel > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tempty = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(empty)\n\t\t\t\t{\n\t\t\t\t\tthis.emptyTiles.add(i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(const tileData of tileset.tiles)\n\t\t\t{\n\t\t\t\tif(tileData.animation)\n\t\t\t\t{\n\t\t\t\t\tthis.animations.set(tileData.id, tileData.animation);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.pixels = ctxDestination.getImageData(0, 0, destination.width, destination.height).data;\n\n\t\tthis.tiles = ctxDestination;\n\n\t\tfor(const layer of [...this.tileLayers, ...this.collisionLayers])\n\t\t{\n\t\t\tconst canvas = document.createElement('canvas');\n\t\t\tconst context = canvas.getContext('2d', {willReadFrequently: true});\n\n\t\t\tthis.canvases.set(layer, canvas);\n\t\t\tthis.contexts.set(layer, context);\n\n\t\t\tconst tileValues = new Uint32Array(layer.data.map(t => 0 + t));\n\t\t\tconst tilePixels = new Uint8ClampedArray(tileValues.buffer);\n\n\t\t\tfor(const i in tileValues)\n\t\t\t{\n\t\t\t\tconst tile = tileValues[i];\n\n\t\t\t\tif(this.animations.has(tile))\n\t\t\t\t{\n\t\t\t\t\tconsole.log({i, tile}, this.animations.get(tile));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(let i = 3; i < tilePixels.length; i +=4)\n\t\t\t{\n\t\t\t\ttilePixels[i] = 0xFF;\n\t\t\t}\n\n\t\t\tthis.tilesIndexes.set(layer, tileValues);\n\n\t\t\tcanvas.width = this.width;\n\t\t\tcanvas.height = this.height;\n\t\t\tcontext.putImageData(new ImageData(tilePixels, this.width, this.height), 0, 0);\n\t\t}\n\t}\n\n\tasync spawn()\n\t{\n\t\tfor(const layer of this.objectLayers)\n\t\t{\n\t\t\tconst entityDefs = layer.objects;\n\n\t\t\tfor(const entityDef of entityDefs)\n\t\t\t{\n\t\t\t\tthis.entityDefs[ entityDef.id ] = entityDef;\n\n\t\t\t\tif(entityDef.name === 'player-start' || !entityDef.type)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst spawnClass = await EntityPallet.resolve(entityDef.type);\n\n\t\t\t\tconst spawner = new Spawner({\n\t\t\t\t\tspawnType: entityDef.type\n\t\t\t\t\t, spawnClass\n\t\t\t\t\t, ...entityDef\n\t\t\t\t\t, spriteBoard: this.session.spriteBoard\n\t\t\t\t\t, session: this.session\n\t\t\t\t\t, world: this.session.world\n\t\t\t\t});\n\n\t\t\t\tspawner.x += this.xWorld;\n\t\t\t\tspawner.y += this.yWorld;\n\n\t\t\t\tthis.session.addEntity(spawner);\n\t\t\t\tthis.quadTree.add(spawner)\n\t\t\t}\n\t\t}\n\t}\n\n\tgetCollisionTile(x, y, z)\n\t{\n\t\tif(!this.collisionLayers || !this.collisionLayers[z])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.getTileFromLayer(this.collisionLayers[z], x, y);\n\t}\n\n\tgetColor(x, y, z = 0)\n\t{\n\t\treturn this.getPixel(this.tileLayers[z], x, y, z);\n\t}\n\n\tgetSolid(x, y, z = 0)\n\t{\n\t\tif(!this.collisionLayers || !this.collisionLayers[z])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst pixel = this.getPixel(this.collisionLayers[z], x, y, z);\n\n\t\tif(pixel === 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn pixel;\n\t}\n\n\tgetPixel(layer, x, y)\n\t{\n\t\tconst tileNumber = this.getTileFromLayer(layer, x, y);\n\n\t\tif(tileNumber === false || tileNumber === -1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst offsetX = Math.trunc(x % this.tileWidth);\n\t\tconst offsetY = Math.trunc(y % this.tileHeight);\n\n\t\tconst tileSetX = (tileNumber * this.tileWidth) % this.tileSetWidth;\n\t\tconst tileSetY = Math.floor((tileNumber * this.tileWidth) / this.tileSetWidth);\n\n\t\treturn this.pixels[tileSetX + offsetX + (tileSetY + offsetY) * (this.tileSetWidth)];\n\t}\n\n\tgetTileFromLayer(layer, x, y)\n\t{\n\t\tconst localX = -this.xWorld + x;\n\t\tconst localY = -this.yWorld + y;\n\n\t\tif(localX < 0 || localX >= this.width * this.tileWidth\n\t\t\t|| localY < 0 || localY >= this.height * this.tileWidth\n\t\t){\n\t\t\treturn false;\n\t\t}\n\n\t\tconst tileX = Math.floor(localX / this.tileWidth);\n\t\tconst tileY = Math.floor(localY / this.tileHeight);\n\n\t\treturn -1 + layer.data[tileX + tileY * this.width];\n\t}\n\n\tgetSlice(x, y, w, h, t = 0)\n\t{\n\t\treturn (this.tileLayers\n\t\t\t.map(layer => this.contexts.get(layer))\n\t\t\t.map(context => context.getImageData(x, y, w, h).data));\n\n\t\treturn this.contexts.values().map(context => context.getImageData(x, y, w, h).data);\n\t}\n}\n","import { Bindable } from 'curvature/base/Bindable';\nimport { Rectangle } from '../math/Rectangle';\nimport { TileMap } from './TileMap';\nimport { SMTree } from '../math/SMTree';\nimport { Ray } from \"../math/Ray\";\n\nexport class World\n{\n\tconstructor({source, session})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.ready = this.getReady(source);\n\t\tthis.maps = [];\n\t\tthis.mTree = new SMTree;\n\t\tthis.rectMap = new Map;\n\t\tthis.session = session;\n\t\tthis.source = source;\n\t}\n\n\tasync getReady(src)\n\t{\n\t\tconst worldData = await (await fetch(src)).json();\n\t\treturn await Promise.all(worldData.maps.map((m, i) => {\n\n\t\t\tm.fileName = new URL(m.fileName, src).href;\n\n\t\t\tconst map = new TileMap({...m, session: this.session});\n\n\t\t\tmap.xWorld = m.x;\n\t\t\tmap.yWorld = m.y;\n\t\t\tthis.maps[i] = map;\n\n\t\t\tconst rect = new Rectangle(m.x, m.y, m.x + m.width, m.y + m.height);\n\n\t\t\tthis.rectMap.set(rect, map);\n\t\t\tthis.mTree.add(rect);\n\n\t\t\tconsole.log(this);\n\n\t\t\treturn map.ready;\n\t\t}));\n\t}\n\n\tgetMapsForPoint(x, y)\n\t{\n\t\tconst rects = this.mTree.query(x, y, x, y);\n\t\tconst maps = new Set;\n\n\t\tfor(const rect of rects)\n\t\t{\n\t\t\tconst map = this.rectMap.get(rect);\n\t\t\tmaps.add(map);\n\t\t}\n\n\t\treturn maps;\n\t}\n\n\tgetMapsForRect(x, y, w, h)\n\t{\n\t\tconst result = new Set;\n\t\tconst rects = this.mTree.query(x + -w*0.5, y + -h*0.5, x + w*0.5, y + h*0.5);\n\n\t\twindow.smProfiling && console.time('query mapTree');\n\n\t\tfor(const rect of rects)\n\t\t{\n\t\t\tresult.add( this.rectMap.get(rect) );\n\t\t}\n\n\t\twindow.smProfiling && console.timeEnd('query mapTree');\n\n\t\treturn result;\n\t}\n\n\tgetSolid(x, y, z)\n\t{\n\t\tconst maps = this.getMapsForPoint(x, y);\n\n\t\tfor(const map of maps)\n\t\t{\n\t\t\tconst solid = map.getSolid(x, y, z);\n\n\t\t\tif(solid)\n\t\t\t{\n\t\t\t\treturn solid;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetCollisionTile(x, y, z)\n\t{\n\t\tconst maps = this.getMapsForPoint(x, y);\n\n\t\tfor(const map of maps)\n\t\t{\n\t\t\tconst tile = map.getCollisionTile(x, y, z);\n\n\t\t\tif(tile > 0)\n\t\t\t{\n\t\t\t\treturn tile;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetEntitiesForRect(x, y, w, h)\n\t{\n\t\tconst tilemaps = this.getMapsForRect(x, y, w, h);\n\n\t\tlet result = new Set;\n\t\twindow.smProfiling && console.time('query quadTree');\n\t\tfor(const tilemap of tilemaps)\n\t\t{\n\t\t\tif(!tilemap.visible)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresult = result.union(\n\t\t\t\ttilemap.quadTree.select(x + -w*0.5, y + -h*0.5, w, h)\n\t\t\t);\n\t\t}\n\t\twindow.smProfiling && console.timeEnd('query quadTree');\n\n\t\treturn result;\n\t}\n\n\tcastRay(startX, startY, layerId, angle, maxDistance = 320, rayFlags = Ray.DEFAULT_FLAGS)\n\t{\n\t\treturn Ray.cast(\n\t\t\tthis\n\t\t\t, startX\n\t\t\t, startY\n\t\t\t, layerId\n\t\t\t, angle\n\t\t\t, maxDistance\n\t\t\t, rayFlags\n\t\t);\n\t}\n\n\tcastTerrainRay(startX, startY, layerId, angle, maxDistance = 320, rayFlags = Ray.DEFAULT_FLAGS)\n\t{\n\t\treturn Ray.castTerrain(\n\t\t\tthis\n\t\t\t, startX\n\t\t\t, startY\n\t\t\t, layerId\n\t\t\t, angle\n\t\t\t, maxDistance\n\t\t\t, rayFlags\n\t\t);\n\t}\n\n\tcastEntityRay(startX, startY, endX, endY, rayFlags = Ray.DEFAULT_FLAGS)\n\t{\n\t\treturn Ray.castEntity(\n\t\t\tthis\n\t\t\t, startX\n\t\t\t, startY\n\t\t\t, endX\n\t\t\t, endY\n\t\t\t, rayFlags\n\t\t);\n\t}\n}\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}