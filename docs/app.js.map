{"version":3,"sources":["node_modules/curvature/base/Bag.js","node_modules/curvature/base/Bindable.js","node_modules/curvature/base/Cache.js","node_modules/curvature/base/Config.js","node_modules/curvature/base/Dom.js","node_modules/curvature/base/Mixin.js","node_modules/curvature/base/Router.js","node_modules/curvature/base/Routes.js","node_modules/curvature/base/RuleSet.js","node_modules/curvature/base/SetMap.js","node_modules/curvature/base/Tag.js","node_modules/curvature/base/Uuid.js","node_modules/curvature/base/View.js","node_modules/curvature/base/ViewList.js","node_modules/curvature/input/Keyboard.js","node_modules/curvature/mixin/EventTargetMixin.js","node_modules/import-mapper/ImportMapper.js","app/Config.js","app/gl2d/Gl2d.js","app/home/View.js","app/home/view.tmp.html","app/initialize.js","app/inject/Container.js","app/inject/Injectable.js","app/inject/Single.js","app/input/Axis.js","app/input/Button.js","app/input/Controller.js","app/math/Geometry.js","app/math/Matrix.js","app/math/MotionGraph.js","app/math/QuadTree.js","app/math/QuickTree.js","app/math/Ray.js","app/math/Rectangle.js","app/math/SMTree.js","app/math/Split.js","app/model/BallController.js","app/model/BarrelController.js","app/model/BoxController.js","app/model/Entity.js","app/model/MapMover.js","app/model/PlayerController.js","app/model/Spawner.js","app/overlay/overlay.frag","app/overlay/overlay.vert","app/session/Session.js","app/sprite/Camera.js","app/sprite/MapRenderer.js","app/sprite/Parallax.js","app/sprite/Region.js","app/sprite/Sprite.js","app/sprite/SpriteBoard.js","app/sprite/SpriteSheet.js","app/sprite/TextureBank.js","app/sprite/Tileset.js","app/sprite/texture.frag","app/sprite/texture.vert","app/ui/OnScreenJoyPad.js","app/ui/onScreenJoyPad.tmp.html","app/world/Pallet.js","app/world/Properties.js","app/world/TileMap.js","app/world/World.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["Config","exports","_createClass","_classCallCheck","title","Program","_ref","gl","vertexShader","fragmentShader","uniforms","attributes","_defineProperty","context","program","createProgram","attachShader","linkProgram","detachShader","deleteShader","getProgramParameter","LINK_STATUS","console","error","getProgramInfoLog","deleteProgram","uniform","location","getUniformLocation","warn","attribute","getAttribLocation","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","buffers","key","value","use","useProgram","uniformF","name","_len","arguments","length","floats","Array","_key","uniformI","_len2","ints","_key2","Gl2d","element","document","createElement","getContext","createShader","extension","substring","lastIndexOf","type","toUpperCase","VERTEX_SHADER","FRAGMENT_SHADER","shader","source","require","shaderSource","compileShader","success","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","_ref2","createTexture","width","height","texture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","createFramebuffer","framebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","enableBlending","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","_View","_Camera","_OnScreenJoyPad","_Keyboard","_Session","_Config","_PlayerController","_BallController","_BarrelController","_BoxController","_MapMover","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","configurable","writable","a","n","TypeError","_defineProperties","prototype","i","_toPrimitive","Symbol","toPrimitive","call","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","_setPrototypeOf","Application","onScreenJoyPad","OnScreenJoyPad","keyboard","Keyboard","get","View","_BaseView","args","_this","window","smProfiling","template","routes","speed","maxSpeed","joypad","fps","sps","camX","camY","showEditor","listening","mouseClass","bindTo","v","k","d","session","frameLock","simulationLock","zoom","spriteBoard","renderMode","onRendered","gameDef","worldSrc","mapPallet","MapMover","entityPallet","PlayerController","BarrelController","BallController","BoxController","Session","tags","canvas","addEventListener","resize","fThen","sThen","simulate","now","setTimeout","performance","hidden","toFixed","draw","requestAnimationFrame","Camera","x","y","following","posX","posY","zoomLevel","body","clientHeight","mousemove","mouseTimer","clearTimeout","onTimeout","oldScale","screenScale","clientWidth","rwidth","Math","trunc","rheight","scroll","event","sign","deltaY","delta","BaseView","_Router","_ImportMapper","importMapper","ImportMapper","globalThis","list","view","Router","listen","_","register","render","_Injectable2","Container","_Injectable","inject","injections","assign","Injectable","classes","objects","injection","test","instance","undefined","Error","existingInjections","_class","Single","random","single","Axis","_ref$deadZone","deadZone","_ref$proportional","proportional","tilt","magnitude","abs","zero","Button","update","options","pressure","time","press","active","release","_Axis","_Button","map","fn","axisMap","buttonMap","buttonRemap","Controller","_ref$keys","_ref$gamepad","gamepad","_ref$keyboard","buttons","axes","button","willRumble","duration","strongMagnitude","weakMagnitude","id","match","stopVibing","vibrationActuator","playEffect","rumble","readInput","_ref3","_ref3$gamepads","gamepads","tilted","pressed","released","tookInput","Set","add","getKeyCode","keycode","buttonIds","isArray","buttonId","axis","max","limit","inputId","axisId","axisMove","_ref4","slice","move","concreteId","abstractId","serialize","replay","input","buttonIsMapped","keyIsMapped","keyCode","Geometry","lineIntersectsLine","x1a","y1a","x2a","y2a","x1b","y1b","x2b","y2b","ax","ay","bx","by","crossProduct","cx","cy","Matrix","identity","translate","dx","dy","scale","rotate","theta","s","sin","c","cos","shearX","shearY","multiply","matA","matB","output","fill","j","composite","transform","points","matrix","point","row","Float32Array","_Entity","_Region","MotionGraph","WeakMap","Map","entity","parent","backmap","has","entities","delete","set","globalMap","getParent","moveChildren","children","child","removed","maps","world","getMapsForPoint","Entity","moveEntity","Region","regionTree","rect","deleteFromAllGraphs","graphs","graph","_Bindable","_Rectangle2","QuadTree","_Rectangle","x1","y1","x2","y2","minSize","Bindable","Prevent","count","items","split","backMap","root","ulCell","urCell","blCell","brCell","xOffset","yOffset","contains","xSize","ySize","size","xSizeHalf","ySizeHalf","item","added","onBadSplit","startCell","cell","prune","isPrunable","findLeaf","_this$ulCell$findLeaf","select","dump","Rectangle","_QuadTree2","_superPropGet","p","_get","_superPropBase","hasOwnProperty","registry","QuickTree","_QuadTree","xO","yO","selectRect","result","log","deleteFromAllTrees","tree","_Geometry","Ray","cast","startX","startY","angle","rayFlags","DEFAULT_FLAGS","layerId","terrain","castTerrain","castEntity","castingEntity","endX","EPSILON","endY","centerX","centerY","sizeX","sizeY","candidates","getEntitiesForRect","collisions","candidate","E_NO_MINK","expand","toLines","intersection","existing","ceil","bs","ox","oy","sx","hypot","sy","currentDistance","getSolid","T_GET_LENGTH","startTile","getCollisionTile","initMode","modeX","modeY","oldModeX","oldModeY","bf","checkX","checkY","rayX","rayY","solidsX","solidsY","iterations","mag","px","py","round","T_ALL_POINTS","union","distSquares","pow","minDistSq","min","nearest","indexOf","sqrt","T_LAST_EMPTY","T_SNAP_TO_INT","floor","isOverlapping","other","isFlushWith","isInside","isOutside","cxa","cya","cxb","cyb","ex","ey","toTriangles","dim","clone","rectangle","depthSymbol","Segment","start","end","prev","dimension","depth","rectangles","subTree","SMTree","at","RangeError","b","rectMin","rectMax","empty","Infinity","isRectangle","object","segments","WeakSet","snapshots","startIndex","findSegment","splitSegment","endIndex","snapshot","deleteCount","segment","next","symmetricDifference","splice","query","xStartIndex","xEndIndex","results","yStartIndex","yEndIndex","index","splitSegments","isNaN","lo","hi","current","Split","intToBytes","bytes","bytesToInt","bytesToInt3","_Split","Uint8ClampedArray","Uint16Array","Uint32Array","entityData","xSpeed","ySpeed","destroy","xMove","yMove","h","castTerrainRay","PI","actualDistance","collide","sleep","wakeup","ySpriteOffset","grounded","shot","direction","atan2","distance","hit","castRay","stop","dist","side","controller","pushing","gid","xOriginal","yOriginal","flags","E_PLATFORM","E_STATIC","sprite","props","_entity$props$get","range","delay","age","mapOffset","lastMap","_entity$props$get2","yNew","moved","above","_Sprite","_Properties","_entityData$propertie","inputManager","_entityData$x","_entityData$y","_entityData$width","_entityData$height","xSpriteOffset","Sprite","src","Properties","properties","xOrigin","yOrigin","sleeping","fresh","motionParent","motionGraph","firstMap","fixFPE","_Ray","fireRegion","waterRegion","state","gravity","xDirection","xAxis","yAxis","regions","getRegionsForPoint","solidTerrain","solidEntities","getEntitiesForPoint","E_SOLID","region","_region$gravity","otherTop","drag","footRay","footDistance","scaleX","changeAnimation","_SpriteSheet","_Entity2","Spawner","spawnData","_spawnData$properties","spawnType","spawnClass","entityDef","spriteSheet","SpriteSheet","spriteImage","getTileImage","tiled","color","spriteColor","addEntity","removeEntity","_QuickTree","_SpriteBoard","_World","_MotionGraph","_Controller","_Pallet","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arrayLikeToArray","toString","from","l","iterator","u","f","done","return","URLSearchParams","search","warpStart","_ref$mapPallet","_ref$entityPallet","Pallet","entries","keyword","_ref5","mapClass","awake","paused","loaded","overscan","World","SpriteBoard","ready","then","initialize","_warpStart$","_warpStart$2","startId","startDef","entityDefs","playerClass","resolve","player","camera","sprites","navigator","getGamepads","visible","clear","visibleMaps","getMapsForRect","mapRegions","getRegionsForRect","difference","MapRenderer","tileWidth","tileHeight","gl2d","tileMapping","tileTexture","tileSetWidth","tileSetHeight","pixels","negSafeMod","priority","halfTileWidth","halfTileHeight","tilesWide","tilesHigh","xTile","yTile","xPos","yPos","drawProgram","activeTexture","TEXTURE2","TEXTURE3","tilePixelLayers","getSlice","tilePixels","setRectangle","effectBuffer","drawArrays","TRIANGLES","drawBuffer","TEXTURE0","a_texCoord","bufferData","STATIC_DRAW","a_position","ParallaxLayer","Parallax","parallaxLayers","textures","assemble","loadSlices","imageLayers","layerData","loadImage","URL","image","_layerData$offsety","_layerData$parallaxx","layer","layerBottom","offsety","offset","parallax","parallaxx","REPEAT","Promise","all","ratio","imagePromises","accept","reject","Image","_Matrix","rectMap","z","originalWidth","originalHeight","singlePixel","w","wStart","hStart","xra","yra","xOff","yOff","fromRect","_ref$tiled","currentAnimation","scaleY","xCenter","yCenter","frames","currentDelay","currentFrame","currentFrames","RIGHT","DOWN","LEFT","UP","EAST","SOUTH","WEST","NORTH","Uint8Array","getFrame","tileCount","animations","animation","textureId","tileid","_MapRenderer","_Parallax","_Gl2d","currentMap","mouse","clickX","clickY","drawLayer","effectLayer","clientX","clientY","mapRenderers","nextParallax","renderer","viewport","clearColor","COLOR_BUFFER_BIT","backgroundColor","g","sort","mr","TEXTURE1","TEXTURE4","step","STREAM_DRAW","_Tileset2","_Tileset","tilesetData","default","willReadFrequently","processImage","tile","tiles","drawImage","frameId","columns","getImageData","data","Tileset","TextureBank","cache","firstgid","imageheight","imagewidth","margin","spacing","tilecount","tileheight","tilewidth","firstGid","getReady","fetch","_await$await$cache$ge","json","imgSrc","href","onload","imageWidth","imageHeight","rows","_View2","dragStart","dragging","moveStick","dropStick","draggingTouches","dragStick","changedTouches","touches","touch","identifier","pos","preventDefault","xx","yy","joystick","offsetWidth","found","releaseButton","pressButton","contextmenu","typeName","objectPallet","owner","property","parseInt","substr","getAll","_Spawner","_SMTree","Animation","acc","animate","TileMap","mapData","_mapData$properties","fileName","worldWidth","worldHeight","values","emptyTiles","tilesIndexes","canvases","contexts","tileLayers","objectLayers","quadTree","animationTrees","entityMap","animatedTiles","selectEntities","wx1","wy1","wx2","wy2","_mapData$properties2","layers","_layer$properties","collisionLayers","class","backgroundcolor","tilesets","spawn","tileTotal","reduce","destination","ctxDestination","tileset","ctxSource","xSource","ySource","xDestination","yDestination","putImageData","pixel","tileData","tileValues","ImageData","spawner","mapTree","mapRects","getTileFromLayer","getColor","getPixel","offsetX","offsetY","tileSetX","tileSetY","localX","localY","tileX","tileY","_layer$props$get","xLocal","yLocal","iLocal","imageData","cc","toDataURL","rects","searchRect","_TileMap","async","worldData","m","solid","tilemaps","tilemap","castEntityRay","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","url","date","Date","replace","browser","userAgent","toLowerCase","forceRepaint","reloaders","page","reload","stylesheet","querySelectorAll","link","val","getAttribute","offsetHeight","javascript","scripts","textScripts","script","text","srcScripts","onLoad","eval","remove","newScript","head","appendChild","port","host","server","hostname","connect","connection","onmessage","message","reloader","onerror","readyState","close","onclose"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3pBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACr3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ICjHaA,MAAM,GAAAC,OAAA,CAAAD,MAAA,gBAAAE,YAAA,UAAAF,OAAA;EAAAG,eAAA,OAAAH,MAAA;AAAA;AAAG;AAEtBA,MAAM,CAACI,KAAK,GAAG,MAAM;AACrB;;;;;;;;;;;;;;;;ICHMC,OAAO;EASZ,SAAAA,QAAAC,IAAA,EACA;IAAA,IADaC,EAAE,GAAAD,IAAA,CAAFC,EAAE;MAAEC,YAAY,GAAAF,IAAA,CAAZE,YAAY;MAAEC,cAAc,GAAAH,IAAA,CAAdG,cAAc;MAAEC,QAAQ,GAAAJ,IAAA,CAARI,QAAQ;MAAEC,UAAU,GAAAL,IAAA,CAAVK,UAAU;IAAAR,eAAA,OAAAE,OAAA;IAAAO,eAAA,kBAPzD,IAAI;IAAAA,eAAA,kBACJ,IAAI;IAAAA,eAAA,qBAED,CAAC,CAAC;IAAAA,eAAA,kBACL,CAA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","file":"docs/app.js","sourcesContent":["\nrequire.register(\"curvature/base/Bag.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bag = void 0;\nvar _Bindable = require(\"./Bindable\");\nvar _Mixin = require(\"./Mixin\");\nvar _EventTargetMixin = require(\"../mixin/EventTargetMixin\");\nvar toId = int => Number(int);\nvar fromId = id => parseInt(id);\nvar Mapped = Symbol('Mapped');\nvar Has = Symbol('Has');\nvar Add = Symbol('Add');\nvar Remove = Symbol('Remove');\nvar Delete = Symbol('Delete');\nclass Bag extends _Mixin.Mixin.with(_EventTargetMixin.EventTargetMixin) {\n  constructor(changeCallback = undefined) {\n    super();\n    this.changeCallback = changeCallback;\n    this.content = new Map();\n    this.current = 0;\n    this.length = 0;\n    this.list = _Bindable.Bindable.makeBindable([]);\n    this.meta = Symbol('meta');\n    this.type = undefined;\n  }\n  has(item) {\n    if (this[Mapped]) {\n      return this[Mapped].has(item);\n    }\n    return this[Has](item);\n  }\n  [Has](item) {\n    return this.content.has(item);\n  }\n  add(item) {\n    if (this[Mapped]) {\n      return this[Mapped].add(item);\n    }\n    return this[Add](item);\n  }\n  [Add](item) {\n    if (item === undefined || !(item instanceof Object)) {\n      throw new Error('Only objects may be added to Bags.');\n    }\n    if (this.type && !(item instanceof this.type)) {\n      console.error(this.type, item);\n      throw new Error(`Only objects of type ${this.type} may be added to this Bag.`);\n    }\n    item = _Bindable.Bindable.make(item);\n    if (this.content.has(item)) {\n      return;\n    }\n    var adding = new CustomEvent('adding', {\n      detail: {\n        item\n      }\n    });\n    if (!this.dispatchEvent(adding)) {\n      return;\n    }\n    var id = toId(this.current++);\n    this.content.set(item, id);\n    this.list[id] = item;\n    if (this.changeCallback) {\n      this.changeCallback(item, this.meta, Bag.ITEM_ADDED, id);\n    }\n    var add = new CustomEvent('added', {\n      detail: {\n        item,\n        id\n      }\n    });\n    this.dispatchEvent(add);\n    this.length = this.size;\n    return id;\n  }\n  remove(item) {\n    if (this[Mapped]) {\n      return this[Mapped].remove(item);\n    }\n    return this[Remove](item);\n  }\n  [Remove](item) {\n    if (item === undefined || !(item instanceof Object)) {\n      throw new Error('Only objects may be removed from Bags.');\n    }\n    if (this.type && !(item instanceof this.type)) {\n      console.error(this.type, item);\n      throw new Error(`Only objects of type ${this.type} may be removed from this Bag.`);\n    }\n    item = _Bindable.Bindable.make(item);\n    if (!this.content.has(item)) {\n      if (this.changeCallback) {\n        this.changeCallback(item, this.meta, 0, undefined);\n      }\n      return false;\n    }\n    var removing = new CustomEvent('removing', {\n      detail: {\n        item\n      }\n    });\n    if (!this.dispatchEvent(removing)) {\n      return;\n    }\n    var id = this.content.get(item);\n    delete this.list[id];\n    this.content.delete(item);\n    if (this.changeCallback) {\n      this.changeCallback(item, this.meta, Bag.ITEM_REMOVED, id);\n    }\n    var remove = new CustomEvent('removed', {\n      detail: {\n        item,\n        id\n      }\n    });\n    this.dispatchEvent(remove);\n    this.length = this.size;\n    return item;\n  }\n  delete(item) {\n    if (this[Mapped]) {\n      return this[Mapped].delete(item);\n    }\n    this[Delete](item);\n  }\n  [Delete](item) {\n    this.remove(item);\n  }\n  map(mapper = x => x, filter = x => x) {\n    var mappedItems = new WeakMap();\n    var mappedBag = new Bag();\n    mappedBag[Mapped] = this;\n    this.addEventListener('added', event => {\n      var item = event.detail.item;\n      if (!filter(item)) {\n        return;\n      }\n      if (mappedItems.has(item)) {\n        return;\n      }\n      var mapped = mapper(item);\n      mappedItems.set(item, mapped);\n      mappedBag[Add](mapped);\n    });\n    this.addEventListener('removed', event => {\n      var item = event.detail.item;\n      if (!mappedItems.has(item)) {\n        return;\n      }\n      var mapped = mappedItems.get(item);\n      mappedItems.delete(item);\n      mappedBag[Remove](mapped);\n    });\n    return mappedBag;\n  }\n  get size() {\n    return this.content.size;\n  }\n  items() {\n    return Array.from(this.content.entries()).map(entry => entry[0]);\n  }\n}\nexports.Bag = Bag;\nObject.defineProperty(Bag, 'ITEM_ADDED', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: 1\n});\nObject.defineProperty(Bag, 'ITEM_REMOVED', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: -1\n});\n  })();\n});","\nrequire.register(\"curvature/base/Bindable.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bindable = void 0;\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar Ref = Symbol('ref');\nvar Original = Symbol('original');\nvar Deck = Symbol('deck');\nvar Binding = Symbol('binding');\nvar SubBinding = Symbol('subBinding');\nvar BindingAll = Symbol('bindingAll');\nvar IsBindable = Symbol('isBindable');\nvar Wrapping = Symbol('wrapping');\nvar Names = Symbol('Names');\nvar Executing = Symbol('executing');\nvar Stack = Symbol('stack');\nvar ObjSymbol = Symbol('object');\nvar Wrapped = Symbol('wrapped');\nvar Unwrapped = Symbol('unwrapped');\nvar GetProto = Symbol('getProto');\nvar OnGet = Symbol('onGet');\nvar OnAllGet = Symbol('onAllGet');\nvar BindChain = Symbol('bindChain');\nvar Descriptors = Symbol('Descriptors');\nvar Before = Symbol('Before');\nvar After = Symbol('After');\nvar NoGetters = Symbol('NoGetters');\nvar Prevent = Symbol('Prevent');\nvar TypedArray = Object.getPrototypeOf(Int8Array);\nvar SetIterator = Set.prototype[Symbol.iterator];\nvar MapIterator = Map.prototype[Symbol.iterator];\nvar win = typeof globalThis === 'object' ? globalThis : typeof window === 'object' ? window : typeof self === 'object' ? self : void 0;\nvar isExcluded = object => typeof win.Map === 'function' && object instanceof win.Map || typeof win.Set === 'function' && object instanceof win.Set || typeof win.Node === 'function' && object instanceof win.Node || typeof win.WeakMap === 'function' && object instanceof win.WeakMap || typeof win.Location === 'function' && object instanceof win.Location || typeof win.Storage === 'function' && object instanceof win.Storage || typeof win.WeakSet === 'function' && object instanceof win.WeakSet || typeof win.ArrayBuffer === 'function' && object instanceof win.ArrayBuffer || typeof win.Promise === 'function' && object instanceof win.Promise || typeof win.File === 'function' && object instanceof win.File || typeof win.Event === 'function' && object instanceof win.Event || typeof win.CustomEvent === 'function' && object instanceof win.CustomEvent || typeof win.Gamepad === 'function' && object instanceof win.Gamepad || typeof win.ResizeObserver === 'function' && object instanceof win.ResizeObserver || typeof win.MutationObserver === 'function' && object instanceof win.MutationObserver || typeof win.PerformanceObserver === 'function' && object instanceof win.PerformanceObserver || typeof win.IntersectionObserver === 'function' && object instanceof win.IntersectionObserver || typeof win.IDBCursor === 'function' && object instanceof win.IDBCursor || typeof win.IDBCursorWithValue === 'function' && object instanceof win.IDBCursorWithValue || typeof win.IDBDatabase === 'function' && object instanceof win.IDBDatabase || typeof win.IDBFactory === 'function' && object instanceof win.IDBFactory || typeof win.IDBIndex === 'function' && object instanceof win.IDBIndex || typeof win.IDBKeyRange === 'function' && object instanceof win.IDBKeyRange || typeof win.IDBObjectStore === 'function' && object instanceof win.IDBObjectStore || typeof win.IDBOpenDBRequest === 'function' && object instanceof win.IDBOpenDBRequest || typeof win.IDBRequest === 'function' && object instanceof win.IDBRequest || typeof win.IDBTransaction === 'function' && object instanceof win.IDBTransaction || typeof win.IDBVersionChangeEvent === 'function' && object instanceof win.IDBVersionChangeEvent || typeof win.FileSystemFileHandle === 'function' && object instanceof win.FileSystemFileHandle || typeof win.RTCPeerConnection === 'function' && object instanceof win.RTCPeerConnection || typeof win.ServiceWorkerRegistration === 'function' && object instanceof win.ServiceWorkerRegistration || typeof win.WebGLTexture === 'function' && object instanceof win.WebGLTexture;\nclass Bindable {\n  static isBindable(object) {\n    if (!object || !object[IsBindable] || !object[Prevent]) {\n      return false;\n    }\n    return object[IsBindable] === Bindable;\n  }\n  static onDeck(object, key) {\n    return object[Deck].get(key) || false;\n  }\n  static ref(object) {\n    return object[Ref] || object || false;\n  }\n  static makeBindable(object) {\n    return this.make(object);\n  }\n  static shuck(original, seen) {\n    seen = seen || new Map();\n    var clone = Object.create({});\n    if (original instanceof TypedArray || original instanceof ArrayBuffer) {\n      var _clone = original.slice(0);\n      seen.set(original, _clone);\n      return _clone;\n    }\n    var properties = Object.keys(original);\n    for (var i in properties) {\n      var ii = properties[i];\n      if (ii.substring(0, 3) === '___') {\n        continue;\n      }\n      var alreadyCloned = seen.get(original[ii]);\n      if (alreadyCloned) {\n        clone[ii] = alreadyCloned;\n        continue;\n      }\n      if (original[ii] === original) {\n        seen.set(original[ii], clone);\n        clone[ii] = clone;\n        continue;\n      }\n      if (original[ii] && typeof original[ii] === 'object') {\n        var originalProp = original[ii];\n        if (Bindable.isBindable(original[ii])) {\n          originalProp = original[ii][Original];\n        }\n        clone[ii] = this.shuck(originalProp, seen);\n      } else {\n        clone[ii] = original[ii];\n      }\n      seen.set(original[ii], clone[ii]);\n    }\n    if (Bindable.isBindable(original)) {\n      delete clone.bindTo;\n      delete clone.isBound;\n    }\n    return clone;\n  }\n  static make(object) {\n    if (object[Prevent]) {\n      return object;\n    }\n    if (!object || !['function', 'object'].includes(typeof object)) {\n      return object;\n    }\n    if (Ref in object) {\n      return object[Ref];\n    }\n    if (object[IsBindable]) {\n      return object;\n    }\n    if (Object.isSealed(object) || Object.isFrozen(object) || !Object.isExtensible(object) || isExcluded(object)) {\n      return object;\n    }\n    Object.defineProperty(object, IsBindable, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: Bindable\n    });\n    Object.defineProperty(object, Ref, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(object, Original, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: object\n    });\n    Object.defineProperty(object, Deck, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: new Map()\n    });\n    Object.defineProperty(object, Binding, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: Object.create(null)\n    });\n    Object.defineProperty(object, SubBinding, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: new Map()\n    });\n    Object.defineProperty(object, BindingAll, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: new Set()\n    });\n    Object.defineProperty(object, Executing, {\n      enumerable: false,\n      writable: true\n    });\n    Object.defineProperty(object, Wrapping, {\n      enumerable: false,\n      writable: true\n    });\n    Object.defineProperty(object, Stack, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: []\n    });\n    Object.defineProperty(object, Before, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: new Set()\n    });\n    Object.defineProperty(object, After, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: new Set()\n    });\n    Object.defineProperty(object, Wrapped, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: Object.preventExtensions(new Map())\n    });\n    Object.defineProperty(object, Unwrapped, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: Object.preventExtensions(new Map())\n    });\n    Object.defineProperty(object, Descriptors, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: Object.preventExtensions(new Map())\n    });\n    var bindTo = (property, callback = null, options = {}) => {\n      var bindToAll = false;\n      if (Array.isArray(property)) {\n        var debinders = property.map(p => bindTo(p, callback, options));\n        return () => debinders.forEach(d => d());\n      }\n      if (property instanceof Function) {\n        options = callback || {};\n        callback = property;\n        bindToAll = true;\n      }\n      if (options.delay >= 0) {\n        callback = this.wrapDelayCallback(callback, options.delay);\n      }\n      if (options.throttle >= 0) {\n        callback = this.wrapThrottleCallback(callback, options.throttle);\n      }\n      if (options.wait >= 0) {\n        callback = this.wrapWaitCallback(callback, options.wait);\n      }\n      if (options.frame) {\n        callback = this.wrapFrameCallback(callback, options.frame);\n      }\n      if (options.idle) {\n        callback = this.wrapIdleCallback(callback);\n      }\n      if (bindToAll) {\n        object[BindingAll].add(callback);\n        if (!('now' in options) || options.now) {\n          for (var i in object) {\n            callback(object[i], i, object, false);\n          }\n        }\n        return () => {\n          object[BindingAll].delete(callback);\n        };\n      }\n      if (!object[Binding][property]) {\n        object[Binding][property] = new Set();\n      }\n\n      // let bindIndex = object[Binding][property].length;\n\n      if (options.children) {\n        var original = callback;\n        callback = (...args) => {\n          var v = args[0];\n          var subDebind = object[SubBinding].get(original);\n          if (subDebind) {\n            object[SubBinding].delete(original);\n            subDebind();\n          }\n          if (typeof v !== 'object') {\n            original(...args);\n            return;\n          }\n          var vv = Bindable.make(v);\n          if (Bindable.isBindable(vv)) {\n            object[SubBinding].set(original, vv.bindTo((...subArgs) => original(...args, ...subArgs), Object.assign({}, options, {\n              children: false\n            })));\n          }\n          original(...args);\n        };\n      }\n      object[Binding][property].add(callback);\n      if (!('now' in options) || options.now) {\n        callback(object[property], property, object, false);\n      }\n      var debinder = () => {\n        var subDebind = object[SubBinding].get(callback);\n        if (subDebind) {\n          object[SubBinding].delete(callback);\n          subDebind();\n        }\n        if (!object[Binding][property]) {\n          return;\n        }\n        if (!object[Binding][property].has(callback)) {\n          return;\n        }\n        object[Binding][property].delete(callback);\n      };\n      if (options.removeWith && options.removeWith instanceof View) {\n        options.removeWith.onRemove(() => debinder);\n      }\n      return debinder;\n    };\n    Object.defineProperty(object, 'bindTo', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: bindTo\n    });\n    var ___before = callback => {\n      object[Before].add(callback);\n      return () => object[Before].delete(callback);\n    };\n    var ___after = callback => {\n      object[After].add(callback);\n      return () => object[After].delete(callback);\n    };\n    Object.defineProperty(object, BindChain, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: (path, callback) => {\n        var parts = path.split('.');\n        var node = parts.shift();\n        var subParts = parts.slice(0);\n        var debind = [];\n        debind.push(object.bindTo(node, (v, k, t, d) => {\n          var rest = subParts.join('.');\n          if (subParts.length === 0) {\n            callback(v, k, t, d);\n            return;\n          }\n          if (v === undefined) {\n            v = t[k] = this.make({});\n          }\n          debind = debind.concat(v[BindChain](rest, callback));\n        }));\n        return () => debind.forEach(x => x());\n      }\n    });\n    Object.defineProperty(object, '___before', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: ___before\n    });\n    Object.defineProperty(object, '___after', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: ___after\n    });\n    var isBound = () => {\n      if (object[BindingAll].size) {\n        return true;\n      }\n      for (var callbacks of Object.values(object[Binding])) {\n        if (callbacks.size) {\n          return true;\n        }\n        // for(let callback of callbacks)\n        // {\n        // \tif(callback)\n        // \t{\n        // \t\treturn true;\n        // \t}\n        // }\n      }\n      return false;\n    };\n    Object.defineProperty(object, 'isBound', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: isBound\n    });\n    for (var i in object) {\n      // const descriptors = Object.getOwnPropertyDescriptors(object);\n\n      if (!object[i] || typeof object[i] !== 'object') {\n        continue;\n      }\n      if (object[i][Ref] || object[i] instanceof Promise) {\n        continue;\n      }\n      if (!Object.isExtensible(object[i]) || Object.isSealed(object[i])) {\n        continue;\n      }\n      if (!isExcluded(object[i])) {\n        object[i] = Bindable.make(object[i]);\n      }\n    }\n    var descriptors = object[Descriptors];\n    var wrapped = object[Wrapped];\n    var stack = object[Stack];\n    var set = (target, key, value) => {\n      if (value && typeof value === 'object') {\n        value = Bindable.make(value);\n        if (target[key] === value) {\n          return true;\n        }\n      }\n      if (wrapped.has(key)) {\n        wrapped.delete(key);\n      }\n      var onDeck = object[Deck];\n      var isOnDeck = onDeck.has(key);\n      var valOnDeck = isOnDeck && onDeck.get(key);\n\n      // if(onDeck[key] !== undefined && onDeck[key] === value)\n      if (isOnDeck && valOnDeck === value) {\n        return true;\n      }\n      if (key.slice && key.slice(-3) === '___') {\n        return true;\n      }\n      if (target[key] === value || typeof value === 'number' && isNaN(valOnDeck) && isNaN(value)) {\n        return true;\n      }\n      onDeck.set(key, value);\n      for (var callback of object[BindingAll]) {\n        callback(value, key, target, false);\n      }\n      if (key in object[Binding]) {\n        for (var _callback of object[Binding][key]) {\n          _callback(value, key, target, false, target[key]);\n        }\n      }\n      onDeck.delete(key);\n      var excluded = win.File && target instanceof win.File && key == 'lastModifiedDate';\n      if (!excluded) {\n        Reflect.set(target, key, value);\n      }\n      if (Array.isArray(target) && object[Binding]['length']) {\n        for (var _i in object[Binding]['length']) {\n          var _callback2 = object[Binding]['length'][_i];\n          _callback2(target.length, 'length', target, false, target.length);\n        }\n      }\n      return true;\n    };\n    var deleteProperty = (target, key) => {\n      var onDeck = object[Deck];\n      var isOnDeck = onDeck.has(key);\n      if (isOnDeck) {\n        return true;\n      }\n      if (!(key in target)) {\n        return true;\n      }\n      if (descriptors.has(key)) {\n        var descriptor = descriptors.get(key);\n        if (descriptor && !descriptor.configurable) {\n          return false;\n        }\n        descriptors.delete(key);\n      }\n      onDeck.set(key, null);\n      if (wrapped.has(key)) {\n        wrapped.delete(key);\n      }\n      for (var callback of object[BindingAll]) {\n        callback(undefined, key, target, true, target[key]);\n      }\n      if (key in object[Binding]) {\n        for (var binding of object[Binding][key]) {\n          binding(undefined, key, target, true, target[key]);\n        }\n      }\n      Reflect.deleteProperty(target, key);\n      onDeck.delete(key);\n      return true;\n    };\n    var construct = (target, args) => {\n      var key = 'constructor';\n      for (var callback of target[Before]) {\n        callback(target, key, object[Stack], undefined, args);\n      }\n      var instance = Bindable.make(new target[Original](...args));\n      for (var _callback3 of target[After]) {\n        _callback3(target, key, object[Stack], instance, args);\n      }\n      return instance;\n    };\n    var get = (target, key) => {\n      if (wrapped.has(key)) {\n        return wrapped.get(key);\n      }\n      if (key === Ref || key === Original || key === 'apply' || key === 'isBound' || key === 'bindTo' || key === '__proto__' || key === 'constructor') {\n        return object[key];\n      }\n      var descriptor;\n      if (descriptors.has(key)) {\n        descriptor = descriptors.get(key);\n      } else {\n        descriptor = Object.getOwnPropertyDescriptor(object, key);\n        descriptors.set(key, descriptor);\n      }\n      if (descriptor && !descriptor.configurable && !descriptor.writable) {\n        return object[key];\n      }\n      if (OnAllGet in object) {\n        return object[OnAllGet](key);\n      }\n      if (OnGet in object && !(key in object)) {\n        return object[OnGet](key);\n      }\n      if (descriptor && !descriptor.configurable && !descriptor.writable) {\n        wrapped.set(key, object[key]);\n        return object[key];\n      }\n      if (typeof object[key] === 'function') {\n        if (Names in object[key]) {\n          return object[key];\n        }\n        object[Unwrapped].set(key, object[key]);\n        var prototype = Object.getPrototypeOf(object);\n        var isMethod = prototype[key] === object[key];\n        var objRef =\n        // (typeof Promise === 'function'                    && object instanceof Promise)\n        // || (typeof Storage === 'function'                 && object instanceof Storage)\n        // || (typeof Map === 'function'                     && object instanceof Map)\n        // || (typeof Set === 'function'                     && object instanceof Set)\n        // || (typeof WeakMap === 'function'                 && object instanceof WeakMap)\n        // || (typeof WeakSet === 'function'                 && object instanceof WeakSet)\n        // || (typeof ArrayBuffer === 'function'             && object instanceof ArrayBuffer)\n        // || (typeof ResizeObserver === 'function'          && object instanceof ResizeObserver)\n        // || (typeof MutationObserver === 'function'        && object instanceof MutationObserver)\n        // || (typeof PerformanceObserver === 'function'     && object instanceof PerformanceObserver)\n        // || (typeof IntersectionObserver === 'function'    && object instanceof IntersectionObserver)\n        isExcluded(object) || typeof object[Symbol.iterator] === 'function' && key === 'next' || typeof TypedArray === 'function' && object instanceof TypedArray || typeof EventTarget === 'function' && object instanceof EventTarget || typeof Date === 'function' && object instanceof Date || typeof MapIterator === 'function' && object.prototype === MapIterator || typeof SetIterator === 'function' && object.prototype === SetIterator ? object : object[Ref];\n        var wrappedMethod = function (...providedArgs) {\n          object[Executing] = key;\n          stack.unshift(key);\n          for (var beforeCallback of object[Before]) {\n            beforeCallback(object, key, stack, object, providedArgs);\n          }\n          var ret;\n          if (new.target) {\n            ret = new (object[Unwrapped].get(key))(...providedArgs);\n          } else {\n            var func = object[Unwrapped].get(key);\n            if (isMethod) {\n              ret = func.apply(objRef || object, providedArgs);\n            } else {\n              ret = func(...providedArgs);\n            }\n          }\n          for (var afterCallback of object[After]) {\n            afterCallback(object, key, stack, object, providedArgs);\n          }\n          object[Executing] = null;\n          stack.shift();\n          return ret;\n        };\n        wrappedMethod[OnAllGet] = _key => object[key][_key];\n        var result = Bindable.make(wrappedMethod);\n        wrapped.set(key, result);\n        return result;\n      }\n      return object[key];\n    };\n    var getPrototypeOf = target => {\n      if (GetProto in object) {\n        return object[GetProto];\n      }\n      return Reflect.getPrototypeOf(target);\n    };\n    var handlerDef = Object.create(null);\n    handlerDef.set = set;\n    handlerDef.construct = construct;\n    handlerDef.deleteProperty = deleteProperty;\n    if (!object[NoGetters]) {\n      handlerDef.getPrototypeOf = getPrototypeOf;\n      handlerDef.get = get;\n    }\n    Object.defineProperty(object, Ref, {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: new Proxy(object, handlerDef)\n    });\n    return object[Ref];\n  }\n  static clearBindings(object) {\n    var maps = func => (...os) => os.map(func);\n    var clearObj = o => Object.keys(o).map(k => delete o[k]);\n    var clearObjs = maps(clearObj);\n    object[BindingAll].clear();\n    clearObjs(object[Wrapped], object[Binding], object[After], object[Before]);\n  }\n  static resolve(object, path, owner = false) {\n    var node;\n    var pathParts = path.split('.');\n    var top = pathParts[0];\n    while (pathParts.length) {\n      if (owner && pathParts.length === 1) {\n        var obj = this.make(object);\n        return [obj, pathParts.shift(), top];\n      }\n      node = pathParts.shift();\n      if (!(node in object) || !object[node] || !(typeof object[node] === 'object')) {\n        object[node] = Object.create(null);\n      }\n      object = this.make(object[node]);\n    }\n    return [this.make(object), node, top];\n  }\n  static wrapDelayCallback(callback, delay) {\n    return (...args) => setTimeout(() => callback(...args), delay);\n  }\n  static wrapThrottleCallback(callback, throttle) {\n    this.throttles.set(callback, false);\n    return (...args) => {\n      if (this.throttles.get(callback, true)) {\n        return;\n      }\n      callback(...args);\n      this.throttles.set(callback, true);\n      setTimeout(() => {\n        this.throttles.set(callback, false);\n      }, throttle);\n    };\n  }\n  static wrapWaitCallback(callback, wait) {\n    return (...args) => {\n      var waiter;\n      if (waiter = this.waiters.get(callback)) {\n        this.waiters.delete(callback);\n        clearTimeout(waiter);\n      }\n      waiter = setTimeout(() => callback(...args), wait);\n      this.waiters.set(callback, waiter);\n    };\n  }\n  static wrapFrameCallback(callback, frames) {\n    return (...args) => {\n      requestAnimationFrame(() => callback(...args));\n    };\n  }\n  static wrapIdleCallback(callback) {\n    return (...args) => {\n      // Compatibility for Safari 08/2020\n      var req = window.requestIdleCallback || requestAnimationFrame;\n      req(() => callback(...args));\n    };\n  }\n}\nexports.Bindable = Bindable;\n_defineProperty(Bindable, \"waiters\", new WeakMap());\n_defineProperty(Bindable, \"throttles\", new WeakMap());\nObject.defineProperty(Bindable, 'Prevent', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: Prevent\n});\nObject.defineProperty(Bindable, 'OnGet', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: OnGet\n});\nObject.defineProperty(Bindable, 'NoGetters', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: NoGetters\n});\nObject.defineProperty(Bindable, 'GetProto', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: GetProto\n});\nObject.defineProperty(Bindable, 'OnAllGet', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: OnAllGet\n});\n  })();\n});","\nrequire.register(\"curvature/base/Cache.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Cache = void 0;\nclass Cache {\n  static store(key, value, expiry, bucket = 'standard') {\n    var expiration = 0;\n    if (expiry) {\n      expiration = expiry * 1000 + new Date().getTime();\n    }\n    if (!this.buckets) {\n      this.buckets = new Map();\n    }\n    if (!this.buckets.has(bucket)) {\n      this.buckets.set(bucket, new Map());\n    }\n    var eventEnd = new CustomEvent('cvCacheStore', {\n      cancelable: true,\n      detail: {\n        key,\n        value,\n        expiry,\n        bucket\n      }\n    });\n    if (document.dispatchEvent(eventEnd)) {\n      this.buckets.get(bucket).set(key, {\n        value,\n        expiration\n      });\n    }\n  }\n  static load(key, defaultvalue = false, bucket = 'standard') {\n    var eventEnd = new CustomEvent('cvCacheLoad', {\n      cancelable: true,\n      detail: {\n        key,\n        defaultvalue,\n        bucket\n      }\n    });\n    if (!document.dispatchEvent(eventEnd)) {\n      return defaultvalue;\n    }\n    if (this.buckets && this.buckets.has(bucket) && this.buckets.get(bucket).has(key)) {\n      var entry = this.buckets.get(bucket).get(key);\n      // console.log(this.bucket[bucket][key].expiration, (new Date).getTime());\n      if (entry.expiration === 0 || entry.expiration > new Date().getTime()) {\n        return this.buckets.get(bucket).get(key).value;\n      }\n    }\n    return defaultvalue;\n  }\n}\nexports.Cache = Cache;\n  })();\n});","\nrequire.register(\"curvature/base/Config.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Config = void 0;\nvar AppConfig = {};\nvar _require = require;\nvar win = typeof globalThis === 'object' ? globalThis : typeof window === 'object' ? window : typeof self === 'object' ? self : void 0;\ntry {\n  AppConfig = _require('/Config').Config;\n} catch (error) {\n  win.devMode === true && console.error(error);\n  AppConfig = {};\n}\nclass Config {\n  static get(name) {\n    return this.configs[name];\n  }\n  static set(name, value) {\n    this.configs[name] = value;\n    return this;\n  }\n  static dump() {\n    return this.configs;\n  }\n  static init(...configs) {\n    for (var i in configs) {\n      var config = configs[i];\n      if (typeof config === 'string') {\n        config = JSON.parse(config);\n      }\n      for (var name in config) {\n        var value = config[name];\n        return this.configs[name] = value;\n      }\n    }\n    return this;\n  }\n}\nexports.Config = Config;\nObject.defineProperty(Config, 'configs', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: AppConfig\n});\n  })();\n});","\nrequire.register(\"curvature/base/Dom.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dom = void 0;\nvar traversals = 0;\nclass Dom {\n  static mapTags(doc, selector, callback, startNode, endNode) {\n    var result = [];\n    var started = true;\n    if (startNode) {\n      started = false;\n    }\n    var ended = false;\n    var {\n      Node,\n      Element,\n      NodeFilter,\n      document\n    } = globalThis.window;\n    var treeWalker = document.createTreeWalker(doc, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT, {\n      acceptNode: (node, walker) => {\n        if (!started) {\n          if (node === startNode) {\n            started = true;\n          } else {\n            return NodeFilter.FILTER_SKIP;\n          }\n        }\n        if (endNode && node === endNode) {\n          ended = true;\n        }\n        if (ended) {\n          return NodeFilter.FILTER_SKIP;\n        }\n        if (selector) {\n          if (node instanceof Element) {\n            if (node.matches(selector)) {\n              return NodeFilter.FILTER_ACCEPT;\n            }\n          }\n          return NodeFilter.FILTER_SKIP;\n        }\n        return NodeFilter.FILTER_ACCEPT;\n      }\n    }, false);\n    var traversal = traversals++;\n    while (treeWalker.nextNode()) {\n      result.push(callback(treeWalker.currentNode, treeWalker));\n    }\n    return result;\n  }\n  static dispatchEvent(doc, event) {\n    doc.dispatchEvent(event);\n    this.mapTags(doc, false, node => {\n      node.dispatchEvent(event);\n    });\n  }\n}\nexports.Dom = Dom;\n  })();\n});","\nrequire.register(\"curvature/base/Mixin.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Mixin = void 0;\nvar _Bindable = require(\"./Bindable\");\nvar Constructor = Symbol('constructor');\nvar MixinList = Symbol('mixinList');\nclass Mixin {\n  static from(baseClass, ...mixins) {\n    var newClass = class extends baseClass {\n      constructor(...args) {\n        var instance = baseClass.constructor ? super(...args) : null;\n        for (var mixin of mixins) {\n          if (mixin[Mixin.Constructor]) {\n            mixin[Mixin.Constructor].apply(this);\n          }\n          switch (typeof mixin) {\n            case 'function':\n              Mixin.mixClass(mixin, newClass);\n              break;\n            case 'object':\n              Mixin.mixObject(mixin, this);\n              break;\n          }\n        }\n        return instance;\n      }\n    };\n    return newClass;\n  }\n  static make(...classes) {\n    var base = classes.pop();\n    return Mixin.to(base, ...classes);\n  }\n  static to(base, ...mixins) {\n    var descriptors = {};\n    mixins.map(mixin => {\n      switch (typeof mixin) {\n        case 'object':\n          Object.assign(descriptors, Object.getOwnPropertyDescriptors(mixin));\n          break;\n        case 'function':\n          Object.assign(descriptors, Object.getOwnPropertyDescriptors(mixin.prototype));\n          break;\n      }\n      delete descriptors.constructor;\n      Object.defineProperties(base.prototype, descriptors);\n    });\n  }\n  static with(...mixins) {\n    return this.from(class {\n      constructor() {}\n    }, ...mixins);\n  }\n  static mixObject(mixin, instance) {\n    for (var func of Object.getOwnPropertyNames(mixin)) {\n      if (typeof mixin[func] === 'function') {\n        instance[func] = mixin[func].bind(instance);\n        continue;\n      }\n      instance[func] = mixin[func];\n    }\n    for (var _func of Object.getOwnPropertySymbols(mixin)) {\n      if (typeof mixin[_func] === 'function') {\n        instance[_func] = mixin[_func].bind(instance);\n        continue;\n      }\n      instance[_func] = mixin[_func];\n    }\n  }\n  static mixClass(cls, newClass) {\n    for (var func of Object.getOwnPropertyNames(cls.prototype)) {\n      if (['name', 'prototype', 'length'].includes(func)) {\n        continue;\n      }\n      var descriptor = Object.getOwnPropertyDescriptor(newClass, func);\n      if (descriptor && !descriptor.writable) {\n        continue;\n      }\n      if (typeof cls[func] !== 'function') {\n        newClass.prototype[func] = cls.prototype[func];\n        continue;\n      }\n      newClass.prototype[func] = cls.prototype[func].bind(newClass.prototype);\n    }\n    for (var _func2 of Object.getOwnPropertySymbols(cls.prototype)) {\n      if (typeof cls[_func2] !== 'function') {\n        newClass.prototype[_func2] = cls.prototype[_func2];\n        continue;\n      }\n      newClass.prototype[_func2] = cls.prototype[_func2].bind(newClass.prototype);\n    }\n    var _loop = function () {\n        if (['name', 'prototype', 'length'].includes(_func3)) {\n          return 0; // continue\n        }\n        var descriptor = Object.getOwnPropertyDescriptor(newClass, _func3);\n        if (descriptor && !descriptor.writable) {\n          return 0; // continue\n        }\n        if (typeof cls[_func3] !== 'function') {\n          newClass[_func3] = cls[_func3];\n          return 0; // continue\n        }\n        var prev = newClass[_func3] || false;\n        var meth = cls[_func3].bind(newClass);\n        newClass[_func3] = (...args) => {\n          prev && prev(...args);\n          return meth(...args);\n        };\n      },\n      _ret;\n    for (var _func3 of Object.getOwnPropertyNames(cls)) {\n      _ret = _loop();\n      if (_ret === 0) continue;\n    }\n    var _loop2 = function () {\n      if (typeof cls[_func4] !== 'function') {\n        newClass.prototype[_func4] = cls[_func4];\n        return 1; // continue\n      }\n      var prev = newClass[_func4] || false;\n      var meth = cls[_func4].bind(newClass);\n      newClass[_func4] = (...args) => {\n        prev && prev(...args);\n        return meth(...args);\n      };\n    };\n    for (var _func4 of Object.getOwnPropertySymbols(cls)) {\n      if (_loop2()) continue;\n    }\n  }\n  static mix(mixinTo) {\n    var constructors = [];\n    var allStatic = {};\n    var allInstance = {};\n    var mixable = _Bindable.Bindable.makeBindable(mixinTo);\n    var _loop3 = function (base) {\n      var instanceNames = Object.getOwnPropertyNames(base.prototype);\n      var staticNames = Object.getOwnPropertyNames(base);\n      var prefix = /^(before|after)__(.+)/;\n      var _loop5 = function (_methodName2) {\n          var match = _methodName2.match(prefix);\n          if (match) {\n            switch (match[1]) {\n              case 'before':\n                mixable.___before((t, e, s, o, a) => {\n                  if (e !== match[2]) {\n                    return;\n                  }\n                  var method = base[_methodName2].bind(o);\n                  return method(...a);\n                });\n                break;\n              case 'after':\n                mixable.___after((t, e, s, o, a) => {\n                  if (e !== match[2]) {\n                    return;\n                  }\n                  var method = base[_methodName2].bind(o);\n                  return method(...a);\n                });\n                break;\n            }\n            return 0; // continue\n          }\n          if (allStatic[_methodName2]) {\n            return 0; // continue\n          }\n          if (typeof base[_methodName2] !== 'function') {\n            return 0; // continue\n          }\n          allStatic[_methodName2] = base[_methodName2];\n        },\n        _ret2;\n      for (var _methodName2 of staticNames) {\n        _ret2 = _loop5(_methodName2);\n        if (_ret2 === 0) continue;\n      }\n      var _loop6 = function (_methodName3) {\n          var match = _methodName3.match(prefix);\n          if (match) {\n            switch (match[1]) {\n              case 'before':\n                mixable.___before((t, e, s, o, a) => {\n                  if (e !== match[2]) {\n                    return;\n                  }\n                  var method = base.prototype[_methodName3].bind(o);\n                  return method(...a);\n                });\n                break;\n              case 'after':\n                mixable.___after((t, e, s, o, a) => {\n                  if (e !== match[2]) {\n                    return;\n                  }\n                  var method = base.prototype[_methodName3].bind(o);\n                  return method(...a);\n                });\n                break;\n            }\n            return 0; // continue\n          }\n          if (allInstance[_methodName3]) {\n            return 0; // continue\n          }\n          if (typeof base.prototype[_methodName3] !== 'function') {\n            return 0; // continue\n          }\n          allInstance[_methodName3] = base.prototype[_methodName3];\n        },\n        _ret3;\n      for (var _methodName3 of instanceNames) {\n        _ret3 = _loop6(_methodName3);\n        if (_ret3 === 0) continue;\n      }\n    };\n    for (var base = this; base && base.prototype; base = Object.getPrototypeOf(base)) {\n      _loop3(base);\n    }\n    for (var methodName in allStatic) {\n      mixinTo[methodName] = allStatic[methodName].bind(mixinTo);\n    }\n    var _loop4 = function (_methodName) {\n      mixinTo.prototype[_methodName] = function (...args) {\n        return allInstance[_methodName].apply(this, args);\n      };\n    };\n    for (var _methodName in allInstance) {\n      _loop4(_methodName);\n    }\n    return mixable;\n  }\n}\nexports.Mixin = Mixin;\nMixin.Constructor = Constructor;\n  })();\n});","\nrequire.register(\"curvature/base/Router.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Router = void 0;\nvar _View = require(\"./View\");\nvar _Cache = require(\"./Cache\");\nvar _Config = require(\"./Config\");\nvar _Routes = require(\"./Routes\");\nvar _win$CustomEvent;\nvar NotFoundError = Symbol('NotFound');\nvar InternalError = Symbol('Internal');\nvar win = typeof globalThis === 'object' ? globalThis : typeof window === 'object' ? window : typeof self === 'object' ? self : void 0;\nwin.CustomEvent = (_win$CustomEvent = win.CustomEvent) !== null && _win$CustomEvent !== void 0 ? _win$CustomEvent : win.Event;\nclass Router {\n  static wait(view, event = 'DOMContentLoaded', node = document) {\n    node.addEventListener(event, () => {\n      this.listen(view);\n    });\n  }\n  static listen(listener, routes = false) {\n    this.listener = listener || this.listener;\n    this.routes = routes || listener.routes;\n    Object.assign(this.query, this.queryOver({}));\n    var listen = event => {\n      event.preventDefault();\n      if (event.state && 'routedId' in event.state) {\n        if (event.state.routedId <= this.routeCount) {\n          this.history.splice(event.state.routedId);\n          this.routeCount = event.state.routedId;\n        } else if (event.state.routedId > this.routeCount) {\n          this.history.push(event.state.prev);\n          this.routeCount = event.state.routedId;\n        }\n        this.state = event.state;\n      } else {\n        if (this.prevPath !== null && this.prevPath !== location.pathname) {\n          this.history.push(this.prevPath);\n        }\n      }\n      if (!this.isOriginLimited(location)) {\n        this.match(location.pathname, listener);\n      } else {\n        this.match(this.nextPath, listener);\n      }\n    };\n    window.addEventListener('cvUrlChanged', listen);\n    window.addEventListener('popstate', listen);\n    var route = !this.isOriginLimited(location) ? location.pathname + location.search : false;\n    if (!this.isOriginLimited(location) && location.hash) {\n      route += location.hash;\n    }\n    var state = {\n      routedId: this.routeCount,\n      url: location.pathname,\n      prev: this.prevPath\n    };\n    if (!this.isOriginLimited(location)) {\n      history.replaceState(state, null, location.pathname);\n    }\n    this.go(route !== false ? route : '/');\n  }\n  static go(path, silent = false) {\n    var configTitle = _Config.Config.get('title');\n    if (configTitle) {\n      document.title = configTitle;\n    }\n    var state = {\n      routedId: this.routeCount,\n      prev: this.prevPath,\n      url: location.pathname\n    };\n    if (silent === -1) {\n      this.match(path, this.listener, true);\n    } else if (this.isOriginLimited(location)) {\n      this.nextPath = path;\n    } else if (silent === 2 && location.pathname !== path) {\n      history.replaceState(state, null, path);\n    } else if (location.pathname !== path) {\n      history.pushState(state, null, path);\n    }\n    if (!silent || silent < 0) {\n      if (silent === false) {\n        this.path = null;\n      }\n      if (!silent) {\n        if (path.substring(0, 1) === '#') {\n          window.dispatchEvent(new HashChangeEvent('hashchange'));\n        } else {\n          window.dispatchEvent(new CustomEvent('cvUrlChanged'));\n        }\n      }\n    }\n    this.prevPath = path;\n  }\n  static processRoute(routes, selected, args) {\n    var result = false;\n    if (typeof routes[selected] === 'function') {\n      if (routes[selected].prototype instanceof _View.View) {\n        result = new routes[selected](args);\n      } else {\n        result = routes[selected](args);\n      }\n    } else {\n      result = routes[selected];\n    }\n    return result;\n  }\n  static handleError(error, routes, selected, args, listener, path, prev, forceRefresh) {\n    if (typeof document !== 'undefined') {\n      document.dispatchEvent(new CustomEvent('cvRouteError', {\n        detail: {\n          error,\n          path,\n          prev,\n          view: listener,\n          routes,\n          selected\n        }\n      }));\n    }\n    var result = win['devMode'] ? 'Unexpected error: ' + String(error) : 'Unexpected error.';\n    if (routes[InternalError]) {\n      args[InternalError] = error;\n      result = this.processRoute(routes, InternalError, args);\n    }\n    this.update(listener, path, result, routes, selected, args, forceRefresh);\n  }\n  static match(path, listener, options = false) {\n    var event = null,\n      request = null,\n      forceRefresh = false;\n    if (options === true) {\n      forceRefresh = options;\n    }\n    if (options && typeof options === 'object') {\n      forceRefresh = options.forceRefresh;\n      event = options.event;\n    }\n    if (typeof document !== 'undefined' && this.path === path && !forceRefresh) {\n      return;\n    }\n    var origin = 'http://example.com';\n    if (typeof document !== 'undefined') {\n      origin = this.isOriginLimited(location) ? origin : location.origin;\n      this.queryString = location.search;\n    }\n    var url = new URL(path, origin);\n    path = this.path = url.pathname;\n    if (typeof document === 'undefined') {\n      this.queryString = url.search;\n    }\n    var prev = this.prevPath;\n    var current = listener && listener.args ? listener.args.content : null;\n    var routes = this.routes || listener && listener.routes || _Routes.Routes.dump();\n    var query = new URLSearchParams(this.queryString);\n    if (event && event.request) {\n      this.request = event.request;\n    }\n    for (var key in Object.keys(this.query)) {\n      delete this.query[key];\n    }\n    for (var [_key, value] of query) {\n      this.query[_key] = value;\n    }\n    var args = {},\n      selected = false,\n      result = '';\n    if (path.substring(0, 1) === '/') {\n      path = path.substring(1);\n    }\n    path = path.split('/');\n    for (var i in this.query) {\n      args[i] = this.query[i];\n    }\n    L1: for (var _i in routes) {\n      var route = _i.split('/');\n      if (route.length < path.length && route[route.length - 1] !== '*') {\n        continue;\n      }\n      L2: for (var j in route) {\n        if (route[j].substr(0, 1) == '%') {\n          var argName = null;\n          var groups = /^%(\\w+)\\??/.exec(route[j]);\n          if (groups && groups[1]) {\n            argName = groups[1];\n          }\n          if (!argName) {\n            throw new Error(`${route[j]} is not a valid argument segment in route \"${_i}\"`);\n          }\n          if (!path[j]) {\n            if (route[j].substr(route[j].length - 1, 1) == '?') {\n              args[argName] = '';\n            } else {\n              continue L1;\n            }\n          } else {\n            args[argName] = path[j];\n          }\n        } else if (route[j] !== '*' && path[j] !== route[j]) {\n          continue L1;\n        }\n      }\n      selected = _i;\n      result = routes[_i];\n      if (route[route.length - 1] === '*') {\n        args.pathparts = path.slice(route.length - 1);\n      }\n      break;\n    }\n    var eventStart = new CustomEvent('cvRouteStart', {\n      cancelable: true,\n      detail: {\n        path,\n        prev,\n        root: listener,\n        selected,\n        routes\n      }\n    });\n    if (typeof document !== 'undefined') {\n      if (!document.dispatchEvent(eventStart)) {\n        return;\n      }\n    }\n    if (!forceRefresh && listener && current && typeof result === 'object' && current.constructor === result.constructor && !(result instanceof Promise) && current.update(args)) {\n      listener.args.content = current;\n      return true;\n    }\n    if (!(selected in routes)) {\n      routes[selected] = routes[NotFoundError];\n    }\n    try {\n      result = this.processRoute(routes, selected, args);\n      if (result === false) {\n        result = this.processRoute(routes, NotFoundError, args);\n      }\n      if (typeof document === 'undefined') {\n        if (!(result instanceof Promise)) {\n          return Promise.resolve(result);\n        }\n        return result;\n      }\n      if (!(result instanceof Promise)) {\n        return this.update(listener, path, result, routes, selected, args, forceRefresh);\n      }\n      return result.then(realResult => this.update(listener, path, realResult, routes, selected, args, forceRefresh)).catch(error => {\n        this.handleError(error, routes, selected, args, listener, path, prev, forceRefresh);\n      });\n    } catch (error) {\n      this.handleError(error, routes, selected, args, listener, path, prev, forceRefresh);\n    }\n  }\n  static update(listener, path, result, routes, selected, args, forceRefresh) {\n    if (!listener) {\n      return;\n    }\n    var prev = this.prevPath;\n    var event = new CustomEvent('cvRoute', {\n      cancelable: true,\n      detail: {\n        result,\n        path,\n        prev,\n        view: listener,\n        routes,\n        selected\n      }\n    });\n    if (result !== false) {\n      if (listener.args.content instanceof _View.View) {\n        listener.args.content.pause(true);\n        listener.args.content.remove();\n      }\n      if (document.dispatchEvent(event)) {\n        listener.args.content = result;\n      }\n      if (result instanceof _View.View) {\n        result.pause(false);\n        result.update(args, forceRefresh);\n      }\n    }\n    var eventEnd = new CustomEvent('cvRouteEnd', {\n      cancelable: true,\n      detail: {\n        result,\n        path,\n        prev,\n        view: listener,\n        routes,\n        selected\n      }\n    });\n    document.dispatchEvent(eventEnd);\n  }\n  static isOriginLimited({\n    origin\n  }) {\n    return origin === 'null' || origin === 'file://';\n  }\n  static queryOver(args = {}) {\n    var params = new URLSearchParams(location.search);\n    var finalArgs = {};\n    var query = {};\n    for (var pair of params) {\n      query[pair[0]] = pair[1];\n    }\n    finalArgs = Object.assign(finalArgs, query, args);\n    delete finalArgs['api'];\n    return finalArgs;\n\n    // for(let i in query)\n    // {\n    // \tfinalArgs[i] = query[i];\n    // }\n\n    // for(let i in args)\n    // {\n    // \tfinalArgs[i] = args[i];\n    // }\n  }\n  static queryToString(args = {}, fresh = false) {\n    var parts = [],\n      finalArgs = args;\n    if (!fresh) {\n      finalArgs = this.queryOver(args);\n    }\n    for (var i in finalArgs) {\n      if (finalArgs[i] === '') {\n        continue;\n      }\n      parts.push(i + '=' + encodeURIComponent(finalArgs[i]));\n    }\n    return parts.join('&');\n  }\n  static setQuery(name, value, silent) {\n    var args = this.queryOver();\n    args[name] = value;\n    if (value === undefined) {\n      delete args[name];\n    }\n    var queryString = this.queryToString(args, true);\n    this.go(location.pathname + (queryString ? '?' + queryString : '?'), silent);\n  }\n}\nexports.Router = Router;\nObject.defineProperty(Router, 'query', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: {}\n});\nObject.defineProperty(Router, 'history', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: []\n});\nObject.defineProperty(Router, 'routeCount', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: 0\n});\nObject.defineProperty(Router, 'prevPath', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: null\n});\nObject.defineProperty(Router, 'queryString', {\n  configurable: false,\n  enumerable: false,\n  writable: true,\n  value: null\n});\nObject.defineProperty(Router, 'InternalError', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: InternalError\n});\nObject.defineProperty(Router, 'NotFoundError', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: NotFoundError\n});\n  })();\n});","\nrequire.register(\"curvature/base/Routes.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Routes = void 0;\nvar AppRoutes = {};\nvar _require = require;\nvar imported = false;\nvar runImport = () => {\n  if (imported) {\n    return;\n  }\n  ;\n  try {\n    Object.assign(AppRoutes, _require('Routes').Routes || {});\n  } catch (error) {\n    globalThis.devMode === true && console.warn(error);\n  }\n  imported = true;\n};\nclass Routes {\n  static get(name) {\n    runImport();\n    return this.routes[name];\n  }\n  static dump() {\n    runImport();\n    return this.routes;\n  }\n}\nexports.Routes = Routes;\nObject.defineProperty(Routes, 'routes', {\n  configurable: false,\n  enumerable: false,\n  writable: false,\n  value: AppRoutes\n});\n  })();\n});","\nrequire.register(\"curvature/base/RuleSet.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RuleSet = void 0;\nvar _Dom = require(\"./Dom\");\nvar _Tag = require(\"./Tag\");\nvar _View = require(\"./View\");\nclass RuleSet {\n  static add(selector, callback) {\n    this.globalRules = this.globalRules || {};\n    this.globalRules[selector] = this.globalRules[selector] || [];\n    this.globalRules[selector].push(callback);\n    return this;\n  }\n  static apply(doc = document, view = null) {\n    for (var selector in this.globalRules) {\n      for (var i in this.globalRules[selector]) {\n        var callback = this.globalRules[selector][i];\n        var wrapped = this.wrap(doc, callback, view);\n        var nodes = doc.querySelectorAll(selector);\n        for (var node of nodes) {\n          wrapped(node);\n        }\n      }\n    }\n  }\n  add(selector, callback) {\n    this.rules = this.rules || {};\n    this.rules[selector] = this.rules[selector] || [];\n    this.rules[selector].push(callback);\n    return this;\n  }\n  apply(doc = document, view = null) {\n    RuleSet.apply(doc, view);\n    for (var selector in this.rules) {\n      for (var i in this.rules[selector]) {\n        var callback = this.rules[selector][i];\n        var wrapped = RuleSet.wrap(doc, callback, view);\n        var nodes = doc.querySelectorAll(selector);\n        for (var node of nodes) {\n          wrapped(node);\n        }\n      }\n    }\n  }\n  purge() {\n    if (!this.rules) {\n      return;\n    }\n    for (var [k, v] of Object.entries(this.rules)) {\n      if (!this.rules[k]) {\n        continue;\n      }\n      for (var kk in this.rules[k]) {\n        delete this.rules[k][kk];\n      }\n    }\n  }\n  static wait(event = 'DOMContentLoaded', node = document) {\n    var listener = ((event, node) => () => {\n      node.removeEventListener(event, listener);\n      return this.apply();\n    })(event, node);\n    node.addEventListener(event, listener);\n  }\n  static wrap(doc, originalCallback, view = null) {\n    var callback = originalCallback;\n    if (originalCallback instanceof _View.View || originalCallback && originalCallback.prototype && originalCallback.prototype instanceof _View.View) {\n      callback = () => originalCallback;\n    }\n    return element => {\n      if (typeof element.___cvApplied___ === 'undefined') {\n        Object.defineProperty(element, '___cvApplied___', {\n          enumerable: false,\n          writable: false,\n          value: new WeakSet()\n        });\n      }\n      if (element.___cvApplied___.has(originalCallback)) {\n        return;\n      }\n      var direct, parentView;\n      if (view) {\n        direct = parentView = view;\n        if (view.viewList) {\n          parentView = view.viewList.parent;\n        }\n      }\n      var tag = new _Tag.Tag(element, parentView, null, undefined, direct);\n      var parent = tag.element.parentNode;\n      var sibling = tag.element.nextSibling;\n      var result = callback(tag);\n      if (result !== false) {\n        element.___cvApplied___.add(originalCallback);\n      }\n      if (result instanceof HTMLElement) {\n        result = new _Tag.Tag(result);\n      }\n      if (result instanceof _Tag.Tag) {\n        if (!result.element.contains(tag.element)) {\n          while (tag.element.firstChild) {\n            result.element.appendChild(tag.element.firstChild);\n          }\n          tag.remove();\n        }\n        if (sibling) {\n          parent.insertBefore(result.element, sibling);\n        } else {\n          parent.appendChild(result.element);\n        }\n      }\n      if (result && result.prototype && result.prototype instanceof _View.View) {\n        result = new result({}, view);\n      }\n      if (result instanceof _View.View) {\n        if (view) {\n          view.cleanup.push(() => result.remove());\n          view.cleanup.push(view.args.bindTo((v, k, t) => {\n            t[k] = v;\n            result.args[k] = v;\n          }));\n          view.cleanup.push(result.args.bindTo((v, k, t, d) => {\n            t[k] = v;\n            view.args[k] = v;\n          }));\n        }\n        tag.clear();\n        result.render(tag.element);\n      }\n    };\n  }\n}\nexports.RuleSet = RuleSet;\n  })();\n});","\nrequire.register(\"curvature/base/SetMap.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SetMap = void 0;\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nclass SetMap {\n  constructor() {\n    _defineProperty(this, \"_map\", new Map());\n  }\n  has(key) {\n    return this._map.has(key);\n  }\n  get(key) {\n    return this._map.get(key);\n  }\n  getOne(key) {\n    var set = this.get(key);\n    for (var entry of set) {\n      return entry;\n    }\n  }\n  add(key, value) {\n    var set = this._map.get(key);\n    if (!set) {\n      this._map.set(key, set = new Set());\n    }\n    return set.add(value);\n  }\n  remove(key, value) {\n    var set = this._map.get(key);\n    if (!set) {\n      return;\n    }\n    var res = set.delete(value);\n    if (!set.size) {\n      this._map.delete(key);\n    }\n    return res;\n  }\n  values() {\n    return new Set(...[...this._map.values()].map(set => [...set.values()]));\n  }\n}\nexports.SetMap = SetMap;\n  })();\n});","\nrequire.register(\"curvature/base/Tag.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tag = void 0;\nvar _Bindable = require(\"./Bindable\");\nvar CurrentStyle = Symbol('CurrentStyle');\nvar CurrentAttrs = Symbol('CurrentAttrs');\nvar styler = function (styles) {\n  if (!this.node) {\n    return;\n  }\n  for (var property in styles) {\n    var stringedProperty = String(styles[property]);\n    if (this[CurrentStyle].has(property) && this[CurrentStyle].get(property) === styles[property] || Number.isNaN(styles[property])) {\n      continue;\n    }\n    if (property[0] === '-') {\n      this.node.style.setProperty(property, stringedProperty);\n    } else {\n      this.node.style[property] = stringedProperty;\n    }\n    if (styles[property] !== undefined) {\n      this[CurrentStyle].set(property, styles[property]);\n    } else {\n      this[CurrentStyle].delete(property);\n    }\n  }\n};\nvar getter = function (name) {\n  if (typeof this[name] === 'function') {\n    return this[name];\n  }\n  if (this.node && typeof this.node[name] === 'function') {\n    return this[name] = (...args) => this.node[name](...args);\n  }\n  if (name === 'style') {\n    return this.proxy.style;\n  }\n  if (this.node && name in this.node) {\n    return this.node[name];\n  }\n  return this[name];\n};\nclass Tag {\n  constructor(element, parent, ref, index, direct) {\n    if (typeof element === 'string') {\n      var subdoc = document.createRange().createContextualFragment(element);\n      element = subdoc.firstChild;\n    }\n    this.element = _Bindable.Bindable.makeBindable(element);\n    this.node = this.element;\n    this.parent = parent;\n    this.direct = direct;\n    this.ref = ref;\n    this.index = index;\n    this.cleanup = [];\n    this[_Bindable.Bindable.OnAllGet] = getter.bind(this);\n    this[CurrentStyle] = new Map();\n    this[CurrentAttrs] = new Map();\n    var boundStyler = _Bindable.Bindable.make(styler.bind(this));\n    Object.defineProperty(this, 'style', {\n      value: boundStyler\n    });\n    this.proxy = _Bindable.Bindable.make(this);\n    this.proxy.style.bindTo((v, k, t, d) => {\n      if (this[CurrentStyle].has(k) && this[CurrentStyle].get(k) === v) {\n        return;\n      }\n      this.node.style[k] = v;\n      if (!d && v !== undefined) {\n        this[CurrentStyle].set(k, v);\n      } else {\n        this[CurrentStyle].delete(k);\n      }\n    });\n    this.proxy.bindTo((v, k) => {\n      if (k === 'index') {\n        return;\n      }\n      if (k in element && element[k] !== v) {\n        element[k] = v;\n      }\n      return false;\n    });\n    return this.proxy;\n  }\n  attr(attributes) {\n    for (var attribute in attributes) {\n      if (this[CurrentAttrs].has(attribute) && attributes[attribute] === undefined) {\n        this.node.removeAttribute(attribute);\n        this[CurrentAttrs].delete(attribute);\n      } else if (!this[CurrentAttrs].has(attribute) || this[CurrentAttrs].get(attribute) !== attributes[attribute]) {\n        if (attributes[attribute] === null) {\n          this.node.setAttribute(attribute, '');\n          this[CurrentAttrs].set(attribute, '');\n        } else {\n          this.node.setAttribute(attribute, attributes[attribute]);\n          this[CurrentAttrs].set(attribute, attributes[attribute]);\n        }\n      }\n    }\n    return this;\n  }\n  remove() {\n    if (this.node) {\n      this.node.remove();\n    }\n    _Bindable.Bindable.clearBindings(this);\n    var cleanup;\n    while (cleanup = this.cleanup.shift()) {\n      cleanup();\n    }\n    this.clear();\n    if (!this.node) {\n      return;\n    }\n    var detachEvent = new Event('cvDomDetached');\n    this.node.dispatchEvent(detachEvent);\n    this.node = this.element = this.ref = this.parent = undefined;\n  }\n  clear() {\n    if (!this.node) {\n      return;\n    }\n    var detachEvent = new Event('cvDomDetached');\n    while (this.node.firstChild) {\n      this.node.firstChild.dispatchEvent(detachEvent);\n      this.node.removeChild(this.node.firstChild);\n    }\n  }\n  pause(paused = true) {}\n  listen(eventName, callback, options) {\n    var node = this.node;\n    node.addEventListener(eventName, callback, options);\n    var remove = () => {\n      node.removeEventListener(eventName, callback, options);\n    };\n    var remover = () => {\n      remove();\n      remove = () => console.warn('Already removed!');\n    };\n    this.parent.onRemove(() => remover());\n    return remover;\n  }\n}\nexports.Tag = Tag;\n  })();\n});","\nrequire.register(\"curvature/base/Uuid.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Uuid = void 0;\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar win = typeof globalThis === 'object' ? globalThis : typeof window === 'object' ? window : typeof self === 'object' ? self : void 0;\nvar crypto = win.crypto;\nclass Uuid {\n  constructor(uuid = null, version = 4) {\n    _defineProperty(this, \"uuid\", null);\n    _defineProperty(this, \"version\", 4);\n    if (uuid) {\n      if (typeof uuid !== 'string' && !(uuid instanceof Uuid) || !uuid.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/)) {\n        throw new Error(`Invalid input for Uuid: \"${uuid}\"`);\n      }\n      this.version = version;\n      this.uuid = uuid;\n    } else if (crypto && typeof crypto.randomUUID === 'function') {\n      this.uuid = crypto.randomUUID();\n    } else {\n      var init = [1e7] + -1e3 + -4e3 + -8e3 + -1e11;\n      var rand = crypto && typeof crypto.randomUUID === 'function' ? () => crypto.getRandomValues(new Uint8Array(1))[0] : () => Math.trunc(Math.random() * 256);\n      this.uuid = init.replace(/[018]/g, c => (c ^ rand() & 15 >> c / 4).toString(16));\n    }\n    Object.freeze(this);\n  }\n  [Symbol.toPrimitive]() {\n    return this.toString();\n  }\n  toString() {\n    return this.uuid;\n  }\n  toJson() {\n    return {\n      version: this.version,\n      uuid: this.uuid\n    };\n  }\n}\nexports.Uuid = Uuid;\n  })();\n});","\nrequire.register(\"curvature/base/View.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.View = void 0;\nvar _Bindable = require(\"./Bindable\");\nvar _ViewList = require(\"./ViewList\");\nvar _Router = require(\"./Router\");\nvar _Uuid = require(\"./Uuid\");\nvar _Dom = require(\"./Dom\");\nvar _Tag = require(\"./Tag\");\nvar _Bag = require(\"./Bag\");\nvar _RuleSet = require(\"./RuleSet\");\nvar _Mixin = require(\"./Mixin\");\nvar _EventTargetMixin = require(\"../mixin/EventTargetMixin\");\nvar dontParse = Symbol('dontParse');\nvar expandBind = Symbol('expandBind');\nvar uuid = Symbol('uuid');\nclass View extends _Mixin.Mixin.with(_EventTargetMixin.EventTargetMixin) {\n  get _id() {\n    return this[uuid];\n  }\n  static from(template, args = {}, mainView = null) {\n    var view = new this(args, mainView);\n    view.template = template;\n    return view;\n  }\n  constructor(args = {}, mainView = null) {\n    super(args, mainView);\n    this[_EventTargetMixin.EventTargetMixin.Parent] = mainView;\n    Object.defineProperty(this, 'args', {\n      value: _Bindable.Bindable.make(args)\n    });\n    Object.defineProperty(this, uuid, {\n      value: this.constructor.uuid()\n    });\n    Object.defineProperty(this, 'nodesAttached', {\n      value: new _Bag.Bag((i, s, a) => {})\n    });\n    Object.defineProperty(this, 'nodesDetached', {\n      value: new _Bag.Bag((i, s, a) => {})\n    });\n    Object.defineProperty(this, '_onRemove', {\n      value: new _Bag.Bag((i, s, a) => {})\n    });\n    Object.defineProperty(this, 'cleanup', {\n      value: []\n    });\n    Object.defineProperty(this, 'parent', {\n      value: mainView,\n      writable: true\n    });\n    Object.defineProperty(this, 'views', {\n      value: new Map()\n    });\n    Object.defineProperty(this, 'viewLists', {\n      value: new Map()\n    });\n    Object.defineProperty(this, 'withViews', {\n      value: new Map()\n    });\n    Object.defineProperty(this, 'tags', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'nodes', {\n      value: _Bindable.Bindable.make([])\n    });\n    Object.defineProperty(this, 'timeouts', {\n      value: new Map()\n    });\n    Object.defineProperty(this, 'intervals', {\n      value: new Map()\n    });\n    Object.defineProperty(this, 'frames', {\n      value: []\n    });\n    Object.defineProperty(this, 'ruleSet', {\n      value: new _RuleSet.RuleSet()\n    });\n    Object.defineProperty(this, 'preRuleSet', {\n      value: new _RuleSet.RuleSet()\n    });\n    Object.defineProperty(this, 'subBindings', {\n      value: {}\n    });\n    Object.defineProperty(this, 'templates', {\n      value: {}\n    });\n    Object.defineProperty(this, 'postMapping', {\n      value: new Set()\n    });\n    Object.defineProperty(this, 'eventCleanup', {\n      value: []\n    });\n    Object.defineProperty(this, 'unpauseCallbacks', {\n      value: new Map()\n    });\n    Object.defineProperty(this, 'interpolateRegex', {\n      value: /(\\[\\[((?:\\$+)?[\\w\\.\\|-]+)\\]\\])/g\n    });\n    Object.defineProperty(this, 'rendered', {\n      value: new Promise((accept, reject) => Object.defineProperty(this, 'renderComplete', {\n        value: accept\n      }))\n    });\n    this.onRemove(() => {\n      if (!this[_EventTargetMixin.EventTargetMixin.Parent]) {\n        return;\n      }\n      this[_EventTargetMixin.EventTargetMixin.Parent] = null;\n    });\n    this.controller = this;\n    this.template = ``;\n    this.firstNode = null;\n    this.lastNode = null;\n    this.viewList = null;\n    this.mainView = null;\n    this.preserve = false;\n    this.removed = false;\n    this.loaded = Promise.resolve(this);\n\n    // return Bindable.make(this);\n  }\n  static isView() {\n    return View;\n  }\n  onFrame(callback) {\n    var stopped = false;\n    var cancel = () => {\n      stopped = true;\n    };\n    var c = timestamp => {\n      if (this.removed || stopped) {\n        return;\n      }\n      if (!this.paused) {\n        callback(Date.now());\n      }\n      requestAnimationFrame(c);\n    };\n    requestAnimationFrame(() => c(Date.now()));\n    this.frames.push(cancel);\n    return cancel;\n  }\n  onNextFrame(callback) {\n    return requestAnimationFrame(() => callback(Date.now()));\n  }\n  onIdle(callback) {\n    return requestIdleCallback(() => callback(Date.now()));\n  }\n  onTimeout(time, callback) {\n    var timeoutInfo = {\n      timeout: null,\n      callback: null,\n      time: time,\n      fired: false,\n      created: new Date().getTime(),\n      paused: false\n    };\n    var wrappedCallback = () => {\n      callback();\n      timeoutInfo.fired = true;\n      this.timeouts.delete(timeoutInfo.timeout);\n    };\n    var timeout = setTimeout(wrappedCallback, time);\n    timeoutInfo.callback = wrappedCallback;\n    timeoutInfo.timeout = timeout;\n    this.timeouts.set(timeoutInfo.timeout, timeoutInfo);\n    return timeout;\n  }\n  clearTimeout(timeout) {\n    if (!this.timeouts.has(timeout)) {\n      return;\n    }\n    var timeoutInfo = this.timeouts.get(timeout);\n    clearTimeout(timeoutInfo.timeout);\n    this.timeouts.delete(timeoutInfo.timeout);\n  }\n  onInterval(time, callback) {\n    var timeout = setInterval(callback, time);\n    this.intervals.set(timeout, {\n      timeout: timeout,\n      callback: callback,\n      time: time,\n      paused: false\n    });\n    return timeout;\n  }\n  clearInterval(timeout) {\n    if (!this.intervals.has(timeout)) {\n      return;\n    }\n    var timeoutInfo = this.intervals.get(timeout);\n    clearTimeout(timeoutInfo.timeout);\n    this.intervals.delete(timeoutInfo.timeout);\n  }\n  pause(paused = undefined) {\n    if (paused === undefined) {\n      this.paused = !this.paused;\n    }\n    this.paused = paused;\n    if (this.paused) {\n      for (var [callback, timeout] of this.timeouts) {\n        if (timeout.fired) {\n          this.timeouts.delete(timeout.timeout);\n          continue;\n        }\n        clearTimeout(timeout.timeout);\n        timeout.paused = true;\n        timeout.time = Math.max(0, timeout.time - (Date.now() - timeout.created));\n      }\n      for (var [_callback, _timeout] of this.intervals) {\n        clearInterval(_timeout.timeout);\n        _timeout.paused = true;\n      }\n    } else {\n      for (var [_callback2, _timeout2] of this.timeouts) {\n        if (!_timeout2.paused) {\n          continue;\n        }\n        if (_timeout2.fired) {\n          this.timeouts.delete(_timeout2.timeout);\n          continue;\n        }\n        _timeout2.timeout = setTimeout(_timeout2.callback, _timeout2.time);\n        _timeout2.paused = false;\n      }\n      for (var [_callback3, _timeout3] of this.intervals) {\n        if (!_timeout3.paused) {\n          continue;\n        }\n        _timeout3.timeout = setInterval(_timeout3.callback, _timeout3.time);\n        _timeout3.paused = false;\n      }\n      for (var [, _callback4] of this.unpauseCallbacks) {\n        _callback4();\n      }\n      this.unpauseCallbacks.clear();\n    }\n    for (var [tag, viewList] of this.viewLists) {\n      viewList.pause(!!paused);\n    }\n    for (var i in this.tags) {\n      if (Array.isArray(this.tags[i])) {\n        for (var j in this.tags[i]) {\n          this.tags[i][j].pause(!!paused);\n        }\n        continue;\n      }\n      this.tags[i].pause(!!paused);\n    }\n  }\n  render(parentNode = null, insertPoint = null, outerView = null) {\n    var {\n      document\n    } = globalThis.window;\n    if (parentNode instanceof View) {\n      parentNode = parentNode.firstNode.parentNode;\n    }\n    if (insertPoint instanceof View) {\n      insertPoint = insertPoint.firstNode;\n    }\n    if (this.firstNode) {\n      return this.reRender(parentNode, insertPoint, outerView);\n    }\n    this.dispatchEvent(new CustomEvent('render'));\n    var templateIsFragment = typeof this.template === 'object' && typeof this.template.cloneNode === 'function';\n    var templateParsed = templateIsFragment || View.templates.has(this.template);\n    var subDoc;\n    if (templateParsed) {\n      if (templateIsFragment) {\n        subDoc = this.template.cloneNode(true);\n      } else {\n        subDoc = View.templates.get(this.template).cloneNode(true);\n      }\n    } else {\n      subDoc = document.createRange().createContextualFragment(this.template);\n    }\n    if (!templateParsed && !templateIsFragment) {\n      View.templates.set(this.template, subDoc.cloneNode(true));\n    }\n    this.mainView || this.preRuleSet.apply(subDoc, this);\n    this.mapTags(subDoc);\n    this.mainView || this.ruleSet.apply(subDoc, this);\n    if (globalThis.devMode === true) {\n      this.firstNode = document.createComment(`Template ${this._id} Start`);\n      this.lastNode = document.createComment(`Template ${this._id} End`);\n    } else {\n      this.firstNode = document.createTextNode('');\n      this.lastNode = document.createTextNode('');\n    }\n    this.nodes.push(this.firstNode, ...Array.from(subDoc.childNodes), this.lastNode);\n    this.postRender(parentNode);\n    this.dispatchEvent(new CustomEvent('rendered'));\n    if (!this.dispatchAttach()) {\n      return;\n    }\n    if (parentNode) {\n      if (insertPoint) {\n        parentNode.insertBefore(this.firstNode, insertPoint);\n        parentNode.insertBefore(this.lastNode, insertPoint);\n      } else {\n        parentNode.insertBefore(this.firstNode, null);\n        parentNode.insertBefore(this.lastNode, null);\n      }\n      parentNode.insertBefore(subDoc, this.lastNode);\n      var rootNode = parentNode.getRootNode();\n      if (rootNode.isConnected) {\n        this.attached(rootNode, parentNode);\n        this.dispatchAttached(rootNode, parentNode, outerView);\n      } else if (outerView) {\n        var firstDomAttach = event => {\n          var rootNode = parentNode.getRootNode();\n          this.attached(rootNode, parentNode);\n          this.dispatchAttached(rootNode, parentNode, outerView);\n          outerView.removeEventListener('attached', firstDomAttach);\n        };\n        outerView.addEventListener('attached', firstDomAttach);\n      }\n    }\n    this.renderComplete(this.nodes);\n    return this.nodes;\n  }\n  dispatchAttach() {\n    var {\n      CustomEvent\n    } = globalThis.window;\n    return this.dispatchEvent(new CustomEvent('attach', {\n      cancelable: true,\n      target: this\n    }));\n  }\n  dispatchAttached(rootNode, parentNode, view = undefined) {\n    var {\n      CustomEvent\n    } = globalThis.window;\n    this.dispatchEvent(new CustomEvent('attached', {\n      detail: {\n        view: view || this,\n        node: parentNode,\n        root: rootNode,\n        mainView: this\n      }\n    }));\n    this.dispatchDomAttached(view);\n    for (var callback of this.nodesAttached.items()) {\n      callback(rootNode, parentNode);\n    }\n  }\n  dispatchDomAttached(view) {\n    var {\n      Node,\n      CustomEvent\n    } = globalThis.window;\n    this.nodes.filter(n => n.nodeType !== Node.COMMENT_NODE).forEach(child => {\n      if (!child.matches) {\n        return;\n      }\n      child.dispatchEvent(new CustomEvent('cvDomAttached', {\n        target: child,\n        detail: {\n          view: view || this,\n          mainView: this\n        }\n      }));\n      _Dom.Dom.mapTags(child, false, (tag, walker) => {\n        if (!tag.matches) {\n          return;\n        }\n        tag.dispatchEvent(new CustomEvent('cvDomAttached', {\n          target: tag,\n          detail: {\n            view: view || this,\n            mainView: this\n          }\n        }));\n      });\n    });\n  }\n  reRender(parentNode, insertPoint, outerView) {\n    var {\n      CustomEvent\n    } = globalThis.window;\n    var willReRender = this.dispatchEvent(new CustomEvent('reRender'), {\n      cancelable: true,\n      target: this,\n      view: outerView\n    });\n    if (!willReRender) {\n      return;\n    }\n    var subDoc = new DocumentFragment();\n    if (this.firstNode.isConnected) {\n      var detach = this.nodesDetached.items();\n      for (var i in detach) {\n        detach[i]();\n      }\n    }\n    subDoc.append(...this.nodes);\n    if (parentNode) {\n      if (insertPoint) {\n        parentNode.insertBefore(this.firstNode, insertPoint);\n        parentNode.insertBefore(this.lastNode, insertPoint);\n      } else {\n        parentNode.insertBefore(this.firstNode, null);\n        parentNode.insertBefore(this.lastNode, null);\n      }\n      parentNode.insertBefore(subDoc, this.lastNode);\n      this.dispatchEvent(new CustomEvent('reRendered'), {\n        cancelable: true,\n        target: this,\n        view: outerView\n      });\n      var rootNode = parentNode.getRootNode();\n      if (rootNode.isConnected) {\n        this.attached(rootNode, parentNode);\n        this.dispatchAttached(rootNode, parentNode);\n      }\n    }\n    return this.nodes;\n  }\n  mapTags(subDoc) {\n    _Dom.Dom.mapTags(subDoc, false, (tag, walker) => {\n      if (tag[dontParse]) {\n        return;\n      }\n      if (tag.matches) {\n        tag = this.mapInterpolatableTag(tag);\n        tag = tag.matches('[cv-template]') && this.mapTemplateTag(tag) || tag;\n        tag = tag.matches('[cv-slot]') && this.mapSlotTag(tag) || tag;\n        tag = tag.matches('[cv-prerender]') && this.mapPrendererTag(tag) || tag;\n        tag = tag.matches('[cv-link]') && this.mapLinkTag(tag) || tag;\n        tag = tag.matches('[cv-attr]') && this.mapAttrTag(tag) || tag;\n        tag = tag.matches('[cv-expand]') && this.mapExpandableTag(tag) || tag;\n        tag = tag.matches('[cv-ref]') && this.mapRefTag(tag) || tag;\n        tag = tag.matches('[cv-on]') && this.mapOnTag(tag) || tag;\n        tag = tag.matches('[cv-each]') && this.mapEachTag(tag) || tag;\n        tag = tag.matches('[cv-bind]') && this.mapBindTag(tag) || tag;\n        tag = tag.matches('[cv-with]') && this.mapWithTag(tag) || tag;\n        tag = tag.matches('[cv-if]') && this.mapIfTag(tag) || tag;\n        tag = tag.matches('[cv-view]') && this.mapViewTag(tag) || tag;\n      } else {\n        tag = this.mapInterpolatableTag(tag);\n      }\n      if (tag !== walker.currentNode) {\n        walker.currentNode = tag;\n      }\n    });\n    this.postMapping.forEach(c => c());\n  }\n  mapExpandableTag(tag) {\n    // const tagCompiler = this.compileExpandableTag(tag);\n    // const newTag = tagCompiler(this);\n    // tag.replaceWith(newTag);\n    // return newTag;\n\n    var existing = tag[expandBind];\n    if (existing) {\n      existing();\n      tag[expandBind] = false;\n    }\n    var [proxy, expandProperty] = _Bindable.Bindable.resolve(this.args, tag.getAttribute('cv-expand'), true);\n    tag.removeAttribute('cv-expand');\n    if (!proxy[expandProperty]) {\n      proxy[expandProperty] = {};\n    }\n    proxy[expandProperty] = _Bindable.Bindable.make(proxy[expandProperty]);\n    this.onRemove(tag[expandBind] = proxy[expandProperty].bindTo((v, k, t, d, p) => {\n      if (d || v === undefined) {\n        tag.removeAttribute(k, v);\n        return;\n      }\n      if (v === null) {\n        tag.setAttribute(k, '');\n        return;\n      }\n      tag.setAttribute(k, v);\n    }));\n\n    // let expandProperty = tag.getAttribute('cv-expand');\n    // let expandArg = Bindable.makeBindable(\n    // \tthis.args[expandProperty] || {}\n    // );\n\n    // tag.removeAttribute('cv-expand');\n\n    // for(let i in expandArg)\n    // {\n    // \tif(i === 'name' || i === 'type')\n    // \t{\n    // \t\tcontinue;\n    // \t}\n\n    // \tlet debind = expandArg.bindTo(i, ((tag,i)=>(v)=>{\n    // \t\ttag.setAttribute(i, v);\n    // \t})(tag,i));\n\n    // \tthis.onRemove(()=>{\n    // \t\tdebind();\n    // \t\tif(expandArg.isBound())\n    // \t\t{\n    // \t\t\tBindable.clearBindings(expandArg);\n    // \t\t}\n    // \t});\n    // }\n\n    return tag;\n  }\n\n  // compileExpandableTag(sourceTag)\n  // {\n  // \treturn (bindingView) => {\n\n  // \t\tconst tag = sourceTag.cloneNode(true);\n\n  // \t\tlet expandProperty = tag.getAttribute('cv-expand');\n  // \t\tlet expandArg = Bindable.make(\n  // \t\t\tbindingView.args[expandProperty] || {}\n  // \t\t);\n\n  // \t\ttag.removeAttribute('cv-expand');\n\n  // \t\tfor(let i in expandArg)\n  // \t\t{\n  // \t\t\tif(i === 'name' || i === 'type')\n  // \t\t\t{\n  // \t\t\t\tcontinue;\n  // \t\t\t}\n\n  // \t\t\tlet debind = expandArg.bindTo(i, ((tag,i)=>(v)=>{\n  // \t\t\t\ttag.setAttribute(i, v);\n  // \t\t\t})(tag,i));\n\n  // \t\t\tbindingView.onRemove(()=>{\n  // \t\t\t\tdebind();\n  // \t\t\t\tif(expandArg.isBound())\n  // \t\t\t\t{\n  // \t\t\t\t\tBindable.clearBindings(expandArg);\n  // \t\t\t\t}\n  // \t\t\t});\n  // \t\t}\n\n  // \t\treturn tag;\n  // \t};\n  // }\n\n  mapAttrTag(tag) {\n    var tagCompiler = this.compileAttrTag(tag);\n    var newTag = tagCompiler(this);\n    tag.replaceWith(newTag);\n    return newTag;\n\n    // let attrProperty = tag.getAttribute('cv-attr');\n\n    // tag.removeAttribute('cv-attr');\n\n    // let pairs = attrProperty.split(',');\n    // let attrs = pairs.map((p) => p.split(':'));\n\n    // for (let i in attrs)\n    // {\n    // \tlet proxy        = this.args;\n    // \tlet bindProperty = attrs[i][1];\n    // \tlet property     = bindProperty;\n\n    // \tif(bindProperty.match(/\\./))\n    // \t{\n    // \t\t[proxy, property] = Bindable.resolve(\n    // \t\t\tthis.args\n    // \t\t\t, bindProperty\n    // \t\t\t, true\n    // \t\t);\n    // \t}\n\n    // \tlet attrib = attrs[i][0];\n\n    // \tthis.onRemove(proxy.bindTo(\n    // \t\tproperty\n    // \t\t, (v)=>{\n    // \t\t\tif(v == null)\n    // \t\t\t{\n    // \t\t\t\ttag.setAttribute(attrib, '');\n    // \t\t\t\treturn;\n    // \t\t\t}\n    // \t\t\ttag.setAttribute(attrib, v);\n    // \t\t}\n    // \t));\n    // }\n\n    // return tag;\n  }\n  compileAttrTag(sourceTag) {\n    var attrProperty = sourceTag.getAttribute('cv-attr');\n    var pairs = attrProperty.split(/[,;]/);\n    var attrs = pairs.map(p => p.split(':'));\n    sourceTag.removeAttribute('cv-attr');\n    return bindingView => {\n      var tag = sourceTag.cloneNode(true);\n      var _loop = function () {\n        var bindProperty = attrs[i][1] || attrs[i][0];\n        var [proxy, property] = _Bindable.Bindable.resolve(bindingView.args, bindProperty, true);\n        var attrib = attrs[i][0];\n        bindingView.onRemove(proxy.bindTo(property, (v, k, t, d) => {\n          if (d || v === undefined) {\n            tag.removeAttribute(attrib, v);\n            return;\n          }\n          if (v === null) {\n            tag.setAttribute(attrib, '');\n            return;\n          }\n          tag.setAttribute(attrib, v);\n        }));\n      };\n      for (var i in attrs) {\n        _loop();\n      }\n      return tag;\n    };\n  }\n  mapInterpolatableTag(tag) {\n    var _this = this;\n    var regex = this.interpolateRegex;\n    var {\n      Node,\n      document\n    } = globalThis.window;\n    if (tag.nodeType === Node.TEXT_NODE) {\n      var original = tag.nodeValue;\n      if (!this.interpolatable(original)) {\n        return tag;\n      }\n      var header = 0;\n      var match;\n      var _loop2 = function () {\n          var bindProperty = match[2];\n          var unsafeHtml = false;\n          var unsafeView = false;\n          var propertySplit = bindProperty.split('|');\n          var transformer = false;\n          if (propertySplit.length > 1) {\n            transformer = _this.stringTransformer(propertySplit.slice(1));\n            bindProperty = propertySplit[0];\n          }\n          if (bindProperty.substr(0, 2) === '$$') {\n            unsafeHtml = true;\n            unsafeView = true;\n            bindProperty = bindProperty.substr(2);\n          }\n          if (bindProperty.substr(0, 1) === '$') {\n            unsafeHtml = true;\n            bindProperty = bindProperty.substr(1);\n          }\n          if (bindProperty.substr(0, 3) === '000') {\n            expand = true;\n            bindProperty = bindProperty.substr(3);\n            return 0; // continue\n          }\n          var staticPrefix = original.substring(header, match.index);\n          header = match.index + match[1].length;\n          var staticNode = document.createTextNode(staticPrefix);\n          staticNode[dontParse] = true;\n          tag.parentNode.insertBefore(staticNode, tag);\n          var dynamicNode;\n          if (unsafeHtml) {\n            dynamicNode = document.createElement('div');\n          } else {\n            dynamicNode = document.createTextNode('');\n          }\n          dynamicNode[dontParse] = true;\n          var proxy = _this.args;\n          var property = bindProperty;\n          if (bindProperty.match(/\\./)) {\n            [proxy, property] = _Bindable.Bindable.resolve(_this.args, bindProperty, true);\n          }\n          tag.parentNode.insertBefore(dynamicNode, tag);\n          if (typeof proxy !== 'object') {\n            return 1; // break\n          }\n          proxy = _Bindable.Bindable.make(proxy);\n          var debind = proxy.bindTo(property, (v, k, t) => {\n            if (t[k] !== v && (t[k] instanceof View || t[k] instanceof Node || t[k] instanceof _Tag.Tag)) {\n              if (!t[k].preserve) {\n                t[k].remove();\n              }\n            }\n            if (unsafeView && !(v instanceof View)) {\n              var unsafeTemplate = v !== null && v !== void 0 ? v : '';\n              v = new View(_this.args, _this);\n              v.template = unsafeTemplate;\n            }\n            if (transformer) {\n              v = transformer(v);\n            }\n            if (v instanceof View) {\n              dynamicNode.nodeValue = '';\n              v[_EventTargetMixin.EventTargetMixin.Parent] = _this;\n              v.render(tag.parentNode, dynamicNode, _this);\n              var cleanup = () => {\n                if (!v.preserve) {\n                  v.remove();\n                }\n              };\n              _this.onRemove(cleanup);\n              v.onRemove(() => _this._onRemove.remove(cleanup));\n            } else if (v instanceof Node) {\n              dynamicNode.nodeValue = '';\n              tag.parentNode.insertBefore(v, dynamicNode);\n              _this.onRemove(() => v.remove());\n            } else if (v instanceof _Tag.Tag) {\n              dynamicNode.nodeValue = '';\n              if (v.node) {\n                tag.parentNode.insertBefore(v.node, dynamicNode);\n                _this.onRemove(() => v.remove());\n              } else {\n                v.remove();\n              }\n            } else {\n              if (v instanceof Object && v.__toString instanceof Function) {\n                v = v.__toString();\n              }\n              if (unsafeHtml) {\n                dynamicNode.innerHTML = v;\n              } else {\n                dynamicNode.nodeValue = v;\n              }\n            }\n            dynamicNode[dontParse] = true;\n          });\n          _this.onRemove(debind);\n        },\n        _ret;\n      while (match = regex.exec(original)) {\n        _ret = _loop2();\n        if (_ret === 0) continue;\n        if (_ret === 1) break;\n      }\n      var staticSuffix = original.substring(header);\n      var staticNode = document.createTextNode(staticSuffix);\n      staticNode[dontParse] = true;\n      tag.parentNode.insertBefore(staticNode, tag);\n      tag.nodeValue = '';\n    } else if (tag.nodeType === Node.ELEMENT_NODE) {\n      var _loop3 = function () {\n        if (!_this.interpolatable(tag.attributes[i].value)) {\n          return 1; // continue\n        }\n        var header = 0;\n        var match;\n        var original = tag.attributes[i].value;\n        var attribute = tag.attributes[i];\n        var bindProperties = {};\n        var segments = [];\n        while (match = regex.exec(original)) {\n          segments.push(original.substring(header, match.index));\n          if (!bindProperties[match[2]]) {\n            bindProperties[match[2]] = [];\n          }\n          bindProperties[match[2]].push(segments.length);\n          segments.push(match[1]);\n          header = match.index + match[1].length;\n        }\n        segments.push(original.substring(header));\n        var _loop4 = function () {\n          var proxy = _this.args;\n          var property = j;\n          var propertySplit = j.split('|');\n          var transformer = false;\n          var longProperty = j;\n          if (propertySplit.length > 1) {\n            transformer = _this.stringTransformer(propertySplit.slice(1));\n            property = propertySplit[0];\n          }\n          if (property.match(/\\./)) {\n            [proxy, property] = _Bindable.Bindable.resolve(_this.args, property, true);\n          }\n          var matching = [];\n          var bindProperty = j;\n          var matchingSegments = bindProperties[longProperty];\n          _this.onRemove(proxy.bindTo(property, (v, k, t, d) => {\n            if (transformer) {\n              v = transformer(v);\n            }\n            for (var _i in bindProperties) {\n              for (var _j in bindProperties[longProperty]) {\n                segments[bindProperties[longProperty][_j]] = t[_i];\n                if (k === property) {\n                  segments[bindProperties[longProperty][_j]] = v;\n                }\n              }\n            }\n            if (!_this.paused) {\n              tag.setAttribute(attribute.name, segments.join(''));\n            } else {\n              _this.unpauseCallbacks.set(attribute, () => tag.setAttribute(attribute.name, segments.join('')));\n            }\n          }));\n        };\n        for (var j in bindProperties) {\n          _loop4();\n        }\n      };\n      for (var i = 0; i < tag.attributes.length; i++) {\n        if (_loop3()) continue;\n      }\n    }\n    return tag;\n  }\n  mapRefTag(tag) {\n    var refAttr = tag.getAttribute('cv-ref');\n    var [refProp, refClassname = null, refKey = null] = refAttr.split(':');\n    var refClass = _Tag.Tag;\n    if (refClassname) {\n      refClass = this.stringToClass(refClassname);\n    }\n    tag.removeAttribute('cv-ref');\n    Object.defineProperty(tag, '___tag___', {\n      enumerable: false,\n      writable: true\n    });\n    this.onRemove(() => {\n      tag.___tag___ = null;\n      tag.remove();\n    });\n    var parent = this;\n    var direct = this;\n    if (this.viewList) {\n      parent = this.viewList.parent;\n      // if(!this.viewList.parent.tags[refProp])\n      // {\n      // \tthis.viewList.parent.tags[refProp] = [];\n      // }\n\n      // let refKeyVal = this.args[refKey];\n\n      // this.viewList.parent.tags[refProp][refKeyVal] = new refClass(\n      // \ttag, this, refProp, refKeyVal\n      // );\n    }\n    // else\n    // {\n    // \tthis.tags[refProp] = new refClass(\n    // \t\ttag, this, refProp\n    // \t);\n    // }\n\n    var tagObject = new refClass(tag, this, refProp, undefined, direct);\n    tag.___tag___ = tagObject;\n    this.tags[refProp] = tagObject;\n    while (parent) {\n      var refKeyVal = this.args[refKey];\n      if (refKeyVal !== undefined) {\n        if (!parent.tags[refProp]) {\n          parent.tags[refProp] = [];\n        }\n        parent.tags[refProp][refKeyVal] = tagObject;\n      } else {\n        parent.tags[refProp] = tagObject;\n      }\n      if (!parent.parent) {\n        break;\n      }\n      parent = parent.parent;\n    }\n    return tag;\n  }\n  mapBindTag(tag) {\n    var bindArg = tag.getAttribute('cv-bind');\n    var proxy = this.args;\n    var property = bindArg;\n    var top = null;\n    if (bindArg.match(/\\./)) {\n      [proxy, property, top] = _Bindable.Bindable.resolve(this.args, bindArg, true);\n    }\n    if (proxy !== this.args) {\n      this.subBindings[bindArg] = this.subBindings[bindArg] || [];\n      this.onRemove(this.args.bindTo(top, () => {\n        while (this.subBindings.length) {\n          this.subBindings.shift()();\n        }\n      }));\n    }\n    var unsafeHtml = false;\n    if (property.substr(0, 1) === '$') {\n      property = property.substr(1);\n      unsafeHtml = true;\n    }\n    var autoEventStarted = false;\n    var debind = proxy.bindTo(property, (v, k, t, d, p) => {\n      if ((p instanceof View || p instanceof Node || p instanceof _Tag.Tag) && p !== v) {\n        p.remove();\n      }\n      if (['INPUT', 'SELECT', 'TEXTAREA'].includes(tag.tagName)) {\n        var _type = tag.getAttribute('type');\n        if (_type && _type.toLowerCase() === 'checkbox') {\n          tag.checked = !!v;\n        } else if (_type && _type.toLowerCase() === 'radio') {\n          tag.checked = v == tag.value;\n        } else if (_type !== 'file') {\n          if (tag.tagName === 'SELECT') {\n            var selectOption = () => {\n              for (var i = 0; i < tag.options.length; i++) {\n                var option = tag.options[i];\n                if (option.value == v) {\n                  tag.selectedIndex = i;\n                }\n              }\n            };\n            selectOption();\n            this.nodesAttached.add(selectOption);\n          } else {\n            tag.value = v == null ? '' : v;\n          }\n        }\n        if (autoEventStarted) {\n          tag.dispatchEvent(new CustomEvent('cvAutoChanged', {\n            bubbles: true\n          }));\n        }\n        autoEventStarted = true;\n      } else {\n        if (v instanceof View) {\n          for (var node of tag.childNodes) {\n            node.remove();\n          }\n          v[_EventTargetMixin.EventTargetMixin.Parent] = this;\n          v.render(tag, null, this);\n        } else if (v instanceof Node) {\n          tag.insert(v);\n        } else if (v instanceof _Tag.Tag) {\n          tag.append(v.node);\n        } else if (unsafeHtml) {\n          if (tag.innerHTML !== v) {\n            v = String(v);\n            if (tag.innerHTML === v.substring(0, tag.innerHTML.length)) {\n              tag.innerHTML += v.substring(tag.innerHTML.length);\n            } else {\n              for (var _node of tag.childNodes) {\n                _node.remove();\n              }\n              tag.innerHTML = v;\n            }\n            _Dom.Dom.mapTags(tag, false, t => t[dontParse] = true);\n          }\n        } else {\n          if (tag.textContent !== v) {\n            for (var _node2 of tag.childNodes) {\n              _node2.remove();\n            }\n            tag.textContent = v;\n          }\n        }\n      }\n    });\n    if (proxy !== this.args) {\n      this.subBindings[bindArg].push(debind);\n    }\n    this.onRemove(debind);\n    var type = tag.getAttribute('type');\n    var multi = tag.getAttribute('multiple');\n    var inputListener = event => {\n      if (event.target !== tag) {\n        return;\n      }\n      if (type && type.toLowerCase() === 'checkbox') {\n        if (tag.checked) {\n          proxy[property] = event.target.getAttribute('value');\n        } else {\n          proxy[property] = false;\n        }\n      } else if (event.target.matches('[contenteditable=true]')) {\n        proxy[property] = event.target.innerHTML;\n      } else if (type === 'file' && multi) {\n        var files = Array.from(event.target.files);\n        var current = proxy[property] || _Bindable.Bindable.onDeck(proxy, property);\n        if (!current || !files.length) {\n          proxy[property] = files;\n        } else {\n          var _loop5 = function (i) {\n            if (files[i] !== current[i]) {\n              files[i].toJSON = () => {\n                return {\n                  name: file[i].name,\n                  size: file[i].size,\n                  type: file[i].type,\n                  date: file[i].lastModified\n                };\n              };\n              current[i] = files[i];\n              return 1; // break\n            }\n          };\n          for (var i in files) {\n            if (_loop5(i)) break;\n          }\n        }\n      } else if (type === 'file' && !multi && event.target.files.length) {\n        var _file = event.target.files.item(0);\n        _file.toJSON = () => {\n          return {\n            name: _file.name,\n            size: _file.size,\n            type: _file.type,\n            date: _file.lastModified\n          };\n        };\n        proxy[property] = _file;\n      } else {\n        proxy[property] = event.target.value;\n      }\n    };\n    if (type === 'file' || type === 'radio') {\n      tag.addEventListener('change', inputListener);\n    } else {\n      tag.addEventListener('input', inputListener);\n      tag.addEventListener('change', inputListener);\n      tag.addEventListener('value-changed', inputListener);\n    }\n    this.onRemove(() => {\n      if (type === 'file' || type === 'radio') {\n        tag.removeEventListener('change', inputListener);\n      } else {\n        tag.removeEventListener('input', inputListener);\n        tag.removeEventListener('change', inputListener);\n        tag.removeEventListener('value-changed', inputListener);\n      }\n    });\n    tag.removeAttribute('cv-bind');\n    return tag;\n  }\n  mapOnTag(tag) {\n    var referents = String(tag.getAttribute('cv-on'));\n    referents.split(';').map(a => a.split(':')).forEach(a => {\n      a = a.map(a => a.trim());\n      var argLen = a.length;\n      var eventName = String(a.shift()).trim();\n      var callbackName = String(a.shift() || eventName).trim();\n      var eventFlags = String(a.shift() || '').trim();\n      var argList = [];\n      var groups = /(\\w+)(?:\\(([$\\w\\s-'\",]+)\\))?/.exec(callbackName);\n      if (groups) {\n        callbackName = groups[1].replace(/(^[\\s\\n]+|[\\s\\n]+$)/, '');\n        if (groups[2]) {\n          argList = groups[2].split(',').map(s => s.trim());\n        }\n      }\n      if (!argList.length) {\n        argList.push('$event');\n      }\n      if (!eventName || argLen === 1) {\n        eventName = callbackName;\n      }\n      var eventListener = event => {\n        var eventMethod;\n        var parent = this;\n        var _loop6 = function () {\n            var controller = parent.controller;\n            if (typeof controller[callbackName] === 'function') {\n              eventMethod = (...args) => {\n                controller[callbackName](...args);\n              };\n              return 0; // break\n            } else if (typeof parent[callbackName] === 'function') {\n              eventMethod = (...args) => {\n                parent[callbackName](...args);\n              };\n              return 0; // break\n            }\n            if (parent.parent) {\n              parent = parent.parent;\n            } else {\n              return 0; // break\n            }\n          },\n          _ret2;\n        while (parent) {\n          _ret2 = _loop6();\n          if (_ret2 === 0) break;\n        }\n        var argRefs = argList.map(arg => {\n          var match;\n          if (Number(arg) == arg) {\n            return arg;\n          } else if (arg === 'event' || arg === '$event') {\n            return event;\n          } else if (arg === '$view') {\n            return parent;\n          } else if (arg === '$controller') {\n            return controller;\n          } else if (arg === '$tag') {\n            return tag;\n          } else if (arg === '$parent') {\n            return this.parent;\n          } else if (arg === '$subview') {\n            return this;\n          } else if (arg in this.args) {\n            return this.args[arg];\n          } else if (match = /^['\"]([\\w-]+?)[\"']$/.exec(arg)) {\n            return match[1];\n          }\n        });\n        if (!(typeof eventMethod === 'function')) {\n          throw new Error(`${callbackName} is not defined on View object.` + \"\\n\" + `Tag:` + \"\\n\" + `${tag.outerHTML}`);\n        }\n        eventMethod(...argRefs);\n      };\n      var eventOptions = {};\n      if (eventFlags.includes('p')) {\n        eventOptions.passive = true;\n      } else if (eventFlags.includes('P')) {\n        eventOptions.passive = false;\n      }\n      if (eventFlags.includes('c')) {\n        eventOptions.capture = true;\n      } else if (eventFlags.includes('C')) {\n        eventOptions.capture = false;\n      }\n      if (eventFlags.includes('o')) {\n        eventOptions.once = true;\n      } else if (eventFlags.includes('O')) {\n        eventOptions.once = false;\n      }\n      switch (eventName) {\n        case '_init':\n          eventListener();\n          break;\n        case '_attach':\n          this.nodesAttached.add(eventListener);\n          break;\n        case '_detach':\n          this.nodesDetached.add(eventListener);\n          break;\n        default:\n          tag.addEventListener(eventName, eventListener, eventOptions);\n          this.onRemove(() => {\n            tag.removeEventListener(eventName, eventListener, eventOptions);\n          });\n          break;\n      }\n      return [eventName, callbackName, argList];\n    });\n    tag.removeAttribute('cv-on');\n    return tag;\n  }\n  mapLinkTag(tag) {\n    // const tagCompiler = this.compileLinkTag(tag);\n\n    // const newTag = tagCompiler(this);\n\n    // tag.replaceWith(newTag);\n\n    // return newTag;\n\n    var linkAttr = tag.getAttribute('cv-link');\n    tag.setAttribute('href', linkAttr);\n    var linkClick = event => {\n      event.preventDefault();\n      if (linkAttr.substring(0, 4) === 'http' || linkAttr.substring(0, 2) === '//') {\n        globalThis.open(tag.getAttribute('href', linkAttr));\n        return;\n      }\n      _Router.Router.go(tag.getAttribute('href'));\n    };\n    tag.addEventListener('click', linkClick);\n    this.onRemove(((tag, eventListener) => () => {\n      tag.removeEventListener('click', eventListener);\n      tag = undefined;\n      eventListener = undefined;\n    })(tag, linkClick));\n    tag.removeAttribute('cv-link');\n    return tag;\n  }\n\n  // compileLinkTag(sourceTag)\n  // {\n  // \tconst linkAttr = sourceTag.getAttribute('cv-link');\n  // \tsourceTag.removeAttribute('cv-link');\n  // \treturn (bindingView) => {\n  // \t\tconst tag = sourceTag.cloneNode(true);\n  // \t\ttag.setAttribute('href', linkAttr);\n  // \t\treturn tag;\n  // \t};\n  // }\n\n  mapPrendererTag(tag) {\n    var prerenderAttr = tag.getAttribute('cv-prerender');\n    var prerendering = globalThis.prerenderer || navigator.userAgent.match(/prerender/i);\n    tag.removeAttribute('cv-prerender');\n    if (prerendering) {\n      globalThis.prerenderer = globalThis.prerenderer || true;\n    }\n    if (prerenderAttr === 'never' && prerendering || prerenderAttr === 'only' && !prerendering) {\n      this.postMapping.add(() => tag.parentNode.removeChild(tag));\n    }\n    return tag;\n  }\n  mapWithTag(tag) {\n    var _this2 = this;\n    var withAttr = tag.getAttribute('cv-with');\n    var carryAttr = tag.getAttribute('cv-carry');\n    var viewAttr = tag.getAttribute('cv-view');\n    tag.removeAttribute('cv-with');\n    tag.removeAttribute('cv-carry');\n    tag.removeAttribute('cv-view');\n    var viewClass = viewAttr ? this.stringToClass(viewAttr) : View;\n    var subTemplate = new DocumentFragment();\n    [...tag.childNodes].forEach(n => subTemplate.appendChild(n));\n    var carryProps = [];\n    if (carryAttr) {\n      carryProps = carryAttr.split(',').map(s => s.trim());\n    }\n    var debind = this.args.bindTo(withAttr, (v, k, t, d) => {\n      if (this.withViews.has(tag)) {\n        this.withViews.delete(tag);\n      }\n      while (tag.firstChild) {\n        tag.removeChild(tag.firstChild);\n      }\n      var view = new viewClass({}, this);\n      this.onRemove((view => () => {\n        view.remove();\n      })(view));\n      view.template = subTemplate;\n      var _loop7 = function () {\n        var debind = _this2.args.bindTo(carryProps[i], (v, k) => {\n          view.args[k] = v;\n        });\n        view.onRemove(debind);\n        _this2.onRemove(() => {\n          debind();\n          view.remove();\n        });\n      };\n      for (var i in carryProps) {\n        _loop7();\n      }\n      var _loop8 = function () {\n        if (typeof v !== 'object') {\n          return 1; // continue\n        }\n        v = _Bindable.Bindable.make(v);\n        var debind = v.bindTo(_i2, (vv, kk, tt, dd) => {\n          if (!dd) {\n            view.args[kk] = vv;\n          } else if (kk in view.args) {\n            delete view.args[kk];\n          }\n        });\n        var debindUp = view.args.bindTo(_i2, (vv, kk, tt, dd) => {\n          if (!dd) {\n            v[kk] = vv;\n          } else if (kk in v) {\n            delete v[kk];\n          }\n        });\n        _this2.onRemove(() => {\n          debind();\n          if (!v.isBound()) {\n            _Bindable.Bindable.clearBindings(v);\n          }\n          view.remove();\n        });\n        view.onRemove(() => {\n          debind();\n          if (!v.isBound()) {\n            _Bindable.Bindable.clearBindings(v);\n          }\n        });\n      };\n      for (var _i2 in v) {\n        if (_loop8()) continue;\n      }\n      view.render(tag, null, this);\n      this.withViews.set(tag, view);\n    });\n    this.onRemove(() => {\n      this.withViews.delete(tag);\n      debind();\n    });\n    return tag;\n  }\n  mapViewTag(tag) {\n    var viewAttr = tag.getAttribute('cv-view');\n    tag.removeAttribute('cv-view');\n    var subTemplate = new DocumentFragment();\n    [...tag.childNodes].forEach(n => subTemplate.appendChild(n));\n    var parts = viewAttr.split(':');\n    var viewName = parts.shift();\n    var viewClass = parts.length ? this.stringToClass(parts[0]) : View;\n    var view = new viewClass(this.args, this);\n    this.views.set(tag, view);\n    this.views.set(viewName, view);\n    this.onRemove(() => {\n      view.remove();\n      this.views.delete(tag);\n      this.views.delete(viewName);\n    });\n    view.template = subTemplate;\n    view.render(tag, null, this);\n    return tag;\n  }\n  mapEachTag(tag) {\n    var eachAttr = tag.getAttribute('cv-each');\n    var viewAttr = tag.getAttribute('cv-view');\n    tag.removeAttribute('cv-each');\n    tag.removeAttribute('cv-view');\n    var viewClass = viewAttr ? this.stringToClass(viewAttr) : View;\n    var subTemplate = new DocumentFragment();\n    [...tag.childNodes].forEach(n => subTemplate.appendChild(n));\n    var [eachProp, asProp, keyProp] = eachAttr.split(':');\n    var proxy = this.args;\n    var property = eachProp;\n    if (eachProp.match(/\\./)) {\n      [proxy, property] = _Bindable.Bindable.resolve(this.args, eachProp, true);\n    }\n    var debind = proxy.bindTo(property, (v, k, t, d, p) => {\n      if (v instanceof _Bag.Bag) {\n        v = v.list;\n      }\n      if (this.viewLists.has(tag)) {\n        this.viewLists.get(tag).remove();\n      }\n      var viewList = new _ViewList.ViewList(subTemplate, asProp, v, this, keyProp, viewClass);\n      var viewListRemover = () => viewList.remove();\n      this.onRemove(viewListRemover);\n      viewList.onRemove(() => this._onRemove.remove(viewListRemover));\n      var debindA = this.args.bindTo((v, k, t, d) => {\n        if (k === '_id') {\n          return;\n        }\n        if (!d) {\n          viewList.subArgs[k] = v;\n        } else {\n          if (k in viewList.subArgs) {\n            delete viewList.subArgs[k];\n          }\n        }\n      });\n      var debindB = viewList.args.bindTo((v, k, t, d, p) => {\n        if (k === '_id' || k === 'value' || String(k).substring(0, 3) === '___') {\n          return;\n        }\n        if (!d) {\n          if (k in this.args) {\n            this.args[k] = v;\n          }\n        } else {\n          delete this.args[k];\n        }\n      });\n      viewList.onRemove(debindA);\n      viewList.onRemove(debindB);\n      this.onRemove(debindA);\n      this.onRemove(debindB);\n      while (tag.firstChild) {\n        tag.removeChild(tag.firstChild);\n      }\n      this.viewLists.set(tag, viewList);\n      viewList.render(tag, null, this);\n      if (tag.tagName === 'SELECT') {\n        viewList.reRender();\n      }\n    });\n    this.onRemove(debind);\n    return tag;\n  }\n  mapIfTag(tag) {\n    var sourceTag = tag;\n    var viewProperty = sourceTag.getAttribute('cv-view');\n    var ifProperty = sourceTag.getAttribute('cv-if');\n    var isProperty = sourceTag.getAttribute('cv-is');\n    var inverted = false;\n    var defined = false;\n    sourceTag.removeAttribute('cv-view');\n    sourceTag.removeAttribute('cv-if');\n    sourceTag.removeAttribute('cv-is');\n    var viewClass = viewProperty ? this.stringToClass(viewProperty) : View;\n    if (ifProperty.substr(0, 1) === '!') {\n      ifProperty = ifProperty.substr(1);\n      inverted = true;\n    }\n    if (ifProperty.substr(0, 1) === '?') {\n      ifProperty = ifProperty.substr(1);\n      defined = true;\n    }\n    var subTemplate = new DocumentFragment();\n    [...sourceTag.childNodes].forEach(n => subTemplate.appendChild(n));\n    var bindingView = this;\n    var ifDoc = new DocumentFragment();\n\n    // let view = new viewClass(Object.assign({}, this.args), bindingView);\n    var view = new viewClass(this.args, bindingView);\n    view.tags.bindTo((v, k) => this.tags[k] = v, {\n      removeWith: this\n    });\n    view.template = subTemplate;\n    var proxy = bindingView.args;\n    var property = ifProperty;\n    if (ifProperty.match(/\\./)) {\n      [proxy, property] = _Bindable.Bindable.resolve(bindingView.args, ifProperty, true);\n    }\n    view.render(ifDoc, null, this);\n    var propertyDebind = proxy.bindTo(property, (v, k) => {\n      var o = v;\n      if (defined) {\n        v = v !== null && v !== undefined;\n      }\n      if (v instanceof _Bag.Bag) {\n        v = v.list;\n      }\n      if (Array.isArray(v)) {\n        v = !!v.length;\n      }\n      if (isProperty !== null) {\n        v = o == isProperty;\n      }\n      if (inverted) {\n        v = !v;\n      }\n      if (v) {\n        tag.appendChild(ifDoc);\n        [...ifDoc.childNodes].forEach(node => _Dom.Dom.mapTags(node, false, (tag, walker) => {\n          if (!tag.matches) {\n            return;\n          }\n          tag.dispatchEvent(new CustomEvent('cvDomAttached', {\n            target: tag,\n            detail: {\n              view: view || this,\n              mainView: this\n            }\n          }));\n        }));\n      } else {\n        view.nodes.forEach(n => ifDoc.appendChild(n));\n        _Dom.Dom.mapTags(ifDoc, false, (tag, walker) => {\n          if (!tag.matches) {\n            return;\n          }\n          new CustomEvent('cvDomDetached', {\n            target: tag,\n            detail: {\n              view: view || this,\n              mainView: this\n            }\n          });\n        });\n      }\n    }, {\n      children: Array.isArray(proxy[property])\n    });\n\n    // const propertyDebind = this.args.bindChain(property, onUpdate);\n\n    bindingView.onRemove(propertyDebind);\n\n    // const debindA = this.args.bindTo((v,k,t,d) => {\n    // \tif(k === '_id')\n    // \t{\n    // \t\treturn;\n    // \t}\n\n    // \tif(!d)\n    // \t{\n    // \t\tview.args[k] = v;\n    // \t}\n    // \telse if(k in view.args)\n    // \t{\n    // \t\tdelete view.args[k];\n    // \t}\n\n    // });\n\n    // const debindB = view.args.bindTo((v,k,t,d,p) => {\n    // \tif(k === '_id' || String(k).substring(0,3) === '___')\n    // \t{\n    // \t\treturn;\n    // \t}\n\n    // \tif(k in this.args)\n    // \t{\n    // \t\tif(!d)\n    // \t\t{\n    // \t\t\tthis.args[k] = v;\n    // \t\t}\n    // \t\telse\n    // \t\t{\n    // \t\t\tdelete this.args[k];\n    // \t\t}\n    // \t}\n    // });\n\n    var viewDebind = () => {\n      propertyDebind();\n      // debindA();\n      // debindB();\n      bindingView._onRemove.remove(propertyDebind);\n      // bindingView._onRemove.remove(bindableDebind);\n    };\n    bindingView.onRemove(viewDebind);\n    this.onRemove(() => {\n      // debindA();\n      // debindB();\n      view.remove();\n      if (bindingView !== this) {\n        bindingView.remove();\n      }\n    });\n    return tag;\n  }\n\n  // compileIfTag(sourceTag)\n  // {\n  // \tlet ifProperty = sourceTag.getAttribute('cv-if');\n  // \tlet inverted   = false;\n\n  // \tsourceTag.removeAttribute('cv-if');\n\n  // \tif(ifProperty.substr(0, 1) === '!')\n  // \t{\n  // \t\tifProperty = ifProperty.substr(1);\n  // \t\tinverted   = true;\n  // \t}\n\n  // \tconst subTemplate = new DocumentFragment;\n\n  // \t[...sourceTag.childNodes].forEach(\n  // \t\tn => subTemplate.appendChild(n.cloneNode(true))\n  // \t);\n\n  // \treturn (bindingView) => {\n\n  // \t\tconst tag = sourceTag.cloneNode();\n\n  // \t\tconst ifDoc = new DocumentFragment;\n\n  // \t\tlet view = new View({}, bindingView);\n\n  // \t\tview.template = subTemplate;\n  // \t\t// view.parent   = bindingView;\n\n  // \t\tbindingView.syncBind(view);\n\n  // \t\tlet proxy    = bindingView.args;\n  // \t\tlet property = ifProperty;\n\n  // \t\tif(ifProperty.match(/\\./))\n  // \t\t{\n  // \t\t\t[proxy, property] = Bindable.resolve(\n  // \t\t\t\tbindingView.args\n  // \t\t\t\t, ifProperty\n  // \t\t\t\t, true\n  // \t\t\t);\n  // \t\t}\n\n  // \t\tlet hasRendered = false;\n\n  // \t\tconst propertyDebind = proxy.bindTo(property, (v,k) => {\n\n  // \t\t\tif(!hasRendered)\n  // \t\t\t{\n  // \t\t\t\tconst renderDoc = (bindingView.args[property] || inverted)\n  // \t\t\t\t\t? tag : ifDoc;\n\n  // \t\t\t\tview.render(renderDoc);\n\n  // \t\t\t\thasRendered = true;\n\n  // \t\t\t\treturn;\n  // \t\t\t}\n\n  // \t\t\tif(Array.isArray(v))\n  // \t\t\t{\n  // \t\t\t\tv = !!v.length;\n  // \t\t\t}\n\n  // \t\t\tif(inverted)\n  // \t\t\t{\n  // \t\t\t\tv = !v;\n  // \t\t\t}\n\n  // \t\t\tif(v)\n  // \t\t\t{\n  // \t\t\t\ttag.appendChild(ifDoc);\n  // \t\t\t}\n  // \t\t\telse\n  // \t\t\t{\n  // \t\t\t\tview.nodes.forEach(n=>ifDoc.appendChild(n));\n  // \t\t\t}\n\n  // \t\t});\n\n  // \t\t// let cleaner = bindingView;\n\n  // \t\t// while(cleaner.parent)\n  // \t\t// {\n  // \t\t// \tcleaner = cleaner.parent;\n  // \t\t// }\n\n  // \t\tbindingView.onRemove(propertyDebind);\n\n  // \t\tlet bindableDebind = () => {\n\n  // \t\t\tif(!proxy.isBound())\n  // \t\t\t{\n  // \t\t\t\tBindable.clearBindings(proxy);\n  // \t\t\t}\n\n  // \t\t};\n\n  // \t\tlet viewDebind = ()=>{\n  // \t\t\tpropertyDebind();\n  // \t\t\tbindableDebind();\n  // \t\t\tbindingView._onRemove.remove(propertyDebind);\n  // \t\t\tbindingView._onRemove.remove(bindableDebind);\n  // \t\t};\n\n  // \t\tview.onRemove(viewDebind);\n\n  // \t\treturn tag;\n  // \t};\n  // }\n\n  mapTemplateTag(tag) {\n    // const templateName = tag.getAttribute('cv-template');\n\n    // tag.removeAttribute('cv-template');\n\n    // this.templates[ templateName ] = tag.tagName === 'TEMPLATE'\n    // \t? tag.cloneNode(true).content\n    // \t: new DocumentFragment(tag.innerHTML);\n\n    var templateName = tag.getAttribute('cv-template');\n    tag.removeAttribute('cv-template');\n    var source = tag.innerHTML;\n    if (!View.templates.has(source)) {\n      View.templates.set(source, document.createRange().createContextualFragment(tag.innerHTML));\n    }\n    this.templates[templateName] = View.templates.get(source);\n    this.postMapping.add(() => tag.remove());\n    return tag;\n  }\n  mapSlotTag(tag) {\n    var templateName = tag.getAttribute('cv-slot');\n    var template = this.templates[templateName];\n    if (!template) {\n      var parent = this;\n      while (parent) {\n        template = parent.templates[templateName];\n        if (template) {\n          break;\n        }\n        parent = parent.parent;\n      }\n      if (!template) {\n        console.error(`Template ${templateName} not found.`);\n        return;\n      }\n    }\n    tag.removeAttribute('cv-slot');\n    while (tag.firstChild) {\n      tag.firstChild.remove();\n    }\n    if (typeof template === 'string') {\n      if (!View.templates.has(template)) {\n        View.templates.set(template, document.createRange().createContextualFragment(template));\n      }\n      template = View.templates.get(template);\n    }\n    tag.appendChild(template.cloneNode(true));\n    return tag;\n  }\n\n  // syncBind(subView)\n  // {\n  // \tlet debindA = this.args.bindTo((v,k,t,d)=>{\n  // \t\tif(k === '_id')\n  // \t\t{\n  // \t\t\treturn;\n  // \t\t}\n\n  // \t\tif(subView.args[k] !== v)\n  // \t\t{\n  // \t\t\tsubView.args[k] = v;\n  // \t\t}\n  // \t});\n\n  // \tlet debindB = subView.args.bindTo((v,k,t,d,p)=>{\n\n  // \t\tif(k === '_id')\n  // \t\t{\n  // \t\t\treturn;\n  // \t\t}\n\n  // \t\tlet newRef = v;\n  // \t\tlet oldRef = p;\n\n  // \t\tif(newRef instanceof View)\n  // \t\t{\n  // \t\t\tnewRef = newRef.___ref___;\n  // \t\t}\n\n  // \t\tif(oldRef instanceof View)\n  // \t\t{\n  // \t\t\toldRef = oldRef.___ref___;\n  // \t\t}\n\n  // \t\tif(newRef !== oldRef && oldRef instanceof View)\n  // \t\t{\n  // \t\t\tp.remove();\n  // \t\t}\n\n  // \t\tif(k in this.args)\n  // \t\t{\n  // \t\t\tthis.args[k] = v;\n  // \t\t}\n\n  // \t});\n\n  // \tthis.onRemove(debindA);\n  // \tthis.onRemove(debindB);\n\n  // \tsubView.onRemove(()=>{\n  // \t\tthis._onRemove.remove(debindA);\n  // \t\tthis._onRemove.remove(debindB);\n  // \t});\n  // }\n\n  postRender(parentNode) {}\n  attached(parentNode) {}\n  interpolatable(str) {\n    return !!String(str).match(this.interpolateRegex);\n  }\n  static uuid() {\n    return new _Uuid.Uuid();\n  }\n  remove(now = false) {\n    if (!this.dispatchEvent(new CustomEvent('remove', {\n      detail: {\n        view: this\n      },\n      cancelable: true\n    }))) {\n      return;\n    }\n    var remover = () => {\n      for (var i in this.tags) {\n        if (Array.isArray(this.tags[i])) {\n          this.tags[i] && this.tags[i].forEach(t => t.remove());\n          this.tags[i].splice(0);\n        } else {\n          this.tags[i] && this.tags[i].remove();\n          this.tags[i] = undefined;\n        }\n      }\n      for (var _i3 in this.nodes) {\n        this.nodes[_i3] && this.nodes[_i3].dispatchEvent(new Event('cvDomDetached'));\n        this.nodes[_i3] && this.nodes[_i3].remove();\n        this.nodes[_i3] = undefined;\n      }\n      this.nodes.splice(0);\n      this.firstNode = this.lastNode = undefined;\n    };\n    if (now) {\n      remover();\n    } else {\n      requestAnimationFrame(remover);\n    }\n    var callbacks = this._onRemove.items();\n    for (var callback of callbacks) {\n      callback();\n      this._onRemove.remove(callback);\n    }\n    for (var cleanup of this.cleanup) {\n      cleanup && cleanup();\n    }\n    this.cleanup.length = 0;\n    for (var [tag, viewList] of this.viewLists) {\n      viewList.remove();\n    }\n    this.viewLists.clear();\n    for (var [_callback5, timeout] of this.timeouts) {\n      clearTimeout(timeout.timeout);\n      this.timeouts.delete(timeout.timeout);\n    }\n    for (var interval of this.intervals) {\n      clearInterval(interval);\n    }\n    this.intervals.length = 0;\n    for (var frame of this.frames) {\n      frame();\n    }\n    this.frames.length = 0;\n    this.preRuleSet.purge();\n    this.ruleSet.purge();\n    this.removed = true;\n    this.dispatchEvent(new CustomEvent('removed', {\n      detail: {\n        view: this\n      },\n      cancelable: true\n    }));\n  }\n  findTag(selector) {\n    for (var i in this.nodes) {\n      var result = void 0;\n      if (!this.nodes[i].querySelector) {\n        continue;\n      }\n      if (this.nodes[i].matches(selector)) {\n        return new _Tag.Tag(this.nodes[i], this, undefined, undefined, this);\n      }\n      if (result = this.nodes[i].querySelector(selector)) {\n        return new _Tag.Tag(result, this, undefined, undefined, this);\n      }\n    }\n  }\n  findTags(selector) {\n    var topLevel = this.nodes.filter(n => n.matches && n.matches(selector));\n    var subLevel = this.nodes.filter(n => n.querySelectorAll).map(n => [...n.querySelectorAll(selector)]).flat().map(n => new _Tag.Tag(n, this, undefined, undefined, this)) || [];\n    return topLevel.concat(subLevel);\n  }\n  onRemove(callback) {\n    if (callback instanceof Event) {\n      return;\n    }\n    this._onRemove.add(callback);\n  }\n  update() {}\n  beforeUpdate(args) {}\n  afterUpdate(args) {}\n  stringTransformer(methods) {\n    return x => {\n      for (var m in methods) {\n        var parent = this;\n        var method = methods[m];\n        while (parent && !parent[method]) {\n          parent = parent.parent;\n        }\n        if (!parent) {\n          return;\n        }\n        x = parent[methods[m]](x);\n      }\n      return x;\n    };\n  }\n  stringToClass(refClassname) {\n    if (View.refClasses.has(refClassname)) {\n      return View.refClasses.get(refClassname);\n    }\n    var refClassSplit = refClassname.split('/');\n    var refShortClass = refClassSplit[refClassSplit.length - 1];\n    var refClass = require(refClassname);\n    View.refClasses.set(refClassname, refClass[refShortClass]);\n    return refClass[refShortClass];\n  }\n  preventParsing(node) {\n    node[dontParse] = true;\n  }\n  toString() {\n    return this.nodes.map(n => n.outerHTML).join(' ');\n  }\n  listen(node, eventName, callback, options) {\n    if (typeof node === 'string') {\n      options = callback;\n      callback = eventName;\n      eventName = node;\n      node = this;\n    }\n    if (node instanceof View) {\n      return this.listen(node.nodes, eventName, callback, options);\n    }\n    if (Array.isArray(node)) {\n      return node.map(n => this.listen(n, eventName, callback, options));\n      // .forEach(r => r());\n    }\n    if (node instanceof _Tag.Tag) {\n      return this.listen(node.element, eventName, callback, options);\n    }\n    node.addEventListener(eventName, callback, options);\n    var remove = () => node.removeEventListener(eventName, callback, options);\n    var remover = () => {\n      remove();\n      remove = () => {};\n    };\n    this.onRemove(() => remover());\n    return remover;\n  }\n  detach() {\n    for (var n in this.nodes) {\n      this.nodes[n].remove();\n    }\n    return this.nodes;\n  }\n}\nexports.View = View;\nObject.defineProperty(View, 'templates', {\n  value: new Map()\n});\nObject.defineProperty(View, 'refClasses', {\n  value: new Map()\n});\n  })();\n});","\nrequire.register(\"curvature/base/ViewList.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ViewList = void 0;\nvar _Bindable = require(\"./Bindable\");\nvar _SetMap = require(\"./SetMap\");\nvar _Bag = require(\"./Bag\");\nclass ViewList {\n  constructor(template, subProperty, list, parent, keyProperty = null, viewClass = null) {\n    this.removed = false;\n    this.args = _Bindable.Bindable.makeBindable(Object.create(null));\n    this.args.value = _Bindable.Bindable.makeBindable(list || Object.create(null));\n    this.subArgs = _Bindable.Bindable.makeBindable(Object.create(null));\n    this.views = [];\n    this.cleanup = [];\n    this.viewClass = viewClass;\n    this._onRemove = new _Bag.Bag();\n    this.template = template;\n    this.subProperty = subProperty;\n    this.keyProperty = keyProperty;\n    this.tag = null;\n    this.downDebind = [];\n    this.upDebind = [];\n    this.paused = false;\n    this.parent = parent;\n    this.viewCount = 0;\n    this.rendered = new Promise((accept, reject) => {\n      Object.defineProperty(this, 'renderComplete', {\n        configurable: false,\n        writable: true,\n        value: accept\n      });\n    });\n    this.willReRender = false;\n    this.args.___before((t, e, s, o, a) => {\n      if (e == 'bindTo') {\n        return;\n      }\n      this.paused = true;\n    });\n    this.args.___after((t, e, s, o, a) => {\n      if (e == 'bindTo') {\n        return;\n      }\n      this.paused = s.length > 1;\n      this.reRender();\n    });\n    var debind = this.args.value.bindTo((v, k, t, d) => {\n      if (this.paused) {\n        return;\n      }\n      var kk = k;\n      if (typeof k === 'symbol') {\n        return;\n      }\n      if (isNaN(k)) {\n        kk = '_' + k;\n      }\n      if (d) {\n        if (this.views[kk]) {\n          this.views[kk].remove(true);\n        }\n        delete this.views[kk];\n        for (var i in this.views) {\n          if (!this.views[i]) {\n            continue;\n          }\n          if (isNaN(i)) {\n            this.views[i].args[this.keyProperty] = i.substr(1);\n            continue;\n          }\n          this.views[i].args[this.keyProperty] = i;\n        }\n      } else if (!this.views[kk]) {\n        if (!this.viewCount) {\n          this.reRender();\n        } else {\n          if (this.willReRender === false) {\n            this.willReRender = requestAnimationFrame(() => {\n              this.willReRender = false;\n              this.reRender();\n            });\n          }\n        }\n      } else if (this.views[kk] && this.views[kk].args) {\n        this.views[kk].args[this.keyProperty] = k;\n        this.views[kk].args[this.subProperty] = v;\n      }\n    }, {\n      wait: 0\n    });\n    this._onRemove.add(debind);\n    Object.preventExtensions(this);\n  }\n  render(tag) {\n    var _this = this;\n    var renders = [];\n    var _loop = function (view) {\n      view.viewList = _this;\n      view.render(tag, null, _this.parent);\n      renders.push(view.rendered.then(() => view));\n    };\n    for (var view of this.views) {\n      _loop(view);\n    }\n    this.tag = tag;\n    Promise.all(renders).then(views => this.renderComplete(views));\n    this.parent.dispatchEvent(new CustomEvent('listRendered', {\n      detail: {\n        detail: {\n          key: this.subProperty,\n          value: this.args.value\n        }\n      }\n    }));\n  }\n  reRender() {\n    var _this2 = this;\n    if (this.paused || !this.tag) {\n      return;\n    }\n    var views = [];\n    var existingViews = new _SetMap.SetMap();\n    for (var i in this.views) {\n      var view = this.views[i];\n      if (view === undefined) {\n        views[i] = view;\n        continue;\n      }\n      var rawValue = view.args[this.subProperty];\n      existingViews.add(rawValue, view);\n      views[i] = view;\n    }\n    var finalViews = [];\n    var finalViewSet = new Set();\n    this.downDebind.length && this.downDebind.forEach(d => d && d());\n    this.upDebind.length && this.upDebind.forEach(d => d && d());\n    this.upDebind.length = 0;\n    this.downDebind.length = 0;\n    var minKey = Infinity;\n    var anteMinKey = Infinity;\n    var _loop2 = function () {\n      var found = false;\n      var k = _i;\n      if (isNaN(k)) {\n        k = '_' + _i;\n      } else if (String(k).length) {\n        k = Number(k);\n      }\n      if (_this2.args.value[_i] !== undefined && existingViews.has(_this2.args.value[_i])) {\n        var existingView = existingViews.getOne(_this2.args.value[_i]);\n        if (existingView) {\n          existingView.args[_this2.keyProperty] = _i;\n          finalViews[k] = existingView;\n          finalViewSet.add(existingView);\n          found = true;\n          if (!isNaN(k)) {\n            minKey = Math.min(minKey, k);\n            k > 0 && (anteMinKey = Math.min(anteMinKey, k));\n          }\n          existingViews.remove(_this2.args.value[_i], existingView);\n        }\n      }\n      if (!found) {\n        var viewArgs = Object.create(null);\n        var _view = finalViews[k] = new _this2.viewClass(viewArgs, _this2.parent);\n        if (!isNaN(k)) {\n          minKey = Math.min(minKey, k);\n          k > 0 && (anteMinKey = Math.min(anteMinKey, k));\n        }\n        finalViews[k].template = _this2.template;\n        finalViews[k].viewList = _this2;\n        finalViews[k].args[_this2.keyProperty] = _i;\n        finalViews[k].args[_this2.subProperty] = _this2.args.value[_i];\n        _this2.upDebind[k] = viewArgs.bindTo(_this2.subProperty, (v, k, t, d) => {\n          var index = viewArgs[_this2.keyProperty];\n          if (d) {\n            delete _this2.args.value[index];\n            return;\n          }\n          _this2.args.value[index] = v;\n        });\n        _this2.downDebind[k] = _this2.subArgs.bindTo((v, k, t, d) => {\n          if (d) {\n            delete viewArgs[k];\n            return;\n          }\n          viewArgs[k] = v;\n        });\n        var upDebind = () => {\n          _this2.upDebind.filter(x => x).forEach(d => d());\n          _this2.upDebind.length = 0;\n        };\n        var downDebind = () => {\n          _this2.downDebind.filter(x => x).forEach(d => d());\n          _this2.downDebind.length = 0;\n        };\n        _view.onRemove(() => {\n          _this2._onRemove.remove(upDebind);\n          _this2._onRemove.remove(downDebind);\n          _this2.upDebind[k] && _this2.upDebind[k]();\n          _this2.downDebind[k] && _this2.downDebind[k]();\n          delete _this2.upDebind[k];\n          delete _this2.downDebind[k];\n        });\n        _this2._onRemove.add(upDebind);\n        _this2._onRemove.add(downDebind);\n        viewArgs[_this2.subProperty] = _this2.args.value[_i];\n      }\n    };\n    for (var _i in this.args.value) {\n      _loop2();\n    }\n    for (var _i2 in views) {\n      if (views[_i2] && !finalViewSet.has(views[_i2])) {\n        views[_i2].remove(true);\n      }\n    }\n    if (Array.isArray(this.args.value)) {\n      var localMin = minKey === 0 && finalViews[1] !== undefined && finalViews.length > 1 || anteMinKey === Infinity ? minKey : anteMinKey;\n      var renderRecurse = (i = 0) => {\n        var ii = finalViews.length - i - 1;\n        while (ii > localMin && finalViews[ii] === undefined) {\n          ii--;\n        }\n        if (ii < localMin) {\n          return Promise.resolve();\n        }\n        if (finalViews[ii] === this.views[ii]) {\n          if (finalViews[ii] && !finalViews[ii].firstNode) {\n            finalViews[ii].render(this.tag, finalViews[ii + 1], this.parent);\n            return finalViews[ii].rendered.then(() => renderRecurse(Number(i) + 1));\n          } else {\n            var split = 500;\n            if (i === 0 || i % split) {\n              return renderRecurse(Number(i) + 1);\n            } else {\n              return new Promise(accept => requestAnimationFrame(() => accept(renderRecurse(Number(i) + 1))));\n            }\n          }\n        }\n        finalViews[ii].render(this.tag, finalViews[ii + 1], this.parent);\n        this.views.splice(ii, 0, finalViews[ii]);\n        return finalViews[ii].rendered.then(() => renderRecurse(i + 1));\n      };\n      this.rendered = renderRecurse();\n    } else {\n      var renders = [];\n      var leftovers = Object.assign(Object.create(null), finalViews);\n      var isInt = x => parseInt(x) === x - 0;\n      var keys = Object.keys(finalViews).sort((a, b) => {\n        if (isInt(a) && isInt(b)) {\n          return Math.sign(a - b);\n        }\n        if (!isInt(a) && !isInt(b)) {\n          return 0;\n        }\n        if (!isInt(a) && isInt(b)) {\n          return -1;\n        }\n        if (isInt(a) && !isInt(b)) {\n          return 1;\n        }\n      });\n      var _loop3 = function (_i3) {\n        delete leftovers[_i3];\n        if (finalViews[_i3].firstNode && finalViews[_i3] === _this2.views[_i3]) {\n          return 1; // continue\n        }\n        finalViews[_i3].render(_this2.tag, null, _this2.parent);\n        renders.push(finalViews[_i3].rendered.then(() => finalViews[_i3]));\n      };\n      for (var _i3 of keys) {\n        if (_loop3(_i3)) continue;\n      }\n      for (var _i4 in leftovers) {\n        delete this.args.views[_i4];\n        leftovers.remove(true);\n      }\n      this.rendered = Promise.all(renders);\n    }\n    for (var _i5 in finalViews) {\n      if (isNaN(_i5)) {\n        finalViews[_i5].args[this.keyProperty] = _i5.substr(1);\n        continue;\n      }\n      finalViews[_i5].args[this.keyProperty] = _i5;\n    }\n    this.views = Array.isArray(this.args.value) ? [...finalViews] : finalViews;\n    this.viewCount = finalViews.length;\n    finalViewSet.clear();\n    this.willReRender = false;\n    this.rendered.then(() => {\n      this.parent.dispatchEvent(new CustomEvent('listRendered', {\n        detail: {\n          detail: {\n            key: this.subProperty,\n            value: this.args.value,\n            tag: this.tag\n          }\n        }\n      }));\n      this.tag.dispatchEvent(new CustomEvent('listRendered', {\n        detail: {\n          detail: {\n            key: this.subProperty,\n            value: this.args.value,\n            tag: this.tag\n          }\n        }\n      }));\n    });\n    return this.rendered;\n  }\n  pause(pause = true) {\n    for (var i in this.views) {\n      this.views[i].pause(pause);\n    }\n  }\n  onRemove(callback) {\n    this._onRemove.add(callback);\n  }\n  remove() {\n    for (var i in this.views) {\n      this.views[i] && this.views[i].remove(true);\n    }\n    var onRemove = this._onRemove.items();\n    for (var _i6 in onRemove) {\n      this._onRemove.remove(onRemove[_i6]);\n      onRemove[_i6]();\n    }\n    var cleanup;\n    while (this.cleanup.length) {\n      cleanup = this.cleanup.pop();\n      cleanup();\n    }\n    this.views = [];\n    while (this.tag && this.tag.firstChild) {\n      this.tag.removeChild(this.tag.firstChild);\n    }\n    if (this.subArgs) {\n      _Bindable.Bindable.clearBindings(this.subArgs);\n    }\n    _Bindable.Bindable.clearBindings(this.args);\n\n    // if(this.args.value && !this.args.value.isBound())\n    // {\n    // \tBindable.clearBindings(this.args.value);\n    // }\n\n    this.removed = true;\n  }\n}\nexports.ViewList = ViewList;\n  })();\n});","\nrequire.register(\"curvature/input/Keyboard.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Keyboard = void 0;\nvar _Bindable = require(\"../base/Bindable\");\nclass Keyboard {\n  static get() {\n    return this.instance = this.instance || _Bindable.Bindable.make(new this());\n  }\n  constructor() {\n    this.maxDecay = 120;\n    this.comboTime = 500;\n    this.listening = false;\n    this.focusElement = document.body;\n    this[_Bindable.Bindable.NoGetters] = true;\n    Object.defineProperty(this, 'combo', {\n      value: _Bindable.Bindable.make([])\n    });\n    Object.defineProperty(this, 'whichs', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'codes', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'keys', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'pressedWhich', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'pressedCode', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'pressedKey', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'releasedWhich', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'releasedCode', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'releasedKey', {\n      value: _Bindable.Bindable.make({})\n    });\n    Object.defineProperty(this, 'keyRefs', {\n      value: _Bindable.Bindable.make({})\n    });\n    document.addEventListener('keyup', event => {\n      if (!this.listening) {\n        return;\n      }\n      if (!(this.keys[event.key] > 0) && this.focusElement && document.activeElement !== this.focusElement && (!this.focusElement.contains(document.activeElement) || document.activeElement.matches('input,textarea'))) {\n        return;\n      }\n      event.preventDefault();\n      this.releasedWhich[event.which] = Date.now();\n      this.releasedCode[event.code] = Date.now();\n      this.releasedKey[event.key] = Date.now();\n      this.whichs[event.which] = -1;\n      this.codes[event.code] = -1;\n      this.keys[event.key] = -1;\n    });\n    document.addEventListener('keydown', event => {\n      if (!this.listening) {\n        return;\n      }\n      if (this.focusElement && document.activeElement !== this.focusElement && (!this.focusElement.contains(document.activeElement) || document.activeElement.matches('input,textarea'))) {\n        return;\n      }\n      event.preventDefault();\n      if (event.repeat) {\n        return;\n      }\n      this.combo.push(event.code);\n      clearTimeout(this.comboTimer);\n      this.comboTimer = setTimeout(() => this.combo.splice(0), this.comboTime);\n      this.pressedWhich[event.which] = Date.now();\n      this.pressedCode[event.code] = Date.now();\n      this.pressedKey[event.key] = Date.now();\n      if (this.keys[event.key] > 0) {\n        return;\n      }\n      this.whichs[event.which] = 1;\n      this.codes[event.code] = 1;\n      this.keys[event.key] = 1;\n    });\n    var windowBlur = event => {\n      for (var i in this.keys) {\n        if (this.keys[i] < 0) {\n          continue;\n        }\n        this.releasedKey[i] = Date.now();\n        this.keys[i] = -1;\n      }\n      for (var _i in this.codes) {\n        if (this.codes[_i] < 0) {\n          continue;\n        }\n        this.releasedCode[_i] = Date.now();\n        this.codes[_i] = -1;\n      }\n      for (var _i2 in this.whichs) {\n        if (this.whichs[_i2] < 0) {\n          continue;\n        }\n        this.releasedWhich[_i2] = Date.now();\n        this.whichs[_i2] = -1;\n      }\n    };\n    window.addEventListener('blur', windowBlur);\n    window.addEventListener('visibilitychange', () => {\n      if (document.visibilityState === 'visible') {\n        return;\n      }\n      windowBlur();\n    });\n  }\n  getKeyRef(keyCode) {\n    var keyRef = this.keyRefs[keyCode] = this.keyRefs[keyCode] || _Bindable.Bindable.make({});\n    return keyRef;\n  }\n  getKeyTime(key) {\n    var released = this.releasedKey[key];\n    var pressed = this.pressedKey[key];\n    if (!pressed) {\n      return 0;\n    }\n    if (!released || released < pressed) {\n      return Date.now() - pressed;\n    }\n    return (Date.now() - released) * -1;\n  }\n  getCodeTime(code) {\n    var released = this.releasedCode[code];\n    var pressed = this.pressedCode[code];\n    if (!pressed) {\n      return 0;\n    }\n    if (!released || released < pressed) {\n      return Date.now() - pressed;\n    }\n    return (Date.now() - released) * -1;\n  }\n  getWhichTime(code) {\n    var released = this.releasedWhich[code];\n    var pressed = this.pressedWhich[code];\n    if (!pressed) {\n      return 0;\n    }\n    if (!released || released < pressed) {\n      return Date.now() - pressed;\n    }\n    return (Date.now() - released) * -1;\n  }\n  getKey(key) {\n    if (!this.keys[key]) {\n      return 0;\n    }\n    return this.keys[key];\n  }\n  getKeyCode(code) {\n    if (!this.codes[code]) {\n      return 0;\n    }\n    return this.codes[code];\n  }\n  reset() {\n    for (var i in this.keys) {\n      delete this.keys[i];\n    }\n    for (var i in this.codes) {\n      delete this.codes[i];\n    }\n    for (var i in this.whichs) {\n      delete this.whichs[i];\n    }\n  }\n  update() {\n    for (var i in this.keys) {\n      if (this.keys[i] > 0) {\n        this.keys[i]++;\n      } else if (this.keys[i] > -this.maxDecay) {\n        this.keys[i]--;\n      } else {\n        delete this.keys[i];\n      }\n    }\n    for (var i in this.codes) {\n      var released = this.releasedCode[i];\n      var pressed = this.pressedCode[i];\n      var keyRef = this.getKeyRef(i);\n      if (this.codes[i] > 0) {\n        keyRef.frames = this.codes[i]++;\n        keyRef.time = pressed ? Date.now() - pressed : 0;\n        keyRef.down = true;\n        if (!released || released < pressed) {\n          return;\n        }\n        return (Date.now() - released) * -1;\n      } else if (this.codes[i] > -this.maxDecay) {\n        keyRef.frames = this.codes[i]--;\n        keyRef.time = released - Date.now();\n        keyRef.down = false;\n      } else {\n        keyRef.frames = 0;\n        keyRef.time = 0;\n        keyRef.down = false;\n        delete this.codes[i];\n      }\n    }\n    for (var i in this.whichs) {\n      if (this.whichs[i] > 0) {\n        this.whichs[i]++;\n      } else if (this.whichs[i] > -this.maxDecay) {\n        this.whichs[i]--;\n      } else {\n        delete this.whichs[i];\n      }\n    }\n  }\n}\nexports.Keyboard = Keyboard;\n  })();\n});","\nrequire.register(\"curvature/mixin/EventTargetMixin.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"curvature\");\n  (function() {\n    \"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventTargetMixin = void 0;\nvar _Mixin = require(\"../base/Mixin\");\nvar EventTargetParent = Symbol('EventTargetParent');\nvar CallHandler = Symbol('CallHandler');\nvar Capture = Symbol('Capture');\nvar Bubble = Symbol('Bubble');\nvar Target = Symbol('Target');\nvar HandlersBubble = Symbol('HandlersBubble');\nvar HandlersCapture = Symbol('HandlersCapture');\nvar EventTargetMixin = exports.EventTargetMixin = {\n  [_Mixin.Mixin.Constructor]() {\n    this[HandlersCapture] = new Map();\n    this[HandlersBubble] = new Map();\n  },\n  dispatchEvent(...args) {\n    var event = args[0];\n    if (typeof event === 'string') {\n      event = new CustomEvent(event);\n      args[0] = event;\n    }\n    event.cvPath = event.cvPath || [];\n    event.cvTarget = event.cvCurrentTarget = this;\n    var result = this[Capture](...args);\n    if (event.cancelable && (result === false || event.cancelBubble)) {\n      return result;\n    }\n    var handlers = [];\n    if (this[HandlersCapture].has(event.type)) {\n      var handlerMap = this[HandlersCapture].get(event.type);\n      var newHandlers = [...handlerMap];\n      newHandlers.forEach(h => h.push(handlerMap));\n      handlers.push(...newHandlers);\n    }\n    if (this[HandlersBubble].has(event.type)) {\n      var _handlerMap = this[HandlersBubble].get(event.type);\n      var _newHandlers = [..._handlerMap];\n      _newHandlers.forEach(h => h.push(_handlerMap));\n      handlers.push(..._newHandlers);\n    }\n    handlers.push([() => this[CallHandler](...args), {}, null]);\n    for (var [handler, options, map] of handlers) {\n      if (options.once) {\n        map.delete(handler);\n      }\n      result = handler(event);\n      if (event.cancelable && result === false) {\n        break;\n      }\n    }\n    if (!event.cancelable || !event.cancelBubble && result !== false) {\n      this[Bubble](...args);\n    }\n    if (!this[EventTargetParent]) {\n      Object.freeze(event.cvPath);\n    }\n    return event.returnValue;\n  },\n  addEventListener(type, callback, options = {}) {\n    if (options === true) {\n      options = {\n        useCapture: true\n      };\n    }\n    var handlers = HandlersBubble;\n    if (options.useCapture) {\n      handlers = HandlersCapture;\n    }\n    if (!this[handlers].has(type)) {\n      this[handlers].set(type, new Map());\n    }\n    this[handlers].get(type).set(callback, options);\n    if (options.signal) {\n      options.signal.addEventListener('abort', event => this.removeEventListener(type, callback, options), {\n        once: true\n      });\n    }\n  },\n  removeEventListener(type, callback, options = {}) {\n    if (options === true) {\n      options = {\n        useCapture: true\n      };\n    }\n    var handlers = HandlersBubble;\n    if (options.useCapture) {\n      handlers = HandlersCapture;\n    }\n    if (!this[handlers].has(type)) {\n      return;\n    }\n    this[handlers].get(type).delete(callback);\n  },\n  [Capture](...args) {\n    var event = args[0];\n    event.cvPath.push(this);\n    if (!this[EventTargetParent]) {\n      return;\n    }\n    var result = this[EventTargetParent][Capture](...args);\n    if (event.cancelable && (result === false || event.cancelBubble)) {\n      return;\n    }\n    if (!this[EventTargetParent][HandlersCapture].has(event.type)) {\n      return;\n    }\n    event.cvCurrentTarget = this[EventTargetParent];\n    var {\n      type\n    } = event;\n    var handlers = this[EventTargetParent][HandlersCapture].get(type);\n    for (var [handler, options] of handlers) {\n      if (options.once) {\n        handlers.delete(handler);\n      }\n      result = handler(event);\n      if (event.cancelable && (result === false || event.cancelBubble)) {\n        break;\n      }\n    }\n    return result;\n  },\n  [Bubble](...args) {\n    var event = args[0];\n    if (!event.bubbles || !this[EventTargetParent] || event.cancelBubble) {\n      return;\n    }\n    if (!this[EventTargetParent][HandlersBubble].has(event.type)) {\n      return this[EventTargetParent][Bubble](...args);\n    }\n    var result;\n    event.cvCurrentTarget = this[EventTargetParent];\n    var {\n      type\n    } = event;\n    var handlers = this[EventTargetParent][HandlersBubble].get(event.type);\n    for (var [handler, options] of handlers) {\n      if (options.once) {\n        handlers.delete(handler);\n      }\n      result = handler(event);\n      if (event.cancelable && result === false) {\n        return result;\n      }\n    }\n    result = this[EventTargetParent][CallHandler](...args);\n    if (event.cancelable && (result === false || event.cancelBubble)) {\n      return result;\n    }\n    return this[EventTargetParent][Bubble](...args);\n  },\n  [CallHandler](...args) {\n    var event = args[0];\n    if (event.defaultPrevented) {\n      return;\n    }\n    var defaultHandler = `on${event.type[0].toUpperCase() + event.type.slice(1)}`;\n    if (typeof this[defaultHandler] === 'function') {\n      return this[defaultHandler](event);\n    }\n  }\n};\nObject.defineProperty(EventTargetMixin, 'Parent', {\n  value: EventTargetParent\n});\n  })();\n});","\nrequire.register(\"import-mapper/ImportMapper.js\", function(exports, require, module) {\n  require = __makeRelativeRequire(require, {}, \"import-mapper\");\n  (function() {\n    const globalImports = globalThis['##IMPORTS##'] = globalThis['##IMPORTS##'] || {};\nconst schema = 'data:application/javascript;charset=utf-8,';\n\nconst processIterable = Symbol('processRequires');\nconst forceDefault    = Symbol('forceDefault');\n\nconst wrapRequire   = (names, path) => schema + encodeURIComponent(`export const { ${names.join(',')} } = globalThis.require(${JSON.stringify(path)});`);\nconst wrapScalar    = (scalar)      => schema + encodeURIComponent(`export default ${JSON.stringify(scalar)};`);\nconst wrapSomething = (names, something) => {\n\tlet type = typeof something;\n\n\tif(names[0] === forceDefault)\n\t{\n\t\ttype = 'default-object';\n\t}\n\n\tconst uuid = crypto.randomUUID();\n\n\tif(type === 'object')\n\t{\n\t\tglobalImports[uuid] = something;\n\t\treturn schema + encodeURIComponent(`export const { ${names.join(',')} } = globalThis['##IMPORTS##']['${uuid}'];`);\n\t}\n\n\tglobalImports[uuid] = something;\n\treturn schema + encodeURIComponent(`export default globalThis['##IMPORTS##']['${uuid}'];`);\n};\n\nmodule.exports.ImportMapper = class ImportMapper\n{\n\tconstructor(imports, options)\n\t{\n\t\tif(imports)\n\t\t{\n\t\t\tif(typeof imports[Symbol.iterator] !== 'function')\n\t\t\t{\n\t\t\t\timports = Object.entries(imports);\n\t\t\t}\n\n\t\t\tObject.assign(this.imports = {}, this[processIterable](imports));\n\t\t}\n\t}\n\n\tadd(name, module)\n\t{\n\t\tthis.imports[name] = module;\n\t}\n\n\tgenerate()\n\t{\n\t\tconst script  = document.createElement('script');\n\t\tconst imports = this.imports;\n\n\t\tscript.setAttribute('type', 'importmap');\n\t\tscript.innerHTML = JSON.stringify({imports}, null, 4);\n\t\treturn script;\n\t}\n\n\tregister()\n\t{\n\t\tconst importMap = this.generate();\n\t\tdocument.head.append(importMap);\n\t\timportMap.remove();\n\t}\n\n\t[processIterable](list)\n\t{\n\t\tconst pairs = [...list].map(path => {\n\n\t\t\tif(Array.isArray(path) && path.length === 2)\n\t\t\t{\n\t\t\t\tlet names = Object.keys(path[1]);\n\n\t\t\t\tif(typeof path[1] === 'object' && path[1][ forceDefault ])\n\t\t\t\t{\n\t\t\t\t\tpath[1] = path[1][ forceDefault ];\n\t\t\t\t\tnames   = [forceDefault];\n\t\t\t\t}\n\n\t\t\t\treturn [path[0], wrapSomething(names, path[1])];\n\t\t\t}\n\n\t\t\tconst stuff = globalThis.require(path);\n\t\t\tconst names = Object.keys(stuff);\n\n\t\t\tif(!names.length)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(typeof stuff === 'object' || typeof stuff === 'function')\n\t\t\t{\n\t\t\t\treturn [path, wrapRequire(names, path)];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn [path, wrapScalar(stuff)];\n\t\t\t}\n\t\t});\n\n\t\treturn Object.fromEntries(pairs.filter(x => x));\n\t}\n\n\tstatic forceDefault(object)\n\t{\n\t\treturn {[forceDefault]: object};\n\t}\n}\n  })();\n});","export class Config {};\n\nConfig.title = 'tigl';\n// Config.\n","class Program\n{\n\tcontext = null;\n\tprogram = null;\n\n\tattributes = {};\n\tbuffers = {};\n\tuniforms = {};\n\n\tconstructor({gl, vertexShader, fragmentShader, uniforms, attributes})\n\t{\n\t\tthis.context = gl;\n\t\tthis.program = gl.createProgram();\n\n\t\tgl.attachShader(this.program, vertexShader);\n\t\tgl.attachShader(this.program, fragmentShader);\n\n\t\tgl.linkProgram(this.program);\n\n\t\tgl.detachShader(this.program, vertexShader);\n\t\tgl.detachShader(this.program, fragmentShader);\n\n\t\tgl.deleteShader(vertexShader);\n\t\tgl.deleteShader(fragmentShader);\n\n\t\tif(!gl.getProgramParameter(this.program, gl.LINK_STATUS))\n\t\t{\n\t\t\tconsole.error(gl.getProgramInfoLog(this.program));\n\t\t\tgl.deleteProgram(this.program);\n\t\t}\n\n\t\tfor(const uniform of uniforms)\n\t\t{\n\t\t\tconst location = gl.getUniformLocation(this.program, uniform);\n\n\t\t\tif(location === null)\n\t\t\t{\n\t\t\t\tconsole.warn(`Uniform ${uniform} not found.`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.uniforms[uniform] = location;\n\t\t}\n\n\t\tfor(const attribute of attributes)\n\t\t{\n\t\t\tconst location = gl.getAttribLocation(this.program, attribute);\n\n\t\t\tif(location === null)\n\t\t\t{\n\t\t\t\tconsole.warn(`Attribute ${attribute} not found.`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst buffer = gl.createBuffer();\n\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n\t\t\tgl.enableVertexAttribArray(location);\n\t\t\tgl.vertexAttribPointer(\n\t\t\t\tlocation\n\t\t\t\t, 2\n\t\t\t\t, gl.FLOAT\n\t\t\t\t, false\n\t\t\t\t, 0\n\t\t\t\t, 0\n\t\t\t);\n\n\t\t\tthis.attributes[attribute] = location;\n\t\t\tthis.buffers[attribute] = buffer;\n\t\t}\n\t}\n\n\tuse()\n\t{\n\t\tthis.context.useProgram(this.program);\n\t}\n\n\tuniformF(name, ...floats)\n\t{\n\t\tconst gl = this.context;\n\t\tgl[`uniform${floats.length}f`](this.uniforms[name], ...floats);\n\t}\n\n\tuniformI(name, ...ints)\n\t{\n\t\tconst gl = this.context;\n\t\tgl[`uniform${ints.length}i`](this.uniforms[name], ...ints);\n\t}\n}\n\nexport class Gl2d\n{\n\tconstructor(element)\n\t{\n\t\tthis.element = element || document.createElement('canvas');\n\t\tthis.context = this.element.getContext('webgl');\n\t}\n\n\tcreateShader(location)\n\t{\n\t\tconst extension = location.substring(location.lastIndexOf('.')+1);\n\t\tlet   type = null;\n\n\t\tswitch(extension.toUpperCase())\n\t\t{\n\t\t\tcase 'VERT':\n\t\t\t\ttype = this.context.VERTEX_SHADER;\n\t\t\t\tbreak;\n\t\t\tcase 'FRAG':\n\t\t\t\ttype = this.context.FRAGMENT_SHADER;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst shader = this.context.createShader(type);\n\t\tconst source = require(location);\n\n\t\tthis.context.shaderSource(shader, source);\n\t\tthis.context.compileShader(shader);\n\n\t\tconst success = this.context.getShaderParameter(\n\t\t\tshader, this.context.COMPILE_STATUS\n\t\t);\n\n\t\tif(success)\n\t\t{\n\t\t\treturn shader;\n\t\t}\n\n\t\tconsole.error(this.context.getShaderInfoLog(shader));\n\n\t\tthis.context.deleteShader(shader);\n\t}\n\n\tcreateProgram({vertexShader, fragmentShader, uniforms, attributes})\n\t{\n\t\tconst gl = this.context;\n\t\treturn new Program({gl, vertexShader, fragmentShader, uniforms, attributes});\n\t}\n\n\tcreateTexture(width, height)\n\t{\n\t\tconst gl = this.context;\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, width\n\t\t\t, height\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, null\n\t\t);\n\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n\t\treturn texture;\n\t}\n\n\tcreateFramebuffer(texture)\n\t{\n\t\tconst gl = this.context;\n\n\t\tconst framebuffer = gl.createFramebuffer();\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\n\t\tgl.framebufferTexture2D(\n\t\t\tgl.FRAMEBUFFER\n\t\t\t, gl.COLOR_ATTACHMENT0\n\t\t\t, gl.TEXTURE_2D\n\t\t\t, texture\n\t\t\t, 0\n\t\t);\n\n\t\treturn framebuffer;\n\t}\n\n\tenableBlending()\n\t{\n\t\tconst gl = this.context;\n\t\tgl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\t\tgl.enable(gl.BLEND);\n\t}\n}\n","import { View as BaseView } from 'curvature/base/View';\nimport { Camera } from '../sprite/Camera';\n\nimport { OnScreenJoyPad } from '../ui/OnScreenJoyPad';\nimport { Keyboard } from 'curvature/input/Keyboard'\n\nimport { Session } from '../session/Session';\nimport { Config } from 'Config';\n\nimport { PlayerController } from '../model/PlayerController';\nimport { BallController } from \"../model/BallController\";\nimport { BarrelController } from \"../model/BarrelController\";\nimport { BoxController } from \"../model/BoxController\";\n\nimport { MapMover } from \"../model/MapMover\";\n\n\nconst Application = {};\n\nApplication.onScreenJoyPad = new OnScreenJoyPad;\nApplication.keyboard = Keyboard.get();\n\nexport class View extends BaseView\n{\n\tconstructor(args)\n\t{\n\t\twindow.smProfiling = true;\n\t\tsuper(args);\n\t\tthis.template  = require('./view.tmp');\n\t\tthis.routes    = [];\n\n\t\tthis.keyboard  = Application.keyboard;\n\t\tthis.speed     = 24;\n\t\tthis.maxSpeed  = this.speed;\n\n\t\tthis.args.joypad = Application.onScreenJoyPad;\n\n\t\tthis.args.fps  = 0;\n\t\tthis.args.sps  = 0;\n\n\t\tthis.args.camX = 0;\n\t\tthis.args.camY = 0;\n\n\t\tthis.args.showEditor = false;\n\n\t\tthis.keyboard.listening = true;\n\n\t\tthis.args.mouseClass = 'mouse-moved';\n\n\t\tthis.keyboard.keys.bindTo('Home', (v,k,t,d)=>{\n\t\t\tif(!this.session || v < 0) return;\n\n\t\t\tif(v % 5 === 0)\n\t\t\t{\n\t\t\t\tthis.session.frameLock++;\n\n\t\t\t\tthis.args.frameLock = this.session.frameLock;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('End', (v,k,t,d)=>{\n\t\t\tif(!this.session || v < 0) return;\n\n\t\t\tif(v % 5 === 0)\n\t\t\t{\n\t\t\t\tthis.session.frameLock--;\n\n\t\t\t\tif(this.session.frameLock < 0)\n\t\t\t\t{\n\t\t\t\t\tthis.session.frameLock = 0;\n\t\t\t\t}\n\n\t\t\t\tthis.args.frameLock = this.session.frameLock;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('PageUp', (v,k,t,d)=>{\n\t\t\tif(!this.session || v < 0) return;\n\n\t\t\tif(v % 5 === 0)\n\t\t\t{\n\t\t\t\tthis.session.simulationLock++;\n\t\t\t}\n\n\t\t\tthis.args.simulationLock = this.session.simulationLock;\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('PageDown', (v,k,t,d)=>{\n\t\t\tif(!this.session || v < 0) return;\n\n\t\t\tif(v % 5 === 0)\n\t\t\t{\n\t\t\t\tthis.session.simulationLock--;\n\n\t\t\t\tif(this.session.simulationLock < 0)\n\t\t\t\t{\n\t\t\t\t\tthis.session.simulationLock = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.args.simulationLock = this.session.simulationLock;\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('=', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.zoom(1);\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('+', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.zoom(1);\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('-', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.zoom(-1);\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('0', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 0;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('1', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 1;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('2', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 2;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('3', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 3;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('4', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 4;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('5', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 5;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('6', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 6;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('7', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 7;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('8', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 8;\n\t\t\t}\n\t\t});\n\n\t\tthis.keyboard.keys.bindTo('9', (v,k,t,d)=>{\n\t\t\tif(v > 0)\n\t\t\t{\n\t\t\t\tthis.session.spriteBoard.renderMode = 9;\n\t\t\t}\n\t\t});\n\n\t}\n\n\tonRendered()\n\t{\n\t\tconst gameDef = {\n\t\t\tworldSrc: '/tile-world.compiled.world'\n\t\t\t, mapPallet: {\n\t\t\t\t'@moving-map': MapMover\n\t\t\t}\n\t\t\t, entityPallet: {\n\t\t\t\t'@basic-platformer': PlayerController\n\t\t\t\t, '@barrel': BarrelController\n\t\t\t\t, '@ball': BallController\n\t\t\t\t, '@box': BoxController\n\t\t\t}\n\t\t};\n\n\t\tthis.session = new Session({\n\t\t\tonScreenJoyPad: this.args.joypad\n\t\t\t, keyboard: this.keyboard\n\t\t\t// , worldSrc: '/tile-world.world'\n\t\t\t, element: this.tags.canvas.element\n\t\t\t, ...gameDef\n\t\t});\n\n\t\tthis.args.frameLock = this.session.frameLock;\n\t\tthis.args.simulationLock = this.session.simulationLock;\n\n\t\twindow.addEventListener('resize', () => this.resize());\n\n\t\tlet fThen = 0;\n\t\tlet sThen = 0;\n\n\t\tconst simulate = now => {\n\n\t\t\tsetTimeout(() => simulate(performance.now()), 0);\n\n\t\t\tif(document.hidden)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!this.session.simulate(now))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.args.sps = (1000 / (now - sThen)).toFixed(3);\n\t\t\tsThen = now;\n\t\t};\n\n\t\tconst draw = now => {\n\n\t\t\twindow.requestAnimationFrame(draw);\n\n\t\t\tif(document.hidden)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!this.session.draw(now))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.args.fps = (1000 / (now - fThen)).toFixed(3);\n\t\t\tthis.args.camX = Number(Camera.x).toFixed(3);\n\t\t\tthis.args.camY = Number(Camera.y).toFixed(3);\n\n\t\t\tfThen = now;\n\n\t\t\tif(this.session.spriteBoard.following)\n\t\t\t{\n\t\t\t\tthis.args.posX = Number(this.session.spriteBoard.following.x).toFixed(3);\n\t\t\t\tthis.args.posY = Number(this.session.spriteBoard.following.y).toFixed(3);\n\t\t\t}\n\t\t};\n\n\t\tthis.session.spriteBoard.zoomLevel = document.body.clientHeight / 1280 * 1.5;\n\t\tthis.resize();\n\n\t\tsimulate(performance.now())\n\t\tdraw(performance.now());\n\t}\n\n\tmousemove()\n\t{\n\t\tthis.args.mouseClass = 'mouse-moved';\n\n\t\tif(this.mouseTimer) clearTimeout(this.mouseTimer);\n\n\t\tthis.mouseTimer = this.onTimeout(500, () => this.args.mouseClass = 'mouse-idle');\n\t}\n\n\tresize(x, y)\n\t{\n\t\tconst oldScale = this.session.spriteBoard.screenScale;\n\n\t\tthis.session.spriteBoard.screenScale = document.body.clientHeight / 1280;\n\t\tthis.session.spriteBoard.zoomLevel *= this.session.spriteBoard.screenScale / oldScale;\n\n\t\tthis.args.width  = this.tags.canvas.element.width   = x || document.body.clientWidth;\n\t\tthis.args.height = this.tags.canvas.element.height  = y || document.body.clientHeight;\n\n\t\tthis.args.rwidth = Math.trunc(\n\t\t\t(x || document.body.clientWidth)  / this.session.spriteBoard.zoomLevel\n\t\t);\n\n\t\tthis.args.rheight = Math.trunc(\n\t\t\t(y || document.body.clientHeight) / this.session.spriteBoard.zoomLevel\n\t\t);\n\n\t\tthis.session.spriteBoard.resize();\n\t}\n\n\tscroll(event)\n\t{\n\t\tthis.zoom(-Math.sign(event.deltaY));\n\t}\n\n\tzoom(delta)\n\t{\n\t\tif(!this.session)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.session.spriteBoard.zoom(delta);\n\t}\n}\n","module.exports = \"<canvas\\n\\tcv-ref = \\\"canvas:curvature/base/Tag\\\"\\n\\tcv-on  = \\\"wheel:scroll(event):p;mousemove\\\"\\n\\tclass  = \\\"[[mouseClass]]\\\"\\n></canvas>\\n\\n<div class = \\\"hud fps\\\">[[sps]] simulations/s / [[simulationLock]]\\n[[fps]] frames/s      / [[frameLock]]\\n\\nRes [[rwidth]] x [[rheight]]\\n    [[width]] x [[height]]\\n\\nCam [[camX]] x [[camY]]\\nPos [[posX]] x [[posY]]\\n\\n Sim:   Pg Up / Dn\\n Frame: Home / End\\n Scale: + / -\\n</div>\\n<div class = \\\"reticle\\\"></div>\\n\\n[[joypad]]\\n\"","import { Router } from 'curvature/base/Router';\nimport { View } from 'home/View';\nimport { ImportMapper } from 'import-mapper/ImportMapper';\n\nconst importMapper = new ImportMapper( globalThis.require.list() );\nconst view = new View();\n\nRouter.listen(view, {\n\t'*': (...args) => {\n\t\t// console.log(args);\n\t}\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\timportMapper.register();\n\tview.render(document.body)\n});\n","import { Injectable } from './Injectable';\n\nexport class Container extends Injectable\n{\n\tinject(injections)\n\t{\n\t\treturn new this.constructor(Object.assign({}, this, injections));\n\t}\n}\n","let classes = {};\nlet objects = {};\n\nexport class Injectable\n{\n\tconstructor()\n\t{\n\t\tlet injections = this.constructor.injections();\n\t\tlet context    = this.constructor.context();\n\n\t\tif(!classes[context])\n\t\t{\n\t\t\tclasses[context] = {};\n\t\t}\n\n\t\tif(!objects[context])\n\t\t{\n\t\t\tobjects[context] = {};\n\t\t}\n\n\t\tfor(let name in injections)\n\t\t{\n\t\t\tlet injection = injections[name];\n\n\t\t\tif(classes[context][name] || !injection.prototype)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(/[A-Z]/.test(String(name)[0]))\n\t\t\t{\n\t\t\t\tclasses[context][name] = injection;\n\t\t\t}\n\n\t\t}\n\n\t\tfor(let name in injections)\n\t\t{\n\t\t\tlet instance  = undefined;\n\t\t\tlet injection = classes[context][name] || injections[name];\n\n\t\t\tif(/[A-Z]/.test(String(name)[0]))\n\t\t\t{\n\t\t\t\tif(injection.prototype)\n\t\t\t\t{\n\t\t\t\t\tif(!objects[context][name])\n\t\t\t\t\t{\n\t\t\t\t\t\tobjects[context][name] = new injection;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tobjects[context][name] = injection;\n\t\t\t\t}\n\n\t\t\t\tinstance = objects[context][name];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(injection.prototype)\n\t\t\t\t{\n\t\t\t\t\tinstance = new injection;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tinstance = injection;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tObject.defineProperty(this, name, {\n\t\t\t\tenumerable: false,\n\t\t\t\twritable:   false,\n\t\t\t\tvalue:      instance\n\t\t\t});\n\t\t}\n\n\t}\n\n\tstatic injections()\n\t{\n\t\treturn {};\n\t}\n\n\tstatic context()\n\t{\n\t\treturn '.';\n\t}\n\n\tstatic inject(injections, context = '.')\n\t{\n\t\tif(!(this.prototype instanceof Injectable || this === Injectable))\n\t\t{\n\t\t\tthrow new Error(`Cannot access injectable subclass!\n\nAre you trying to instantiate like this?\n\n\tnew X.inject({...});\n\nIf so please try:\n\n\tnew (X.inject({...}));\n\nPlease note the parenthesis.\n`);\n\t\t}\n\n\t\tlet existingInjections = this.injections();\n\n\t\treturn class extends this {\n\t\t\tstatic injections()\n\t\t\t{\n\t\t\t\treturn Object.assign({}, existingInjections, injections);\n\t\t\t}\n\t\t\tstatic context()\n\t\t\t{\n\t\t\t\treturn context;\n\t\t\t}\n\t\t};\n\t}\n}\n","class Single\n{\n\tconstructor()\n\t{\n\t\tthis.name = 'sss.' + Math.random();\n\t}\n}\n\nlet single = new Single;\n\nexport {Single, single};","export class Axis\n{\n\tmagnitude = 0;\n\tdelta     = 0;\n\n\tconstructor({deadZone = 0, proportional = true})\n\t{\n\t\tif(deadZone)\n\t\t{\n\t\t\tthis.proportional = proportional;\n\t\t\tthis.deadZone     = deadZone;\n\t\t}\n\t}\n\n\ttilt(magnitude)\n\t{\n\t\tif(this.deadZone && Math.abs(magnitude) >= this.deadZone)\n\t\t{\n\t\t\tmagnitude = (Math.abs(magnitude) - this.deadZone) / (1 - this.deadZone) * Math.sign(magnitude);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmagnitude = 0;\n\t\t}\n\n\t\tthis.delta     = Number(magnitude - this.magnitude).toFixed(3) - 0;\n\t\tthis.magnitude = Number(magnitude).toFixed(3) - 0;\n\t}\n\n\tzero()\n\t{\n\t\tthis.magnitude = this.delta = 0;\n\t}\n}\n","export class Button\n{\n\tactive   = false;\n\n\tpressure = 0;\n\tdelta    = 0;\n\ttime     = 0;\n\n\tupdate(options = {})\n\t{\n\t\tif(this.pressure)\n\t\t{\n\t\t\tthis.time++;\n\t\t}\n\t\telse if(!this.pressure && this.time > 0)\n\t\t{\n\t\t\tthis.time = -1;\n\t\t}\n\t\telse if(!this.pressure && this.time < 0)\n\t\t{\n\t\t\tthis.time--;\n\t\t}\n\n\t\tif(this.time < -1 && this.delta === -1)\n\t\t{\n\t\t\tthis.delta = 0;\n\t\t}\n\t}\n\n\tpress(pressure)\n\t{\n\t\tthis.delta    = Number(pressure - this.pressure).toFixed(3) - 0;\n\t\tthis.pressure = Number(pressure).toFixed(3) - 0;\n\t\tthis.active   = true;\n\t\tthis.time     = this.time > 0 ? this.time : 0;\n\t}\n\n\trelease()\n\t{\n\t\t// if(!this.active)\n\t\t// {\n\t\t// \treturn;\n\t\t// }\n\n\t\tthis.delta    = Number(-this.pressure).toFixed(3) - 0;\n\t\tthis.pressure = 0;\n\t\tthis.active   = false;\n\t}\n\n\tzero()\n\t{\n\t\tthis.pressure = this.delta = 0;\n\t\tthis.active   = false;\n\t}\n}\n","import { Axis } from './Axis';\nimport { Button } from './Button';\n\nconst keys = {\n\t'Space': 0\n\n\t, 'Enter':       0\n\t, 'NumpadEnter': 0\n\n\t, 'ControlLeft':  1\n\t, 'ControlRight': 1\n\n\t, 'ShiftLeft':  2\n\t, 'ShiftRight': 2\n\n\t, 'KeyZ':   3\n\t, 'KeyQ':   4\n\t, 'KeyE':   5\n\n\t, 'Digit1': 6\n\t, 'Digit3': 7\n\n\t, 'KeyBackspace': 8\n\n\t, 'KeyW':  12\n\t, 'KeyA':  14\n\t, 'KeyS':  13\n\t, 'KeyD':  15\n\n\t, 'KeyH': 112\n\t, 'KeyJ': 113\n\t, 'KeyK': 114\n\t, 'KeyL': 115\n\n\t, 'KeyP':  1020\n\t, 'KeyO':  1209\n\t, 'Pause': 1020\n\n\t, 'Tab': 11\n\n\t, 'ArrowUp':    12\n\t, 'ArrowDown':  13\n\t, 'ArrowLeft':  14\n\t, 'ArrowRight': 15\n\n\t, 'KeyMeta': 16\n\n\t, 'Numpad4': 112\n\t, 'Numpad2': 113\n\t, 'Numpad8': 114\n\t, 'Numpad6': 115\n\n\t, 'Backquote':      1010\n\t, 'NumpadAdd':      1011\n\t, 'NumpadSubtract': 1012\n\t, 'NumpadMultiply': 1013\n\t, 'NumpadDivide':   1014\n\n\t, 'PageUp':         1022\n\t, 'PageDown':       1023\n\t, 'Home':           1024\n\t, 'End':            1025\n\n\t, 'Escape':         [1020, 1050]\n\n\t, 'KeyB':           1201\n};\n\n[...Array(12)].map((x,fn) => keys[ `F${fn}` ] = 2000 + fn);\n\nconst axisMap = {\n\t12:   -1\n\t, 13: +1\n\t, 14: -0\n\t, 15: +0\n\n\t, 112: -2\n\t, 113: +3\n\t, 114: -3\n\t, 115: +2\n};\n\nconst buttonMap = {\n\t'-6': 14\n\t, '+6': 15\n\t, '-7': 12\n\t, '+7': 13\n};\n\nconst buttonRemap = {\n\t0:   1200\n\t, 1: 1201\n\t, 9: 1020\n\n\t, 4: 1022\n\t, 5: 1023\n};\n\nexport class Controller\n{\n\tconstructor({keys = {}, deadZone = 0, gamepad = null, keyboard = null})\n\t{\n\t\tthis.deadZone = deadZone;\n\n\t\tObject.defineProperties(this, {\n\t\t\tbuttons:    { value: {} }\n\t\t\t, pressure: { value: {} }\n\t\t\t, axes:     { value: {} }\n\t\t\t, keys:     { value: {} }\n\t\t});\n\t}\n\n\tupdate({gamepad} = {})\n\t{\n\t\tfor(const i in this.buttons)\n\t\t{\n\t\t\tconst button = this.buttons[i];\n\n\t\t\tbutton.update();\n\t\t}\n\n\t\tif(gamepad && this.willRumble)\n\t\t{\n\t\t\t// let vibeFactor = 1;\n\n\t\t\tif(typeof this.willRumble !== 'object')\n\t\t\t{\n\t\t\t\tthis.willRumble = {\n\t\t\t\t\tduration:        1000,\n\t\t\t\t\tstrongMagnitude: 1.0,\n\t\t\t\t\tweakMagnitude:   1.0,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif(gamepad.id && String(gamepad.id).match(/playstation.{0,5}3/i))\n\t\t\t{\n\t\t\t\tif(this.willRumble.duration < 100 && this.willRumble.strongMagnitude < 0.75)\n\t\t\t\t{\n\t\t\t\t\tthis.willRumble.duration = 0;\n\t\t\t\t\tthis.willRumble.weakMagnitude = 0;\n\t\t\t\t\tthis.willRumble.strongMagnitude = 0;\n\t\t\t\t}\n\n\t\t\t\tconst stopVibing = () => {\n\t\t\t\t\tif(this.willRumble)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tgamepad.vibrationActuator.playEffect(\"dual-rumble\", {\n\t\t\t\t\t\tduration: 0, weakMagnitude: 0, strongMagnitude: 0\n\t\t\t\t\t})\n\t\t\t\t};\n\n\t\t\t\tsetTimeout(stopVibing, this.willRumble.duration + -1);\n\t\t\t}\n\n\t\t\t// console.log({...this.willRumble, id: gamepad.id});\n\n\t\t\tif(gamepad.vibrationActuator && gamepad.vibrationActuator.playEffect)\n\t\t\t{\n\t\t\t\tgamepad.vibrationActuator.playEffect(\"dual-rumble\", this.willRumble);\n\t\t\t}\n\n\t\t\tthis.willRumble = false;\n\t\t}\n\t}\n\n\trumble(options = true)\n\t{\n\t\tthis.willRumble = options;\n\t}\n\n\treadInput({keyboard, onScreenJoyPad, gamepads = []})\n\t{\n\t\tconst tilted   = {};\n\t\tconst pressed  = {};\n\t\tconst released = {};\n\n\t\tconst tookInput = new Set;\n\n\t\tfor(let i = 0; i < gamepads.length; i++)\n\t\t{\n\t\t\tconst gamepad = gamepads[i];\n\n\t\t\tif(!gamepad)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor(const i in gamepad.buttons)\n\t\t\t{\n\t\t\t\tconst button = gamepad.buttons[i];\n\n\t\t\t\tif(button.pressed)\n\t\t\t\t{\n\t\t\t\t\tthis.press(i, button.value);\n\n\t\t\t\t\tpressed[i] = true;\n\n\t\t\t\t\ttookInput.add(gamepad);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(keyboard)\n\t\t{\n\t\t\tfor(const i in [...Array(10)])\n\t\t\t{\n\t\t\t\tif(pressed[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(keyboard.getKeyCode(i) > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.press(i, 1);\n\n\t\t\t\t\tpressed[i] = true;\n\n\t\t\t\t\ttookInput.add(keyboard);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(let keycode in keys)\n\t\t\t{\n\t\t\t\tif(pressed[keycode])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet buttonIds = keys[keycode];\n\n\t\t\t\tif(!Array.isArray(buttonIds))\n\t\t\t\t{\n\t\t\t\t\tbuttonIds = keys[keycode] = [buttonIds];\n\t\t\t\t}\n\n\t\t\t\tfor(const buttonId of buttonIds)\n\t\t\t\t{\n\t\t\t\t\tif(keyboard.getKeyCode(keycode) > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.press(buttonId, 1);\n\n\t\t\t\t\t\tpressed[buttonId] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(const gamepad of gamepads)\n\t\t{\n\t\t\tif(!gamepad)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor(const i in gamepad.buttons)\n\t\t\t{\n\t\t\t\tif(released[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(pressed[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst button = gamepad.buttons[i];\n\n\t\t\t\tif(this.buttons[i] && !button.pressed && this.buttons[i].active)\n\t\t\t\t{\n\t\t\t\t\tthis.release(i);\n\n\t\t\t\t\treleased[i] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(keyboard)\n\t\t{\n\t\t\tfor(const i in [...Array(10)])\n\t\t\t{\n\t\t\t\tif(released[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(pressed[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(keyboard.getKeyCode(i) < 0)\n\t\t\t\t{\n\t\t\t\t\tthis.release(i);\n\n\t\t\t\t\treleased[i] = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(let keycode in keys)\n\t\t\t{\n\t\t\t\tlet buttonIds = keys[keycode];\n\n\t\t\t\tif(!Array.isArray(buttonIds))\n\t\t\t\t{\n\t\t\t\t\tbuttonIds = keys[keycode] = [buttonIds];\n\t\t\t\t}\n\n\t\t\t\tfor(const buttonId of buttonIds)\n\t\t\t\t{\n\t\t\t\t\tif(released[buttonId])\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(pressed[buttonId])\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(keyboard.getKeyCode(keycode) < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.release(buttonId);\n\n\t\t\t\t\t\treleased[keycode] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(let i = 0; i < gamepads.length; i++)\n\t\t{\n\t\t\tconst gamepad = gamepads[i];\n\n\t\t\tif(!gamepad)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor(const i in gamepad.axes)\n\t\t\t{\n\t\t\t\tconst axis = gamepad.axes[i];\n\n\t\t\t\tif(Math.abs(axis) < this.deadZone)\n\t\t\t\t{\n\t\t\t\t\tif(!tilted[i])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.tilt(i, 0);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttilted[i] = true;\n\n\t\t\t\tthis.tilt(i, axis);\n\t\t\t}\n\t\t}\n\n\t\tif(onScreenJoyPad)\n\t\t{\n\t\t\tif(Math.abs(onScreenJoyPad.args.x) < this.deadZone)\n\t\t\t{\n\t\t\t\tif(!tilted[0])\n\t\t\t\t{\n\t\t\t\t\tthis.tilt(0, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttilted[0] = true;\n\t\t\t\tthis.tilt(0, onScreenJoyPad.args.x / Math.max(75, onScreenJoyPad.limit));\n\t\t\t}\n\n\n\t\t\tif(Math.abs(onScreenJoyPad.args.y) < this.deadZone)\n\t\t\t{\n\t\t\t\tif(!tilted[1])\n\t\t\t\t{\n\t\t\t\t\tthis.tilt(1, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttilted[1] = true;\n\t\t\t\tthis.tilt(1, onScreenJoyPad.args.y / Math.max(75, onScreenJoyPad.limit));\n\t\t\t}\n\n\t\t\tfor(const i in onScreenJoyPad.buttons)\n\t\t\t{\n\t\t\t\tif(released[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(pressed[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(onScreenJoyPad.buttons[i] === 1)\n\t\t\t\t{\n\t\t\t\t\tthis.press(i)\n\t\t\t\t\tpressed[i] = true;\n\t\t\t\t}\n\t\t\t\telse if(onScreenJoyPad.buttons[i] === -1)\n\t\t\t\t{\n\t\t\t\t\tthis.release(i);\n\t\t\t\t\treleased[i] = true;\n\t\t\t\t\tonScreenJoyPad.buttons[i] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(let inputId in axisMap)\n\t\t{\n\t\t\tif(!this.buttons[inputId])\n\t\t\t{\n\t\t\t\tthis.buttons[inputId] = new Button;\n\t\t\t}\n\n\t\t\tconst axis   = axisMap[ inputId ];\n\t\t\tconst value  = Math.sign(1/axis);\n\t\t\tconst axisId = Math.abs(axis);\n\n\t\t\tif(tilted[axisId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(this.buttons[inputId].active)\n\t\t\t{\n\t\t\t\ttilted[axisId] = true;\n\n\t\t\t\tthis.tilt(axisId, value);\n\t\t\t}\n\t\t\telse if(!tilted[axisId])\n\t\t\t{\n\t\t\t\tthis.tilt(axisId, 0);\n\t\t\t}\n\t\t}\n\n\t\tfor(let axisMove in buttonMap)\n\t\t{\n\t\t\tconst buttonId = buttonMap[axisMove];\n\n\t\t\tif(released[buttonId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(pressed[buttonId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst [move, axisId] = [axisMove.slice(0, 1), axisMove.slice(1)];\n\n\t\t\tif(!this.axes[axisId])\n\t\t\t{\n\t\t\t\tthis.axes[axisId] = new Axis({deadZone:this.deadZone})\n\t\t\t}\n\n\t\t\tconst axis = this.axes[axisId];\n\n\t\t\tif(axis.magnitude && Math.sign(axisMove) !== Math.sign(axis.magnitude))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst pressure = Math.abs(axis.magnitude);\n\n\t\t\tif(pressure)\n\t\t\t{\n\t\t\t\tthis.press(buttonId, pressure);\n\t\t\t\tpressed[buttonId] = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.release(buttonId, pressure);\n\t\t\t\treleased[buttonId] = true;\n\t\t\t}\n\t\t}\n\n\t\tfor(const concreteId in buttonRemap)\n\t\t{\n\t\t\tconst abstractId = buttonRemap[concreteId];\n\n\t\t\tif(released[abstractId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(pressed[abstractId])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(!this.buttons[abstractId])\n\t\t\t{\n\t\t\t\tthis.buttons[abstractId] = new Button;\n\t\t\t}\n\n\t\t\tif(!this.buttons[concreteId])\n\t\t\t{\n\t\t\t\tthis.buttons[concreteId] = new Button;\n\t\t\t}\n\n\t\t\tif(this.buttons[concreteId].active)\n\t\t\t{\n\t\t\t\tthis.press(abstractId, this.buttons[concreteId].pressure);\n\t\t\t\tpressed[abstractId] = true;\n\n\t\t\t}\n\t\t\telse if(!pressed[abstractId])\n\t\t\t{\n\t\t\t\tthis.release(abstractId, this.buttons[concreteId].pressure);\n\t\t\t\treleased[abstractId] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn tookInput;\n\t}\n\n\ttilt(axisId, magnitude)\n\t{\n\t\tif(!this.axes[axisId])\n\t\t{\n\t\t\tthis.axes[axisId] = new Axis({deadZone:this.deadZone});\n\t\t}\n\n\t\tthis.axes[axisId].tilt(magnitude);\n\t}\n\n\tpress(buttonId, pressure = 1)\n\t{\n\t\tif(!this.buttons[buttonId])\n\t\t{\n\t\t\tthis.buttons[buttonId] = new Button;\n\t\t}\n\n\t\tthis.buttons[buttonId].press(pressure);\n\t}\n\n\trelease(buttonId)\n\t{\n\t\tif(!this.buttons[buttonId])\n\t\t{\n\t\t\tthis.buttons[buttonId] = new Button;\n\t\t}\n\n\t\tthis.buttons[buttonId].release();\n\t}\n\n\tserialize()\n\t{\n\t\tconst buttons = {};\n\n\t\tfor(const i in this.buttons)\n\t\t{\n\t\t\tbuttons[i] = this.buttons[i].pressure;\n\t\t}\n\n\t\tconst axes = {};\n\n\t\tfor(const i in this.axes)\n\t\t{\n\t\t\taxes[i] = this.axes[i].magnitude;\n\t\t}\n\n\t\treturn {axes, buttons};\n\t}\n\n\treplay(input)\n\t{\n\t\tif(input.buttons)\n\t\t{\n\t\t\tfor(const i in input.buttons)\n\t\t\t{\n\t\t\t\tif(input.buttons[i] > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.press(i, input.buttons[i]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.release(i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(input.axes)\n\t\t{\n\t\t\tfor(const i in input.axes)\n\t\t\t{\n\t\t\t\tif(input.axes[i].magnitude !== input.axes[i])\n\t\t\t\t{\n\t\t\t\t\tthis.tilt(i, input.axes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tzero()\n\t{\n\t\tfor(const i in this.axes)\n\t\t{\n\t\t\tthis.axes[i].zero();\n\t\t}\n\n\t\tfor(const i in this.buttons)\n\t\t{\n\t\t\tthis.buttons[i].zero();\n\t\t}\n\t}\n\n\tbuttonIsMapped(buttonId)\n\t{\n\t\treturn buttonId in buttonRemap;\n\t}\n\n\tkeyIsMapped(keyCode)\n\t{\n\t\treturn keyCode in keys;\n\t}\n}\n","export class Geometry\n{\n\tstatic lineIntersectsLine(x1a, y1a, x2a, y2a, x1b, y1b, x2b, y2b)\n\t{\n\t\tconst ax = x2a - x1a;\n\t\tconst ay = y2a - y1a;\n\n\t\tconst bx = x2b - x1b;\n\t\tconst by = y2b - y1b;\n\n\t\tconst crossProduct = ax * by - ay * bx;\n\n\t\t// Parallel Lines cannot intersect\n\t\tif(crossProduct === 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst cx = x1b - x1a;\n\t\tconst cy = y1b - y1a;\n\n\t\t// Is our point within the bounds of line a?\n\t\tconst d = (cx * ay - cy * ax) / crossProduct;\n\t\tif(d < 0 || d > 1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\t// Is our point within the bounds of line b?\n\t\tconst t = (cx * by - cy * bx) / crossProduct;\n\t\tif(t < 0 || t > 1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst x = x1a + t * ax;\n\t\tconst y = y1a + t * ay;\n\n\t\treturn [x, y, t];\n\t}\n}\n","export class Matrix\n{\n\tstatic identity()\n\t{\n\t\treturn [\n\t\t\t[1, 0, 0],\n\t\t\t[0, 1, 0],\n\t\t\t[0, 0, 1],\n\t\t];\n\t}\n\n\tstatic translate(dx, dy)\n\t{\n\t\treturn [\n\t\t\t[1, 0, dx],\n\t\t\t[0, 1, dy],\n\t\t\t[0, 0,  1],\n\t\t];\n\t}\n\n\tstatic scale(dx, dy)\n\t{\n\t\treturn [\n\t\t\t[dx, 0, 0],\n\t\t\t[0, dy, 0],\n\t\t\t[0, 0,  1],\n\t\t];\n\t}\n\n\tstatic rotate(theta)\n\t{\n\t\tconst s = Math.sin(theta);\n\t\tconst c = Math.cos(theta);\n\n\t\treturn [\n\t\t\t[c, -s, 0],\n\t\t\t[s,  c, 0],\n\t\t\t[0,  0, 1],\n\t\t];\n\t}\n\n\tstatic shearX(s)\n\t{\n\t\treturn [\n\t\t\t[1, s, 0],\n\t\t\t[0, 1, 0],\n\t\t\t[0, 0, 1],\n\t\t];\n\t}\n\n\tstatic shearY(s)\n\t{\n\t\treturn [\n\t\t\t[1, 0, 0],\n\t\t\t[s, 1, 0],\n\t\t\t[0, 0, 1],\n\t\t];\n\t}\n\n\tstatic multiply(matA, matB)\n\t{\n\t\tif(matA.length !== matB.length)\n\t\t{\n\t\t\tthrow new Error('Invalid matrices');\n\t\t}\n\n\t\tif(matA[0].length !== matB.length)\n\t\t{\n\t\t\tthrow new Error('Incompatible matrices');\n\t\t}\n\n\t\tconst output = Array(matA.length).fill().map(() => Array(matB[0].length).fill(0));\n\n\t\tfor(let i = 0; i < matA.length; i++)\n\t\t{\n\t\t\tfor(let j = 0; j < matB[0].length; j++)\n\t\t\t{\n\t\t\t\tfor(let k = 0; k < matA[0].length; k++)\n\t\t\t\t{\n\t\t\t\t\toutput[i][j] += matA[i][k] * matB[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tstatic composite(...mats)\n\t{\n\t\tlet output = this.identity();\n\n\t\tfor(let i = 0; i < mats.length; i++)\n\t\t{\n\t\t\toutput = this.multiply(output, mats[i]);\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tstatic transform(points, matrix)\n\t{\n\t\tconst output = [];\n\n\t\tfor(let i = 0; i < points.length; i += 2)\n\t\t{\n\t\t\tconst point = [points[i], points[i + 1], 1];\n\n\t\t\tfor(const row of matrix)\n\t\t\t{\n\t\t\t\toutput.push(\n\t\t\t\t\tpoint[0] * row[0]\n\t\t\t\t\t+ point[1] * row[1]\n\t\t\t\t\t+ point[2] * row[2]\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\treturn new Float32Array(output.filter((_, k) => (1 + k) % 3));\n\t}\n}\n","import { Entity } from \"../model/Entity\";\nimport { Region } from \"../sprite/Region\";\n\nexport class MotionGraph\n{\n\tstatic globalMap = new WeakMap;\n\tbackmap = new WeakMap;\n\tentities = new Map;\n\n\tadd(entity, parent)\n\t{\n\t\tif(this.backmap.has(entity))\n\t\t{\n\t\t\tthis.entities.get(this.backmap.get(entity)).delete(entity);\n\t\t}\n\n\t\tif(!this.entities.has(parent))\n\t\t{\n\t\t\tthis.entities.set(parent, new Set());\n\t\t}\n\n\t\tthis.entities.get(parent).add(entity);\n\t\tthis.backmap.set(entity, parent);\n\n\t\tif(!this.constructor.globalMap.has(entity))\n\t\t{\n\t\t\tthis.constructor.globalMap.set(entity, new Set);\n\t\t}\n\n\t\tthis.constructor.globalMap.get(entity).add(this);\n\t}\n\n\tgetParent(entity)\n\t{\n\t\treturn this.backmap.get(entity);\n\t}\n\n\tdelete(entity)\n\t{\n\t\tif(!this.backmap.has(entity))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.entities.get(this.backmap.get(entity)).delete(entity);\n\t\tthis.backmap.delete(entity);\n\t}\n\n\tstatic deleteFromAllGraphs(entity)\n\t{\n\t\tif(!this.globalMap.has(entity))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst graphs = this.globalMap.get(entity);\n\n\t\tfor(const graph of graphs)\n\t\t{\n\t\t\tgraph.delete(entity);\n\t\t}\n\t}\n\n\tmoveChildren(entity, x, y)\n\t{\n\t\tif(!this.entities.has(entity))\n\t\t{\n\t\t\treturn new Set;\n\t\t}\n\n\t\tif(x === 0 && y === 0)\n\t\t{\n\t\t\treturn new Set;\n\t\t}\n\n\t\tlet children = this.entities.get(entity);\n\n\t\tfor(const child of children)\n\t\t{\n\t\t\tif(entity.session.removed.has(child))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst maps = entity.session.world.getMapsForPoint(child.x, child.y);\n\n\t\t\tif(child instanceof Entity)\n\t\t\t{\n\t\t\t\tchild.x += x;\n\t\t\t\tchild.y += y;\n\t\t\t\tmaps.forEach(map => map.moveEntity(child));\n\t\t\t}\n\t\t\telse if(child instanceof Region)\n\t\t\t{\n\t\t\t\tchild.move(x, y);\n\t\t\t\tmaps.forEach(map => map.regionTree.move(child.rect));\n\t\t\t}\n\n\t\t\tthis.moveChildren(child, x, y);\n\t\t}\n\n\t\treturn children;\n\t}\n}","import { Bindable } from \"curvature/base/Bindable\";\nimport { Rectangle } from \"./Rectangle\";\n\nexport class QuadTree extends Rectangle\n{\n\tconstructor(x1, y1, x2, y2, minSize = 0, parent = null)\n\t{\n\t\tsuper(x1, y1, x2, y2);\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.count = 0;\n\t\tthis.items = new Set;\n\t\tthis.split = false;\n\t\tthis.minSize = minSize || 10;\n\t\tthis.backMap = parent ? parent.backMap : new Map\n\t\tthis.parent = parent;\n\t\tthis.root = parent ? parent.root : this;\n\n\t\tthis.ulCell = null;\n\t\tthis.urCell = null;\n\t\tthis.blCell = null;\n\t\tthis.brCell = null;\n\n\t}\n\n\tadd(entity, xOffset = 0, yOffset = 0)\n\t{\n\t\tif(!this.contains(entity.x + xOffset, entity.y + yOffset))\n\t\t{\n\t\t\tif(!this.parent)\n\t\t\t{\n\t\t\t\tconsole.warn('No QuadTree cell found!');\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tconst xSize = this.x2 - this.x1;\n\t\tconst ySize = this.y2 - this.y1;\n\n\t\tif(this.split)\n\t\t{\n\t\t\treturn this.ulCell.add(entity, xOffset, yOffset)\n\t\t\t\t|| this.urCell.add(entity, xOffset, yOffset)\n\t\t\t\t|| this.blCell.add(entity, xOffset, yOffset)\n\t\t\t\t|| this.brCell.add(entity, xOffset, yOffset);\n\t\t}\n\t\telse if(this.items.size && xSize > this.minSize && ySize > this.minSize)\n\t\t{\n\t\t\tthis.split  = true;\n\n\t\t\tconst xSizeHalf = 0.5 * xSize;\n\t\t\tconst ySizeHalf = 0.5 * ySize;\n\n\t\t\tthis.ulCell = new QuadTree(\n\t\t\t\tthis.x1\n\t\t\t\t, this.y1\n\t\t\t\t, this.x1 + xSizeHalf\n\t\t\t\t, this.y1 + ySizeHalf\n\t\t\t\t, this.minSize\n\t\t\t\t, this\n\t\t\t);\n\n\t\t\tthis.blCell = new QuadTree(\n\t\t\t\tthis.x1\n\t\t\t\t, this.y1 + ySizeHalf\n\t\t\t\t, this.x1 + xSizeHalf\n\t\t\t\t, this.y2\n\t\t\t\t, this.minSize\n\t\t\t\t, this\n\t\t\t);\n\n\t\t\tthis.urCell = new QuadTree(\n\t\t\t\tthis.x1 + xSizeHalf\n\t\t\t\t, this.y1\n\t\t\t\t, this.x2\n\t\t\t\t, this.y1 + ySizeHalf\n\t\t\t\t, this.minSize\n\t\t\t\t, this\n\t\t\t);\n\n\t\t\tthis.brCell = new QuadTree(\n\t\t\t\tthis.x1 + xSizeHalf\n\t\t\t\t, this.y1 + ySizeHalf\n\t\t\t\t, this.x2\n\t\t\t\t, this.y2\n\t\t\t\t, this.minSize\n\t\t\t\t, this\n\t\t\t);\n\n\t\t\tlet parent = this;\n\t\t\twhile(parent)\n\t\t\t{\n\t\t\t\tparent.count -= this.items.size;\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\n\t\t\tfor(const item of this.items)\n\t\t\t{\n\t\t\t\tlet parent = this;\n\t\t\t\tlet added = false;\n\n\t\t\t\twhile(parent)\n\t\t\t\t{\n\t\t\t\t\tadded = parent.ulCell.add(item, xOffset, yOffset)\n\t\t\t\t\t\t||  parent.urCell.add(item, xOffset, yOffset)\n\t\t\t\t\t\t||  parent.blCell.add(item, xOffset, yOffset)\n\t\t\t\t\t\t||  parent.brCell.add(item, xOffset, yOffset);\n\t\t\t\t\tif(added) break;\n\t\t\t\t\tparent = parent.parent;\n\t\t\t\t}\n\n\t\t\t\tif(!added)\n\t\t\t\t{\n\t\t\t\t\tthis.root.onBadSplit(item);\n\t\t\t\t}\n\n\t\t\t\tthis.items.delete(item);\n\t\t\t}\n\n\t\t\treturn this.ulCell.add(entity, xOffset, yOffset)\n\t\t\t\t|| this.urCell.add(entity, xOffset, yOffset)\n\t\t\t\t|| this.blCell.add(entity, xOffset, yOffset)\n\t\t\t\t|| this.brCell.add(entity, xOffset, yOffset);\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(!this.items.has(entity))\n\t\t\t{\n\t\t\t\tlet parent = this;\n\t\t\t\twhile(parent)\n\t\t\t\t{\n\t\t\t\t\tparent.count++;\n\t\t\t\t\tparent = parent.parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.backMap.set(entity, this);\n\t\t\tthis.items.add(entity);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tmove(entity, xOffset = 0, yOffset = 0)\n\t{\n\t\tif(!this.backMap.has(entity))\n\t\t{\n\t\t\t// console.warn('Entity not in QuadTree.');\n\t\t\treturn this.add(entity, xOffset, yOffset);\n\t\t}\n\n\t\tconst startCell = this.backMap.get(entity);\n\n\t\tlet cell = startCell;\n\t\twhile(cell && !cell.contains(entity.x + xOffset, entity.y + yOffset))\n\t\t{\n\t\t\tcell = cell.parent;\n\t\t}\n\n\t\tif(!cell)\n\t\t{\n\t\t\tconsole.warn('No QuadTree cell found!');\n\t\t\tstartCell.delete(entity);\n\t\t\treturn false;\n\t\t}\n\n\t\tif(cell !== startCell)\n\t\t{\n\t\t\tstartCell.delete(entity);\n\t\t\tcell.add(entity, xOffset, yOffset);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdelete(entity)\n\t{\n\t\tif(!this.backMap.has(entity))\n\t\t{\n\t\t\tconsole.warn('Entity not in QuadTree.');\n\t\t\treturn false;\n\t\t}\n\n\t\tconst cell = this.backMap.get(entity);\n\t\tthis.backMap.delete(entity);\n\t\tcell.items.delete(entity);\n\n\t\tif(cell.parent)\n\t\t{\n\t\t\tcell.parent.prune();\n\t\t}\n\n\t\tlet parent = cell;\n\t\twhile(parent)\n\t\t{\n\t\t\tparent.count--;\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisPrunable()\n\t{\n\t\tif(this.split)\n\t\t{\n\t\t\treturn this.ulCell.isPrunable()\n\t\t\t\t&& this.urCell.isPrunable()\n\t\t\t\t&& this.blCell.isPrunable()\n\t\t\t\t&& this.brCell.isPrunable();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.items.size === 0;\n\t\t}\n\t}\n\n\tprune()\n\t{\n\t\tif(!this.isPrunable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.split = false;\n\n\t\tthis.ulCell = null;\n\t\tthis.urCell = null;\n\t\tthis.blCell = null;\n\t\tthis.brCell = null;\n\n\t\treturn true;\n\t}\n\n\tfindLeaf(x, y)\n\t{\n\t\tif(!this.contains(x, y))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif(!this.split)\n\t\t{\n\t\t\treturn this;\n\t\t}\n\n\t\treturn this.ulCell.findLeaf(x, y)\n\t\t\t?? this.urCell.findLeaf(x, y)\n\t\t\t?? this.blCell.findLeaf(x, y)\n\t\t\t?? this.brCell.findLeaf(x, y);\n\t}\n\n\thas(entity)\n\t{\n\t\tif(this.split)\n\t\t{\n\t\t\treturn this.ulCell.has(entity)\n\t\t\t\t|| this.urCell.has(entity)\n\t\t\t\t|| this.blCell.has(entity)\n\t\t\t\t|| this.brCell.has(entity);\n\t\t}\n\n\t\treturn this.items.has(entity);\n\t}\n\n\tselect(x1, y1, x2, y2)\n\t{\n\t\tif(x1 > this.x2 || x2 < this.x1)\n\t\t{\n\t\t\treturn new Set;\n\t\t}\n\n\t\tif(y1 > this.y2 || y2 < this.y1)\n\t\t{\n\t\t\treturn new Set;\n\t\t}\n\n\t\tif(this.split)\n\t\t{\n\t\t\treturn new Set([\n\t\t\t\t...this.ulCell.select(x1, y1, x2, y2)\n\t\t\t\t, ...this.urCell.select(x1, y1, x2, y2)\n\t\t\t\t, ...this.blCell.select(x1, y1, x2, y2)\n\t\t\t\t, ...this.brCell.select(x1, y1, x2, y2)\n\t\t\t]);\n\t\t}\n\n\t\treturn new Set(this.items);\n\t}\n\n\tdump()\n\t{\n\t\tif(this.split)\n\t\t{\n\t\t\treturn new Set([\n\t\t\t\t...this.ulCell.dump()\n\t\t\t\t, ...this.urCell.dump()\n\t\t\t\t, ...this.blCell.dump()\n\t\t\t\t, ...this.brCell.dump()\n\t\t\t]);\n\t\t}\n\n\t\treturn new Set(this.items);\n\t}\n\n\tonBadSplit(item)\n\t{\n\t\tconsole.warn('Bad split!', item);\n\t}\n}\n","import { QuadTree } from \"./QuadTree\";\nimport { Rectangle } from \"./Rectangle\";\n\nconst registry = new WeakMap();\n\nexport class QuickTree extends QuadTree\n{\n\tstatic deleteFromAllTrees(entity)\n\t{\n\t\tif(!registry.has(entity))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tregistry.get(entity).forEach(tree => tree.delete(entity));\n\t}\n\n\tadd(entity, xOffset = 0, yOffset = 0)\n\t{\n\t\tif(!super.add(entity, xOffset, yOffset))\n\t\t{\n\t\t\tif(!this.parent)\n\t\t\t{\n\t\t\t\tconsole.warn('Failed to add object to QuickTree.');\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif(!registry.has(entity))\n\t\t{\n\t\t\tregistry.set(entity, new Set());\n\t\t}\n\n\t\tregistry.get(entity).add(this);\n\t}\n\n\tdelete(entity)\n\t{\n\t\tif(!super.delete(entity))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(registry.has(entity))\n\t\t{\n\t\t\tregistry.get(entity).delete(this);\n\t\t}\n\t}\n\n\tselect(x1, y1, x2, y2, xO = 0, yO = 0)\n\t{\n\t\tconst selectRect = new Rectangle(x1, y1, x2, y2);\n\t\tconst result = super.select(x1, y1, x2, y2);\n\n\t\tfor(const entity of result)\n\t\t{\n\t\t\tif(!selectRect.contains(entity.x + xO, entity.y + yO))\n\t\t\t{\n\t\t\t\tresult.delete(entity);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tonBadSplit(item)\n\t{\n\t\tif(item.session && item.session.world)\n\t\t{\n\t\t\tconst maps = item.session.world.getMapsForPoint(item.x, item.y);\n\t\t\tmaps.forEach(map => console.log(map.moveEntity(item)));\n\n\t\t\tif(!maps.size)\n\t\t\t{\n\t\t\t\tconsole.warn('Bad split!', item);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Geometry } from \"./Geometry\";\n\nexport class Ray\n{\n\tstatic T_LAST_EMPTY  = 0b0000_0001;\n\tstatic T_ALL_POINTS  = 0b0000_0010;\n\tstatic T_SNAP_TO_INT = 0b0000_0100;\n\tstatic T_GET_LENGTH  = 0b0000_1000;\n\n\tstatic E_NO_MINK     = 0b0001_0000;\n\n\t// static E_ALL_ENTITIES = 0b0000_0001_0000_0000;\n\n\tstatic DEFAULT_FLAGS = 0b0000_0000;\n\n\tstatic cast(world, startX, startY, angle, length = 320, rayFlags = this.DEFAULT_FLAGS, layerId)\n\t{\n\t\tconst terrain = this.castTerrain(world, startX, startY, angle, length, rayFlags, layerId);\n\t\tconst entities = this.castEntity(world, startX, startY, angle, length, rayFlags);\n\n\t\treturn {terrain, entities};\n\t}\n\n\tstatic castEntity(world, startX, startY, angle, length = 320, rayFlags = this.DEFAULT_FLAGS, castingEntity = null)\n\t{\n\t\tconst cos = Math.cos(angle);\n\t\tconst sin = Math.sin(angle);\n\n\t\tconst endX = startX + (Math.abs(cos) > Number.EPSILON ? cos : 0) * length;\n\t\tconst endY = startY + (Math.abs(sin) > Number.EPSILON ? sin : 0) * length;\n\n\t\tconst centerX = (startX + endX) * 0.5;\n\t\tconst centerY = (startY + endY) * 0.5;\n\n\t\tconst sizeX = Math.max(320, Math.abs(startX - endX));\n\t\tconst sizeY = Math.max(320, Math.abs(startY - endY));\n\n\t\tconst candidates = world.getEntitiesForRect(centerX, centerY, sizeX, sizeY);\n\t\tconst collisions = new Map;\n\n\t\tfor(const candidate of candidates)\n\t\t{\n\t\t\tif(candidate === castingEntity)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet rect = candidate.rect;\n\n\t\t\tif(castingEntity && !(rayFlags & this.E_NO_MINK))\n\t\t\t{\n\t\t\t\trect = rect.expand(castingEntity.rect);\n\t\t\t}\n\n\t\t\tif(rect.contains(startX, startY))\n\t\t\t{\n\t\t\t\tcollisions.set(candidate, [startX, startY, 0, 0]);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst points = rect.toLines();\n\n\t\t\tfor(let i = 0; i < points.length; i += 4)\n\t\t\t{\n\t\t\t\tconst x1 = points[i + 0];\n\t\t\t\tconst y1 = points[i + 1];\n\t\t\t\tconst x2 = points[i + 2];\n\t\t\t\tconst y2 = points[i + 3];\n\n\t\t\t\tconst intersection = Geometry.lineIntersectsLine(x1, y1, x2, y2, startX, startY, endX, endY);\n\n\t\t\t\tif(intersection)\n\t\t\t\t{\n\t\t\t\t\tif(collisions.has(candidate))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst existing = collisions.get(candidate);\n\n\t\t\t\t\t\tif(intersection[2] < existing[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcollisions.set(candidate, intersection);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcollisions.set(candidate, intersection);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn collisions;\n\t}\n\n\tstatic castTerrain(world, startX, startY, angle, length = 320, rayFlags = this.DEFAULT_FLAGS, layerId = 0)\n\t{\n\t\tlength = Math.ceil(length);\n\n\t\tconst cos = Math.cos(angle);\n\t\tconst sin = Math.sin(angle);\n\n\t\tconst endX = startX + (Math.abs(cos) > Number.EPSILON ? cos : 0) * length;\n\t\tconst endY = startY + (Math.abs(sin) > Number.EPSILON ? sin : 0) * length;\n\n\t\tconst bs = 32;\n\n\t\tconst dx = endX - startX;\n\t\tconst dy = endY - startY;\n\n\t\tconst ox = Math.sign(dx);\n\t\tconst oy = Math.sign(dy);\n\n\t\tconst sx = dx ? Math.hypot(1, (dy / dx)) : 0;\n\t\tconst sy = dy ? Math.hypot(1, (dx / dy)) : 0;\n\n\t\tlet currentDistance = 0;\n\n\t\tif(world.getSolid(startX, startY, layerId))\n\t\t{\n\t\t\tif(rayFlags & this.T_GET_LENGTH)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn [startX, startY];\n\t\t}\n\n\t\tconst startTile = world.getCollisionTile(startX, startY, layerId);\n\n\t\tconst initMode = startTile === null ? 0 : 1;\n\n\t\tlet modeX = initMode;\n\t\tlet modeY = initMode;\n\n\t\tlet oldModeX = false;\n\t\tlet oldModeY = false;\n\n\t\tlet bf = initMode ? 1 : 1;\n\n\t\tconst ax = ox > 0 ? (bs - startX % bs) : ((startX % bs) + 1);\n\t\tconst ay = oy > 0 ? (bs - startY % bs) : ((startY % bs) + 1);\n\n\t\tlet checkX = initMode ? 0 : ax;\n\t\tlet checkY = initMode ? 0 : ay;\n\n\t\tlet rayX = checkX * sx * ox;\n\t\tlet rayY = checkY * sy * oy;\n\n\t\tconst solidsX = new Set;\n\t\tconst solidsY = new Set;\n\n\t\tlet iterations = 0;\n\t\twhile(Math.abs(currentDistance) < length && !solidsX.size && !solidsY.size)\n\t\t{\n\t\t\tif(ox && (!oy || Math.abs(rayX) < Math.abs(rayY)))\n\t\t\t{\n\t\t\t\tconst mag = Math.abs(rayX);\n\n\t\t\t\tlet px = (startX + mag * cos);\n\t\t\t\tlet py = (startY + mag * sin);\n\n\t\t\t\tif(ox >= 0 && px % 1 > 0.99999) px = Math.round(px);\n\t\t\t\tif(oy >= 0 && py % 1 > 0.99999) py = Math.round(py);\n\t\t\t\tif(ox <= 0 && px % 1 < 0.00001) px = Math.round(px);\n\t\t\t\tif(oy <= 0 && py % 1 < 0.00001) py = Math.round(py);\n\n\t\t\t\toldModeX = modeX;\n\t\t\t\tmodeX = world.getCollisionTile(px, py, layerId);\n\t\t\t\tbf = modeX ? 1:bs;\n\n\t\t\t\tif(!modeX && oldModeX)\n\t\t\t\t{\n\t\t\t\t\tbf = ox < 0\n\t\t\t\t\t\t? ((startX + -checkX + 1) % bs)\n\t\t\t\t\t\t: (bs - ((startX + checkX) % bs));\n\t\t\t\t}\n\n\t\t\t\tif(world.getSolid(px, py, layerId))\n\t\t\t\t{\n\t\t\t\t\tsolidsX.add([px, py]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcurrentDistance = Math.abs(rayX);\n\t\t\t\tcheckX += bf;\n\t\t\t\trayX = checkX * sx * ox;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst mag = Math.abs(rayY);\n\n\t\t\t\tlet px = (startX + mag * cos);\n\t\t\t\tlet py = (startY + mag * sin);\n\n\t\t\t\tif(ox >= 0 && px % 1 > 0.99999) px = Math.round(px);\n\t\t\t\tif(oy >= 0 && py % 1 > 0.99999) py = Math.round(py);\n\t\t\t\tif(ox <= 0 && px % 1 < 0.00001) px = Math.round(px);\n\t\t\t\tif(oy <= 0 && py % 1 < 0.00001) py = Math.round(py);\n\n\t\t\t\toldModeY = modeY;\n\t\t\t\tmodeY = world.getCollisionTile(px, py, layerId)\n\n\t\t\t\tbf = modeY ? 1:bs;\n\n\t\t\t\tif(!modeY && oldModeY)\n\t\t\t\t{\n\t\t\t\t\tbf = oy < 0\n\t\t\t\t\t\t? ((startY + -checkY + 1) % bs)\n\t\t\t\t\t\t: (bs - ((startY + checkY) % bs));\n\t\t\t\t}\n\n\t\t\t\tif(world.getSolid(px, py, layerId))\n\t\t\t\t{\n\t\t\t\t\tsolidsY.add([px, py]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcurrentDistance = Math.abs(rayY);\n\t\t\t\tcheckY += bf;\n\t\t\t\trayY = checkY * sy * oy;\n\t\t\t}\n\n\t\t\titerations++;\n\t\t}\n\n\t\tconst points = [...solidsX, ...solidsY];\n\n\t\tif(rayFlags & this.T_ALL_POINTS)\n\t\t{\n\t\t\treturn new solidsX.union(solidsY);\n\t\t}\n\n\t\tconst distSquares = points.map(s => (s[0] - startX) ** 2 + (s[1] - startY) ** 2);\n\t\tconst minDistSq   = Math.min(...distSquares);\n\t\tconst nearest     = points[ distSquares.indexOf(minDistSq) ];\n\n\t\tif(nearest)\n\t\t{\n\t\t\tif(ox > 0 && nearest[0] % 1 > 0.99999) nearest[0] = Math.round(nearest[0]);\n\t\t\tif(ox < 0 && nearest[0] % 1 < 0.00001) nearest[0] = Math.round(nearest[0]);\n\t\t\tif(oy > 0 && nearest[1] % 1 > 0.99999) nearest[1] = Math.round(nearest[1]);\n\t\t\tif(oy < 0 && nearest[1] % 1 < 0.00001) nearest[1] = Math.round(nearest[1]);\n\t\t}\n\n\t\tif(Math.sqrt(minDistSq) > length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(nearest)\n\t\t{\n\t\t\tif(rayFlags & this.T_LAST_EMPTY)\n\t\t\t{\n\t\t\t\tnearest[0] += -cos * Math.sign(rayX);\n\t\t\t\tnearest[1] += -sin * Math.sign(rayY);\n\t\t\t}\n\n\t\t\tif(rayFlags & this.T_SNAP_TO_INT)\n\t\t\t{\n\t\t\t\tif(ox > 0) nearest[0] = Math.floor(nearest[0]);\n\t\t\t\tif(ox < 0) nearest[0] = Math.ceil(nearest[0]);\n\t\t\t\tif(oy > 0) nearest[1] = Math.floor(nearest[1]);\n\t\t\t\tif(oy < 0) nearest[1] = Math.ceil(nearest[1]);\n\t\t\t}\n\n\t\t\tif(rayFlags & this.T_GET_LENGTH)\n\t\t\t{\n\t\t\t\treturn Math.hypot(startX - nearest[0], startY - nearest[1]);\n\t\t\t}\n\n\t\t\treturn nearest;\n\t\t}\n\t}\n}\n","export class Rectangle\n{\n\tconstructor(x1, y1, x2, y2)\n\t{\n\t\tif(x1 > x2 || y1 > y2)\n\t\t{\n\t\t\tthrow new Error('Not a rectangle!');\n\t\t}\n\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x2;\n\t\tthis.y2 = y2;\n\t}\n\n\tcontains(x, y)\n\t{\n\t\tif(x < this.x1 || x > this.x2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif(y < this.y1 || y > this.y2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisOverlapping(other)\n\t{\n\t\tif(this.x1 >= other.x2 || other.x1 >= this.x2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.y1 >= other.y2 || other.y1 >= this.y2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisFlushWith(other)\n\t{\n\t\tif(this.x1 > other.x2 || other.x1 > this.x2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.y1 > other.y2 || other.y1 > this.y2)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.x1 === other.x2 || other.x1 === this.x2)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif(this.y1 === other.y2 || other.y1 === this.y2)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tintersection(other)\n\t{\n\t\tif(!this.isOverlapping(other))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn new (this.constructor)(\n\t\t\tMath.max(this.x1, other.x1), Math.max(this.y1, other.y1)\n\t\t\t, Math.min(this.x2, other.x2), Math.min(this.y2, other.y2)\n\t\t);\n\t}\n\n\tisInside(other)\n\t{\n\t\treturn this.x1 >= other.x1\n\t\t\t&& this.y1 >= other.y1\n\t\t\t&& this.x2 <= other.x2\n\t\t\t&& this.y2 <= other.y2;\n\t}\n\n\tisOutside(other)\n\t{\n\t\treturn other.isInside(this);\n\t}\n\n\tstatic clone(rectangle)\n\t{\n\t\treturn new Rectangle(\n\t\t\trectangle.x1,\n\t\t\trectangle.y1,\n\t\t\trectangle.x2,\n\t\t\trectangle.y2,\n\t\t);\n\t}\n\n\texpand(other, cxa = 0.5, cya = 1.0, cxb = 0.5, cyb = 1.0)\n\t{\n\t\tconst ex = other.x2 - other.x1;\n\t\tconst ey = other.y2 - other.y1;\n\n\t\tconst cx = (cxa + cxb) * 0.5;\n\t\tconst cy = (cya + cyb) * 0.5;\n\n\t\tconst x1 = this.x1 + -ex * (1 - cx);\n\t\tconst x2 = this.x2 +  ex * cx;\n\t\tconst y1 = this.y1 + -ey * (1 - cy);\n\t\tconst y2 = this.y2 + ey * cy;\n\n\t\treturn new Rectangle(x1, y1, x2, y2);\n\t}\n\n\ttoLines()\n\t{\n\t\tconst x1 = this.x1;\n\t\tconst y1 = this.y1;\n\t\tconst x2 = this.x2;\n\t\tconst y2 = this.y2;\n\n\t\treturn [\n\t\t\tx1, y1, x2, y1, // Top\n\t\t\tx2, y1, x2, y2, // Right\n\t\t\tx1, y2, x2, y2, // Bottom\n\t\t\tx1, y1, x1, y2, // Left\n\t\t];\n\t}\n\n\ttoTriangles(dim = 2)\n\t{\n\t\tif(dim === 2)\n\t\t{\n\t\t\treturn [\n\t\t\t\tthis.x1, this.y1,\n\t\t\t\tthis.x2, this.y1,\n\t\t\t\tthis.x1, this.y2,\n\t\t\t\tthis.x1, this.y2,\n\t\t\t\tthis.x2, this.y1,\n\t\t\t\tthis.x2, this.y2,\n\t\t\t];\n\t\t}\n\n\t\tif(dim === 3)\n\t\t{\n\t\t\treturn [\n\t\t\t\tthis.x1, this.y1, 1,\n\t\t\t\tthis.x2, this.y1, 1,\n\t\t\t\tthis.x1, this.y2, 1,\n\t\t\t\tthis.x1, this.y2, 1,\n\t\t\t\tthis.x2, this.y1, 1,\n\t\t\t\tthis.x2, this.y2, 1,\n\t\t\t];\n\t\t}\n\n\t\tif(dim === 4)\n\t\t{\n\t\t\treturn [\n\t\t\t\tthis.x1, this.y1, 0, 1,\n\t\t\t\tthis.x2, this.y1, 0, 1,\n\t\t\t\tthis.x1, this.y2, 0, 1,\n\t\t\t\tthis.x1, this.y2, 0, 1,\n\t\t\t\tthis.x2, this.y1, 0, 1,\n\t\t\t\tthis.x2, this.y2, 0, 1,\n\t\t\t];\n\t\t}\n\n\t\treturn [\n\t\t\tthis.x1, this.y1, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x2, this.y1, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x1, this.y2, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x1, this.y2, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x2, this.y1, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t\tthis.x2, this.y2, ...(dim > 2 ? Array(-2+dim).fill(0): []),\n\t\t];\n\t}\n}\n","const depthSymbol = Symbol('depth');\n\nclass Segment\n{\n\tconstructor(start, end, prev, dimension = 2, depth = 0)\n\t{\n\t\tthis.start = start;\n\t\tthis.end   = end;\n\t\tthis.depth = depth;\n\t\tthis.dimension = dimension;\n\t\tthis.size  = 0;\n\n\t\tthis.rectangles = new Set;\n\t\tthis.subTree = depth < 1\n\t\t\t? new SMTree({dimension, [depthSymbol]: 1 + depth})\n\t\t\t: null;\n\n\t\tthis.prev  = prev;\n\t}\n\n\tsplit(at)\n\t{\n\t\tif(at < this.start || at > this.end)\n\t\t{\n\t\t\tthrow new RangeError('Splitting segment out of bounds!');\n\t\t}\n\n\t\tif(at === this.start)\n\t\t{\n\t\t\treturn [this];\n\t\t}\n\n\t\tif(at === this.end)\n\t\t{\n\t\t\treturn [this];\n\t\t}\n\n\t\tconst a = new Segment(this.start, at, this.prev, this.dimension, this.depth);\n\t\tconst b = new Segment(at, this.end, a, this.dimension, this.depth);\n\n\t\tfor(const rectangle of this.rectangles)\n\t\t{\n\t\t\tconst rectMin = this.depth === 0 ? rectangle.x1 : rectangle.y1;\n\t\t\tconst rectMax = this.depth === 0 ? rectangle.x2 : rectangle.y2;\n\n\t\t\tif(rectMax < at)\n\t\t\t{\n\t\t\t\ta.add(rectangle);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(rectMin > at)\n\t\t\t{\n\t\t\t\tb.add(rectangle);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ta.add(rectangle);\n\t\t\tb.add(rectangle);\n\t\t}\n\n\t\treturn [a, b];\n\t}\n\n\tadd(rectangle)\n\t{\n\t\tif(this.subTree)\n\t\t{\n\t\t\tthis.subTree.add(rectangle);\n\t\t}\n\n\t\tthis.rectangles.add(rectangle);\n\t\tthis.size = this.rectangles.size;\n\t}\n\n\tdelete(rectangle)\n\t{\n\t\tif(this.subTree)\n\t\t{\n\t\t\tthis.subTree.delete(rectangle);\n\t\t}\n\n\t\tthis.rectangles.delete(rectangle);\n\t\tthis.size = this.rectangles.size;\n\n\t\tconst empty = (!this.rectangles.size) && this.start > -Infinity;\n\n\t\treturn empty;\n\t}\n\n\thas(rectangle)\n\t{\n\t\treturn this.rectangles.has(rectangle);\n\t}\n}\n\nconst isRectangle = object => {\n\treturn 'x1' in object\n\t\t&& 'y1' in object\n\t\t&& 'x2' in object\n\t\t&& 'y2' in object\n\t\t&& object.x1 < object.x2\n\t\t&& object.y1 < object.y2;\n};\n\nexport class SMTree\n{\n\tconstructor(args = {dimension: 2, [depthSymbol]: 0})\n\t{\n\t\tthis.depth = args[depthSymbol];\n\t\tthis.dimension = args.dimension;\n\t\tthis.segments = [new Segment(-Infinity, Infinity, null, this.dimension, this.depth)];\n\t\tthis.rectangles = new WeakSet;\n\t\tthis.snapshots = new WeakMap;\n\t}\n\n\tadd(rectangle)\n\t{\n\t\tif(!isRectangle(rectangle))\n\t\t{\n\t\t\tthrow new Error('Object supplied is not a Rectangle. Must have properties: x1, y1, x2, y2.');\n\t\t}\n\n\t\tthis.rectangles.add(rectangle);\n\n\t\tthis.snapshots.set(rectangle, {\n\t\t\tx1: rectangle.x1,\n\t\t\ty1: rectangle.y1,\n\t\t\tx2: rectangle.x2,\n\t\t\ty2: rectangle.y2,\n\t\t});\n\n\t\tconst rectMin = this.depth === 0 ? rectangle.x1 : rectangle.y1;\n\t\tconst rectMax = this.depth === 0 ? rectangle.x2 : rectangle.y2;\n\n\t\tconst startIndex = this.findSegment(rectMin);\n\t\tthis.splitSegment(startIndex, rectMin);\n\n\t\tconst endIndex = this.findSegment(rectMax);\n\t\tthis.splitSegment(endIndex, rectMax);\n\n\t\tif(startIndex === endIndex)\n\t\t{\n\t\t\tthis.segments[startIndex].add(rectangle);\n\t\t\treturn;\n\t\t}\n\n\t\tfor(let i = 1 + startIndex; i <= endIndex; i++)\n\t\t{\n\t\t\tif(this.segments[i].start < rectMin || this.segments[i].end > rectMax)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis.segments[i].add(rectangle);\n\t\t}\n\t}\n\n\tdelete(rectangle)\n\t{\n\t\tif(!isRectangle(rectangle))\n\t\t{\n\t\t\tthrow new Error('Object supplied is not a Rectangle. Must have properties: x1, y1, x2, y2.');\n\t\t}\n\n\t\tif(!this.rectangles.has(rectangle))\n\t\t{\n\t\t\tconsole.warn('Rectangle not in tree!');\n\t\t\treturn false;\n\t\t}\n\n\t\tconst snapshot = this.snapshots.get(rectangle);\n\n\t\tthis.rectangles.delete(rectangle);\n\t\tthis.snapshots.delete(rectangle);\n\n\t\tconst rectMin = this.depth === 0 ? snapshot.x1 : snapshot.y1;\n\t\tconst rectMax = this.depth === 0 ? snapshot.x2 : snapshot.y2;\n\n\t\tconst startIndex = this.findSegment(rectMin);\n\t\tlet endIndex = this.findSegment(rectMax);\n\t\tlet deleteCount = 0;\n\n\t\tfor(let i = startIndex; i <= endIndex; i++)\n\t\t{\n\t\t\tconst segment = this.segments[i];\n\t\t\tconst prev = this.segments[i - 1];\n\t\t\tconst next = this.segments[i + 1];\n\n\t\t\tif(segment.has(rectangle))\n\t\t\t{\n\t\t\t\tsegment.delete(rectangle);\n\t\t\t\tdeleteCount++\n\t\t\t}\n\n\t\t\tif(segment.rectangles.size !== prev.rectangles.size)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(segment.rectangles.symmetricDifference(prev.rectangles).size > 0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tprev.end = segment.end;\n\n\t\t\tif(next)\n\t\t\t{\n\t\t\t\tnext.prev = prev;\n\t\t\t}\n\n\t\t\tthis.segments.splice(i, 1);\n\t\t\tendIndex--;\n\t\t\ti--;\n\t\t}\n\n\t\treturn deleteCount;\n\t}\n\n\tmove(rectangle)\n\t{\n\t\tthis.delete(rectangle);\n\t\tthis.add(rectangle);\n\t}\n\n\tquery(x1, y1, x2, y2)\n\t{\n\t\tconst xStartIndex = this.findSegment(x1);\n\t\tconst xEndIndex = this.findSegment(x2);\n\n\t\tlet results = new Set;\n\t\tfor(let i = xStartIndex; i <= xEndIndex; i++)\n\t\t{\n\t\t\tconst segment = this.segments[i];\n\n\t\t\tif(!segment.subTree)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst yStartIndex = segment.subTree.findSegment(y1);\n\t\t\tconst yEndIndex = segment.subTree.findSegment(y2);\n\n\t\t\tfor(let j = yStartIndex; j <= yEndIndex; j++)\n\t\t\t{\n\t\t\t\tresults = results.union(segment.subTree.segments[j].rectangles);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tsplitSegment(index, at)\n\t{\n\t\tif(at <= this.segments[index].start || at >= this.segments[index].end)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst splitSegments = this.segments[index].split(at);\n\n\t\tthis.segments.splice(index, 1, ...splitSegments);\n\t}\n\n\tfindSegment(at)\n\t{\n\t\tif(isNaN(at))\n\t\t{\n\t\t\tthrow new Error('World.findSegment takes a number param.');\n\t\t}\n\n\t\tlet lo = 0;\n\t\tlet hi = -1 + this.segments.length;\n\n\t\tdo\n\t\t{\n\t\t\tconst current = Math.floor((lo + hi) * 0.5);\n\t\t\tconst segment = this.segments[current];\n\n\t\t\tif(segment.start <= at && segment.end > at)\n\t\t\t{\n\t\t\t\treturn current;\n\t\t\t}\n\n\t\t\tif(segment.start < at)\n\t\t\t{\n\t\t\t\tlo = 1 + current;\n\t\t\t}\n\n\t\t\tif(segment.end > at)\n\t\t\t{\n\t\t\t\thi = -1 + current;\n\t\t\t}\n\t\t} while(lo <= hi);\n\n\t\treturn -1;\n\t}\n}\n","export class Split\n{\n\tstatic bytes = new Uint8ClampedArray(4);\n\tstatic words = new Uint16Array(this.bytes.buffer);\n\tstatic value = new Uint32Array(this.bytes.buffer);\n\n\tstatic intToBytes(value)\n\t{\n\t\tthis.value[0] = value;\n\n\t\treturn [...this.bytes];\n\t}\n\n\tstatic bytesToInt(bytes)\n\t{\n\t\tthis.bytes[0] = bytes[0];\n\t\tthis.bytes[1] = bytes[1];\n\t\tthis.bytes[2] = bytes[2];\n\t\tthis.bytes[3] = bytes[3];\n\n\t\treturn this.value[0];\n\t}\n\n\tstatic bytesToInt3(bytes)\n\t{\n\t\tthis.bytes[0] = bytes[0];\n\t\tthis.bytes[1] = bytes[1];\n\t\tthis.bytes[2] = bytes[2];\n\t\tthis.bytes[3] = 0;\n\n\t\treturn this.value[0];\n\t}\n}\n","export class BallController\n{\n\tstatic spriteImage = './sphere.png';\n\n\tcreate(entity, entityData)\n\t{\n\t\tentity.xSpeed = 0;\n\t\tentity.ySpeed = 0;\n\n\t\tentity.height = 32;\n\t\tentity.width  = 32;\n\t}\n\n\tdestroy(entity){}\n\n\tsimulate(entity)\n\t{\n\t\tconst world = entity.session.world;\n\n\t\tif(entity.xSpeed || entity.ySpeed)\n\t\t{\n\t\t\tlet xMove = entity.xSpeed;\n\t\t\tlet yMove = entity.ySpeed;\n\n\t\t\tconst h = world.castTerrainRay(\n\t\t\t\tentity.x + 0\n\t\t\t\t, entity.y + -16\n\t\t\t\t, entity.xSpeed < 0 ? Math.PI : 0\n\t\t\t\t, Math.abs(entity.xSpeed) + 16\n\t\t\t\t, 0x01\n\t\t\t);\n\n\t\t\tconst v = world.castTerrainRay(\n\t\t\t\tentity.x + 0\n\t\t\t\t, entity.y + -16\n\t\t\t\t, Math.PI * 0.5 * Math.sign(entity.ySpeed)\n\t\t\t\t, Math.abs(entity.ySpeed) + 16\n\t\t\t\t, 0x1\n\t\t\t);\n\n\t\t\tif(h)\n\t\t\t{\n\t\t\t\tconst actualDistance = h[0] - entity.x;\n\t\t\t\txMove = actualDistance + -16 * Math.sign(entity.xSpeed);\n\t\t\t\tentity.xSpeed = -entity.xSpeed;\n\t\t\t}\n\n\t\t\tif(v)\n\t\t\t{\n\t\t\t\tconst actualDistance = v[1] - (entity.y + -16);\n\t\t\t\tyMove = actualDistance + -16 * Math.sign(entity.ySpeed);\n\t\t\t\tentity.ySpeed = -entity.ySpeed;\n\t\t\t}\n\n\t\t\tentity.x += xMove;\n\t\t\tentity.y += yMove;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst a = Math.PI * 2 * Math.random();\n\t\t\tconst s = 6;\n\t\t\tentity.xSpeed = Math.cos(a) * s;\n\t\t\tentity.ySpeed = Math.sin(a) * s;\n\t\t}\n\t}\n\n\tcollide(entity, other, point){}\n\tsleep(entity){}\n\twakeup(entity){}\n}\n","export class BarrelController\n{\n\tstatic spriteImage = '/barrel.png';\n\n\tcreate(entity, entityData)\n\t{\n\t\tentity.xSpeed = 0;\n\t\tentity.ySpeed = 0;\n\n\t\tentity.height = 32;\n\t\tentity.width = 26;\n\n\t\tentity.ySpriteOffset = 6;\n\n\t\tentity.grounded = true;\n\t\tthis.shot = false;\n\t}\n\n\tdestroy(entity)\n\t{\n\t}\n\n\tsimulate(entity)\n\t{\n\t\tconst world = entity.session.world;\n\n\t\tif(!world.getSolid(entity.x, entity.y + 1))\n\t\t{\n\t\t\tentity.ySpeed = Math.min(8, entity.ySpeed + 0.5);\n\t\t\tentity.grounded = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tentity.ySpeed = Math.min(0, entity.ySpeed);\n\t\t\tentity.grounded = true;\n\t\t}\n\n\t\tif(entity.xSpeed || entity.ySpeed)\n\t\t{\n\t\t\tconst direction = Math.atan2(entity.ySpeed, entity.xSpeed);\n\t\t\tconst distance = Math.hypot(entity.ySpeed, entity.xSpeed);\n\t\t\tconst hit = world.castRay(\n\t\t\t\tentity.x\n\t\t\t\t, entity.y + -4\n\t\t\t\t, direction\n\t\t\t\t, distance\n\t\t\t\t, 0x01\n\t\t\t);\n\n\t\t\tlet xMove = entity.xSpeed;\n\t\t\tlet yMove = entity.ySpeed;\n\n\t\t\tif(hit.terrain)\n\t\t\t{\n\t\t\t\txMove = hit.terrain[0] - entity.x;\n\t\t\t\tyMove = hit.terrain[1] - entity.y;\n\t\t\t}\n\n\t\t\tentity.x += xMove;\n\t\t\tentity.y += yMove;\n\n\t\t\tif(!this.shot)\n\t\t\t{\n\t\t\t\tentity.xSpeed *= 0.9125;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tentity.shot = false;\n\t\t}\n\n\t\tif(world.getSolid(entity.x, entity.y) && !world.getSolid(entity.x, entity.y + -entity.height))\n\t\t{\n\t\t\tentity.ySpeed = 0;\n\t\t\tentity.y--;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x, entity.y + -entity.height) && !world.getSolid(entity.x, entity.y))\n\t\t{\n\t\t\tentity.ySpeed = 0;\n\t\t\tentity.y++;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x + -entity.width * 0.5, entity.y + -8) && !world.getSolid(entity.x + entity.width * 0.5, entity.y + -8))\n\t\t{\n\t\t\tthis.stop(entity, entity.xSpeed);\n\t\t\tentity.xSpeed = 0;\n\t\t\tentity.x++;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x + entity.width * 0.5, entity.y + -8) && !world.getSolid(entity.x + -entity.width * 0.5, entity.y + -8))\n\t\t{\n\t\t\tthis.stop(entity, entity.xSpeed);\n\t\t\tentity.xSpeed = 0;\n\t\t\tentity.x--;\n\t\t}\n\t}\n\n\tcollide(entity, other, point)\n\t{\n\t\tif(Math.abs(Math.sign(entity.x - other.x) - Math.sign(other.xSpeed)) < 2)\n\t\t{\n\t\t\tconst dist = Math.abs(other.x + -entity.x);\n\t\t\tconst min  = 0.5 * (other.width + entity.width) + Math.abs(other.xSpeed);\n\t\t\tconst side = Math.sign(entity.x - other.x);\n\n\t\t\tentity.xSpeed = other.xSpeed;\n\n\t\t\tif(dist < min)\n\t\t\t{\n\t\t\t\tentity.xSpeed += (min - dist) * side;\n\t\t\t}\n\n\t\t\tother.controller.pushing = entity;\n\n\t\t\t// const maps = entity.session.world.getMapsForPoint(entity.x, entity.y);\n\t\t\t// maps.forEach(map => map.moveEntity(entity));\n\t\t\t// console.log(maps);\n\t\t}\n\t}\n\n\tsleep(entity)\n\t{\n\t}\n\n\twakeup(entity)\n\t{\n\t}\n\n\tstop(entity)\n\t{\n\t\tif(entity.xSpeed > 10)\n\t\t{\n\t\t\t// entity.session.removeEntity(entity);\n\t\t}\n\n\t\tthis.shot = false;\n\t}\n}\n","import { Entity } from \"./Entity\";\n\nexport class BoxController\n{\n\tstatic spriteColor = [0, 0, 0, 255];\n\n\tframes = 0;\n\n\tcreate(entity, entityData)\n\t{\n\t\tif(entityData.gid)\n\t\t{\n\t\t\tentity.x += entityData.width * 0.5;\n\t\t\tentity.y += -1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tentity.x += entityData.width * 0.5;\n\t\t\tentity.y += entityData.height + -1;\n\t\t}\n\n\t\tthis.xOriginal = entity.x;\n\t\tthis.yOriginal = entity.y;\n\n\t\tif(entity.map)\n\t\t{\n\t\t\tthis.xOriginal -= entity.map.x;\n\t\t\tthis.yOriginal -= entity.map.y;\n\t\t}\n\n\t\tentity.flags |= Entity.E_PLATFORM;\n\t\tentity.flags |= Entity.E_STATIC;\n\t}\n\n\tdestroy(entity){}\n\n\tsimulate(entity)\n\t{\n\t\tentity.sprite.width  = entity.width;\n\t\tentity.sprite.height = entity.height;\n\n\t\tif(entity.props.has('xOscillate'))\n\t\t{\n\t\t\tconst range = entity.props.get('xOscillate');\n\t\t\tconst delay = entity.props.get('delay') ?? 1500;\n\t\t\tconst age = entity.session.world.age;\n\t\t\tconst current = Math.cos(Math.sin(age/delay)**5)**(16);\n\n\t\t\tconst mapOffset = entity.lastMap\n\t\t\t\t? entity.lastMap.x\n\t\t\t\t: 0;\n\n\t\t\tentity.x = mapOffset + this.xOriginal + current * range;\n\t\t}\n\n\t\tif(entity.props.has('yOscillate'))\n\t\t{\n\t\t\tconst range = entity.props.get('yOscillate');\n\t\t\tconst delay = entity.props.get('delay') ?? 1500;\n\t\t\tconst age = entity.session.world.age;\n\t\t\tconst current = Math.cos(Math.sin(age/delay)**5)**(16);\n\n\t\t\tconst mapOffset = entity.lastMap\n\t\t\t\t? entity.lastMap.y\n\t\t\t\t: 0;\n\n\t\t\tconst yNew = this.yOriginal + mapOffset + current * range;\n\t\t\tconst moved = yNew - entity.y;\n\n\t\t\tif(moved < 0)\n\t\t\t{\n\t\t\t\tconst above = entity.session.world.getEntitiesForRect(\n\t\t\t\t\tentity.x\n\t\t\t\t\t, entity.y -entity.height * 0.5\n\t\t\t\t\t, entity.width\n\t\t\t\t\t, entity.height + -moved\n\t\t\t\t);\n\n\t\t\t\tabove.forEach(other => {\n\t\t\t\t\tif(other.flags & Entity.E_STATIC || other.ySpeed < moved) return;\n\t\t\t\t\tother.y = entity.y - entity.height\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tentity.y = yNew;\n\t\t}\n\t}\n\n\tcollide(entity){}\n\tsleep(entity){}\n\twakeup(entity){}\n}\n","import { Bindable } from \"curvature/base/Bindable\";\nimport { Rectangle } from \"../math/Rectangle\";\nimport { Sprite } from '../sprite/Sprite';\nimport { Properties } from \"../world/Properties\";\n\nexport class Entity\n{\n\tstatic E_SOLID    = 0b0000_0001;\n\tstatic E_PLATFORM = 0b0001_0000;\n\tstatic E_STATIC   = 0b1000_0000;\n\n\tconstructor(entityData)\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\n\t\tconst {\n\t\t\tcontroller\n\t\t\t, session\n\t\t\t, inputManager\n\t\t\t, sprite\n\t\t\t, x = 0\n\t\t\t, y = 0\n\t\t\t, width = 32\n\t\t\t, height = 32\n\t\t} = entityData;\n\n\t\tthis.controller = controller;\n\t\tthis.id = entityData.id;\n\n\t\tthis.xSpriteOffset = 0;\n\t\tthis.ySpriteOffset = sprite ? 0 : 15;\n\n\t\tthis.flags = 0b0000_0000;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\tthis.width  = width;\n\t\tthis.height = height;\n\n\t\tthis.sprite = sprite || new Sprite({\n\t\t\tsession\n\t\t\t, src: '/thing.png'\n\t\t\t, width: 32\n\t\t\t, height: 32\n\t\t});\n\n\t\tthis.inputManager = inputManager;\n\t\tthis.session = session;\n\t\tthis.props = new Properties(entityData.properties ?? [], this);\n\t\tthis.entityData = entityData;\n\n\t\tthis.rect = new Rectangle(\n\t\t\tx - width * 0.5, y - height,\n\t\t\tx + width * 0.5, y\n\t\t);\n\n\t\tthis.xOrigin = x;\n\t\tthis.yOrigin = x;\n\n\t\tthis.sleeping = false;\n\n\t\tthis.fresh = true;\n\t\tthis.map = entityData.map;\n\t\tthis.grounded = false;\n\n\t\tthis.controller && this.controller.create(this, this.entityData);\n\t}\n\n\tsimulate()\n\t{\n\t\tconst startX = this.x;\n\t\tconst startY = this.y;\n\n\t\tconst world = this.session.world;\n\n\t\tconst motionParent = world.motionGraph.getParent(this);\n\t\tconst maps = world.getMapsForPoint(this.x, this.y);\n\t\tconst firstMap = [...maps][0];\n\n\t\tif(!world.motionGraph.getParent(motionParent) && !maps.has(motionParent))\n\t\t{\n\t\t\tworld.motionGraph.delete(this);\n\t\t}\n\n\t\tif(this.grounded && !world.motionGraph.getParent(this))\n\t\t{\n\t\t\tworld.motionGraph.add(this, firstMap);\n\t\t}\n\n\t\tif(this.fresh)\n\t\t{\n\t\t\tthis.fresh = false;\n\t\t}\n\n\t\tthis.controller && this.controller.simulate(this);\n\n\t\tif(startX !== 0 || startY !== 0)\n\t\t{\n\t\t\tworld.motionGraph.moveChildren(\n\t\t\t\tthis\n\t\t\t\t, this.x - startX\n\t\t\t\t, this.y - startY\n\t\t\t);\n\n\t\t\tthis.rect.x1 = this.x - this.width * 0.5;\n\t\t\tthis.rect.x2 = this.x + this.width * 0.5;\n\n\t\t\tthis.rect.y1 = this.y - this.height;\n\t\t\tthis.rect.y2 = this.y;\n\t\t}\n\n\t\tif(this.sprite)\n\t\t{\n\t\t\tthis.sprite.x = this.x + this.xSpriteOffset;\n\t\t\tthis.sprite.y = this.y + this.ySpriteOffset;\n\t\t}\n\n\t\tthis.fixFPE();\n\t}\n\n\tcollide(other, point)\n\t{\n\t\tthis.controller && this.controller.collide(this, other, point);\n\t}\n\n\tsleep()\n\t{\n\t\tif(!this.sleeping)\n\t\t{\n\t\t\tthis.controller && this.controller.sleep(this);\n\t\t\tthis.sleeping = true;\n\t\t}\n\t}\n\n\twakeup()\n\t{\n\t\tif(this.sleeping)\n\t\t{\n\t\t\tthis.controller && this.controller.wakeup(this);\n\t\t\tthis.sleeping = false;\n\t\t}\n\t}\n\n\tdestroy()\n\t{\n\t\tthis.controller && this.controller.destroy(this);\n\t}\n\n\tfixFPE()\n\t{\n\t\tif(this.x % 1 > 0.99999) this.x = Math.round(this.x);\n\t\tif(this.y % 1 > 0.99999) this.y = Math.round(this.y);\n\t\tif(this.x % 1 < 0.00001) this.x = Math.round(this.x);\n\t\tif(this.y % 1 < 0.00001) this.y = Math.round(this.y);\n\t}\n}\n","export class MapMover\n{\n\tcreate(map)\n\t{\n\t\tthis.yOriginal = map.y;\n\t}\n\n\tsimulate(map, delta)\n\t{\n\t\t// return;\n\t\tif(map.props.get('yOscillate'))\n\t\t{\n\t\t\tconst range = map.props.get('yOscillate');\n\t\t\tconst delay = map.props.get('delay');\n\t\t\tconst age = map.session.world.age;\n\t\t\tconst current = Math.cos(Math.sin(age/delay)**5)**(16);\n\n\t\t\tmap.y = this.yOriginal + current * range;\n\t\t}\n\t}\n}","import { Ray } from \"../math/Ray\";\nimport { Entity } from \"./Entity\";\n\nconst fireRegion  = [1, 0, 0];\nconst waterRegion = [0, 1, 1];\n\nexport class PlayerController\n{\n\tstatic spriteSheet = '/player.tsj';\n\n\tcreate(entity, entityData)\n\t{\n\t\tthis.direction = 'south';\n\t\tthis.state = 'standing';\n\n\t\tentity.xSpeed = 0;\n\t\tentity.ySpeed = 0;\n\n\t\tentity.height = 34;\n\t\tentity.width = 24;\n\n\t\tentity.grounded = true;\n\t\tentity.grounded = 0;\n\n\t\tthis.gravity = 0.5;\n\n\t\tthis.lastMap = null;\n\t\tthis.pushing = null;\n\n\t\tthis.xDirection = 0;\n\t}\n\n\tdestroy(entity){}\n\n\tsimulate(entity)\n\t{\n\t\tif(this.state === 'jumping')\n\t\t{\n\t\t\tentity.height = 24;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tentity.height = 34;\n\t\t}\n\n\t\tconst xAxis = entity.inputManager ? ( Math.min(1, Math.max(entity.inputManager.axes[0].magnitude || 0, -1)) || 0 ) : 0;\n\t\tconst yAxis = entity.inputManager ? ( Math.min(1, Math.max(entity.inputManager.axes[1].magnitude || 0, -1)) || 0 ) : 0;\n\n\t\tconst world = entity.session.world;\n\n\t\tconst regions = world.getRegionsForPoint(entity.x, entity.y);\n\t\tconst maps = world.getMapsForPoint(entity.x, entity.y);\n\n\t\tconst solidTerrain = world.getSolid(entity.x, entity.y + 1);\n\n\t\tconst solidEntities = [...world.getEntitiesForPoint(entity.x, entity.y + 1)]\n\t\t\t.filter(entity => entity.flags & Entity.E_SOLID || entity.flags & Entity.E_PLATFORM);\n\n\n\t\t// const platformEntities = [...world.getEntitiesForPoint(entity.x, entity.y + 1)]\n\t\t// \t.filter(entity => entity.flags & Entity.E_PLATFORM);\n\n\t\tconst firstMap = [...maps][0];\n\n\t\tlet gravity = this.gravity;\n\n\t\tregions.forEach(region => {\n\t\t\tgravity *= region.gravity ?? 1;\n\t\t})\n\n\t\tif(!solidTerrain)\n\t\t{\n\t\t\tentity.ySpeed = Math.min(8, entity.ySpeed + gravity);\n\t\t\tentity.grounded = false;\n\t\t}\n\t\telse if(entity.ySpeed >= 0)\n\t\t{\n\t\t\tentity.ySpeed = Math.min(0, entity.ySpeed);\n\t\t\tentity.grounded = true;\n\t\t}\n\n\t\tif(solidTerrain)\n\t\t{\n\t\t\tworld.motionGraph.add(entity, firstMap);\n\t\t\tthis.lastMap = firstMap;\n\t\t}\n\t\telse if(solidEntities.length)\n\t\t{\n\t\t\tconst otherTop = solidEntities[0].y - solidEntities[0].height;\n\n\t\t\tif(entity.ySpeed >= 0 && entity.y < otherTop + 16)\n\t\t\t{\n\t\t\t\tentity.y = otherTop;\n\t\t\t\tentity.ySpeed = Math.min(0, entity.ySpeed);\n\t\t\t\tentity.grounded = true;\n\n\t\t\t\tworld.motionGraph.add(entity, solidEntities[0]);\n\t\t\t}\n\t\t}\n\t\telse if(maps.has(this.lastMap))\n\t\t{\n\t\t\tworld.motionGraph.add(entity, this.lastMap);\n\t\t}\n\t\telse if(!maps.has(this.lastMap))\n\t\t{\n\t\t\tworld.motionGraph.delete(entity);\n\t\t}\n\n\t\tif(xAxis)\n\t\t{\n\t\t\tthis.xDirection = Math.sign(xAxis);\n\n\t\t\tif(!world.getSolid(entity.x + Math.sign(xAxis) * entity.width * 0.5 + Math.sign(xAxis), entity.y))\n\t\t\t{\n\t\t\t\tentity.xSpeed += xAxis * (entity.grounded ? 0.2 : 0.3);\n\t\t\t}\n\n\t\t\tif(Math.abs(entity.xSpeed) > 8)\n\t\t\t{\n\t\t\t\tentity.xSpeed = 8 * Math.sign(entity.xSpeed);\n\t\t\t}\n\n\t\t\tif(entity.grounded && xAxis && Math.sign(xAxis) !== Math.sign(entity.xSpeed))\n\t\t\t{\n\t\t\t\tentity.xSpeed *= 0.75;\n\t\t\t}\n\t\t}\n\t\telse if(entity.grounded)\n\t\t{\n\t\t\tentity.xSpeed *= 0.9;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tentity.xSpeed *= 0.99;\n\t\t}\n\n\t\tif(this.pushing)\n\t\t{\n\t\t\tif(entity.xSpeed && Math.sign(entity.xSpeed) !== Math.sign(this.pushing.x - entity.x))\n\t\t\t{\n\t\t\t\tthis.pushing = null;\n\t\t\t}\n\n\t\t\tif(!entity.grounded)\n\t\t\t{\n\t\t\t\tthis.pushing = null;\n\t\t\t}\n\n\t\t}\n\n\t\tconst angle = Math.atan2(entity.ySpeed, entity.xSpeed);\n\t\tconst length = Math.hypot(entity.ySpeed, entity.xSpeed);\n\n\t\tconst entities = Ray.castEntity(\n\t\t\tworld\n\t\t\t, entity.x\n\t\t\t, entity.y\n\t\t\t, this.xDirection < 0 ? Math.PI : 0\n\t\t\t, Math.min(length, entity.width * 0.5)\n\t\t\t, Ray.T_LAST_EMPTY\n\t\t\t, entity\n\t\t);\n\n\t\tif(entities)\n\t\t{\n\t\t\tentities.delete(entity);\n\t\t\tentities.forEach((point, other) => {\n\t\t\t\tother.collide(entity, point);\n\t\t\t\tentity.collide(other, point);\n\t\t\t});\n\t\t}\n\n\t\tif(entity.xSpeed || entity.ySpeed)\n\t\t{\n\t\t\tregions.forEach(region => {\n\t\t\t\tentity.xSpeed *= region.drag;\n\t\t\t\tif(entity.ySpeed > 0)\n\t\t\t\t{\n\t\t\t\t\tentity.ySpeed *= region.drag;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(!entity.grounded)\n\t\t\t{\n\t\t\t\tconst footRay = Ray.castTerrain(\n\t\t\t\t\tworld\n\t\t\t\t\t, entity.x\n\t\t\t\t\t, entity.y + 1\n\t\t\t\t\t, this.xDirection < 0 ? Math.PI : 0\n\t\t\t\t\t, length + entity.width * 0.5\n\t\t\t\t\t, Ray.T_LAST_EMPTY\n\t\t\t\t);\n\n\t\t\t\tif(footRay)\n\t\t\t\t{\n\t\t\t\t\tconst footDistance = Math.hypot(\n\t\t\t\t\t\tentity.x - footRay[0]\n\t\t\t\t\t\t, entity.y - footRay[1]\n\t\t\t\t\t);\n\n\t\t\t\t\tif(footDistance < entity.width * 0.5)\n\t\t\t\t\t{\n\t\t\t\t\t\tentity.y -= 2;\n\t\t\t\t\t\tentity.x += Math.sign(entity.xSpeed);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst terrain = Ray.castTerrain(\n\t\t\t\tworld\n\t\t\t\t, entity.x\n\t\t\t\t, entity.y\n\t\t\t\t, angle\n\t\t\t\t, length\n\t\t\t\t, Ray.T_LAST_EMPTY\n\t\t\t);\n\n\t\t\tlet xMove = entity.xSpeed;\n\t\t\tlet yMove = entity.ySpeed;\n\n\t\t\tif(terrain)\n\t\t\t{\n\t\t\t\txMove = terrain[0] - entity.x;\n\t\t\t\tyMove = terrain[1] - entity.y;\n\t\t\t}\n\n\t\t\tentity.x += xMove;\n\t\t\tentity.y += yMove;\n\t\t}\n\n\t\tif(world.getSolid(entity.x, entity.y) && !world.getSolid(entity.x, entity.y + -entity.height))\n\t\t{\n\t\t\tentity.ySpeed = 0;\n\t\t\tentity.y--;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x, entity.y + -entity.height) && !world.getSolid(entity.x, entity.y))\n\t\t{\n\t\t\tentity.ySpeed = 0;\n\t\t\tentity.y++;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x + -entity.width * 0.5, entity.y + -8) && !world.getSolid(entity.x + entity.width * 0.5, entity.y + -8))\n\t\t{\n\t\t\tentity.xSpeed = 0;\n\t\t\tentity.x++;\n\t\t}\n\n\t\twhile(world.getSolid(entity.x + entity.width * 0.5, entity.y + -8) && !world.getSolid(entity.x - entity.width * 0.5, entity.y + -8))\n\t\t{\n\t\t\tentity.xSpeed = 0;\n\t\t\tentity.x--;\n\t\t}\n\n\t\tif(entity.grounded)\n\t\t{\n\t\t\tthis.state = xAxis ? 'walking' : 'standing';\n\n\t\t\tif(xAxis < 0)\n\t\t\t{\n\t\t\t\tthis.direction = 'west';\n\t\t\t}\n\t\t\telse if(xAxis > 0)\n\t\t\t{\n\t\t\t\tthis.direction = 'east';\n\t\t\t}\n\t\t}\n\n\t\tif(entity.inputManager)\n\t\t{\n\t\t\tif(entity.grounded && entity.inputManager.buttons[0] && entity.inputManager.buttons[0].time === 1)\n\t\t\t{\n\t\t\t\tentity.grounded = false;\n\t\t\t\tthis.state = 'jumping';\n\t\t\t\tentity.ySpeed = -10;\n\t\t\t}\n\n\t\t\tif(!entity.grounded && entity.inputManager.buttons[0] && entity.inputManager.buttons[0].time === -1)\n\t\t\t{\n\t\t\t\tentity.ySpeed = Math.max(-4, entity.ySpeed);\n\t\t\t}\n\n\t\t\tif(this.pushing && entity.inputManager.buttons[1] && entity.inputManager.buttons[1].time === 1)\n\t\t\t{\n\t\t\t\tthis.pushing.controller.shot = true;\n\t\t\t\tthis.pushing.xSpeed *= 4;\n\t\t\t\tthis.pushing = null;\n\t\t\t}\n\t\t}\n\n\t\tif(entity.sprite)\n\t\t{\n\t\t\tif(this.state === 'jumping')\n\t\t\t{\n\t\t\t\tentity.sprite.scaleX = this.xDirection;\n\t\t\t\tentity.sprite.changeAnimation(`${this.state}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentity.sprite.scaleX = 1;\n\t\t\t\tentity.sprite.changeAnimation(`${this.state}-${this.direction}`);\n\t\t\t}\n\t\t}\n\n\t\tif(this.state === 'jumping' && this.direction === 'south')\n\t\t{\n\t\t\tthis.xDirection = 1;\n\t\t\tthis.direction = 'east';\n\t\t}\n\t}\n\n\tcollide(entity, other, point)\n\t{\n\t\tif(other.flags & Entity.E_PLATFORM)\n\t\t{\n\t\t\tconst otherTop = other.y - other.height;\n\n\t\t\tif(entity.ySpeed > 0 && entity.y < otherTop + 16)\n\t\t\t{\n\t\t\t\tentity.ySpeed = 0;\n\t\t\t\tentity.grounded = true;\n\t\t\t\tthis.y = otherTop;\n\t\t\t}\n\t\t}\n\t}\n\n\tsleep(entity){}\n\twakeup(entity){}\n}\n","import { SpriteSheet } from \"../sprite/SpriteSheet\";\nimport { Sprite } from \"../sprite/Sprite\";\nimport { Entity } from \"./Entity\";\nimport { Properties } from \"../world/Properties\";\n\nexport class Spawner extends Entity\n{\n\tconstructor(spawnData)\n\t{\n\t\tsuper(spawnData);\n\n\t\tthis.spawnData = spawnData;\n\t\tthis.spawnType = spawnData.spawnType;\n\t\tthis.spawnClass = spawnData.spawnClass;\n\t\tthis.session = spawnData.session;\n\t\tthis.props = new Properties(spawnData.properties ?? [], this);\n\n\t\tthis.flags |= Entity.E_STATIC;\n\t}\n\n\tsimulate()\n\t{\n\t\tconst spawnClass = this.spawnData.spawnClass;\n\t\tconst entityDef = {...this.spawnData.entityDef};\n\n\t\tconst controller = new spawnClass;\n\n\t\tif(!entityDef.sprite)\n\t\t{\n\t\t\tif(spawnClass.spriteSheet)\n\t\t\t{\n\t\t\t\tentityDef.sprite = new Sprite({\n\t\t\t\t\tsession: this.spawnData.session\n\t\t\t\t\t, spriteSheet: new SpriteSheet({\n\t\t\t\t\t\tsrc: spawnClass.spriteSheet\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if(spawnClass.spriteImage)\n\t\t\t{\n\t\t\t\tentityDef.sprite = new Sprite({\n\t\t\t\t\tsession: this.spawnData.session\n\t\t\t\t\t, src: spawnClass.spriteImage\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this.spawnData.gid)\n\t\t\t{\n\t\t\t\tentityDef.sprite = new Sprite({\n\t\t\t\t\tsession: this.spawnData.session\n\t\t\t\t\t, src: this.spawnData.map.getTileImage(this.spawnData.gid)\n\t\t\t\t\t, tiled: true\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if(this.props.has('color'))\n\t\t\t{\n\t\t\t\tentityDef.sprite = new Sprite({\n\t\t\t\t\tsession: this.spawnData.session\n\t\t\t\t\t, color: this.props.get('color')\n\t\t\t\t\t, width: this.width\n\t\t\t\t\t, height: this.height\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if(spawnClass.spriteColor)\n\t\t\t{\n\t\t\t\tentityDef.sprite = new Sprite({\n\t\t\t\t\tsession: this.spawnData.session\n\t\t\t\t\t, color: spawnClass.spriteColor\n\t\t\t\t\t, width: this.width\n\t\t\t\t\t, height: this.height\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst map = this.spawnData.map;\n\n\t\tconst entity = new Entity({\n\t\t\t...entityDef\n\t\t\t, controller\n\t\t\t, session: this.session\n\t\t\t, x: this.x\n\t\t\t, y: this.y\n\t\t\t, map\n\t\t});\n\n\t\tthis.session.world.motionGraph.add(entity, map);\n\t\tentity.lastMap = map;\n\t\tthis.session.addEntity(entity);\n\t\tthis.session.removeEntity(this);\n\t\tsuper.simulate();\n\t}\n}\n","module.exports = \"precision mediump float;\\n\\nuniform vec4 u_color;\\nvarying vec2 v_texCoord;\\n\\nvoid main() {\\n  // gl_FragColor = texture2D(u_image, v_texCoord);\\n  gl_FragColor = vec4(1.0, 1.0, 0.0, 0.25);\\n}\\n\"","module.exports = \"attribute vec2 a_position;\\nattribute vec2 a_texCoord;\\n\\nuniform vec2 u_resolution;\\nvarying vec2 v_texCoord;\\n\\nvoid main()\\n{\\n  vec2 zeroToOne = a_position / u_resolution;\\n  vec2 zeroToTwo = zeroToOne * 2.0;\\n  vec2 clipSpace = zeroToTwo - 1.0;\\n\\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\\n  v_texCoord  = a_texCoord;\\n}\\n\"","import { QuickTree } from \"../math/QuickTree\";\n\nimport { SpriteBoard } from \"../sprite/SpriteBoard\";\nimport { SpriteSheet } from '../sprite/SpriteSheet';\nimport { Sprite } from '../sprite/Sprite';\nimport { Entity } from '../model/Entity';\nimport { Camera } from '../sprite/Camera';\nimport { World } from \"../world/World\";\n\nimport { MotionGraph } from \"../math/MotionGraph\";\nimport { Controller } from '../input/Controller';\nimport { Pallet } from \"../world/Pallet\";\n\nconst input = new URLSearchParams(location.search);\nconst warpStart = input.has('start') ? input.get('start').split(',').map(Number) : false;\n\nconsole.log(location.search, input, warpStart);\n\nexport class Session\n{\n\tconstructor({element, keyboard, onScreenJoyPad, worldSrc, mapPallet = {}, entityPallet = {}})\n\t{\n\t\tthis.entityPallet = new Pallet;\n\t\tthis.mapPallet = new Pallet;\n\n\t\tObject.entries(entityPallet).forEach(\n\t\t\t([keyword, spawnClass]) => this.entityPallet.register(keyword, spawnClass)\n\t\t);\n\n\t\tObject.entries(mapPallet).forEach(\n\t\t\t([keyword, mapClass]) => this.mapPallet.register(keyword, mapClass)\n\t\t);\n\n\t\tthis.fThen = 0;\n\t\tthis.sThen = 0;\n\n\t\tthis.frameLock = 60;\n\t\tthis.simulationLock = 60;\n\n\t\tthis.entities  = new Set;\n\t\tthis.removed = new WeakSet;\n\t\tthis.awake = new Set;\n\n\t\tthis.paused = false;\n\t\tthis.loaded = false;\n\t\tthis.overscan = 640;\n\n\t\tthis.world = new World({src: worldSrc, session: this});\n\t\tthis.spriteBoard = new SpriteBoard({element, world: this.world, session: this});\n\n\t\tthis.keyboard = keyboard;\n\n\t\tthis.onScreenJoyPad = onScreenJoyPad;\n\n\t\tthis.world.ready.then(() => this.initialize({keyboard, onScreenJoyPad}));\n\n\t\tthis.controller = new Controller({deadZone: 0.2});\n\t\tthis.controller.zero();\n\n\t\tthis.gamepad = null;\n\t\twindow.addEventListener('gamepadconnected', event => {\n\t\t\tthis.gamepad = event.gamepad;\n\t\t});\n\n\t\twindow.addEventListener('gamepaddisconnected', event => {\n\t\t\tif(!this.gamepad) return;\n\t\t\tthis.gamepad = null;\n\t\t});\n\t}\n\n\tasync initialize()\n\t{\n\t\tthis.loaded = true;\n\n\t\tif(warpStart)\n\t\t{\n\t\t\tconst maps = this.world.getMapsForPoint(...warpStart);\n\n\t\t\tmaps.forEach(map => map.initialize());\n\t\t}\n\n\t\tfor(const map of this.world.maps)\n\t\t{\n\t\t\tif(!map.loaded)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(!map.props.has('player-start'))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst startId = map.props.get('player-start');\n\t\t\tconst startDef = map.entityDefs[startId];\n\t\t\tconst playerClass = await this.entityPallet.resolve(startDef.type);\n\n\t\t\tconst startX = warpStart[0] ?? startDef.x;\n\t\t\tconst startY = warpStart[1] ?? startDef.y;\n\n\t\t\tconst player = this.player = new Entity({\n\t\t\t\tcontroller: new playerClass,\n\t\t\t\tsession: this,\n\t\t\t\tx: startX,\n\t\t\t\ty: startY,\n\t\t\t\tinputManager: this.controller,\n\t\t\t\tsprite: new Sprite({\n\t\t\t\t\tsession: this,\n\t\t\t\t\tspriteSheet: new SpriteSheet({\n\t\t\t\t\t\tsrc: '/player.tsj'\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t\tcamera: Camera,\n\t\t\t});\n\n\t\t\tthis.spriteBoard.following = player;\n\t\t\tthis.addEntity(player);\n\t\t}\n\t}\n\n\taddEntity(entity)\n\t{\n\t\tif(this.entities.has(entity))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.entities.add(entity);\n\t\tconst maps = this.world.getMapsForPoint(entity.x, entity.y);\n\t\tmaps.forEach(map => map.addEntity(entity));\n\t}\n\n\tremoveEntity(entity)\n\t{\n\t\tentity.destroy();\n\t\tthis.entities.delete(entity);\n\t\tthis.awake.delete(entity);\n\t\tthis.spriteBoard.sprites.delete(entity.sprite);\n\t\tQuickTree.deleteFromAllTrees(entity);\n\t\tMotionGraph.deleteFromAllGraphs(entity);\n\t\tthis.removed.add(entity);\n\t}\n\n\tsimulate(now)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst delta = now - this.sThen;\n\n\t\tif(this.simulationLock == 0 || 0.2 + delta < (1000 / this.simulationLock))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.sThen = now;\n\n\t\tthis.keyboard.update();\n\t\tthis.controller.update({gamepad: this.gamepad});\n\n\t\tthis.controller.readInput({\n\t\t\tonScreenJoyPad: this.onScreenJoyPad\n\t\t\t, gamepads: navigator.getGamepads()\n\t\t\t, keyboard: this.keyboard\n\t\t});\n\n\t\tif(this.controller.buttons[1020] && this.controller.buttons[1020].time === 1)\n\t\t{\n\t\t\tthis.paused = !this.paused;\n\t\t}\n\n\t\tif(this.paused || !this.player)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.entities.forEach(entity => {\n\t\t\tif(entity.sprite) entity.sprite.visible = false;\n\t\t});\n\n\t\tconst player = this.player;\n\n\t\tthis.spriteBoard.sprites.clear();\n\t\tthis.spriteBoard.regions.clear();\n\n\t\tthis.world.simulate(delta);\n\n\t\tconst visibleMaps = this.world.getMapsForRect(\n\t\t\tplayer.x\n\t\t\t, player.y\n\t\t\t, Camera.width\n\t\t\t, Camera.height\n\t\t);\n\n\t\tvisibleMaps.forEach(map => {\n\t\t\tmap.simulate(delta);\n\t\t\tconst mapRegions = map.getRegionsForRect(\n\t\t\t\tplayer.x + -(Camera.width * 1.0) + 64\n\t\t\t\t, player.y + -(Camera.height * 1.0) + 64\n\t\t\t\t, player.x + (Camera.width * 1.0) + 64\n\t\t\t\t, player.y + (Camera.height * 1.0) + 64\n\t\t\t);\n\n\t\t\tmapRegions.forEach(region => {\n\t\t\t\tregion.simulate(delta);\n\t\t\t\tthis.spriteBoard.regions.add(region);\n\t\t\t});\n\t\t});\n\n\t\tconst entities = this.world.getEntitiesForRect(\n\t\t\tplayer.x\n\t\t\t, player.y\n\t\t\t, (Camera.width  * 1 + this.overscan)\n\t\t\t, (Camera.height * 1 + this.overscan)\n\t\t);\n\n\t\tentities.delete(player);\n\t\tentities.add(player);\n\n\t\tconst sleeping = this.awake.difference(entities);\n\n\t\tsleeping.forEach(entity => {\n\t\t\tif(entity.sprite) entity.sprite.visible = false;\n\t\t\tentity.sleep();\n\t\t\tthis.awake.delete(entity);\n\t\t});\n\n\t\tentities.forEach(entity => {\n\t\t\tthis.awake.add(entity);\n\n\t\t\tif(entity.sleeping)\n\t\t\t{\n\t\t\t\tentity.wakeup();\n\t\t\t}\n\n\t\t\tentity.simulate(delta);\n\t\t\tif(this.removed.has(entity)) return;\n\n\t\t\tconst maps = this.world.getMapsForPoint(entity.x, entity.y);\n\t\t\tmaps.forEach(map => map.moveEntity(entity));\n\n\t\t\tif(entity.sprite)\n\t\t\t{\n\t\t\t\tthis.spriteBoard.sprites.add(entity.sprite);\n\t\t\t\tentity.sprite.visible = true;\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tdraw(now)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst delta = now - this.fThen;\n\n\t\tif(this.frameLock == 0 || 0.2 + delta < (1000 / this.frameLock))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.spriteBoard.draw(delta);\n\t\tthis.fThen = now;\n\n\t\treturn true;\n\t}\n}\n","export class Camera\n{\n\tstatic x = 0;\n\tstatic y = 0;\n\tstatic width  = 0;\n\tstatic height = 0;\n}\n","import { Bindable } from 'curvature/base/Bindable';\n\nexport class MapRenderer\n{\n\tconstructor({spriteBoard, map})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.spriteBoard = spriteBoard;\n\n\t\tthis.loaded = false;\n\n\t\tthis.map = map;\n\t\tthis.width  = 0;\n\t\tthis.height = 0;\n\n\t\tthis.tileWidth  = 0;\n\t\tthis.tileHeight = 0;\n\n\t\tthis.xOffset = 0;\n\t\tthis.yOffset = 0;\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tthis.tileMapping = this.spriteBoard.gl2d.createTexture(1, 1);\n\t\tthis.tileTexture = this.spriteBoard.gl2d.createTexture(1, 1);\n\n\t\tmap.initialize();\n\n\t\tmap.ready.then(() => {\n\t\t\tthis.loaded = true;\n\t\t\tthis.tileWidth  = map.tileWidth;\n\t\t\tthis.tileHeight = map.tileHeight;\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, this.tileTexture);\n\t\t\tgl.texImage2D(\n\t\t\t\tgl.TEXTURE_2D\n\t\t\t\t, 0\n\t\t\t\t, gl.RGBA\n\t\t\t\t, map.tileSetWidth\n\t\t\t\t, map.tileSetHeight\n\t\t\t\t, 0\n\t\t\t\t, gl.RGBA\n\t\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t\t, map.pixels\n\t\t\t);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\t});\n\t}\n\n\tnegSafeMod(a,b)\n\t{\n\t\tif(a >= 0) return a % b;\n\t\treturn (b + a % b) % b;\n\t}\n\n\tdraw(delta, priority)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tconst x = -this.map.x + this.spriteBoard.following.x;\n\t\tconst y = -this.map.y + this.spriteBoard.following.y;\n\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\n\t\tconst halfTileWidth  = this.tileWidth  * 0.5;\n\t\tconst halfTileHeight = this.tileHeight * 0.5;\n\n\t\tconst tilesWide = Math.floor(this.width / this.tileWidth);\n\t\tconst tilesHigh = Math.floor(this.height / this.tileHeight);\n\n\t\tconst xOffset = Math.floor(Math.floor((0.5 * this.width)  / 64) + 0) * 64;\n\t\tconst yOffset = Math.floor(Math.floor((0.5 * this.height) / 64) + 0) * 64;\n\n\t\tconst xTile = (x+halfTileWidth)/this.tileWidth\n\t\t\t+ -this.negSafeMod( x + halfTileWidth, 64 ) / this.tileWidth\n\t\t\t+ -xOffset / this.tileWidth;\n\n\t\tconst yTile = (y+halfTileHeight)/this.tileHeight\n\t\t\t+ -this.negSafeMod( y + halfTileHeight, 64 ) / this.tileHeight\n\t\t\t+ -yOffset / this.tileHeight;\n\n\t\tif(xTile + tilesWide < 0 || yTile + tilesHigh < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst xPos = zoom * (\n\t\t\t(this.width + this.xOffset) * 0.5\n\t\t\t+ -this.negSafeMod( x + halfTileWidth, 64 )\n\t\t\t+ -xOffset\n\t\t);\n\n\t\tconst yPos = zoom * (\n\t\t\t(this.height + this.yOffset) * 0.5\n\t\t\t+ -this.negSafeMod( y + halfTileHeight, 64 )\n\t\t\t+ -yOffset\n\t\t);\n\n\t\tthis.spriteBoard.drawProgram.uniformF('u_size', this.width, this.height);\n\t\tthis.spriteBoard.drawProgram.uniformF('u_tileSize', this.tileWidth, this.tileHeight);\n\t\tthis.spriteBoard.drawProgram.uniformF('u_mapTextureSize', this.map.tileSetWidth, this.map.tileSetHeight);\n\t\tthis.spriteBoard.drawProgram.uniformI('u_renderTiles', 1);\n\n\t\tgl.activeTexture(gl.TEXTURE2);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.tileTexture);\n\t\tthis.spriteBoard.drawProgram.uniformI('u_tiles', 2);\n\n\t\tgl.activeTexture(gl.TEXTURE3);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.tileMapping);\n\t\tthis.spriteBoard.drawProgram.uniformI('u_tileMapping', 3);\n\n\t\tconst tilePixelLayers = this.map.getSlice(\n\t\t\tpriority\n\t\t\t, xTile\n\t\t\t, yTile\n\t\t\t, tilesWide\n\t\t\t, tilesHigh\n\t\t\t, delta\n\t\t);\n\n\t\tfor(const tilePixels of tilePixelLayers)\n\t\t{\n\t\t\tgl.texImage2D(\n\t\t\t\tgl.TEXTURE_2D\n\t\t\t\t, 0\n\t\t\t\t, gl.RGBA\n\t\t\t\t, tilesWide\n\t\t\t\t, tilesHigh\n\t\t\t\t, 0\n\t\t\t\t, gl.RGBA\n\t\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t\t, tilePixels\n\t\t\t);\n\n\t\t\tthis.setRectangle(\n\t\t\t\txPos + this.tileWidth * 0.5 * zoom\n\t\t\t\t, yPos + this.tileHeight * zoom\n\t\t\t\t, this.width * zoom\n\t\t\t\t, this.height * zoom\n\t\t\t);\n\n\t\t\tthis.spriteBoard.drawProgram.uniformF('u_region', 1, 1, 1, 0);\n\n\t\t\tif(priority === 'foreground')\n\t\t\t{\n\t\t\t\tthis.spriteBoard.drawProgram.uniformF('u_region', 1, 1, 1, 1);\n\t\t\t}\n\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.effectBuffer);\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\t\t\tthis.spriteBoard.drawProgram.uniformF('u_region', 0, 0, 0, 0);\n\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.drawBuffer);\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\t\t}\n\n\t\t// Cleanup...\n\t\tthis.spriteBoard.drawProgram.uniformI('u_renderTiles', 0);\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\t\tgl.activeTexture(gl.TEXTURE2);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\n\t\tgl.activeTexture(gl.TEXTURE3);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tresize(x, y)\n\t{\n\t\tthis.width =  x + 0;\n\t\tthis.height = y + 0;\n\n\t\tthis.width =  Math.ceil(x / 128) * 128 + 128;\n\t\tthis.height = Math.ceil(y / 128) * 128 + 128;\n\n\t\tthis.xOffset = x - this.width;\n\t\tthis.yOffset = y - this.height;\n\t}\n\n\tsimulate()\n\t{}\n\n\tsetRectangle(x, y, width, height)\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_texCoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t0.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t]), gl.STATIC_DRAW);\n\n\t\tconst x1 = x;\n\t\tconst x2 = x + width;\n\t\tconst y1 = y;\n\t\tconst y2 = y + height;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\tx1, y2,\n\t\t\tx2, y2,\n\t\t\tx1, y1,\n\t\t\tx1, y1,\n\t\t\tx2, y2,\n\t\t\tx2, y1,\n\t\t]), gl.STATIC_DRAW);\n\t}\n}\n","import { Bindable } from 'curvature/base/Bindable';\n\nclass ParallaxLayer\n{\n\ttexture = null;\n\twidth = 0;\n\theight = 0;\n\toffset = 0;\n\tparallax = 0;\n}\n\nexport class Parallax\n{\n\tconstructor({spriteBoard, map})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.spriteBoard = spriteBoard;\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tthis.map = map;\n\t\tthis.texture = null;\n\n\t\tthis.height = 0;\n\n\t\tthis.parallaxLayers = [];\n\t\tthis.textures = [];\n\n\t\tthis.ready = map.ready.then(() => this.assemble(map)).then(() => {\n\t\t\tthis.loaded = true;\n\t\t});\n\n\t\tthis.loaded = false;\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\tassemble()\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tconst loadSlices = this.map.imageLayers.map(\n\t\t\t(layerData, index) => this.constructor.loadImage(new URL(layerData.image, this.map.src)).then(image => {\n\t\t\t\tconst texture = this.textures[index] = gl.createTexture();\n\t\t\t\tconst layer = this.parallaxLayers[index] = new ParallaxLayer;\n\n\t\t\t\tconst layerBottom = image.height + layerData.offsety;\n\n\t\t\t\tif(this.height < layerBottom)\n\t\t\t\t{\n\t\t\t\t\tthis.height = layerBottom;\n\t\t\t\t}\n\n\t\t\t\tlayer.texture = texture;\n\t\t\t\tlayer.width = image.width;\n\t\t\t\tlayer.height = image.height;\n\t\t\t\tlayer.offset = layerData.offsety ?? 0;\n\t\t\t\tlayer.parallax = layerData.parallaxx ?? 1;\n\n\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\n\t\t\t\tgl.texImage2D(\n\t\t\t\t\tgl.TEXTURE_2D\n\t\t\t\t\t, 0\n\t\t\t\t\t, gl.RGBA\n\t\t\t\t\t, gl.RGBA\n\t\t\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t\t\t, image\n\t\t\t\t);\n\n\t\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n\t\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\t\t\t}\n\t\t));\n\n\t\treturn Promise.all(loadSlices);\n\t}\n\n\tdraw()\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\n\t\tthis.x = this.spriteBoard.following.x + -this.spriteBoard.width / zoom * 0.5;\n\t\tthis.y = this.spriteBoard.following.y;\n\n\t\tthis.spriteBoard.drawProgram.uniformI('u_renderParallax', 1);\n\t\tthis.spriteBoard.drawProgram.uniformF('u_scroll', this.x, this.y);\n\n\t\tgl.activeTexture(gl.TEXTURE0);\n\n\t\tfor(const layer of this.parallaxLayers)\n\t\t{\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, layer.texture);\n\n\t\t\tthis.spriteBoard.drawProgram.uniformF('u_size', layer.width, layer.width);\n\t\t\tthis.spriteBoard.drawProgram.uniformF('u_parallax', layer.parallax, 0);\n\n\t\t\tthis.setRectangle(\n\t\t\t\t0\n\t\t\t\t, this.spriteBoard.height + (-this.height + layer.offset) * zoom\n\t\t\t\t, layer.width * zoom\n\t\t\t\t, layer.height * zoom\n\t\t\t\t, layer.width\n\t\t\t);\n\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.drawBuffer);\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\t\t}\n\n\t\tthis.spriteBoard.drawProgram.uniformI('u_renderParallax', 0);\n\n\t\t// Cleanup...\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tstatic loadImage(src)\n\t{\n\t\tif(!this.imagePromises)\n\t\t{\n\t\t\tthis.imagePromises = {};\n\t\t}\n\n\t\tif(this.imagePromises[src])\n\t\t{\n\t\t\treturn this.imagePromises[src];\n\t\t}\n\n\t\tthis.imagePromises[src] = new Promise((accept, reject)=>{\n\t\t\tconst image = new Image();\n\t\t\timage.src   = src;\n\t\t\timage.addEventListener('load', (event)=>{\n\t\t\t\taccept(image);\n\t\t\t});\n\t\t});\n\n\t\treturn this.imagePromises[src];\n\t}\n\n\tsetRectangle(x, y, width, height)\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst ratio = this.spriteBoard.width / width;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_texCoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\t0.0, 0.0,\n\t\t\tratio, 0.0,\n\t\t\t0.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\tratio, 0.0,\n\t\t\tratio, 1.0,\n\t\t]), gl.STATIC_DRAW);\n\n\t\tconst x1 = x - 0;\n\t\tconst x2 = x + this.spriteBoard.width;\n\t\tconst y1 = y;\n\t\tconst y2 = y + height;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\tx1, y2,\n\t\t\tx2, y2,\n\t\t\tx1, y1,\n\t\t\tx1, y1,\n\t\t\tx2, y2,\n\t\t\tx2, y1,\n\t\t]), gl.STATIC_DRAW);\n\t}\n}\n","import { Bindable } from \"curvature/base/Bindable\";\nimport { SpriteSheet } from \"./SpriteSheet\";\nimport { Matrix } from \"../math/Matrix\";\nimport { Camera } from \"./Camera\";\nimport { Rectangle } from \"../math/Rectangle\";\n\nconst rectMap = new WeakMap;\n\nexport class Region\n{\n\tstatic fromRect(rect)\n\t{\n\t\treturn rectMap.get(rect);\n\t}\n\n\tconstructor({x, y, z, width, height, session, spriteBoard})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.z = z || 0;\n\n\t\tthis.width  = width  || 32;\n\t\tthis.height = height || 32;\n\n\t\tthis.originalWidth = width;\n\t\tthis.originalHeight = height;\n\n\t\tthis.visible = false;\n\n\t\tthis.gravity = 0.5;\n\t\tthis.drag = 0.95;\n\n\t\tthis.rect = new Rectangle(\n\t\t\tthis.x\n\t\t\t, this.y\n\t\t\t, this.x + this.width\n\t\t\t, this.y + this.height\n\t\t);\n\n\t\trectMap.set(this.rect, this);\n\n\t\tthis.spriteBoard = spriteBoard;\n\t\tthis.session = session;\n\t\tthis.region = [0, 1, 1, 1];\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tthis.texture = gl.createTexture();\n\n\t\tconst singlePixel = new Uint8ClampedArray([\n\t\t\tthis.region[0] * 255\n\t\t\t, this.region[1] * 255\n\t\t\t, this.region[2] * 255\n\t\t\t, this.region[3] * 255\n\t\t]);\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, 1\n\t\t\t, 1\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, singlePixel\n\t\t);\n\t}\n\n\tmove(x, y)\n\t{\n\t\tthis.x += x;\n\t\tthis.y += y;\n\n\t\tthis.rect.x1 += x;\n\t\tthis.rect.x2 += x;\n\t\tthis.rect.y1 += y;\n\t\tthis.rect.y2 += y;\n\t}\n\n\tresize(w, h, cx, cy)\n\t{\n\t\tconst wStart = this.width;\n\t\tconst hStart = this.height;\n\n\t\tconst sx = cx * (1 - w/wStart) * wStart;\n\t\tconst sy = cy * (1 - h/hStart) * hStart;\n\n\t\tthis.width = w;\n\t\tthis.height = h;\n\n\t\tthis.x += sx;\n\t\tthis.y += sy;\n\n\t\tthis.rect.x1 = this.x;\n\t\tthis.rect.y1 = this.y;\n\n\t\tthis.rect.x2 = this.rect.x1 + w;\n\t\tthis.rect.y2 = this.rect.y1 + w;\n\t}\n\n\tsimulate(delta)\n\t{\n\t\tthis.resize(\n\t\t\tthis.width\n\t\t\t, this.originalHeight * ((Math.sin(this.session.world.age / 3000) * 0.5) + 0.5)\n\t\t\t, 1.0\n\t\t\t, 1.0\n\t\t);\n\t}\n\n\tdraw(delta)\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\t\tthis.spriteBoard.drawProgram.uniformF('u_region', 0, 0, 0, 0);\n\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n\t\tthis.setRectangle(\n\t\t\tthis.x * zoom + -Camera.x + (this.spriteBoard.width / 2)\n\t\t\t, this.y * zoom + -Camera.y + (this.spriteBoard.height / 2)\n\t\t\t, this.width * zoom\n\t\t\t, this.height * zoom\n\t\t);\n\n\t\t// gl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.drawBuffer);\n\t\t// gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n\t\tthis.spriteBoard.drawProgram.uniformF('u_region', ...Object.assign(this.region || [0, 0, 0], {3: 1}));\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.effectBuffer);\n\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\n\t\tthis.spriteBoard.drawProgram.uniformF('u_region', 0, 0, 0, 0);\n\n\t\t// Cleanup...\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tsetRectangle(x, y, width, height)\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\n\t\tconst xra = 1.0;\n\t\tconst yra = 1.0;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_texCoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\t0.0, 0.0,\n\t\t\txra, 0.0,\n\t\t\t0.0, yra,\n\t\t\t0.0, yra,\n\t\t\txra, 0.0,\n\t\t\txra, yra,\n\t\t]), gl.STATIC_DRAW);\n\n\t\tconst x1 = x;\n\t\tconst y1 = y;\n\t\tconst x2 = x + width;\n\t\tconst y2 = y + height;\n\n\t\tconst points = new Float32Array([\n\t\t\tx1, y1,\n\t\t\tx2, y1,\n\t\t\tx1, y2,\n\t\t\tx1, y2,\n\t\t\tx2, y1,\n\t\t\tx2, y2,\n\t\t]);\n\n\t\tconst xOff = x + width;\n\t\tconst yOff = y + height;\n\n\t\tconst t = Matrix.transform(points, Matrix.composite(\n\t\t\tMatrix.translate(xOff + -width * 0.0, yOff + zoom + 16 * zoom)\n\t\t\t, Matrix.translate(-xOff, -yOff)\n\t\t));\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, t, gl.STATIC_DRAW);\n\t}\n}\n","import { Bindable } from \"curvature/base/Bindable\";\nimport { SpriteSheet } from \"./SpriteSheet\";\nimport { Matrix } from \"../math/Matrix\";\nimport { Camera } from \"./Camera\";\n\nexport class Sprite\n{\n\tconstructor({src, color, pixels, session, spriteSheet, x, y, z, width, height, originalWidth, originalHeight, tiled = false})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.z = z || 0;\n\n\t\tthis.currentAnimation = null;\n\n\t\tthis.width  = width  || 32;\n\t\tthis.height = height || 32;\n\n\t\tthis.originalWidth = originalWidth ?? this.width;\n\t\tthis.originalHeight = originalHeight ?? this.height;\n\t\tthis.tiled = tiled;\n\n\t\tthis.scale   = 1;\n\t\tthis.scaleX  = 1;\n\t\tthis.scaleY  = 1;\n\t\tthis.theta   = 0;\n\t\tthis.shearX  = 0;\n\t\tthis.shearY  = 0;\n\n\t\tthis.xCenter = 0.5;\n\t\tthis.yCenter = 1.0;\n\n\t\tthis.visible = false;\n\t\tthis.textures = [];\n\t\tthis.frames = [];\n\t\tthis.currentDelay = 0;\n\t\tthis.currentFrame = 0;\n\t\tthis.currentFrames = '';\n\n\t\tthis.speed    = 0;\n\t\tthis.maxSpeed = 4;\n\n\t\tthis.RIGHT\t= 0;\n\t\tthis.DOWN\t= 1;\n\t\tthis.LEFT\t= 2;\n\t\tthis.UP\t\t= 3;\n\n\t\tthis.EAST\t= this.RIGHT;\n\t\tthis.SOUTH\t= this.DOWN;\n\t\tthis.WEST\t= this.LEFT;\n\t\tthis.NORTH\t= this.UP;\n\n\t\tthis.region = [0, 0, 0, 1];\n\n\t\tthis.spriteBoard = session.spriteBoard;\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\n\t\tthis.texture = gl.createTexture();\n\n\t\tconst singlePixel = color\n\t\t\t? new Uint8Array(color)\n\t\t\t: new Uint8Array([\n\t\t\t\tMath.trunc(Math.random() * 255)\n\t\t\t\t, Math.trunc(Math.random() * 255)\n\t\t\t\t, Math.trunc(Math.random() * 255)\n\t\t\t\t, 255\n\t\t\t]);\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, 1\n\t\t\t, 1\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, singlePixel\n\t\t);\n\n\t\tif(src && !spriteSheet)\n\t\t{\n\t\t\tspriteSheet = new SpriteSheet({image: src});\n\t\t}\n\n\t\tthis.spriteSheet = spriteSheet;\n\n\t\tif(spriteSheet)\n\t\t{\n\t\t\tspriteSheet.ready.then(() => {\n\t\t\t\tthis.width = spriteSheet.tileWidth;\n\t\t\t\tthis.height = spriteSheet.tileHeight;\n\n\t\t\t\tthis.originalWidth = originalWidth ?? this.width;\n\t\t\t\tthis.originalHeight = originalHeight ?? this.height;\n\n\t\t\t\tthis.texture = this.createTexture( spriteSheet.getFrame(0) );\n\n\t\t\t\tfor(let i = 0; i < spriteSheet.tileCount; i++)\n\t\t\t\t{\n\t\t\t\t\tthis.textures[i] = this.createTexture( spriteSheet.getFrame(i) );\n\t\t\t\t}\n\n\t\t\t\tthis.changeAnimation('default');\n\t\t\t});\n\t\t}\n\t}\n\n\tdraw(delta)\n\t{\n\t\tif(this.currentDelay > 0)\n\t\t{\n\t\t\tthis.currentDelay -= delta;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.currentFrame++;\n\n\t\t\tif(this.spriteSheet && this.spriteSheet.animations[this.currentAnimation])\n\t\t\t{\n\t\t\t\tconst animation = this.spriteSheet.animations[this.currentAnimation];\n\n\t\t\t\tif(this.currentFrame >= animation.length)\n\t\t\t\t{\n\t\t\t\t\tthis.currentFrame = this.currentFrame % animation.length;\n\t\t\t\t}\n\n\t\t\t\tconst textureId = animation[this.currentFrame].tileid;\n\n\t\t\t\tconst texture = this.textures[ textureId ];\n\n\t\t\t\tif(texture)\n\t\t\t\t{\n\t\t\t\t\tthis.currentDelay = animation[this.currentFrame].duration;\n\t\t\t\t\tthis.texture = texture;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\t\tthis.spriteBoard.drawProgram.uniformF('u_region', 0, 0, 0, 0);\n\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n\t\tthis.setRectangle(\n\t\t\tthis.x * zoom + -Camera.x + (this.spriteBoard.width / 2)\n\t\t\t, this.y * zoom + -Camera.y + (this.spriteBoard.height / 2) + -this.height * zoom\n\t\t\t, this.width * zoom\n\t\t\t, this.height * zoom\n\t\t);\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.drawBuffer);\n\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\n\t\tthis.spriteBoard.drawProgram.uniformF('u_region', ...Object.assign(this.region || [0, 0, 0], {3: 1}));\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.spriteBoard.effectBuffer);\n\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\n\t\tthis.spriteBoard.drawProgram.uniformF('u_region', 0, 0, 0, 0);\n\n\t\t// Cleanup...\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tchangeAnimation(name)\n\t{\n\t\tif(!this.spriteSheet ||!this.spriteSheet.animations[name])\n\t\t{\n\t\t\t// console.warn(`Animation ${name} not found.`);\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.currentAnimation !== name)\n\t\t{\n\t\t\tthis.currentAnimation = name;\n\t\t\tthis.currentDelay = 0;\n\t\t}\n\t}\n\n\tcreateTexture(pixels)\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\n\t\tif(this.tiled)\n\t\t{\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t\t}\n\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, this.width\n\t\t\t, this.height\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, pixels\n\t\t);\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\n\t\treturn texture;\n\t}\n\n\tsetRectangle(x, y, width, height)\n\t{\n\t\tconst gl = this.spriteBoard.gl2d.context;\n\t\tconst zoom = this.spriteBoard.zoomLevel;\n\n\t\tconst xra = this.width / this.originalWidth;\n\t\tconst yra = this.height / this.originalHeight;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_texCoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\t0.0, 0.0,\n\t\t\txra, 0.0,\n\t\t\t0.0, yra,\n\t\t\t0.0, yra,\n\t\t\txra, 0.0,\n\t\t\txra, yra,\n\t\t]), gl.STATIC_DRAW);\n\n\t\tconst x1 = x;\n\t\tconst y1 = y;\n\t\tconst x2 = x + width;\n\t\tconst y2 = y + height;\n\n\t\tconst points = new Float32Array([\n\t\t\tx1, y1,\n\t\t\tx2, y1,\n\t\t\tx1, y2,\n\t\t\tx1, y2,\n\t\t\tx2, y1,\n\t\t\tx2, y2,\n\t\t]);\n\n\t\tconst xOff = x + width  * this.xCenter;\n\t\tconst yOff = y + height * this.yCenter;\n\n\t\t// this.theta = performance.now() / 1000;\n\n\t\tconst t = Matrix.transform(points, Matrix.composite(\n\t\t\tMatrix.translate(xOff + -width * 0.5, yOff + zoom + 16 * zoom)\n\t\t\t, Matrix.shearX(this.shearX)\n\t\t\t, Matrix.shearX(this.shearY)\n\t\t\t, Matrix.scale(this.scale * this.scaleX, this.scale * this.scaleY)\n\t\t\t, Matrix.rotate(this.theta)\n\t\t\t, Matrix.translate(-xOff, -yOff)\n\t\t));\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.spriteBoard.drawProgram.buffers.a_position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, t, gl.STATIC_DRAW);\n\t}\n}\n","import { Bindable } from 'curvature/base/Bindable';\n\nimport { MapRenderer } from './MapRenderer';\nimport { Parallax } from './Parallax';\n\nimport { Gl2d } from '../gl2d/Gl2d';\nimport { Camera } from './Camera';\nimport { Region } from './Region';\n\nexport class SpriteBoard\n{\n\tconstructor({element, world})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\n\t\tthis.maps = [];\n\n\t\tthis.currentMap = null;\n\t\tthis.world = world;\n\t\tthis.sprites = new Set;\n\t\tthis.regions = new Set;\n\n\t\tthis.screenScale = 1;\n\t\tthis.zoomLevel = 2;\n\n\t\tthis.mouse = {\n\t\t\tx: null\n\t\t\t, y: null\n\t\t\t, clickX: null\n\t\t\t, clickY: null\n\t\t};\n\n\t\tthis.parallax = null;\n\n\t\tthis.width = element.width;\n\t\tthis.height = element.height;\n\n\t\tCamera.width  = element.width;\n\t\tCamera.height = element.height;\n\n\t\tthis.gl2d = new Gl2d(element);\n\n\t\tthis.gl2d.enableBlending();\n\n\t\tconst attributes = ['a_position', 'a_texCoord'];\n\t\tconst uniforms = [\n\t\t\t'u_image'\n\t\t\t, 'u_effect'\n\t\t\t, 'u_tiles'\n\t\t\t, 'u_tileMapping'\n\n\t\t\t, 'u_size'\n\t\t\t, 'u_scroll'\n\t\t\t, 'u_tileSize'\n\t\t\t, 'u_resolution'\n\t\t\t, 'u_mapTextureSize'\n\n\t\t\t, 'u_region'\n\t\t\t, 'u_parallax'\n\t\t\t, 'u_time'\n\n\t\t\t, 'u_renderTiles'\n\t\t\t, 'u_renderParallax'\n\t\t\t, 'u_renderMode'\n\t\t];\n\n\t\tthis.renderMode = 0;\n\n\t\tthis.drawProgram = this.gl2d.createProgram({\n\t\t\tvertexShader: this.gl2d.createShader('sprite/texture.vert')\n\t\t\t, fragmentShader: this.gl2d.createShader('sprite/texture.frag')\n\t\t\t, attributes\n\t\t\t, uniforms\n\t\t});\n\n\t\tthis.drawProgram.use();\n\n\t\tthis.drawLayer = this.gl2d.createTexture(1000, 1000);\n\t\tthis.effectLayer = this.gl2d.createTexture(1000, 1000);\n\n\t\tthis.drawBuffer = this.gl2d.createFramebuffer(this.drawLayer);\n\t\tthis.effectBuffer = this.gl2d.createFramebuffer(this.effectLayer);\n\n\t\tdocument.addEventListener('mousemove', event => {\n\t\t\tthis.mouse.x = event.clientX;\n\t\t\tthis.mouse.y = event.clientY;\n\t\t});\n\n\t\tthis.mapRenderers = new Map;\n\t\tthis.following = null;\n\t}\n\n\tdraw(delta)\n\t{\n\t\tif(this.following)\n\t\t{\n\t\t\tCamera.x = this.following.x * this.zoomLevel || 0;\n\t\t\tCamera.y = this.following.y * this.zoomLevel || 0;\n\n\t\t\tconst maps = [...this.world.getMapsForPoint(this.following.x, this.following.y)];\n\n\t\t\tif(maps[0] && this.currentMap !== maps[0])\n\t\t\t{\n\t\t\t\tconst parallax = this.nextParallax = new Parallax({spriteBoard: this, map: maps[0]});\n\n\t\t\t\tthis.nextParallax.ready.then(() => {\n\t\t\t\t\tif(this.nextParallax === parallax)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.parallax = parallax;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.currentMap = maps[0];\n\t\t\t}\n\n\t\t\tconst visibleMaps = this.world.getMapsForRect(\n\t\t\t\tthis.following.x\n\t\t\t\t, this.following.y\n\t\t\t\t, Camera.width\n\t\t\t\t, Camera.height\n\t\t\t);\n\n\t\t\tconst mapRenderers = new Set;\n\n\t\t\tvisibleMaps.forEach(map => {\n\t\t\t\tmap.visible = true;\n\t\t\t\tif(this.mapRenderers.has(map))\n\t\t\t\t{\n\t\t\t\t\tmapRenderers.add(this.mapRenderers.get(map));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst renderer = new MapRenderer({spriteBoard: this, map});\n\t\t\t\tmapRenderers.add(renderer);\n\t\t\t\trenderer.resize(Camera.width, Camera.height);\n\t\t\t\tthis.mapRenderers.set(map, renderer);\n\t\t\t});\n\n\t\t\tnew Set(this.mapRenderers.keys())\n\t\t\t.difference(visibleMaps)\n\t\t\t.forEach(map => {\n\t\t\t\tthis.mapRenderers.delete(map);\n\t\t\t\tmap.visible = false;\n\t\t\t});\n\t\t}\n\n\t\tconst gl = this.gl2d.context;\n\n\t\tthis.drawProgram.uniformF('u_size', Camera.width, Camera.height);\n\t\tthis.drawProgram.uniformF('u_resolution', gl.canvas.width, gl.canvas.height);\n\t\tthis.drawProgram.uniformI('u_renderMode', this.renderMode);\n\n\t\tthis.drawProgram.uniformF('u_time', performance.now());\n\t\tthis.drawProgram.uniformF('u_region', 0, 0, 0, 0);\n\n\t\tgl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\t\tgl.clearColor(0, 0, 0, 1);\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.effectBuffer);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\n\t\tif(this.currentMap && this.currentMap.backgroundColor)\n\t\t{\n\t\t\t// const color = this.currentMap.backgroundColor.substr(1);\n\t\t\tconst color = this.currentMap.backgroundColor;\n\n\t\t\tconst r = color[0] / 255; //parseInt(color.substr(-6, 2), 16) / 255;\n\t\t\tconst b = color[1] / 255; //parseInt(color.substr(-4, 2), 16) / 255;\n\t\t\tconst g = color[2] / 255; //parseInt(color.substr(-2, 2), 16) / 255;\n\t\t\tconst a = color[3] / 255; //color.length === 8 ? parseInt(color.substr(-8, 2), 16) / 255 : 1;\n\n\t\t\tgl.clearColor(r, g, b, a);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgl.clearColor(0, 0, 0, 1);\n\t\t}\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.drawBuffer);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\n\t\tgl.clearColor(0, 0, 0, 0);\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\n\t\tthis.drawProgram.uniformF('u_size', Camera.width, Camera.height);\n\n\t\tlet sprites = [...this.sprites];\n\n\t\tsprites.sort((a,b) => {\n\t\tif(a.y === undefined)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\n\t\tif(b.y === undefined)\n\t\t\t{\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn a.y - b.y;\n\t\t});\n\n\t\tthis.parallax && this.parallax.draw();\n\t\tthis.mapRenderers.forEach(mr => mr.draw(delta, 'background'));\n\t\tsprites.forEach(s => s.visible && s.draw(delta));\n\t\tthis.mapRenderers.forEach(mr => mr.draw(delta, 'midground'));\n\t\tthis.regions.forEach(r => r.draw());\n\t\tthis.mapRenderers.forEach(mr => mr.draw(delta, 'foreground'));\n\n\t\t// Set the rectangle for both layers\n\t\tthis.setRectangle(\n\t\t\t0\n\t\t\t, this.gl2d.element.height\n\t\t\t, this.gl2d.element.width\n\t\t\t, -this.gl2d.element.height\n\t\t);\n\n\t\t// Switch to the main framebuffer\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\t\t// Put the drawLayer in tex0\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.drawLayer);\n\t\tthis.drawProgram.uniformI('u_image', 0);\n\n\t\t// Put the effectLayer in tex1\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.effectLayer);\n\t\tthis.drawProgram.uniformI('u_effect', 1);\n\n\t\t// Draw\n\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\n\t\t// Cleanup...\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t\tgl.activeTexture(gl.TEXTURE4);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tresize(width, height)\n\t{\n\t\tconst gl = this.gl2d.context;\n\n\t\twidth  = width  || this.gl2d.element.width;\n\t\theight = height || this.gl2d.element.height;\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t\tCamera.x *= this.zoomLevel;\n\t\tCamera.y *= this.zoomLevel;\n\n\t\tCamera.width  = width  / this.zoomLevel;\n\t\tCamera.height = height / this.zoomLevel;\n\n\t\tthis.mapRenderers.forEach(mr => mr.resize(Camera.width, Camera.height));\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.drawLayer);\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, this.width\n\t\t\t, this.height\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, null\n\t\t);\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.effectLayer);\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, this.width\n\t\t\t, this.height\n\t\t\t, 0\n\t\t\t, gl.RGBA\n\t\t\t, gl.UNSIGNED_BYTE\n\t\t\t, null\n\t\t);\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tzoom(delta)\n\t{\n\t\tconst max = this.screenScale * 32;\n\t\tconst min = this.screenScale * 0.2;\n\t\tconst step = 0.05 * this.zoomLevel;\n\n\t\tlet zoomLevel = delta * step + this.zoomLevel;\n\n\t\tif(zoomLevel < min)\n\t\t{\n\t\t\tzoomLevel = min;\n\t\t}\n\t\telse if(zoomLevel > max)\n\t\t{\n\t\t\tzoomLevel = max;\n\t\t}\n\n\t\tif(Math.abs(zoomLevel - 1) < 0.05)\n\t\t{\n\t\t\tzoomLevel = 1;\n\t\t}\n\n\t\tif(this.zoomLevel !== zoomLevel)\n\t\t{\n\t\t\tthis.zoomLevel = zoomLevel;\n\t\t\tthis.resize();\n\t\t}\n\t}\n\n\tsetRectangle(x, y, width, height)\n\t{\n\t\tconst gl = this.gl2d.context;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.drawProgram.buffers.a_texCoord);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t0.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t]), gl.STATIC_DRAW);\n\n\t\tconst x1 = x;\n\t\tconst x2 = x + width;\n\t\tconst y1 = y;\n\t\tconst y2 = y + height;\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.drawProgram.buffers.a_position);\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n\t\t\tx1, y1,\n\t\t\tx2, y1,\n\t\t\tx1, y2,\n\t\t\tx1, y2,\n\t\t\tx2, y1,\n\t\t\tx2, y2,\n\t\t]), gl.STREAM_DRAW);\n\t}\n}\n","import { Tileset } from \"./Tileset\";\n\nexport class SpriteSheet extends Tileset\n{\n\tconstructor(tilesetData)\n\t{\n\t\tsuper(tilesetData);\n\n\t\tthis.animations = { default: [{tileid: 0, duration: Infinity}] };\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.context = this.canvas.getContext(\"2d\", {willReadFrequently: true});\n\t\tthis.frames = [];\n\n\t\tthis.ready = this.ready.then(() => {\n\t\t\tthis.processImage();\n\n\t\t\tfor(const tile of this.tiles)\n\t\t\t{\n\t\t\t\tif(tile.animation)\n\t\t\t\t{\n\t\t\t\t\tthis.animations[tile.type] = tile.animation;\n\t\t\t\t}\n\t\t\t\telse if(tile.type)\n\t\t\t\t{\n\t\t\t\t\tthis.animations[tile.type] = [{duration: Infinity, tileid: tile.id}];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprocessImage()\n\t{\n\t\tthis.canvas.width  = this.image.width;\n\t\tthis.canvas.height = this.image.height;\n\n\t\tthis.context.drawImage(this.image, 0, 0);\n\n\t\tfor(let i = 0; i < this.tileCount; i++)\n\t\t{\n\t\t\tthis.frames[i] = this.getFrame(i)\n\t\t}\n\t}\n\n\tgetFrame(frameId)\n\t{\n\t\tframeId = frameId % this.tileCount;\n\t\tconst i = frameId % this.columns;\n\t\tconst j = Math.floor(frameId / this.columns);\n\n\t\treturn this.context.getImageData(\n\t\t\ti * this.tileWidth\n\t\t\t, j * this.tileHeight\n\t\t\t, this.tileWidth\n\t\t\t, this.tileHeight\n\t\t).data;\n\t}\n}\n","export class TextureBank\n{\n\t\n}","const cache = new Map;\n\nexport class Tileset\n{\n\tconstructor({\n\t\tsource, src, map, firstgid, columns, image, imageheight, imagewidth\n\t\t, margin , name, spacing, tilecount, tileheight, tilewidth, tiles\n\t}){\n\t\tthis.firstGid = firstgid ?? 0;\n\t\tthis.tileCount  = tilecount ?? 0;\n\t\tthis.tileHeight = tileheight ?? 0;\n\t\tthis.tileWidth  = tilewidth ?? 0;\n\n\t\tsrc = src ?? source;\n\n\t\tif(src)\n\t\t{\n\t\t\tthis.src = new URL(src, location);\n\t\t}\n\n\t\tthis.map = map;\n\n\t\tthis.animations = {};\n\n\t\tthis.ready = this.getReady({\n\t\t\tsrc, columns, image, imageheight, imagewidth, margin\n\t\t\t, name, spacing, tilecount, tileheight, tilewidth, tiles\n\t\t});\n\t}\n\n\tasync getReady({\n\t\tsrc, columns, image, imageheight, imagewidth, margin, name\n\t\t, spacing, tilecount, tileheight, tilewidth, tiles\n\t}){\n\t\tif(src)\n\t\t{\n\t\t\tif(!cache.has(src))\n\t\t\t{\n\t\t\t\tconsole.log(src);\n\t\t\t\tcache.set(src, fetch(src));\n\t\t\t}\n\n\t\t\t({columns, image, imageheight, imagewidth, margin, name,\n\t\t\t\tspacing, tilecount, tileheight, tilewidth, tiles\n\t\t\t} = await (await cache.get(src)).clone().json());\n\n\t\t\tif(tiles) for(const tile of tiles)\n\t\t\t{\n\t\t\t\ttile.id += this.firstGid;\n\t\t\t}\n\t\t}\n\n\t\tthis.columns = columns ?? 1;\n\t\tthis.margin  = margin ?? 0;\n\t\tthis.name    = name ?? image;\n\t\tthis.spacing = spacing ?? 0;\n\t\tthis.tiles   = tiles ?? [];\n\n\t\tthis.tileCount = tilecount ?? 1;\n\n\t\tlet imgSrc = null;\n\n\t\tif(this.src)\n\t\t{\n\t\t\timgSrc = new URL(image, this.src);\n\t\t}\n\t\telse if(this.map)\n\t\t{\n\t\t\timgSrc = new URL(image, this.map.src);\n\t\t}\n\t\telse\n\t\t{\n\t\t\timgSrc = new URL(image, location);\n\t\t}\n\n\t\tif(!cache.has(imgSrc.href))\n\t\t{\n\t\t\tconst image = new Image;\n\t\t\timage.src = imgSrc;\n\t\t\tcache.set(imgSrc.href, new Promise(\n\t\t\t\taccept => image.onload = () => accept(image)\n\t\t\t));\n\t\t}\n\n\t\tthis.image = await cache.get(imgSrc.href);\n\n\t\tthis.imageWidth  = imagewidth ?? this.image.width;\n\t\tthis.imageHeight = imageheight ?? this.image.height;\n\n\t\tthis.tileWidth  = tilewidth ?? this.imageWidth;\n\t\tthis.tileHeight = tileheight ?? this.imageHeight;\n\n\t\tthis.rows = Math.ceil(imageheight / tileheight) || 1;\n\n\t\tfor(const tile of this.tiles)\n\t\t{\n\t\t\tif(tile.animation)\n\t\t\t{\n\t\t\t\tthis.animations[tile.id] = tile.animation;\n\t\t\t}\n\t\t}\n\t}\n}\n","module.exports = \"// texture.frag\\n#define M_PI 3.1415926535897932384626433832795\\n#define M_TAU M_PI / 2.0\\nprecision mediump float;\\n\\nvarying vec2 v_texCoord;\\nvarying vec2 v_position;\\n\\nuniform sampler2D u_image;\\nuniform sampler2D u_effect;\\nuniform sampler2D u_tiles;\\nuniform sampler2D u_tileMapping;\\n\\nuniform vec2 u_size;\\nuniform vec2 u_tileSize;\\nuniform vec2 u_resolution;\\nuniform vec2 u_mapTextureSize;\\n\\nuniform vec4 u_color;\\nuniform vec4 u_region;\\nuniform vec2 u_parallax;\\nuniform vec2 u_scroll;\\n\\nuniform float u_time;\\nuniform int u_renderTiles;\\nuniform int u_renderParallax;\\nuniform int u_renderMode;\\n\\nfloat masked = 0.0;\\nfloat sorted = 1.0;\\nfloat displace = 1.0;\\nfloat blur = 1.0;\\n\\nvec2 rippleX(vec2 texCoord, float a, float b, float c) {\\n  vec2 rippled = vec2(\\n    v_texCoord.x + sin(v_texCoord.y * (a * u_size.y) + b) * c / u_size.x,\\n    v_texCoord.y\\n  );\\n\\n  if (rippled.x < 0.0) {\\n    rippled.x = abs(rippled.x);\\n  }\\n  else if (rippled.x > u_size.x) {\\n    rippled.x = u_size.x - (rippled.x - u_size.x);\\n  }\\n\\n  return rippled;\\n}\\n\\nvec2 rippleY(vec2 texCoord, float a, float b, float c) {\\n  vec2 rippled = vec2(v_texCoord.x, v_texCoord.y + sin(v_texCoord.x * (a * u_size.x) + b) * c / u_size.y);\\n\\n  if (rippled.y < 0.0) {\\n    rippled.x = abs(rippled.x);\\n  }\\n  else if (rippled.y > u_size.y) {\\n    rippled.y = u_size.y - (rippled.y - u_size.y);\\n  }\\n\\n  return rippled;\\n}\\n\\nvec4 motionBlur(sampler2D image, float angle, float magnitude, vec2 textCoord) {\\n  vec4 originalColor = texture2D(image, textCoord);\\n  vec4 dispColor = originalColor;\\n\\n  const float max = 10.0;\\n  float weight = 0.85;\\n\\n  for (float i = 0.0; i < max; i += 1.0) {\\n    if(i > abs(magnitude) || originalColor.a < 1.0) {\\n      break;\\n    }\\n    vec4 dispColorDown = texture2D(image, textCoord + vec2(\\n      cos(angle) * i * sign(magnitude) / u_size.x,\\n      sin(angle) * i * sign(magnitude) / u_size.y\\n    ));\\n    dispColor = dispColor * (1.0 - weight) + dispColorDown * weight;\\n    weight *= 0.8;\\n  }\\n\\n  return dispColor;\\n}\\n\\nvec4 linearBlur(sampler2D image, float angle, float magnitude, vec2 textCoord) {\\n  vec4 originalColor = texture2D(image, textCoord);\\n  vec4 dispColor = texture2D(image, textCoord);\\n\\n  const float max = 10.0;\\n  float weight = 0.65;\\n\\n  for (float i = 0.0; i < max; i += 0.25) {\\n    if(i > abs(magnitude)) {\\n      break;\\n    }\\n    vec4 dispColorUp = texture2D(image, textCoord + vec2(\\n      cos(angle) * -i * sign(magnitude) / u_size.x,\\n      sin(angle) * -i * sign(magnitude) / u_size.y\\n    ));\\n    vec4 dispColorDown = texture2D(image, textCoord + vec2(\\n      cos(angle) * i * sign(magnitude) / u_size.x,\\n      sin(angle) * i * sign(magnitude) / u_size.y\\n    ));\\n    dispColor = dispColor * (1.0 - weight) + dispColorDown * weight * 0.5 + dispColorUp * weight * 0.5;\\n    weight *= 0.70;\\n  }\\n\\n  return dispColor;\\n}\\n\\nvoid main() {\\n  vec4 originalColor = texture2D(u_image, v_texCoord);\\n  vec4 effectColor = texture2D(u_effect,  v_texCoord);\\n\\n  // This only applies when drawing the parallax background\\n  if (u_renderParallax == 1) {\\n    float texelSize = 1.0 / u_size.x;\\n    vec2 parallaxCoord = v_texCoord * vec2(1.0, -1.0) + vec2(0.0, 1.0)\\n      + vec2(u_scroll.x * texelSize * u_parallax.x, 0.0);\\n      // + vec2(u_time / 10000.0, 0.0);\\n      // + vec2(, 0.0);\\n      ;\\n\\n    gl_FragColor = texture2D(u_image,  parallaxCoord);\\n    return;\\n  }\\n\\n  // This only applies when drawing tiles.\\n  if (u_renderTiles == 1) {\\n    float xTiles = floor(u_size.x / u_tileSize.x);\\n    float yTiles = floor(u_size.y / u_tileSize.y);\\n\\n    float xT = (v_texCoord.x * u_size.x) / u_tileSize.x;\\n    float yT = (v_texCoord.y * u_size.y) / u_tileSize.y;\\n\\n    float inv_xTiles = 1.0 / xTiles;\\n    float inv_yTiles = 1.0 / yTiles;\\n\\n    float xTile = floor(xT) * inv_xTiles;\\n    float yTile = floor(yT) * inv_yTiles;\\n\\n    float xOff = (xT * inv_xTiles - xTile) * xTiles;\\n    float yOff = (yT * inv_yTiles - yTile) * yTiles * -1.0 + 1.0;\\n\\n    float xWrap = u_mapTextureSize.x / u_tileSize.x;\\n    float yWrap = u_mapTextureSize.y / u_tileSize.y;\\n\\n    // Mode 1 draws tiles' x/y values as red & green\\n    if (u_renderMode == 1) {\\n      gl_FragColor = vec4(xTile, yTile, 0, 1.0);\\n      return;\\n    }\\n\\n    // Mode 2 is the same as mode 1 but adds combines\\n    // internal tile x/y to the blue channel\\n    if (u_renderMode == 2) {\\n      gl_FragColor = vec4(xTile, yTile, (xOff + yOff) * 0.5, 1.0);\\n      return;\\n    }\\n\\n    vec4 tile = texture2D(u_tileMapping, v_texCoord * vec2(1.0, -1.0) + vec2(0.0, 1.0));\\n\\n    float lo = tile.r  * 256.0;\\n    float hi = tile.g  * 256.0 * 256.0;\\n    // float vh = tile.b  * 256.0 * 256.0 * 256.0;\\n    // float vv = (1.0 - tile.a) * 256.0 * 256.0 * 256.0 * 256.0;\\n\\n    // int tileNumber = int(lo + hi + vh + vv);\\n    int tileNumber = int(lo + hi);\\n\\n    if (tileNumber == 0) {\\n      gl_FragColor.a = 0.0;\\n      return;\\n    }\\n\\n    // Mode 3 uses the tile number for the red/green channels\\n    if (u_renderMode == 3) {\\n      gl_FragColor = tile;\\n      gl_FragColor.b = 0.5;\\n      gl_FragColor.a = 1.0;\\n      return;\\n    }\\n\\n    // Mode 4 normalizes the tile number to all channels\\n    if (u_renderMode == 4) {\\n      gl_FragColor = vec4(\\n        mod(float(tileNumber), 256.0) / 256.0\\n        , mod(float(tileNumber), 256.0) / 256.0\\n        , mod(float(tileNumber), 256.0) / 256.0\\n        , 1.0\\n      );\\n      return;\\n    }\\n\\n    // const int FLIPPED_HORIZONTALLY_FLAG  = 0x80000000;\\n    // const int FLIPPED_VERTICALLY_FLAG    = 0x40000000;\\n    // const int FLIPPED_DIAGONALLY_FLAG    = 0x20000000;\\n\\n    float tileSetX = floor(mod((-1.0 + float(tileNumber)), xWrap));\\n    float tileSetY = floor((-1.0 + float(tileNumber)) / xWrap);\\n\\n    // if (tileNumber <= FLIPPED_HORIZONTALLY_FLAG) {\\n    //   tileNumber += FLIPPED_HORIZONTALLY_FLAG;\\n    //   xOff = 1.0 - xOff;\\n    // }\\n\\n    // if (tileNumber >= FLIPPED_VERTICALLY_FLAG) {\\n    //   tileNumber -= FLIPPED_VERTICALLY_FLAG;\\n    //   yOff = 1.0 - yOff;\\n    // }\\n\\n    vec4 tileColor = texture2D(u_tiles, vec2(\\n      xOff / xWrap + tileSetX * (u_tileSize.x / u_mapTextureSize.x)\\n      , yOff / yWrap + tileSetY * (u_tileSize.y / u_mapTextureSize.y)\\n    ));\\n\\n    if(u_region == vec4(1.0, 1.0, 1.0, 1.0)) {\\n      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\\n      return;\\n    }\\n    else if(u_region == vec4(1.0, 1.0, 1.0, 0.0)) {\\n      gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\\n      return;\\n    }\\n\\n    gl_FragColor = tileColor;\\n\\n    return;\\n  }\\n\\n  // This if/else block only applies\\n  // when we're drawing the effectBuffer\\n  if (u_region.r > 0.0 || u_region.g > 0.0 || u_region.b > 0.0) { // We have an effect color\\n    if (masked < 1.0 || originalColor.a > 0.0) { // Use the provided color\\n      gl_FragColor = u_region;\\n    }\\n    return;\\n  }\\n  else if (u_region.a > 0.0) {\\n    if (sorted > 0.0) {\\n      gl_FragColor = vec4(0.0, 0.0, 0.0, originalColor.a > 0.0 ? 1.0 : 0.0);\\n    }\\n    else {\\n      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\\n    }\\n    return;\\n  };\\n\\n  // Mode 5 draws the effect buffer to the screen\\n  if (u_renderMode == 5) {\\n    gl_FragColor = effectColor;\\n    return;\\n  }\\n\\n  vec3 ripple = vec3(M_PI/8.0, u_time / 200.0, 1.0);\\n\\n  // This if/else block only applies\\n  // when we're drawing the drawBuffer\\n  if (effectColor == vec4(0, 1, 1, 1)) { // Water effect\\n    vec2 texCoord = v_texCoord;\\n    vec4 v_blurredColor = originalColor;\\n    if (displace > 0.0) {\\n      texCoord = rippleX(v_texCoord, ripple.x * 0.1, ripple.y, ripple.z * 2.0);\\n      v_blurredColor = texture2D(u_image, texCoord);\\n    }\\n    if (blur > 0.0) {\\n      v_blurredColor = linearBlur(u_image, 0.0, 1.0, texCoord);\\n    }\\n    gl_FragColor = v_blurredColor * 0.65 + effectColor * 0.35;\\n  }\\n  else if (effectColor == vec4(1, 0, 0, 1)) { // Fire effect\\n    vec2 v_displacement = rippleY(v_texCoord, ripple.x * 3.0, ripple.y * 1.5, ripple.z * 0.333);\\n    vec4 v_blurredColor = originalColor;\\n    if (displace > 0.0) {\\n      v_blurredColor = texture2D(u_image, v_displacement);\\n    }\\n    if (blur > 0.0) {\\n      v_blurredColor = motionBlur(u_image, -M_TAU, 1.0, v_displacement);\\n    }\\n    gl_FragColor = v_blurredColor * 0.75 + effectColor * 0.25;\\n  }\\n  else { // Null effect\\n    gl_FragColor = originalColor;\\n  }\\n}\\n\"","module.exports = \"// texture.vert\\nprecision mediump float;\\n\\nattribute vec2 a_position;\\nattribute vec2 a_texCoord;\\n\\nuniform vec2 u_resolution;\\n\\nvarying vec2 v_texCoord;\\nvarying vec2 v_position;\\n\\nvoid main()\\n{\\n  vec2 zeroToOne = a_position / u_resolution;\\n  vec2 zeroToTwo = zeroToOne * 2.0;\\n  vec2 clipSpace = zeroToTwo - 1.0;\\n\\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\\n  v_texCoord  = a_texCoord;\\n  v_position  = a_position;\\n}\\n\"","import { View } from 'curvature/base/View';\n\nexport class OnScreenJoyPad extends View\n{\n\tconstructor(args)\n\t{\n\t\tsuper(args);\n\t\tthis.template  = require('./onScreenJoyPad.tmp');\n\t\tthis.dragStart = false;\n\n\t\tthis.args.dragging  = false;\n\t\tthis.args.x = 0;\n\t\tthis.args.y = 0;\n\n\t\tthis.buttons = [];\n\n\t\twindow.addEventListener('mousemove', (event) => {\n\t\t\tthis.moveStick(event);\n\t\t});\n\n\t\twindow.addEventListener('mouseup', (event) => {\n\t\t\tthis.dropStick(event);\n\t\t});\n\n\t\twindow.addEventListener('touchmove', (event) => {\n\t\t\tthis.moveStick(event);\n\t\t});\n\n\t\twindow.addEventListener('touchend', (event) => {\n\t\t\tthis.dropStick(event);\n\t\t});\n\n\t\tthis.draggingTouches = new Set;\n\t}\n\n\tdragStick(event)\n\t{\n\t\tif(event.changedTouches)\n\t\t{\n\t\t\tconst touches = new Set(event.changedTouches);\n\t\t\ttouches.forEach(touch => this.draggingTouches.add(touch.identifier));\n\t\t}\n\n\t\tlet pos = event;\n\n\t\tevent.preventDefault();\n\n\t\tif(event.touches && event.touches[0])\n\t\t{\n\t\t\tpos = event.touches[0];\n\t\t}\n\n\t\tthis.args.dragging = true;\n\t\tthis.dragStart     = {\n\t\t\tx:   pos.clientX\n\t\t\t, y: pos.clientY\n\t\t};\n\t}\n\n\tmoveStick(event)\n\t{\n\t\tif(this.args.dragging)\n\t\t{\n\t\t\tlet pos = event;\n\n\t\t\tif(event.touches && event.touches[0])\n\t\t\t{\n\t\t\t\tpos = event.touches[0];\n\t\t\t}\n\n\t\t\tthis.args.xx = pos.clientX - this.dragStart.x;\n\t\t\tthis.args.yy = pos.clientY - this.dragStart.y;\n\n\t\t\tthis.limit = this.tags.joystick.offsetWidth * 0.5;\n\n\t\t\tif(this.args.xx < -this.limit)\n\t\t\t{\n\t\t\t\tthis.args.x = -this.limit;\n\t\t\t}\n\t\t\telse if(this.args.xx > this.limit)\n\t\t\t{\n\t\t\t\tthis.args.x = this.limit;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.args.x = this.args.xx;\n\t\t\t}\n\n\t\t\tif(this.args.yy < -this.limit)\n\t\t\t{\n\t\t\t\tthis.args.y = -this.limit;\n\t\t\t}\n\t\t\telse if(this.args.yy > this.limit)\n\t\t\t{\n\t\t\t\tthis.args.y = this.limit;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.args.y = this.args.yy;\n\t\t\t}\n\t\t}\n\t}\n\n\tdropStick(event)\n\t{\n\t\tif(event.changedTouches)\n\t\t{\n\t\t\tlet found = false;\n\t\t\tfor(const touch of event.changedTouches)\n\t\t\t{\n\t\t\t\tif(this.draggingTouches.has(touch.identifier))\n\t\t\t\t{\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!found)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.args.dragging = false;\n\t\tthis.args.x = 0;\n\t\tthis.args.y = 0;\n\t}\n\n\treleaseButton(event, button)\n\t{\n\t\tthis.buttons[button] = -1;\n\t}\n\n\tpressButton(event, button)\n\t{\n\t\tthis.buttons[button] = this.buttons[button] || 0;\n\t\tthis.buttons[button]++;\n\n\t}\n\n\tcontextmenu(event)\n\t{\n\t\tconsole.log(event);\n\t\tevent.preventDefault();\n\t}\n}\n","module.exports = \"<div class = \\\"controller\\\" cv-on = \\\"contextmenu::c;\\\">\\n\\t<div\\n\\t\\tclass = \\\"joystick\\\"\\n\\t\\tcv-ref = \\\"joystick\\\"\\n\\t\\tcv-on = \\\"\\n\\t\\ttouchstart:dragStick(event);\\n\\t\\tmousedown:dragStick(event);\\n\\t\\\">\\n\\t\\t<div class = \\\"pad\\\" style = \\\"position: relative; transform:translate([[x]]px,[[y]]px);\\\"></div>\\n\\t</div>\\n\\n\\t<div class = \\\"buttons\\\">\\n\\t\\t<div class = \\\"button\\\" cv-on = \\\"\\n\\t\\t\\tmousedown:pressButton(event, 0);\\n\\t\\t\\ttouchstart:pressButton(event, 0);\\n\\t\\t\\tmouseup:releaseButton(event, 0);\\n\\t\\t\\ttouchend:releaseButton(event, 0);\\n\\t\\t\\tmouseleave:releaseButton(event, 0);\\n\\t\\t\\t\\\">A</div>\\n\\n\\t\\t<div class = \\\"button\\\" cv-on = \\\"\\n\\t\\t\\tmousedown:pressButton(event, 1);\\n\\t\\t\\ttouchstart:pressButton(event, 1);\\n\\t\\t\\tmouseup:releaseButton(event, 1);\\n\\t\\t\\ttouchend:releaseButton(event, 1);\\n\\t\\t\\tmouseleave:releaseButton(event, 1);\\\">B</div>\\n\\n\\t\\t<!-- <div class = \\\"button\\\" cv-on = \\\"\\n\\t\\t\\tmousedown:pressButton(event, 2);\\n\\t\\t\\ttouchstart:pressButton(event, 2);\\n\\t\\t\\tmouseup:releaseButton(event, 0);\\n\\t\\t\\ttouchend:releaseButton(event, 0);\\n\\t\\t\\tmouseleave:releaseButton(event, 2);\\\">C</div> -->\\n\\t</div>\\n</div>\\n\"","\nexport class Pallet\n{\n\tobjectPallet = {};\n\n\tasync resolve(typeName)\n\t{\n\t\tif(typeName[0] === '@')\n\t\t{\n\t\t\tif(this.objectPallet[ typeName ])\n\t\t\t{\n\t\t\t\treturn this.objectPallet[ typeName ];\n\t\t\t}\n\t\t}\n\t\telse if(typeName === 'http://' || typeName === 'https://')\n\t\t{\n\t\t\treturn (await import(typeName)).default;\n\t\t}\n\t}\n\n\tregister(typeName, spawnClass)\n\t{\n\t\tif(this.objectPallet[typeName])\n\t\t{\n\t\t\tconsole.warn(`Overwriting spawnclass!`);\n\t\t}\n\n\t\tthis.objectPallet[typeName] = spawnClass;\n\t}\n}","export class Properties\n{\n\tconstructor(properties, owner)\n\t{\n\t\tthis.properties = {};\n\t\tthis.owner = owner;\n\t\tthis.add(...properties);\n\t}\n\n\tget(name, index = 0)\n\t{\n\t\tif(!this.properties[name])\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.properties[name][index];\n\t}\n\n\thas(name)\n\t{\n\t\treturn !!this.properties[name];\n\t}\n\n\tadd(...properties)\n\t{\n\t\tfor(const property of properties)\n\t\t{\n\t\t\tif(!this.properties[ property.name ])\n\t\t\t{\n\t\t\t\tthis.properties[ property.name ] = [];\n\t\t\t}\n\n\t\t\tswitch(property.type)\n\t\t\t{\n\t\t\t\tcase 'color':\n\t\t\t\t\tthis.properties[ property.name ].push(new Uint8ClampedArray([\n\t\t\t\t\t\tparseInt(property.value.substr(3 ,2), 16),\n\t\t\t\t\t\tparseInt(property.value.substr(5 ,2), 16),\n\t\t\t\t\t\tparseInt(property.value.substr(7 ,2), 16),\n\t\t\t\t\t\tparseInt(property.value.substr(1 ,2), 16),\n\t\t\t\t\t]));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'file':\n\t\t\t\t\t\tthis.properties[ property.name ].push([\n\t\t\t\t\t\t\tnew URL(property.value, this.owner.src)\n\t\t\t\t\t\t]);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.properties[ property.name ].push(property.value);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAll(name)\n\t{\n\t\treturn [...this.properties[name]];\n\t}\n}\n","import { Bindable } from 'curvature/base/Bindable';\nimport { Tileset } from '../sprite/Tileset';\nimport { QuickTree } from '../math/QuickTree';\nimport { Spawner } from '../model/Spawner';\nimport { SMTree } from '../math/SMTree';\nimport { Region } from '../sprite/Region';\nimport { Rectangle } from '../math/Rectangle';\nimport { Properties } from './Properties';\n\nconst cache = new Map;\n\nclass Animation\n{\n\tconstructor({frames, x, y})\n\t{\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\tthis.acc = 0;\n\t\tthis.current = 0;\n\t\tthis.frames = frames;\n\t}\n\n\tanimate(delta)\n\t{\n\t\tthis.acc += delta;\n\n\t\twhile(this.acc > this.frames[this.current].duration)\n\t\t{\n\t\t\tthis.acc -= this.frames[this.current].duration;\n\t\t\tthis.current++;\n\n\t\t\tif(this.current > -1 + this.frames.length)\n\t\t\t{\n\t\t\t\tthis.current = 0;\n\t\t\t}\n\t\t}\n\n\t\treturn 1 + this.frames[this.current].tileid;\n\t}\n}\n\nexport class TileMap\n{\n\tconstructor(mapData)\n\t{\n\t\tconst {\n\t\t\tfileName\n\t\t\t, session\n\t\t\t, x\n\t\t\t, y\n\t\t\t, width\n\t\t\t, height\n\t\t} = mapData;\n\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.src = fileName;\n\t\tthis.backgroundColor = null;\n\t\tthis.tileCount = 0;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\tthis.loaded = false;\n\n\t\tthis.worldWidth = width;\n\t\tthis.worldHeight = height;\n\n\t\tthis.rect = new Rectangle(\n\t\t\tthis.x\n\t\t\t, this.y\n\t\t\t, this.x + this.worldWidth\n\t\t\t, this.y + this.worldHeight\n\t\t);\n\n\t\tthis.tileWidth  = 0;\n\t\tthis.tileHeight = 0;\n\n\t\tthis.tileSetWidth  = 0;\n\t\tthis.tileSetHeight = 0;\n\n\t\tthis.props = new Properties(mapData.properties ?? [], this);\n\n\t\tthis.pixels = null;\n\t\tthis.values = null;\n\t\tthis.image = document.createElement('img');\n\t\tthis.session = session;\n\t\tthis.entityDefs = {};\n\n\t\tthis.emptyTiles = new Set;\n\t\tthis.tilesIndexes = new Map;\n\t\tthis.canvases = new Map;\n\t\tthis.contexts = new Map;\n\t\tthis.tiles = null;\n\n\t\tthis.xOrigin = x;\n\t\tthis.yOrigin = y;\n\n\t\tthis.tileLayers   = [];\n\t\tthis.imageLayers  = [];\n\t\tthis.objectLayers = [];\n\n\t\tthis.visible = false;\n\n\t\tthis.age = 0;\n\n\t\tthis.quadTree = new QuickTree(-64, -64, this.worldWidth + 64, this.worldHeight + 64);\n\t\tthis.regionTree = new SMTree;\n\t\tthis.animationTrees = new Map;\n\t\tthis.entityMap = new Map;\n\n\t\tthis.animatedTiles = new Map;\n\t\tthis.animations = new Map;\n\n\t\t// this.ready = this.getReady(fileName);\n\t}\n\n\tinitialize()\n\t{\n\t\tif(this.ready)\n\t\t{\n\t\t\treturn this.ready;\n\t\t}\n\n\t\treturn this.ready = this.getReady(this.src);\n\t}\n\n\tselectEntities(wx1, wy1, wx2, wy2)\n\t{\n\t\treturn this.quadTree.select(\n\t\t\twx1 - this.x\n\t\t\t, wy1 - this.y\n\t\t\t, wx2 - this.x\n\t\t\t, wy2 - this.y\n\t\t\t, -this.x\n\t\t\t, -this.y\n\t\t);\n\t}\n\n\taddEntity(entity)\n\t{\n\t\treturn this.quadTree.add(entity, -this.x, -this.y);\n\t}\n\n\tmoveEntity(entity)\n\t{\n\t\treturn this.quadTree.move(entity, -this.x, -this.y);\n\t}\n\n\tasync getReady(src)\n\t{\n\t\tif(!cache.has(src))\n\t\t{\n\t\t\tcache.set(src, fetch(src));\n\t\t}\n\n\t\t// await new Promise(a => setTimeout(a, 500));\n\n\t\tconst mapData = await (await cache.get(src)).clone().json();\n\n\t\tthis.props.add(...mapData.properties ?? []);\n\n\t\tmapData.layers.forEach(layer => {\n\t\t\tlayer.props = new Properties(layer.properties ?? [], this);\n\t\t})\n\n\t\tthis.collisionLayers = mapData.layers.filter(layer => layer.type === 'tilelayer' && layer.class === 'collision');\n\t\tthis.tileLayers   = mapData.layers.filter(layer => layer.type === 'tilelayer' && layer.class !== 'collision');\n\t\tthis.imageLayers  = mapData.layers.filter(layer => layer.type === 'imagelayer');\n\t\tthis.objectLayers = mapData.layers.filter(layer => layer.type === 'objectgroup');\n\t\tthis.backgroundColor = mapData.backgroundcolor;\n\n\t\tif(this.props.has('backgroundColor'))\n\t\t{\n\t\t\tthis.backgroundColor = this.props.get('backgroundColor');\n\t\t}\n\n\t\tconst tilesets = mapData.tilesets.map(tilesetData => {\n\t\t\tif(tilesetData.source)\n\t\t\t{\n\t\t\t\ttilesetData.source = new URL(tilesetData.source, src).href;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttilesetData.map = this;\n\t\t\t}\n\t\t\treturn new Tileset(tilesetData);\n\t\t});\n\n\t\tthis.width  = mapData.width;\n\t\tthis.height = mapData.height;\n\n\t\tthis.tileWidth  = mapData.tilewidth;\n\t\tthis.tileHeight = mapData.tileheight;\n\n\t\tawait Promise.all(tilesets.map(t => t.ready));\n\n\t\tthis.assemble(tilesets);\n\t\tawait this.spawn();\n\n\t\tthis.loaded = true;\n\n\t\tif(mapData.class)\n\t\t{\n\t\t\tthis.controller = new (await this.session.mapPallet.resolve(mapData.class));\n\t\t\tthis.controller.create(this);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tassemble(tilesets)\n\t{\n\t\ttilesets.sort((a, b) => a.firstGid - b.firstGid);\n\n\t\tconst tileTotal = this.tileCount = tilesets.reduce(\n\t\t\t(a, b) => a + b.tileCount, 0\n\t\t);\n\n\t\tconst size = Math.ceil(Math.sqrt(tileTotal));\n\n\t\tconst destination = document.createElement('canvas');\n\t\tthis.tileSetWidth  = destination.width  = size * this.tileWidth;\n\t\tthis.tileSetHeight = destination.height = Math.ceil(tileTotal / size) * this.tileHeight;\n\n\t\tconst ctxDestination = destination.getContext('2d', {willReadFrequently: true});\n\n\t\tfor(const tileset of tilesets)\n\t\t{\n\t\t\tconst image = tileset.image;\n\t\t\tconst source = document.createElement('canvas');\n\n\t\t\tsource.width = image.width;\n\t\t\tsource.height = image.height;\n\n\t\t\tconst ctxSource = source.getContext('2d', {willReadFrequently: true});\n\n\t\t\tctxSource.drawImage(image, 0, 0);\n\n\t\t\tfor(let i = 0; i < tileset.tileCount; i++)\n\t\t\t{\n\t\t\t\tconst gid = i + -1 + tileset.firstGid;\n\n\t\t\t\tconst xSource = (i * this.tileWidth) % tileset.imageWidth;\n\t\t\t\tconst ySource = Math.floor((i * this.tileWidth) / tileset.imageWidth) * this.tileHeight;\n\n\t\t\t\tconst xDestination = (gid * this.tileWidth) % destination.width;\n\t\t\t\tconst yDestination = Math.floor((gid * this.tileWidth) / destination.width) * this.tileHeight;\n\t\t\t\tconst tile = ctxSource.getImageData(xSource, ySource, this.tileWidth, this.tileHeight);\n\n\t\t\t\tctxDestination.putImageData(tile, xDestination, yDestination);\n\n\t\t\t\tconst pixels = new Uint32Array(tile.data.buffer);\n\n\t\t\t\tlet empty = true;\n\n\t\t\t\tfor(const pixel of pixels)\n\t\t\t\t{\n\t\t\t\t\tif(pixel > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tempty = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(empty)\n\t\t\t\t{\n\t\t\t\t\tthis.emptyTiles.add(gid);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(const tileData of tileset.tiles)\n\t\t\t{\n\t\t\t\tif(tileData.animation)\n\t\t\t\t{\n\t\t\t\t\tthis.animatedTiles.set(tileData.id, tileData.animation);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.pixels = ctxDestination.getImageData(0, 0, destination.width, destination.height).data;\n\t\tthis.values = new Uint32Array(this.pixels.buffer);\n\t\tthis.tiles = ctxDestination;\n\n\t\tfor(const layer of [...this.tileLayers, ...this.collisionLayers])\n\t\t{\n\t\t\tconst canvas = document.createElement('canvas');\n\t\t\tconst context = canvas.getContext('2d', {willReadFrequently: true});\n\n\t\t\tthis.canvases.set(layer, canvas);\n\t\t\tthis.contexts.set(layer, context);\n\n\t\t\tconst tileValues = new Uint32Array(layer.data.map(t => 0 + t));\n\t\t\tconst tilePixels = new Uint8ClampedArray(tileValues.buffer);\n\n\t\t\tfor(const i in tileValues)\n\t\t\t{\n\t\t\t\tconst tile = tileValues[i];\n\n\t\t\t\tif(this.animatedTiles.has(tile))\n\t\t\t\t{\n\t\t\t\t\tif(!this.animationTrees.has(layer))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.animationTrees.set(layer, new QuickTree(\n\t\t\t\t\t\t\t0, 0\n\t\t\t\t\t\t\t, this.width\n\t\t\t\t\t\t\t, this.height\n\t\t\t\t\t\t\t, 0.1\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tree = this.animationTrees.get(layer);\n\t\t\t\t\tconst frames = this.animatedTiles.get(tile);\n\n\t\t\t\t\tconst x = i % this.width;\n\t\t\t\t\tconst y = Math.floor(i / this.width);\n\n\t\t\t\t\tconst animation = new Animation({frames, x, y});\n\n\t\t\t\t\ttree.add(animation);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(let i = 3; i < tilePixels.length; i +=4)\n\t\t\t{\n\t\t\t\ttilePixels[i] = 0xFF - tilePixels[i];\n\t\t\t}\n\n\t\t\tthis.tilesIndexes.set(layer, tileValues);\n\n\t\t\tcanvas.width = this.width;\n\t\t\tcanvas.height = this.height;\n\t\t\tcontext.putImageData(new ImageData(tilePixels, this.width, this.height), 0, 0);\n\t\t}\n\t}\n\n\tasync spawn()\n\t{\n\t\tfor(const layer of this.objectLayers)\n\t\t{\n\t\t\tconst entityDefs = layer.objects;\n\n\t\t\tfor(const entityDef of entityDefs)\n\t\t\t{\n\t\t\t\tthis.entityDefs[ entityDef.id ] = {...entityDef};\n\n\t\t\t\tentityDef.x += this.xOrigin;\n\t\t\t\tentityDef.y += this.yOrigin;\n\n\t\t\t\tif(!entityDef.type || entityDef.name === '#player-start')\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(entityDef.name === '#region')\n\t\t\t\t{\n\t\t\t\t\tconst region = new Region({\n\t\t\t\t\t\tspriteBoard: this.session.spriteBoard\n\t\t\t\t\t\t, session: this.session\n\t\t\t\t\t\t, ...entityDef\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.session.world.motionGraph.add(region, this);\n\t\t\t\t\tthis.session.spriteBoard.regions.add(region);\n\t\t\t\t\tthis.regionTree.add(region.rect);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst spawnClass = await this.session.entityPallet.resolve(entityDef.type);\n\n\t\t\t\tif(!spawnClass)\n\t\t\t\t{\n\t\t\t\t\tconsole.warn(`SpawnClass not found: ${entityDef.type}`);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst spawner = new Spawner({\n\t\t\t\t\tspawnType: entityDef.type\n\t\t\t\t\t, spawnClass\n\t\t\t\t\t, entityDef\n\t\t\t\t\t, ...entityDef\n\t\t\t\t\t, spriteBoard: this.session.spriteBoard\n\t\t\t\t\t, session: this.session\n\t\t\t\t\t, world: this.session.world\n\t\t\t\t\t, map: this\n\t\t\t\t});\n\n\t\t\t\tthis.session.world.motionGraph.add(spawner, this);\n\t\t\t\tspawner.lastMap = this;\n\t\t\t\tthis.session.addEntity(spawner);\n\t\t\t\tthis.addEntity(spawner)\n\t\t\t}\n\t\t}\n\t}\n\n\tsimulate(delta)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst startX = this.x;\n\t\tconst startY = this.y;\n\t\tconst world = this.session.world;\n\n\t\tthis.age += delta;\n\t\tthis.controller && this.controller.simulate(this, delta);\n\n\t\tworld.motionGraph.moveChildren(\n\t\t\tthis\n\t\t\t, this.x - startX\n\t\t\t, this.y - startY\n\t\t);\n\n\t\tthis.rect.x1 = this.x;\n\t\tthis.rect.y1 = this.y;\n\t\tthis.rect.x2 = this.x + this.width * this.tileWidth;\n\t\tthis.rect.y2 = this.y + this.height * this.tileHeight;\n\n\t\tif(startX !== this.x || startY !== this.y)\n\t\t{\n\t\t\tworld.mapTree.move(world.mapRects.get(this));\n\t\t}\n\t}\n\n\tgetCollisionTile(x, y, z)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif(!this.collisionLayers || !this.collisionLayers[z])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.getTileFromLayer(this.collisionLayers[z], x, y);\n\t}\n\n\tgetColor(x, y, z = 0)\n\t{\n\t\treturn this.getPixel(this.tileLayers[z], x, y, z);\n\t}\n\n\tgetSolid(x, y, z = 0)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif(!this.collisionLayers || !this.collisionLayers[z])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst pixel = this.getPixel(this.collisionLayers[z], x, y, z);\n\n\t\treturn pixel;\n\t}\n\n\tgetPixel(layer, x, y)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst gid = this.getTileFromLayer(layer, x, y);\n\n\t\tif(gid === false || gid === -1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst offsetX = Math.trunc((-this.x + x) % this.tileWidth);\n\t\tconst offsetY = Math.trunc((-this.y + y) % this.tileHeight);\n\n\t\tconst tileSetX = (gid * this.tileWidth) % this.tileSetWidth;\n\t\tconst tileSetY = Math.floor((gid * this.tileWidth) / this.tileSetWidth) * this.tileHeight;\n\n\t\tconst pixel = this.values[tileSetX + offsetX + (tileSetY + offsetY) * (this.tileSetWidth)];\n\n\t\treturn pixel;\n\t}\n\n\tgetTileFromLayer(layer, x, y)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst localX = -this.x + x;\n\t\tconst localY = -this.y + y;\n\n\t\tif(localX < 0 || localX >= this.width * this.tileWidth\n\t\t\t|| localY < 0 || localY >= this.height * this.tileWidth\n\t\t){\n\t\t\treturn false;\n\t\t}\n\n\t\tconst tileX = Math.floor(localX / this.tileWidth);\n\t\tconst tileY = Math.floor(localY / this.tileHeight);\n\n\t\treturn -1 + layer.data[tileX + tileY * this.width];\n\t}\n\n\tgetSlice(p, x, y, w, h, delta = 0)\n\t{\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn this.tileLayers\n\t\t\t.filter(layer => p === (layer.props.get('priority') ?? 'background'))\n\t\t\t.map(layer => {\n\t\t\t\tconst context = this.contexts.get(layer);\n\t\t\t\tconst pixels = context.getImageData(x, y, w, h).data;\n\t\t\t\tconst tree = this.animationTrees.get(layer);\n\t\t\t\tif(tree)\n\t\t\t\t{\n\t\t\t\t\tconst values = new Uint32Array(pixels.buffer);\n\t\t\t\t\tconst animations = tree.select(x, y, x + w, y + h);\n\t\t\t\t\tfor(const animation of animations)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst xLocal = animation.x - x;\n\t\t\t\t\t\tconst yLocal = animation.y - y;\n\n\t\t\t\t\t\tif(xLocal < w)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst iLocal = xLocal + yLocal * w;\n\t\t\t\t\t\t\tvalues[iLocal] = animation.animate(delta);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn pixels;\n\t\t\t}\n\t\t);\n\t}\n\n\tgetTileImage(gid)\n\t{\n\t\tgid = -1 + gid;\n\t\tconst tileSetX = (gid * this.tileWidth) % this.tileSetWidth;\n\t\tconst tileSetY = Math.floor((gid * this.tileWidth) / this.tileSetWidth) * this.tileHeight;\n\n\t\tconst imageData = this.tiles.getImageData(tileSetX, tileSetY, this.tileWidth, this.tileHeight);\n\n\t\tconst c = document.createElement('canvas');\n\t\tconst cc = c.getContext('2d');\n\n\t\tc.width = this.tileWidth;\n\t\tc.height = this.tileHeight;\n\n\t\tcc.putImageData(imageData, 0, 0);\n\n\t\treturn c.toDataURL();\n\t}\n\n\tgetRegionsForPoint(x, y)\n\t{\n\t\tconst results = new Set;\n\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn results;\n\t\t}\n\n\t\tconst rects = this.regionTree.query(x, y, x, y);\n\t\trects.forEach(r => {\n\t\t\tif(!r.contains(x, y))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresults.add(Region.fromRect(r));\n\t\t});\n\n\t\treturn results;\n\t}\n\n\tgetRegionsForRect(x1, y1, x2, y2)\n\t{\n\t\tconst results = new Set;\n\n\t\tif(!this.loaded)\n\t\t{\n\t\t\treturn results;\n\t\t}\n\n\t\tconst searchRect = new Rectangle(x1, y1, x2, y2)\n\t\tconst rects = this.regionTree.query(x1, y1, x2, y2);\n\t\trects.forEach(r => {\n\t\t\tif(!searchRect.isOverlapping(r))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresults.add(Region.fromRect(r));\n\t\t});\n\n\t\treturn results;\n\t}\n}\n","import { Bindable } from 'curvature/base/Bindable';\nimport { MotionGraph } from '../math/MotionGraph';\nimport { TileMap } from './TileMap';\nimport { SMTree } from '../math/SMTree';\nimport { Ray } from \"../math/Ray\";\n\nconst cache = new Map;\n\nexport class World\n{\n\tconstructor({src, session})\n\t{\n\t\tthis[Bindable.Prevent] = true;\n\t\tthis.src = new URL(src, location);\n\t\tthis.ready = this.getReady(this.src);\n\t\tthis.maps = [];\n\t\tthis.motionGraph = new MotionGraph;\n\t\tthis.rectMap = new Map;\n\t\tthis.mapRects = new Map;\n\t\tthis.mapTree = new SMTree;\n\t\tthis.session = session;\n\t\tthis.async = false;\n\t\tthis.age = 0;\n\t}\n\n\tsimulate(delta)\n\t{\n\t\tthis.age += delta;\n\t}\n\n\tasync getReady(src)\n\t{\n\t\tif(!cache.has(src))\n\t\t{\n\t\t\tcache.set(src, fetch(src));\n\t\t}\n\n\t\tconst worldData = await (await cache.get(src)).clone().json();\n\n\t\treturn await Promise.all(worldData.maps.map((m, i) => {\n\n\t\t\tm.fileName = new URL(m.fileName, src).href;\n\n\t\t\tconst map = new TileMap({...m, session: this.session});\n\n\t\t\tthis.maps[i] = map;\n\t\t\tthis.mapRects.set(map, map.rect);\n\t\t\tthis.rectMap.set(map.rect, map);\n\t\t\tthis.mapTree.add(map.rect);\n\n\t\t\tif(!worldData.async || map.props.has('player-start'))\n\t\t\t{\n\t\t\t\treturn map.initialize();\n\t\t\t}\n\n\t\t\treturn Promise.resolve();\n\t\t}));\n\t}\n\n\tgetMapsForPoint(x, y)\n\t{\n\t\tconst rects = this.mapTree.query(x, y, x, y);\n\t\tconst maps = new Set;\n\n\t\tfor(const rect of rects)\n\t\t{\n\t\t\tconst map = this.rectMap.get(rect);\n\t\t\tmaps.add(map);\n\t\t}\n\n\t\treturn maps;\n\t}\n\n\tgetMapsForRect(x, y, w, h)\n\t{\n\t\tconst result = new Set;\n\t\tconst rects = this.mapTree.query(\n\t\t\t  x + -w * 0.5\n\t\t\t, y + -h * 0.5\n\t\t\t, x + w * 0.5\n\t\t\t, y + h * 0.5\n\t\t);\n\n\t\tfor(const rect of rects)\n\t\t{\n\t\t\tresult.add( this.rectMap.get(rect) );\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetSolid(x, y, z)\n\t{\n\t\tconst maps = this.getMapsForPoint(x, y);\n\n\t\tfor(const map of maps)\n\t\t{\n\t\t\tconst solid = map.getSolid(x, y, z);\n\n\t\t\tif(solid)\n\t\t\t{\n\t\t\t\treturn solid;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetCollisionTile(x, y, z)\n\t{\n\t\tconst maps = this.getMapsForPoint(x, y);\n\n\t\tfor(const map of maps)\n\t\t{\n\t\t\tconst tile = map.getCollisionTile(x, y, z);\n\n\t\t\tif(tile > 0)\n\t\t\t{\n\t\t\t\treturn tile;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetEntitiesForPoint(x, y)\n\t{\n\t\tconst tilemaps = this.getMapsForPoint(x, y);\n\n\t\tlet result = new Set;\n\t\tfor(const tilemap of tilemaps)\n\t\t{\n\t\t\tif(!tilemap.visible)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst w = 500;\n\t\t\tconst h = 500;\n\n\t\t\tconst entities = tilemap.selectEntities(\n\t\t\t\tx + -w * 0.5\n\t\t\t\t, y + -h * 0.5\n\t\t\t\t, x + w * 0.5\n\t\t\t\t, y + h * 0.5\n\t\t\t);\n\n\t\t\tfor(const entity of entities)\n\t\t\t{\n\t\t\t\tif(entity.rect.contains(x, y))\n\t\t\t\t{\n\t\t\t\t\tresult.add(entity);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetEntitiesForRect(x, y, w, h)\n\t{\n\t\tconst tilemaps = this.getMapsForRect(x, y, w, h);\n\n\t\tlet result = new Set;\n\t\tfor(const tilemap of tilemaps)\n\t\t{\n\t\t\tif(!tilemap.visible)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresult = result.union(\n\t\t\t\ttilemap.selectEntities(\n\t\t\t\t\t  x + -w * 0.5\n\t\t\t\t\t, y + -h * 0.5\n\t\t\t\t\t, x + w * 0.5\n\t\t\t\t\t, y + h * 0.5\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetRegionsForPoint(x, y)\n\t{\n\t\tconst tilemaps = this.getMapsForPoint(x, y);\n\n\t\tlet result = new Set;\n\n\t\tfor(const tilemap of tilemaps)\n\t\t{\n\t\t\tif(!tilemap.visible)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresult = result.union(\n\t\t\t\ttilemap.getRegionsForPoint(x, y)\n\t\t\t);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetRegionsForRect(x, y, w, h)\n\t{\n\t\tconst tilemaps = this.getMapsForRect(x, y, w, h);\n\n\t\tlet result = new Set;\n\n\t\tfor(const tilemap of tilemaps)\n\t\t{\n\t\t\tif(!tilemap.visible)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresult = result.union(\n\t\t\t\ttilemap.getRegionsForRect(\n\t\t\t\t\tx + -w * 0.5\n\t\t\t\t\t, y + -h * 0.5\n\t\t\t\t\t, x + w * 0.5\n\t\t\t\t\t, y + h * 0.5\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tcastRay(startX, startY, angle, length = 320, rayFlags = Ray.DEFAULT_FLAGS, layerId = 0)\n\t{\n\t\treturn Ray.cast(\n\t\t\tthis\n\t\t\t, startX\n\t\t\t, startY\n\t\t\t, angle\n\t\t\t, length\n\t\t\t, rayFlags\n\t\t\t, layerId\n\t\t);\n\t}\n\n\tcastTerrainRay(startX, startY, angle, length = 320, rayFlags = Ray.DEFAULT_FLAGS, layerId = 0)\n\t{\n\t\treturn Ray.castTerrain(\n\t\t\tthis\n\t\t\t, startX\n\t\t\t, startY\n\t\t\t, angle\n\t\t\t, length\n\t\t\t, rayFlags\n\t\t\t, layerId\n\t\t);\n\t}\n\n\tcastEntityRay(startX, startY, angle, length = 320, rayFlags = Ray.DEFAULT_FLAGS)\n\t{\n\t\treturn Ray.castEntity(\n\t\t\tthis\n\t\t\t, startX\n\t\t\t, startY\n\t\t\t, angle\n\t\t\t, length\n\t\t\t, endY\n\t\t\t, rayFlags\n\t\t);\n\t}\n}\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}